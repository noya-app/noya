{"version":3,"sources":["../../noya-designsystem/src/index.tsx","../../noya-state/src/index.ts","../../noya-state/src/selectors/styleSelectors.ts","../../noya-state/src/selectors/elementSelectors.ts","../../noya-utils/src/index.ts","../../noya-geometry/src/index.ts","../../noya-app-state-context/src/ApplicationStateContext.tsx","../../noya-app-state-context/src/useWorkspace.tsx","../../noya-sketch-model/src/PointString.ts","../../noya-sketch-model/src/index.ts","../../noya-state/src/layers.ts","../../noya-pdf/src/index.ts","../../noya-renderer/src/ImageCache.tsx","../../noya-renderer/src/colorMatrix.ts","../../noya-renderer/src/components/effects/ColorControlsGroup.tsx","../../noya-renderer/src/components/effects/DropShadowGroup.tsx","../../noya-renderer/src/components/effects/SketchBorder.tsx","../../noya-renderer/src/components/layers/SketchBitmap.tsx","../../noya-renderer/src/components/layers/SketchShape.tsx","../../noya-renderer/src/components/layers/SketchSymbolInstance.tsx","../../noya-renderer/src/hooks/useTintColorFilter.tsx","../../noya-renderer/src/components/layers/SketchText.tsx","../../noya-renderer/src/components/layers/SketchShapeGroup.tsx","../../noya-renderer/src/components/layers/SketchLayer.tsx","../../noya-renderer/src/components/layers/SketchGroup.tsx","../../noya-renderer/src/components/layers/SketchArtboard.tsx","../../noya-renderer/src/components/LayerPreview.tsx","../../noya-renderer/src/hooks/useCheckeredFill.ts","../../noya-renderer/src/ComponentsContext.tsx","../../noya-renderer/src/components/AlignmentGuides.tsx","../../noya-renderer/src/components/DragHandles.tsx","../../noya-renderer/src/components/EditablePath.tsx","../../noya-renderer/src/components/ExtensionGuide.tsx","../../noya-renderer/src/components/guides.ts","../../noya-renderer/src/hooks/useLayerFrameRect.ts","../../noya-renderer/src/hooks/useLayerPath.ts","../../noya-renderer/src/components/HoverOutline.tsx","../../noya-renderer/src/components/Marquee.tsx","../../noya-renderer/src/components/MeasurementGuide.tsx","../../noya-renderer/src/components/PseudoPathLine.tsx","../../noya-renderer/src/components/PseudoPoint.tsx","../../noya-renderer/src/components/Rulers.tsx","../../noya-renderer/src/components/SketchFileRenderer.tsx","../../noya-renderer/src/hooks/useCanvasKit.tsx","../../noya-renderer/src/FontManagerContext.tsx","../../noya-renderer/src/index.ts","../../noya-react-canvaskit/src/index.ts","../../noya-state/src/selectors/pageSelectors.ts","../../noya-designsystem/src/components/internal/Menu.tsx","../../noya-colorpicker/src/index.tsx","../../noya-colorpicker/src/utils/round.ts","../../noya-state/src/selectors/themeSelectors.ts","../../noya-state/src/selectors/transformSelectors.ts","../../noya-state/src/utils/radians.ts","../../noya-react-canvaskit/src/hooks/usePaint.ts","../../noya-designsystem/src/components/Spacer.tsx","../../noya-state/src/reducers/interactionReducer.ts","../../noya-state/src/snapping.ts","../../noya-colorpicker/src/components/Pointer.tsx","../../noya-colorpicker/src/hooks/useIsomorphicLayoutEffect.ts","../../noya-colorpicker/src/components/Interactive.tsx","../../noya-designsystem/src/utils/sketchColor.ts","../../noya-colorpicker/src/utils/convert.ts","../../noya-colorpicker/src/utils/clamp.ts","../../noya-colorpicker/src/hooks/useEventCallback.ts","../../noya-state/src/selectors/layerSelectors.ts","../../noya-state/src/selectors/indexPathSelectors.ts","../../noya-react-canvaskit/src/hooks/useDeletable.ts","../../noya-react-canvaskit/src/hooks/useRect.ts","../../noya-colorpicker/src/contexts/ColorPickerContext.ts","../../noya-state/src/selectors/workspaceSelectors.ts","../../noya-state/src/primitives/path.ts","../../noya-state/src/reducers/historyReducer.ts","../../noya-designsystem/src/components/ListView.tsx","../../noya-state/src/reducers/gradientReducer.ts","../../noya-state/src/reducers/styleReducer.ts","../../noya-state/src/reducers/colorControlsReducer.ts","../../noya-designsystem/src/mediaQuery.ts","../../noya-designsystem/src/theme/light.ts","../../noya-react-canvaskit/src/hooks/useStable4ElementArray.ts","../../noya-utils/src/internal/isEqual.ts","../../noya-designsystem/src/components/Sortable.tsx","../../noya-import-svg/src/PathBuilder.ts","../../noya-import-svg/src/index.ts","../../noya-state/src/utils/selection.ts","../../noya-state/src/reducers/pageReducer.ts","../../noya-state/src/reducers/layerReducer.ts","../../noya-state/src/reducers/pointReducer.ts","../../noya-state/src/reducers/stringAttributeReducer.ts","../../noya-state/src/reducers/applicationReducer.ts","../../noya-state/src/reducers/canvasReducer.ts","../../noya-state/src/reducers/layerPropertyReducer.ts","../../noya-state/src/reducers/alignmentReducer.ts","../../noya-state/src/reducers/textStyleReducer.ts","../../noya-state/src/reducers/symbolsReducer.ts","../../noya-state/src/reducers/exportReducer.ts","../../noya-state/src/reducers/themeReducer.ts","../../noya-state/src/selectors/pointSelectors.ts","../../noya-state/src/primitives.ts","../../noya-state/src/selectors/geometrySelectors.ts","../../noya-utils/src/windowsOf.ts","../../noya-state/src/checkeredBackground.ts","../../noya-state/src/sketchFile.ts","../../noya-react-canvaskit/src/hooks/useColor.ts","../../noya-react-canvaskit/src/utils/makePath.ts","../../noya-designsystem/src/components/Button.tsx","../../noya-designsystem/src/utils/getGradientBackground.tsx","../../noya-colorpicker/src/utils/compare.ts","../../noya-designsystem/src/components/ScrollArea.tsx","../../noya-designsystem/src/hooks/useHover.ts","../../noya-designsystem/src/components/ContextMenu.tsx","../../noya-designsystem/src/utils/withSeparatorElements.ts","../../noya-designsystem/src/contexts/GlobalInputBlurContext.tsx","../../noya-designsystem/src/components/FillPreviewBackground.tsx","../../noya-designsystem/src/hooks/useObjectURL.ts","../../noya-react-canvaskit/src/components/Path.tsx","../../noya-react-canvaskit/src/reconciler.tsx","../../canvaskit/src/emscriptenRequireInterop.ts","../../canvaskit/src/index.ts","../../noya-state/src/overrides.ts","../../noya-state/src/groupLayouts.ts","../../noya-state/src/exportOptions.ts","../../noya-geometry/src/utils.ts","../../noya-geometry/src/point.ts","../../noya-geometry/src/rect.ts","../../noya-utils/src/isShallowEqual.ts","../../noya-utils/src/isDeepEqual.ts","../../noya-utils/src/isNumberEqual.ts","../../noya-utils/src/zip.ts","../../noya-utils/src/clamp.ts","../../noya-utils/src/sum.ts","../../noya-utils/src/round.ts","../../noya-utils/src/sortBy.ts","../../noya-utils/src/chunkBy.ts","../../noya-utils/src/groupBy.ts","../../noya-utils/src/getIncrementedName.ts","../../noya-utils/src/interpolate.ts","../../noya-utils/src/rotate.ts","../../noya-utils/src/invert.ts","../../noya-utils/src/base64.ts","../../noya-utils/src/utf16.ts","../../noya-utils/src/fileType.ts","../../noya-utils/src/memoize.ts","../../noya-utils/src/delimitedPath.ts","../../noya-utils/src/SuspendedValue.ts","../../noya-geometry/src/resize.ts","../../noya-geometry/src/AffineTransform.ts","../../noya-state/src/reducers/workspaceReducer.ts","../../noya-state/src/selection.ts","../../noya-react-canvaskit/src/hooks/useBlurMaskFilter.ts","../../noya-react-canvaskit/src/hooks/useFill.ts","../../noya-react-canvaskit/src/hooks/useStroke.ts","../../noya-designsystem/src/theme/dark.ts","../../noya-designsystem/src/components/Label.tsx","../../noya-designsystem/src/components/Select.tsx","../../noya-designsystem/src/components/FillInputField.tsx","../../noya-colorpicker/src/components/Alpha.tsx","../../noya-colorpicker/src/components/Hue.tsx","../../noya-colorpicker/src/components/Saturation.tsx","../../noya-designsystem/src/components/LabeledElementView.tsx","../../noya-designsystem/src/components/Slider.tsx","../../noya-designsystem/src/components/TreeView.tsx","../../noya-designsystem/src/components/Divider.tsx","../../noya-designsystem/src/components/ColorPicker.tsx","../../noya-designsystem/src/components/GradientPicker.tsx","../../noya-designsystem/src/components/GridView.tsx","../../noya-designsystem/src/components/RadioGroup.tsx","../../noya-designsystem/src/components/Tooltip.tsx","../../noya-designsystem/src/components/DropdownMenu.tsx","../../noya-designsystem/src/hooks/mergeEventHandlers.ts","../../noya-designsystem/src/utils/createSectionedMenu.ts","../../noya-designsystem/src/utils/sketchPattern.ts","../../noya-designsystem/src/components/internal/TextInput.tsx","../../noya-designsystem/src/components/InputField.tsx","../../noya-designsystem/src/utils/handleNudge.ts","../../noya-state/src/utils/getMultiValueEvery.ts","../../noya-state/src/selectors/textStyleSelectors.ts","../../noya-colorpicker/src/utils/interpolateRgba.ts","../../noya-colorpicker/src/components/Gradient.tsx","../../noya-colorpicker/src/components/ColorPicker.tsx","../../noya-colorpicker/src/hooks/useColorManipulation.ts","../../noya-react-canvaskit/src/components/Group.tsx","../../noya-react-canvaskit/src/components/Image.tsx","../../noya-react-canvaskit/src/components/Polyline.tsx","../../noya-react-canvaskit/src/components/Rect.tsx","../../noya-react-canvaskit/src/components/Text.tsx","hooks/useSystemColorScheme.ts","hooks/useLazyValue.ts","../../canvaskit/src/canvaskit.js","../../noya-sketch-file/src/index.ts","../../noya-keymap/src/names.ts","../../noya-keymap/src/shortcuts.ts","../../noya-keymap/src/keyMap.ts","../../noya-keymap/src/platform.ts","../../noya-keymap/src/hooks.ts","components/ImageDropTarget.tsx","hooks/useFileDropTarget.ts","hooks/useShallowArray.ts","hooks/useLayerMenu.tsx","hooks/useSize.ts","containers/renderer/CanvasKitRenderer.tsx","containers/Canvas.tsx","utils/mouseEvent.ts","components/inspector/DimensionInput.tsx","components/icons/FlipHorizontalIcon.tsx","components/icons/FlipVerticalIcon.tsx","components/inspector/FlipControls.tsx","components/inspector/DimensionsInspector.tsx","containers/AlignmentInspector.tsx","containers/ArtboardSizeList.tsx","components/inspector/ArrayController.tsx","components/icons/BorderCenterIcon.tsx","components/icons/BorderInsideIcon.tsx","components/icons/BorderOutsideIcon.tsx","components/inspector/InspectorPrimitives.tsx","components/inspector/ColorInspector.tsx","components/inspector/GradientInspector.tsx","components/inspector/PatternInspector.tsx","components/inspector/PickerAssetGrid.tsx","components/inspector/PickerGradients.tsx","components/inspector/PickerPatterns.tsx","components/inspector/PickerSwatches.tsx","components/inspector/FillInputFieldWithPicker.tsx","components/inspector/BorderRow.tsx","utils/getMultiValue.ts","utils/getMultiNumberValue.ts","containers/BorderInspector.tsx","components/inspector/ColorControlsRow.tsx","containers/ColorControlsInspector.tsx","components/inspector/ExportArrayController.tsx","components/inspector/ExportFormatsRow.tsx","../../noya-svg-renderer/src/ElementIdContext.tsx","../../noya-svg-renderer/src/SVGRenderer.tsx","../../noya-generate-image/src/index.tsx","containers/CanvasViewer.tsx","components/theme/CanvasGridItem.tsx","components/inspector/ExportPreviewRow.tsx","containers/ExportInspector.tsx","components/inspector/FillRow.tsx","containers/FillInspector.tsx","containers/LayerThemeInspector.tsx","containers/OpacityInspector.tsx","containers/PointControlsInspector.tsx","components/inspector/CoordinatesInspector.tsx","containers/PointCoordinatesInspector.tsx","containers/ControlPointCoordinatesInspector.tsx","containers/RadiusInspector.tsx","components/inspector/ShadowRow.tsx","containers/ShadowInspector.tsx","components/inspector/SymbolSelectorRow.tsx","hooks/useDeepArray.ts","containers/LayerList.tsx","components/inspector/SymbolInstanceOverridesRow.tsx","containers/SymbolInstanceInspector.tsx","components/inspector/SymbolSourceRow.tsx","components/inspector/SymbolLayoutRow.tsx","components/inspector/SymbolMasterOverrideRow.tsx","containers/SymbolMasterInspector.tsx","components/inspector/TextLayoutRow.tsx","components/inspector/TextOptionsRow.tsx","components/inspector/TextStyleRow.tsx","containers/TextStyleInspector.tsx","containers/ThemeTextInspector.tsx","components/inspector/LineInspector.tsx","containers/Inspector.tsx","containers/Menubar.tsx","hooks/useHistory.tsx","containers/PageList.tsx","utils/themeTree.ts","containers/ThemeGroups.tsx","components/inspector/NameInspector.tsx","containers/SwatchesInspector.tsx","containers/ThemeTextStyleInspector.tsx","containers/ThemeStyleInspector.tsx","containers/ThemeSymbolsInspector.tsx","containers/ThemeInspector.tsx","containers/ThemeToolbar.tsx","components/theme/menuItems.ts","components/theme/ThemeStyle.tsx","components/theme/ThemeStylesGrid.tsx","components/theme/TextStyle.tsx","components/theme/TextStylesGrid.tsx","components/theme/ColorSwatch.tsx","components/theme/SwatchesGrid.tsx","components/theme/Symbol.tsx","components/theme/SymbolsGrid.tsx","containers/ThemeWindow.tsx","components/icons/PointModeIcon.tsx","containers/Toolbar.tsx","containers/Workspace.tsx","utils/fetchData.ts","hooks/useResource.ts","App.tsx","index.tsx"],"names":["setAutoFreeze","getSelectedStyles","state","currentTab","getCurrentTab","currentComponentsTab","getCurrentComponentsTab","getSelectedLayers","flatMap","layer","style","getSelectedLayerStyles","map","value","getSelectedThemeTextStyles","visitStyleColors","f","textStyle","encodedAttributes","MSAttributedStringColorAttribute","fills","forEach","fill","color","borders","border","shadows","shadow","innerShadows","visitLayerColors","_class","attributes","attributedString","a","canClosePath","element","keyModifiers","shiftKey","layerId","index","Layers","find","getCurrentPage","do_objectID","isPointsLayer","points","length","selectedPoint","getIndexPathOfOpenShapeLayer","lastIndex","pointIndex","getCursorForEditPathMode","point","elementAtPoint","getPathElementAtPoint","type","selectedControlPoint","undefined","boundingRects","getBoundingRectMap","selectedObjects","clickThroughGroups","includeArtboardLayers","includeHiddenLayers","filter","boundingRect","curvePoint","decodedPoint","decodeCurvePoint","isPointInRange","curveTo","controlPointType","curveFrom","PATH_TO_WASM","getPathToWasm","StateContext","createContext","noop","DispatchContext","StateProvider","memo","dispatch","children","Provider","useWorkspaceState","useContext","Error","useDispatch","blurTrigger","useGlobalInputBlurTrigger","useCallback","args","useApplicationState","useMemo","history","present","useGetWorkspaceStateSnapshot","stateSnapshot","useRef","useLayoutEffect","current","useGetStateSnapshot","getWorkspaceStateSnapshot","useSelector","selector","useWorkspace","fileHandle","highlightedLayer","canvasSize","canvasInsets","preferences","setCanvasSize","size","insets","setShowRulers","highlightLayer","highlight","PointString","decode","pointString","slice","split","x","y","parseFloat","encode","toString","options","red","green","blue","alpha","Sketch","ClassValue","Color","rect","width","height","constrainProportions","Rect","cornerRadius","curveMode","CurveMode","Straight","hasCurveFrom","hasCurveTo","CurvePoint","graphicsContextSettings","blendMode","BlendMode","Normal","opacity","GraphicsContextSettings","gradientStop","position","GradientStop","gradient","elipseLength","from","gradientType","to","stops","Gradient","blur","isEnabled","center","motionAngle","radius","saturation","BlurType","Gaussian","Blur","borderOptions","dashPattern","lineCapStyle","LineCapStyle","Butt","lineJoinStyle","LineJoinStyle","Miter","BorderOptions","colorControls","brightness","contrast","hue","ColorControls","exportOptions","includedLayerIds","layerOptions","shouldTrim","exportFormats","ExportOptions","fontDescriptor","name","FontDescriptor","paragraphStyle","alignment","TextHorizontalAlignment","Left","ParagraphStyle","MSAttributedStringFontAttribute","textStyleVerticalAlignmentKey","TextVerticalAlignment","Top","verticalAlignment","TextStyle","uuid","endMarkerType","MarkerType","OpenArrow","miterLimit","startMarkerType","windingRule","WindingRule","EvenOdd","contextSettings","Style","newLayerBase","booleanOperation","BooleanOperation","None","isFixedToViewport","isFlippedHorizontal","isFlippedVertical","isLocked","isVisible","layerListExpandedType","LayerListExpanded","Undecided","nameIsFixed","resizingConstraint","resizingType","ResizeType","Stretch","rotation","shouldBreakMaskChain","frame","clippingMaskMode","hasClippingMask","edited","isClosed","pointRadiusBehaviour","PointsRadiusBehaviour","Rounded","dataReference","_ref_class","_ref","data","_data","sha1","MSJSONOriginalDataReference","stringAttribute","location","StringAttribute","string","AttributedString","rulerData","base","guides","RulerData","inferredGroupLayout","axis","InferredLayoutAxis","Horizontal","layoutAnchor","InferredLayoutAnchor","Middle","maxSize","minSize","MSImmutableInferredGroupLayout","createSharedObjectContainer","objects","SketchModel","artboard","hasClickThrough","groupLayout","layers","hasBackgroundColor","includeBackgroundColorInExport","isFlowHome","presetDictionary","resizesContent","backgroundColor","horizontalRulerData","verticalRulerData","Artboard","bitmap","clippingMask","fillReplacesImage","image","intendedDPI","Bitmap","fillType","FillType","BorderPosition","Center","thickness","Border","document","documentState","colorSpace","currentPageIndex","assets","AssetCollection","images","colorAssets","exportPresets","gradientAssets","imageCollection","ImageCollection","colors","gradients","fontReferences","foreignLayerStyles","foreignSwatches","foreignSymbols","foreignTextStyles","layerStyles","SharedStyleContainer","layerTextStyles","SharedTextStyleContainer","sharedSwatches","SwatchContainer","pages","layerSymbols","SymbolContainer","fileReference","MSJSONFileReference","noiseIndex","noiseIntensity","patternFillType","PatternFillType","Fill","patternTileScale","freeformGroupLayout","MSImmutableFreeformGroupLayout","group","Group","meta","app","BundleId","PublicRelease","build","commit","variant","appVersion","autosaved","compatibilityVersion","created","version","pagesAndArtboards","saveHistory","oval","Mirrored","Oval","page","Page","rectangle","fixedRadius","needsConvertionToNewRoundCorners","hasConvertedToNewRoundCorners","Rectangle","blurRadius","offsetX","offsetY","spread","Shadow","shapeGroup","ShapeGroup","shapePath","ShapePath","symbolInstance","horizontalSpacing","scale","verticalSpacing","overrideValues","SymbolInstance","symbolMaster","allowsOverrides","includeBackgroundColorInInstance","overrideProperties","symbolID","SymbolMaster","text","automaticallyDrawOnUnderlyingPath","dontSynchroniseWithSymbol","glyphBounds","lineSpacingBehaviour","textBehaviour","TextBehaviour","Flexible","Text","user","pageListHeight","pageListCollapsed","NumericalBool","False","isParentLayer","isChildLayer","isLayerWithEditedProperty","isPageLayer","isTextLayer","isBitmapLayer","isGroup","isSymbolMaster","isArtboard","isSymbolMasterOrArtboard","isSymbolInstance","hasTextStyle","hasInspectableShadow","hasInspectableBorder","getChildren","getChildrenReversed","reverse","INCLUDE_AND_SKIP","EXCLUDE_AND_SKIP","findAllLayerIndexPaths","node","predicate","found","visitNode","onEnter","child","indexPath","result","push","findAllIndexPaths","withOptions","visit","findAll","findIndexPath","access","accessPath","diagram","findInArray","i","visitReversed","accessReversed","accessPathReversed","getFixedRadius","isWithinMaskChain","parent","reversedChildIndex","childLayers","remainingSiblings","isMasked","sibling","pdf","workerSrc","GlobalWorkerOptions","canvas","createElement","canvasContext","getContext","getDocument","promise","pdfDocument","getPage","viewport","getViewport","render","background","Promise","resolve","reject","toBlob","blob","globalImageCache","ImageCacheContext","ImageCacheProvider","useReducer","id","forceUpdate","addImageToCache","key","contextValue","useSketchImage","useImageCache","imageCache","imageData","sketch","ref","useEffect","endsWith","generateImageFromPDF","Uint8Array","then","arrayBuffer","getSaturationMatrix","s","sr","sg","sb","Float32Array","flat","getContrastMatrix","c","t","getHueRotationMatrix","degrees","theta","toRadians","Math","cos","sin","CanvasKit","useCanvasKit","colorFilter","w","ColorFilter","MakeMatrix","first","rest","reduce","item","ColorMatrix","concat","identity","multiplyColorMatrix","toDegrees","imageFilter","ImageFilter","MakeDropShadowOnly","Primitives","path","paint","useFill","strokedPath","getStrokedBorderPath","useDeletable","Paint","makePath","getRectCornerPoints","setFillType","imageElement","SketchFill","SketchShadow","paintParameters","PaintStyle","maskFilter","MaskFilter","MakeBlur","BlurStyle","usePaint","transform","AffineTransform","translation","SketchBorderShadow","borderWidth","borderPosition","SketchFillShadow","shouldClipPath","additionalRadius","Outside","getStrokedPath","PathOp","Union","clip","op","ClipOp","Difference","max","Inside","elements","Symbol","backgroundFillProperties","overriddenSymbolMaster","produce","draft","overrideName","Overrides","decodeName","layerIdPath","remainingLayerIdPath","propertyType","targetLayer","l","encodeName","override","getLayerOverride","obj","firstFill","tintColor","MakeBlend","SrcIn","useTintColorFilter","useTextLayerParagraph","fontManager","useFontManager","fontSize","lineHeight","maximumLineHeight","textHorizontalAlignment","textTransform","MSAttributedStringTextTransformAttribute","TextTransform","textDecoration","underlineStyle","strikethroughStyle","getTextStyleAttributes","paragraph","heightMultiplier","BLACK","fontFamilies","textAlign","strutStyle","strutEnabled","forceStrutHeight","builder","ParagraphBuilder","Make","attribute","substr","pushStyle","addText","Lowercase","toLowerCase","Uppercase","toUpperCase","applyTextTransform","pop","delete","layout","console","info","transforms","Selectors","getLayerFlipTransform","getLayerRotationTransform","multiply","SketchMask","maskMode","maskPath","Intersect","antiAlias","shaderFilters","shader","MakeShader","shaderFilter","imageFilters","Shader","MakeColor","TRANSPARENT","ColorSpace","SRGB","Plus","composeImageFilters","srcFilter","MakeCompose","chunkBy","b","chain","hasAlphaMask","chainElements","ArtboardLabel","layerFrame","useTheme","textColor","primary","textMuted","parseColorString","letterSpacing","labelRect","getHeight","ArtboardBlur","useBlurMaskFilter","sigma","respectCTM","blurRect","SketchArtboardContent","showBackground","WHITE","CheckeredRect","transparentChecker","MakeImageFromEncoded","CHECKERED_BACKGROUND_BYTES","imageShader","makeShaderCubic","TileMode","Repeat","Matrix","scaled","colorShader","setShader","DstATop","useCheckeredFill","LayerPreview","padding","scalingMode","showCheckeredBackground","bounds","createBounds","paddedSize","layerSize","scaledRect","resizeIfLarger","resize","midX","midY","ComponentsContext","ComponentsProvider","useComponents","props","Path","Image","Polyline","AlignmentGuides","lines","snapGuidePaint","Color4f","strokeWidth","Stroke","selectionPaint","dragHandlePaint","useColorFill","lineLayer","getSelectedLineLayer","dragHandles","getLineDragHandles","getRectDragHandles","handle","Fragment","insetRect","EditablePathPoint","stroke","addOval","XYWHRect","POINT_RADIUS","EditablePathControlPoint","CONTROL_POINT_SIZE","EditablePathOutline","EditablePath","selectedIndexes","dragHandleStroke","localTransform","useStroke","selectedFill","selectedStroke","decodeCurvePoints","isSelected","includes","ExtensionGuide","setColor","setPathEffect","PathEffect","MakeDash","setStyle","setStrokeWidth","X_DIRECTIONS","Y_DIRECTIONS","ALL_DIRECTIONS","getAxisProperties","direction","getGuides","mainDirection","mainAxis","selected","highlighted","m","minM","maxM","minC","midC","maxC","startC","endC","isFurther","edge","extension","measurement","distanceMeasurement","distance","midpoint","useLayerFrameRect","useLayerPath","HoverOutlinePath","HoverOutlineRect","HoverOutline","DistanceMeasurement","getMinIntrinsicWidth","bgRect","round","backgroundFill","MeasurementGuide","extensionGuidePaint","measurementGuidePaint","PseudoPathLine","PseudoPoint","RulerLabel","origin","HorizontalRuler","scrollOrigin","getCurrentPageMetadata","rulerRect","dividerRect","backgroundPaint","dividerPaint","markOffset","marks","min","stride","values","remainder","n","range","mark","suspendedCanvasKit","BoundingRect","alignedRect","showRulers","interactionState","screenTransform","getScreenTransform","canvasTransform","getCanvasTransform","isEditingPath","getIsEditingPath","canvasRect","left","highlightPaint","getBoundingRect","boundingPoints","getBoundingPoints","quickMeasureGuides","isMeasured","highlightedBoundingRect","highlightedBounds","selectedBounds","guide","smartSnapGuides","layerIndexPaths","getSelectedLayerIndexPathsExcludingDescendants","possibleSnapLayers","getPossibleSnapLayers","snappingLayerInfos","getLayerAxisInfo","xPairs","getSnappingPairs","getAxisValues","pair","selectedLayerValue","visibleLayerValue","yPairs","axisSnappingPairs","layerBoundsMap","visibleLayerId","layerToSnapBoundingRect","nearestLayerGuides","snappingPairs","getMinGuideDistance","visibleLayerBounds","sort","alignmentGuides","groupedPairs","groupBy","Object","pairs","j","highlightedSketchLayer","precedence","layerTransform","getLayerTransformAtIndexPath","penToolPseudoElements","editPathPseudoElements","decodedPointToDraw","encodeCurvePoint","editablePaths","selectedLayerIndexPaths","getSelectedLayerIndexPaths","selectedPointLists","symbol","getSymbols","createRect","FontManagerContext","suspendedDefaultFont","SuspendedValue","fetch","resp","FontManagerProvider","defaultFont","getValueOrThrow","FontMgr","FromData","RefDefault","CanvasKitContext","CanvasKitProvider","loadCanvasKit","LoadedCanvasKit","loadingPromise","CanvasKitInit","locateFile","file","_setStyle","prototype","paintStyle","this","call","Components","getCurrentPageIndex","pageIndex","findIndex","selectedPage","getSymbolsPageIndex","currentPage","zoomValue","parsePoint","getCurrentSymbolPageIndex","some","SEPARATOR_ITEM","CHECKBOX_WIDTH","CHECKBOX_RIGHT_INSET","styles","separatorStyle","theme","divider","margin","itemStyle","disabled","textStyles","small","fontWeight","flex","userSelect","cursor","borderRadius","textDisabled","outline","display","alignItems","itemIndicatorStyle","marginRight","contentStyle","popover","boxShadow","number","digits","pow","getSharedSwatches","getGradientAssets","getImageAssets","getSharedTextStyles","getSharedStyles","getSelectedSwatches","swatch","selectedThemeTab","swatches","ids","groupThemeComponents","currentIds","groupName","array","object","prevGroup","delimitedPath","dirname","basename","newName","join","setComponentName","p","getSelectedSymbols","symbols","getSymbolsInstancesIndexPaths","symbolMasterId","findPageLayerIndexPaths","indexPaths","getSymbolsInstancesIds","setNewPatternFill","getLayerTransform","ctm","getLayerTranslationTransform","flip","getLayerRotationRadians","behavior","getLayerTransformAtIndexPathReversed","getLayerRotationMultiplier","clampRotation","floor","getLayerRotation","PI","isPaint","parameters","maybePaintObject","maybeParameters","maybeColor","useColor","useStablePaintParameters","setAntiAlias","setAlphaf","setMaskFilter","deletablePaint","SpacerVertical","styled","span","minHeight","SpacerHorizontal","minWidth","Vertical","compassDirections","getCardinalDirections","interactionReducer","action","shapeType","defaultFillColor","createLayer","pageSnapshot","previous","next","createInitialInteractionState","rectBounds","minX","maxX","minY","maxY","selectedIndexPaths","allVisibleLayers","getLayersInRect","right","inSameArtboard","every","sharedParentIndex","inSameParent","isDeepEqual","groupLayers","findSmallestSnappingDistance","getDelta","getDistance","abs","distances","selectedAxisValues","visibleLayersAxisValues","axisValues","Container","div","zIndex","borderColor","top","onClick","data-index","className","useIsomorphicLayoutEffect","window","bottom","touchAction","isTouch","e","getRelativePosition","event","getBoundingClientRect","pointer","touches","clamp","pageX","pageXOffset","pageY","pageYOffset","InteractiveBase","onMove","onKey","onDelete","onClickPointer","container","hasTouched","isDragging","onMoveCallback","useEventCallback","onKeyCallback","onClickCallback","onClickPointerCallback","handleMove","preventDefault","stopPropagation","stopImmediatePropagation","handleMoveStart","nativeEvent","isValid","target","HTMLElement","classList","contains","Number","dataset","handleKeyDown","keyCode","which","handleMoveEnd","toggleDocumentEvents","toggleEvent","addEventListener","removeEventListener","onTouchStart","onMouseDown","onKeyDown","tabIndex","role","Interactive","React","sketchColorToRgba","r","g","sketchColorToRgbaString","hsvaToRgbaString","rgbaToHsva","rgbaToSketchColor","sketchColorToHex","hsvaToHex","hexToRgba","hex","parseInt","hsva","rgbaToHex","hsvaToRgba","hsvaToHsla","h","v","hh","hsvaToHslString","hsvaToHslaString","d","module","format","delta","handler","callbackRef","getSelectedLayersExcludingDescendants","layerIndex","getSelectedTextLayers","getSelectedLayersWithContextSettings","getSelectedLayersWithFixedRadius","makeGetPageLayers","deleteLayers","childIndex","splice","getParentLayer","addSiblingLayer","Array","getRightMostLayerBounds","aBounds","findSymbolMaster","addToParentLayer","rectsIntersect","isLine","getParentLayerAtPoint","rectContainsPoint","moveLayer","destinationId","rawPosition","getLayerIndexPathsExcludingDescendants","draftPage","layerInfo","destinationIndexPath","parentIndexPath","destinationIndex","siblingIndex","parentTransform","adjustedLayers","newTransform","invert","draftLayer","transformRect","getLayerIndexPath","included","getIndexPathsForGroup","getIndexPathsOfArtboardLayers","isDeleted","useRect","useStable4ElementArray","ColorPickerContext","ColorPickerProvider","useColorPicker","currentThemeTab","getEdgeRadius","dist","scalePoint","unscalePoint","stringifyPoint","nextPoint","cubicTo","curveOrLineTo","lineTo","stepToCurve","curveInfo","currentPoint","step","arcToTangent","curvePoints","moveTo","close","rotate","windowsOf","curveInfoList","prev","before","corner","after","beforeRadius","afterRadius","getCornerRadius","drawSegment","getStep","zip","isLast","pathOp","copy","getBorderPositionPathOp","historyReducer","currentState","past","nextPresent","future","unshift","createHistoryEntry","actionType","shift","nextState","applicationReducer","mergableEntry","newTimestamp","Date","now","previousEntry","timestamp","getMergableHistoryEntry","sketchFileChanged","historyEntry","createInitialHistoryState","createInitialState","listReset","marginTop","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","textIndent","listStyleType","ListRowContext","selectedPosition","sortable","expandable","indentation","ListViewRowTitle","overflow","textOverflow","whiteSpace","SectionHeaderContainer","li","hovered","borderBottom","primaryDark","listView","raisedBackground","RowContainer","borderTopRightRadius","borderTopLeftRadius","borderBottomRightRadius","borderBottomLeftRadius","DragIndicatorElement","relativeDropPosition","offsetLeft","inset","sidebar","dragOutline","ListViewRow","forwardRef","forwardedRef","depth","isSectionHeader","onHoverChange","menuItems","onContextMenu","onSelectMenuItem","hoverProps","useHover","handleClick","renderContent","renderProps","Component","aria-selected","items","onSelect","sortableRef","sortableProps","composeRefs","RootContainer","ul","scrollable","flexDirection","flexWrap","ListViewRoot","onMoveItem","acceptsDrop","flattened","renderItem","Children","toArray","isValidElement","wrappedChildren","nextItem","prevItem","nextSelected","prevSelected","renderOverlay","content","keys","scrollableContent","RowTitle","Row","Root","gradientReducer","stopIndex","defaultBorderColor","styleReducer","sourceIndex","sourceItem","amount","mode","newValue","colorControlsReducer","mediaQuery","medium","large","xlarge","textDecorativeLight","textLink","textLinkFocused","dividerStrong","neutralBackground","inputBackground","codeBackground","selectedBackground","scrollbar","placeholderDots","slider","icon","iconSelected","mask","imageOverlay","fonts","normal","monospace","typeScale","title","fontFamily","subtitle","heading1","heading2","heading3","body","code","sizes","sidebarWidth","toolbar","itemSeparator","spacing","nano","micro","xxlarge","isEqualArray","deep","isEqual","aType","aKeys","bKeys","hasOwnProperty","isEqualObject","defaultAcceptsDrop","sourceId","SortableItemContext","setActivatorEvent","validateDropIndicator","activeId","overId","offsetTop","elementTop","elementHeight","acceptsDropInside","indicator","SortableItem","useSortable","active","activatorEvent","listeners","setNodeRef","overIndex","over","clientY","SortableRoot","sensors","useSensors","useSensor","PointerSensor","activationConstraint","useState","activeIndex","setActiveIndex","setPosition","handleDragStart","indexOf","handleDragMove","handleDragEnd","oldIndex","newIndex","collisionDetection","closestCenter","onDragStart","onDragMove","onDragEnd","strategy","verticalListSortingStrategy","createPortal","dropAnimation","Item","makeCurvePoint","PathBuilder","paths","command","finishPath","last","lastCurvePoint","controlPoint1","controlPoint2","firstCurvePoint","JSON","stringify","getBoundingRectFromCommands","commands","computeBoundsFromPoints","getCommandPoints","makeLineCapStyle","strokeLineCap","Round","Projecting","makeColor","cssString","parseCSSColor","makeLayerPaths","translate","addCommand","done","makePathsFromCommands","mapCommandPoints","applyTo","svgToLayer","svgString","convert","convertQuadraticsToCubics","viewBox","originalFrame","unionRects","pathElement","layoutSize","layoutFrame","scaledFrame","layerOffset","offset","shapeGroupFrame","shapePathFrame","shapePaths","makeLayerFromPathElement","updateSelection","newIds","selectionType","isArray","selectedIndex","createPage","newPage","createGroup","model","newParentTransform","groupFrame","newGroupTransform","originalParentTransform","symbolToGroup","detachSymbolIntances","symbolsInstancesIndexPaths","layerReducer","groupIndex","unGroup","indexPathsArtboards","symbolsPageIndex","symbolsPage","pagesIndexPaths","pagesIndexPath","elem","pointReducer","visitSelectedDraftPoints","selectedPointList","moveSelectedPoints","moveControlPoints","pointList","stringAttributeReducer","face","startsWith","kerning","paragraphSpacing","mappedSymbolIDs","duplicatePage","pageReducer","encodedPoint","symbolId","pointIndexPath","decodedPoints","isLastPointSelected","newDecodedPoints","computeNewBoundingRect","fixZeroLayerDimensions","decodedCurvePoint","currentPageId","parsed","parentId","layerIds","selectedRect","xValues","yValues","initialRect","originalBoundingRect","newBoundingRect","resizeRect","originalTransform","originalLayer","newLayer","newFrame","normalizeRect","replace","canvasReducer","propertyName","accessPageLayers","expanded","Expanded","Collapsed","property","layerPropertyReducer","getSelectedRect","combinedWidths","sum","combinedHeights","differenceWidth","differenceHeight","gapX","gapY","sortBy","getNormalizedBounds","layerIndexPath","sortedLayerIndexPaths","currentX","currentY","newOrigin","placement","alignmentReducer","Pattern","layerIndexPathsWithSharedStyle","sharedStyleID","selectedIds","layerPath","sharedTextStyle","textStyleReducer","GroupLayouts","isInferredLayout","Min","canOverride","overrideValueIndex","symbolsReducer","visibleScaleType","VisibleScaleType","Scale","Width","absoluteSize","fileFormat","ExportFileFormat","PNG","namingScheme","exportReducer","markLayersAsEdited","swatchColor","draftTextStyles","sharedStyle","draftLayerStyles","newSwatch","getIncrementedName","newSharedStyle","sharedStyles","changeColor","swatchID","layerIndexPathsWithSwatchId","filterSwatches","filterLayer","newAsset","themeReducer","altKey","ctrlKey","metaKey","rawPoint","computeTightBounds","getSelectedPointsFromPointLists","pointLists","selectedPoints","_","getSelectedPoints","getCurvePointForSelectedControlPoint","controlPoints","selectedPairs","entries","getNewValue","inverseDelta","oppositeControlPointType","controlPoint","oppositeControlPoint","selectedControlPointValueX","selectedControlPointValueY","deltaX","deltaY","oppositeControlPointDistance","Asymmetric","atan2","oppositeControlPointValue","newRect","cardinalDirection","clearColor","fillColor","positions","stop","fromPoint","toPoint","unitTransform","GradientType","Linear","MakeLinearGradient","Clamp","float32Array","Radial","MakeRadialGradient","Angular","hasStartPosition","hasEndPosition","rotationRadians","startPosition","matrix","MakeSweepGradient","canvasImage","Tile","translated","Fit","Decal","fillShader","PathUtils","TextAlign","Centered","Right","Justified","Justify","Natural","Start","decoration","font","UnderlineDecoration","LineThroughDecoration","DecorationStyle","Solid","shouldClickThrough","visitLayersReversed","rootLayer","SKIP","STOP","traversalOptions","screenRect","getLayerAtPoint","screenPoint","localPoints","rotatedRectContainsPoint","pathPoint","Infinity","xs","ys","isFinite","createRectFromBounds","framePoints","getScaleDirectionAtPoint","compassDirection","rectMap","wrapsAround","arr","atob","char","charCodeAt","createSketchFile","ButtonElement","button","justifyContent","pointerEvents","ButtonContent","Button","tooltip","buttonElement","getRGBAColor","num","getGradientBackground","equalColorObjects","second","prop","StyledScrollArea","RadixScrollArea","StyledViewport","StyledScrollbar","StyledThumb","ScrollArea","orientation","globalIgnoreEmulatedMouseEvents","hoverCount","handleGlobalPointerEvent","pointerType","setTimeout","setupGlobalTouchEvents","onHoverStart","onHoverEnd","isDisabled","isHovered","setHovered","ignoreEmulatedMouseEvents","onPointerEnter","triggerHoverStart","onPointerLeave","triggerHoverEnd","SeparatorElement","RadixContextMenu","ItemElement","CheckboxItemElement","StyledItemIndicator","ContextMenuItem","indented","checked","RootElement","ContextMenuRoot","hasCheckedItem","as","Slot","createKey","withSeparatorElements","separator","childrenArray","sep","cloneElement","defaultValue","addListener","removeListener","trigger","GlobalInputBlurContext","useGlobalInputBlur","useGlobalInputBlurListener","context","Background","HorizontalDotsBackground","PatternPreviewBackground","tileScale","imageRef","url","objectURL","Blob","URL","createObjectURL","bytes","revokeObjectURL","useObjectURL","getPatternSizeAndPosition","ColorPreviewBackground","GradientPreviewBackground","FillPreviewBackground","elementProps","isContainerElement","createElementInstance","instance","_elements","hostConfig","scheduleTimeout","cancelTimeout","clearTimeout","noTimeout","queueMicrotask","performance","supportsMutation","supportsPersistence","supportsHydration","isPrimaryRenderer","preparePortalMount","createContainerChildSet","_container","appendChildToContainerChildSet","childSet","replaceContainerChildren","newChildren","getRootHostContext","rootContainerInstance","getChildHostContext","parentHostContext","shouldSetTextContent","createTextInstance","hostContext","internalInstanceHandle","createInstance","appendInitialChild","parentInstance","finalizeInitialChildren","finalizeContainerChildren","prepareForCommit","containerInfo","resetAfterCommit","draw","roundedRect","set","drawRRect","drawRect","drawPath","drawImageRectCubic","drawParagraph","saveCount","getSaveCount","save","clipRect","clipPath","layerPaint","setColorFilter","setImageFilter","saveLayer","restoreToCount","surface","flush","warn","getPublicInstance","prepareUpdate","oldProps","newProps","cloneInstance","updatePayload","keepChildren","recyclableInstance","canvaskitReconciler","ReactReconciler","callback","getCanvas","extendedSurface","root","createContainer","getContainerForSurface","updateContainer","unmount","injectIntoDevTools","bundleType","rendererPackageName","emscriptenRequireInterop","requireFunction","amdDefine","_deps","thunk","define","opts","require","init","layerIdPathString","isValidProperty","canOverrideProperty","idPathString","getOverrideValue","parseScale","scaleText","isNaN","parseFloatWithSuffix","Height","getScaleUnits","radians","x1","y1","sqrt","initialPoint","finalPoint","areaOfTriangle","p1","p2","p3","x2","y2","x3","y3","triangleArea","rectangleArea","isNumberEqual","dx","dy","union","rects","error","acc","isShallowEqual","arrays","zipLongest","fillValue","filledArrays","precision","EPSILON","aName","bName","belongInSameGroup","start","end","projection","numberSuffixRegExp","originalName","names","match","prefix","numbers","maxNumber","interpolate","inputRange","outputRange","findLastIndex","lerp","toStartAt","record","fromEntries","Base64","buffer","binary","byteLength","String","fromCharCode","btoa","UTF16","toUTF8","TextEncoder","FILE_TYPE_TO_EXTENSION","FILE_EXTENSION_TO_TYPE","getFileExtensionForType","getFileTypeForExtension","detectFileType","isPNG","isJPG","isWEBP","isPDF","memoize","intermediateCache","Map","cache","intermediateCacheIndex","has","get","filename","lastIndexOf","components","component","suspendedPromise","promiseState","catch","source","destination","resizingMode","newSize","sourceAspectRatio","destinationAspectRatio","sourceIsWiderThanDestination","m00","m01","m02","m10","m11","m12","other","det","determinant","rx","ry","sx","sy","tx","ty","workspaceReducer","sketchFile","createInitialWorkspaceState","compassDirectionMap","ne","se","sw","nw","handleSize","translationPercent","transformedPoint","parametersWithStyle","lightTheme","LabelLabel","label","LabelContainer","LabelRoot","Label","SelectElement","select","appearance","alignSelf","Select","onChange","getTitle","optionElements","option","colorFrom","colorTo","backgroundImage","assign","interaction","aria-label","aria-valuetext","flexGrow","Tools","Labels","renderLabel","serializedIds","containerRef","refs","createRef","labelElements","containerRect","solver","kiwi","variables","heights","list","targetElement","getElementById","targetRect","targetMidXValue","labelMidX","addEditVariable","weak","addConstraint","Eq","strong","Ge","required","Le","suggestValue","updateVariables","setProperty","StyledSlider","RadixSlider","StyledTrack","StyledRange","Slider","onValueChange","arrayValue","handleValueChange","ChevronContainer","TreeRow","onClickChevron","ListView","handleClickChevron","DividerContainer","Divider","colorModel","defaultColor","toHsva","fromHsva","equal","rgbaColor","handleChange","selectedStop","onChangeColor","onChangePosition","onAdd","onSelectStop","handleChangeColor","handleAddGradientStop","Grid","gridTemplateColumns","gridAutoRows","gap","ItemContainer","GridContainer","ItemTitle","ItemDescription","SectionTitle","GridViewItem","GridViewRoot","GridViewSection","GridViewSectionHeader","grouped","Section","SectionHeader","RadioRoot","RadixRadioGroup","StyledItem","verticalAlign","StyledIndicator","IndicatorContainer","RadioItem","itemElement","Content","TooltipPrimitive","side","align","sideOffset","RadixDropdownMenu","DropdownMenuItem","DropdownMenuRoot","unique","Set","composeAllEventHandlers","handlers","composeEventHandlers","mergeEventHandlers","handlerMaps","eventNames","eventName","handlerMap","withSeparators","createSectionedMenu","sections","nonEmptySections","section","SUPPORTED_IMAGE_UPLOAD_TYPES","ControlledTextInput","placeholder","SubmittableTextInput","onSubmit","internalValue","setInternalValue","initialFocusValue","setInitialFocusValue","handleSubmit","didReset","handleFocus","onBlur","onFocus","InputFieldContext","labelPosition","labelSize","hasLabel","hasDropdown","InputFieldLabel","DropdownContainer","InputFieldDropdownMenu","buttonId","InputElement","InputFieldInput","parseNumber","NaN","InputFieldNumberInput","onNudge","reset","handled","handleNudge","maxWidth","InputFieldRoot","DropdownMenu","Input","NumberInput","getMultiValueEvery","getTextStyleColor","getTextFontFamily","getTextFontSize","encodedAttributesArray","encodedAttribute","getTextLineHeight","getHorizontalAlignment","getTextTransformation","getTextDecoration","getTextLetterSpacing","getTextParagraphSpacing","getTextVerticalAlignment","getTextAlignment","fontColor","horizontalAlignment","fontAlignment","RGBA_COMPONENTS","pos","sorted","interpolateRgba","Pointer","ColorPicker","onChangeCallback","updateHsva","newHsva","newColor","params","useColorManipulation","decodeImage","ArrayBuffer","preferDarkQuery","useSystemColorScheme","glbl","global","useLazyValue","matchMedia","matches","colorScheme","setColorScheme","listener","didInitialize","_scriptDir","currentScript","src","__filename","da","fa","ready","Wd","MakeSWCanvasSurface","tagName","MakeSurface","Sd","MakeCanvasSurface","colorType","ColorType","RGBA_8888","alphaType","AlphaType","Unpremul","_malloc","Surface","_makeRasterDirect","Kf","Hf","Jf","lf","clear","MakeRasterDirectSurface","byteOffset","_flush","Uint8ClampedArray","HEAPU8","ImageData","putImageData","dispose","_free","currentContext","setCurrentContext","GetWebGLContext","stencil","antialias","premultipliedAlpha","preserveDrawingBuffer","preferLowPowerToHighPerformance","failIfMajorPerformanceCaveat","enableExtensionsByDefault","explicitSwapControl","renderViaOffscreenBackBuffer","majorVersion","WebGL2RenderingContext","Cf","WebGLRenderingContext","Fd","ma","bg","Ne","vf","Rf","eg","getExtension","vertexAttribDivisor","vertexAttribDivisorANGLE","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","q","drawElementsInstancedANGLE","nd","createVertexArray","createVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","bindVertexArray","bindVertexArrayOES","isVertexArray","isVertexArrayOES","od","drawBuffers","drawBuffersWEBGL","pd","zf","Df","Af","Kg","getSupportedExtensions","Jd","Gd","ia","ja","deleteContext","JSEvents","Ng","MakeWebGLCanvasSurface","OffscreenCanvas","HTMLCanvasElement","MakeGrContext","MakeOnScreenGLSurface","grContext","openGLversion","cloneNode","parentNode","replaceChild","add","constructor","u","Uint32Array","_ck","S","BYTES_PER_ELEMENT","I","he","count","Ue","RGBA_F32","B","HEAPF32","K","Ma","Hd","Cb","toTypedArray","m21","m41","m22","m42","m14","m24","m44","A","M","hb","X","fc","ea","aa","ca","pa","hc","ib","arguments","jb","J","Mc","ColorAsInt","of","defineProperty","getColorComponents","multiplyByAlpha","Malloc","ue","subarray","Free","ec","ra","Nc","Oc","Pc","Qc","Rc","Sc","Na","Ua","ic","jc","kc","Tc","lc","ve","re","$d","enumerable","Oe","Te","HEAPU32","RectBuilder","RSXFormBuilder","ColorBuilder","onRuntimeInitialized","RGBA_F16","L","_readPixels","Int32Array","_MakeSRGB","DISPLAY_P3","_MakeDisplayP3","ADOBE_RGB","_MakeAdobeRGB","GlyphRunFlags","IsWhiteSpace","_GlyphRunFlags_isWhiteSpace","MakeFromCmds","_MakeFromCmds","MakeFromVerbsPointsWeights","_MakeFromVerbsPointsWeights","addArc","_addArc","_addOval","addPath","_addPath","addPoly","_addPoly","addRect","_addRect","addRRect","_addRRect","addVerbsPointsWeights","_addVerbsPointsWeights","arc","LTRBRect","arcToOval","_arcToOval","arcToRotated","_arcToRotated","_arcToTangent","_close","conicTo","_conicTo","_computeTightBounds","_cubicTo","dash","_dash","getBounds","_getBounds","_lineTo","_moveTo","_transform","quadTo","_quadTo","rArcTo","_rArcTo","rConicTo","_rConicTo","rCubicTo","_rCubicTo","rLineTo","_rLineTo","rMoveTo","_rMoveTo","rQuadTo","_rQuadTo","miter_limit","cap","StrokeCap","StrokeJoin","_stroke","trim","_trim","_makeShaderCubic","makeShaderOptions","_makeShaderOptions","readPixels","Canvas","_clear","clipRRect","_clipRRect","_clipRect","m31","m32","m13","m23","m33","m43","m34","P","_concat","drawArc","_drawArc","drawAtlas","SrcOver","O","T","_drawAtlasCubic","C","F","FilterMode","R","MipmapMode","mipmap","_drawAtlasOptions","drawColor","_drawColor","drawColorComponents","drawDRRect","_drawDRRect","drawGlyphs","_drawGlyphs","drawImageNine","_drawImageNine","drawImageRect","_drawImageRect","_drawImageRectCubic","drawImageRectOptions","_drawImageRectOptions","drawOval","_drawOval","drawPatch","Modulate","_drawPatch","drawPoints","_drawPoints","_drawRRect","_drawRect","drawShadow","_drawShadow","getShadowLocalBounds","_getShadowLocalBounds","getLocalToDevice","_getLocalToDevice","findMarkedCTM","_findMarkedCTM","getTotalMatrix","_getTotalMatrix","_saveLayer","writePixels","_writePixels","_MakeBlend","_makeMatrix","ContourMeasure","getPosTan","_getPosTan","MakeDropShadow","_MakeDropShadow","_MakeDropShadowOnly","MakeMatrixTransform","_MakeMatrixTransform","getColor","_getColor","_setColor","setColorComponents","getPoint","_getPoint","PictureRecorder","beginRecording","_beginRecording","makeImageSnapshot","_makeImageSnapshot","requestAnimationFrame","Pe","bind","drawOnce","_MakeDash","_MakeColor","Blend","Lerp","MakeLerp","_MakeLinearGradient","_MakeRadialGradient","_MakeSweepGradient","MakeTwoPointConicalGradient","_MakeTwoPointConicalGradient","Vertices","_bounds","computeTonalColors","ambient","spot","_computeTonalColors","LTRBiRect","XYWHiRect","RRectXY","MakeAnimatedImageFromEncoded","_decodeAnimatedImage","_decodeImage","kb","MakeImageFromCanvasImageSource","drawImage","getImageData","MakeImage","_MakeImage","MakeVertices","_VerticesBuilder","texCoords","indices","detach","mapPoints","rotated","skewed","Vector","dot","lengthSquared","mulScalar","sub","normalize","cross","M44","rotatedUnitSinCos","lookat","perspective","rc","ba","ka","va","wa","la","G","k","z","D","E","N","Y","qa","ha","Ha","transpose","mustInvert","setupCamera","eye","coa","up","near","far","angle","Id","postTranslate","TextDirection","RTL","LTR","weight","FontWeight","FontWidth","slant","FontSlant","Upright","na","oa","H","_colorPtr","_foregroundColorPtr","_backgroundColorPtr","_decorationColorPtr","foregroundColor","decorationColor","_fontFamiliesPtr","_fontFamiliesLen","Paragraph","getRectsForRange","_getRectsForRange","getRectsForPlaceholders","_getRectsForPlaceholders","TypefaceFontProvider","registerFont","MakeTypefaceFromData","_registerFont","disableHinting","ellipsis","_ellipsisPtr","_ellipsisLen","maxLines","fontStyle","halfLeading","leading","textDirection","textHeightBehavior","TextHeightBehavior","All","decorationThickness","decorationStyle","textBaseline","TextBaseline","Alphabetic","wordSpacing","locale","_localePtr","_localeLen","_shadowLen","_shadowColorsPtr","_shadowOffsetsPtr","_shadowBlurRadiiPtr","fontFeatures","_fontFeatureLen","_fontFeatureNamesPtr","_fontFeatureValuesPtr","_Make","MakeFromFontProvider","_MakeFromFontProvider","ShapeText","_ShapeText","_pushStyle","pushPaintStyle","_pushPaintStyle","addPlaceholder","PlaceholderAlignment","Baseline","_addPlaceholder","MakeManagedAnimation","_MakeManagedAnimation","Animation","_render","_size","ManagedAnimation","seek","_seek","seekFrame","_seekFrame","MakeParticles","_MakeParticles","ParticleEffect","uniforms","_uniformPtr","getUniformFloatCount","_setPosition","_op","simplify","_simplify","drawText","_drawSimpleText","Font","getGlyphBounds","_getGlyphWidthBounds","getGlyphIDs","_getGlyphIDs","Uint16Array","getGlyphWidths","_fromData","_makeTypefaceFromData","TextBlob","MakeOnPath","countPoints","MakeFromText","ContourMeasureIter","substring","MakeFromRSXform","_MakeFromRSXform","MakeFromRSXformGlyphs","_MakeFromRSXformGlyphs","MakeFromGlyphs","_MakeFromGlyphs","_MakeFromText","MallocGlyphIDs","MakePicture","_MakePicture","RuntimeEffect","onError","log","makeShader","_makeShader","makeShaderWithChildren","Rd","Vd","_makeShaderWithChildren","toFixed","exec","sizePx","family","Ud","setStrokeMiter","setStrokeCap","setStrokeJoin","Ze","ye","setSubpixel","ge","me","Be","Re","De","Ce","Se","oe","Qe","Ae","Td","setBlendMode","Yd","Zd","wf","He","qe","setTransform","ze","typeface","setSize","setTypeface","DstOver","Src","Dst","Clear","DstIn","SrcOut","DstOut","SrcATop","Xor","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Exclusion","Hue","Saturation","Luminosity","getStrokeCap","Square","getStrokeJoin","Bevel","getStrokeWidth","getStrokeMiter","arcTo","beginPath","bezierCurveTo","isEmpty","clearRect","kf","ae","Winding","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","Ye","ellipse","Ee","we","restore","fillRect","fillText","drawTextBlob","getLineDash","xf","isPointInPath","isPointInStroke","lineWidth","measureText","quadraticCurveTo","resetTransform","Nf","kg","gg","Cg","Bg","fs","zg","Ag","og","yg","Uf","Vf","hg","Tf","xe","setLineDash","apply","mf","strokeRect","strokeText","addHitRegion","clearHitRegions","drawFocusIfNeeded","removeHitRegion","scrollPathIntoView","writable","nf","$e","Gf","loadFont","makePath2D","toDataURL","ImageFormat","JPEG","encodeToBytes","Buffer","ce","je","ee","addColorStop","MakeFromSVGString","If","Fe","_testing","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","parseColor","colorToString","parseFontString","MakeCanvas","ta","sa","ua","xa","ya","za","Aa","Ba","importScripts","process","versions","Da","Ea","Fa","Ga","Ia","Ca","__dirname","readFileSync","assert","argv","on","Ja","Ka","exit","inspect","read","readbuffer","quit","print","printErr","self","href","XMLHttpRequest","open","send","responseText","responseType","response","onload","status","onerror","La","Oa","thisProgram","Qa","Pa","wasmBinary","noExitRuntime","WebAssembly","Ra","Sa","Ta","TextDecoder","Va","Wa","fb","gb","$a","Za","Q","lb","U","mb","Xa","Ya","ab","bb","cb","db","eb","nb","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","HEAPU16","HEAPF64","Float64Array","ob","pb","qb","rb","preRun","tb","ub","vb","onAbort","RuntimeError","wb","xb","preloadedImages","preloadedAudios","yb","zb","Bb","Jg","pf","Db","tg","qg","rg","pg","dg","Fb","Gb","Hb","Ib","Jb","Kb","fromWireType","Lb","Mb","Nb","Ob","Pb","Function","Qb","message","stack","create","Rb","Sb","Tb","Ub","Vb","TypeError","Wb","Xb","Yb","V","cg","Zb","be","Xd","$b","ac","bc","ie","le","pe","cc","FinalizationGroup","unregister","register","dc","mc","nc","Ke","oc","pc","qc","de","Ie","Lg","sc","Wf","Xe","Qf","mg","tc","uc","rf","vc","wc","bf","sf","af","xg","clone","ng","xc","yc","zc","Ac","Cc","Dc","lg","Ef","toWireType","ke","Ec","Gc","Fc","Hc","Ic","Jc","Kc","Lc","Uc","Vc","Wc","Xc","Yc","Zc","tf","$c","ad","bd","cd","dd","ed","fd","gd","hd","globalThis","md","ld","hrtime","dateNow","qd","rd","sd","td","ud","vd","wd","xd","yd","zd","Ad","Bd","Cd","Dd","Ed","Ig","W","Kd","Ld","Md","getParameter","Nd","Od","Pd","Qd","clz32","5","6","8","29502","29504","26917","26918","29846","29847","Z","Of","jf","getUniformLocation","Ff","USER","LOGNAME","PATH","PWD","HOME","LANG","navigator","languages","getTime","getMonth","getFullYear","getDate","setDate","setMonth","setFullYear","getDay","fe","hf","Fg","Eg","ff","We","Me","gf","Og","Dg","Gg","RegExp","ceil","InternalError","BindingError","isAliasOf","Ve","getPrototypeOf","deleteLater","Xf","yf","argPackAdvance","readValueFromPointer","deleteObject","Bc","Mf","getInheritedInstanceCount","getLiveInheritedInstances","flushPendingDeletes","setDelayFunction","UnboundTypeError","count_emval_handles","get_first_emval","Ab","jg","ig","Lf","Mg","flags","Bf","ag","vg","Zf","$f","ug","wg","Sf","write","te","Eb","fg","kd","jd","activeTexture","attachShader","_c","bindAttribLocation","qf","Je","bindBuffer","bindFramebuffer","bindRenderbuffer","bindSampler","bindTexture","blendColor","blendEquation","blendFunc","blitFramebuffer","bufferData","bufferSubData","checkFramebufferStatus","$","clearStencil","clientWaitSync","colorMask","compileShader","compressedTexImage2D","compressedTexSubImage2D","copyTexSubImage2D","ga","createProgram","ef","cf","df","uf","createShader","cullFace","deleteBuffer","deleteFramebuffer","deleteProgram","deleteRenderbuffer","deleteSampler","deleteShader","deleteSync","deleteTexture","depthMask","disable","disableVertexAttribArray","drawArrays","drawArraysInstancedBaseInstanceWEBGL","drawElements","drawElementsInstancedBaseVertexBaseInstanceWEBGL","enable","enableVertexAttribArray","fenceSync","finish","framebufferRenderbuffer","framebufferTexture2D","frontFace","gc","generateMipmap","getBufferParameter","getError","getFramebufferAttachmentParameter","WebGLRenderbuffer","WebGLTexture","getProgramInfoLog","getProgramParameter","getActiveUniform","getActiveAttrib","getActiveUniformBlockName","getRenderbufferParameter","getShaderInfoLog","getShaderPrecisionFormat","rangeMin","rangeMax","getShaderSource","getShaderParameter","Hg","invalidateFramebuffer","invalidateSubFramebuffer","isSync","isTexture","linkProgram","multiDrawArraysInstancedBaseInstanceWEBGL","multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL","pixelStorei","readBuffer","_b","renderbufferStorage","renderbufferStorageMultisample","samplerParameteri","scissor","shaderSource","stencilFunc","stencilFuncSeparate","stencilMask","stencilMaskSeparate","stencilOp","stencilOpSeparate","texImage2D","texParameterf","texParameteri","texStorage2D","_a","texSubImage2D","uniform1f","uniform1fv","uniform1i","uniform1iv","uniform2f","uniform2fv","uniform2i","uniform2iv","uniform3f","uniform3fv","uniform3i","uniform3iv","uniform4f","uniform4fv","uniform4i","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","useProgram","vertexAttrib1f","vertexAttrib2f","vertexAttrib3f","vertexAttrib4f","vertexAttribIPointer","vertexAttribPointer","waitSync","grow","onExit","Yf","Pf","o","asm","exports","monitorRunDependencies","clearInterval","credentials","ok","instantiate","instantiateWasm","instantiateStreaming","___wasm_call_ctors","_memset","___errno_location","___getTypeName","___embind_register_native_and_builtin_types","stackSave","stackRestore","_setThrew","_memalign","calledRun","postRun","setStatus","dynCall_ji","dynCall_iiji","dynCall_iijjiii","dynCall_iij","dynCall_vijjjii","dynCall_viji","dynCall_vijiii","dynCall_viiiiij","dynCall_viijii","dynCall_jiiii","dynCall_jii","dynCall_iiij","dynCall_iiiij","dynCall_viij","dynCall_viiij","dynCall_vij","dynCall_jiiiiii","dynCall_jiiiiji","dynCall_iijj","dynCall_jiji","dynCall_iiiiij","dynCall_iiiiijj","dynCall_iiiiiijj","run","preInit","readEntry","async","parse","readFiles","directory","all","files","encoded","JSZip","loadAsync","decoded","normalizedDocument","generateAsync","mimeType","normalizeKeyName","platform","alt","ctrl","parts","mod","test","prependModifiers","useShift","modifierKeyNames","getEventShortcutNames","platformName","alternateShortcutName","eventKeyName","keyName","isChar","eventModifiers","eventShortcutName","shortcutNames","baseKeyName","createKeyMap","shortcuts","shortcutsArray","platformShortcutName","shortcut","platformKey","getPlatformShortcutName","getCurrentPlatform","useKeyboardShortcuts","keyMap","keyMapRef","HTMLInputElement","matchingName","isSupportedFile","supportedFileTypes","onDropFile","dropEvent","isDropTargetActive","setIsDropTargetActive","handleDragEvent","handleDropEvent","dropTargetProps","onDragOver","onDragEnter","onDragLeave","onDrop","useFileDropTarget","dataTransfer","offsetPoint","alert","useShallowArray","useLayerMenu","hasSelectedLayers","canUngroup","canDetach","canBeMask","isValidClippingMaskType","canBeMaskChainBreaker","isValidMaskChainBreakerType","canBeSymbol","shouldAskForSymbolName","newUseAsMaskValue","newIsAlphaMaskValue","newIgnoreMasksValue","canUnlock","canLock","canShow","selectedLayerIds","prompt","useSize","refToObserve","elementToObserve","resizeObserver","ResizeObserver","entry","borderSizeEntry","borderSize","observe","box","unobserve","CanvasComponent","workspaceState","setSurface","canvasRef","canvasElement","newSurface","InsetContainer","isMoving","containerSize","useGesture","onWheel","nudge","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Backspace","Escape","Shift","visibleCanvasSize","canvasSizeWithInsets","offsetEventPoint","selectedLayers","handleMouseDown","MouseEvent","setPointerCapture","pointerId","indexPathOfOpenShapeLayer","alreadySelected","handleMouseMove","handleMouseUp","releasePointerCapture","handleDirection","getCursorForDirection","onPointerDown","onPointerMove","onPointerUp","onSetValue","handleNudgeValue","handleSetValue","FlipHorizontalIcon","xmlns","FlipVerticalIcon","FlipButtonContainer","FlipButtonElements","onSetIsFlippedVertical","onSetIsFlippedHorizontal","iconColor","iconSelectedColor","handleSetIsFlippedVertical","handleSetIsFlippedHorizontal","DimensionsInspector","onSetX","onSetY","onSetWidth","onSetHeight","onSetRotation","AlignmentInspectorContainer","AlignmentInspector","Header","canvasSizePresets","groups","presets","SizeLabel","ArtboardSizeList","categoryNames","category","categoryName","setCategoryName","layerElements","ElementRow","ArrayElement","draggableId","provided","draggableProps","dragHandleProps","innerRef","TitleRow","Title","Checkbox","input","ArrayControllerContainer","ArrayController","isDraggable","alwaysShowTrashIcon","getKey","onDeleteItem","onClickPlus","onClickTrash","onChangeCheckbox","droppableId","getCheckboxElement","arrayController","droppableProps","checkbox","BorderCenterIcon","BorderInsideIcon","BorderOutsideIcon","Column","SliderRowLabel","RowLabel","LabeledRow","LabeledSliderRow","DEFAULT_SKETCH_COLOR","onSetOpacity","colorInputId","hexInputId","opacityInputId","displayColor","handleSetOpacity","scaledAmount","onChangeOpacity","onNudgeOpacity","onAddStop","onDeleteStop","selectedStopIndex","setSelectedStopIndex","clampedSelectedStopIndex","selectedcolor","selectedColorHex","hexValue","handleSubmitOpacity","handleNudgeOpacity","handleChangePosition","handleAddStop","handleDeleteStop","isActive","imageRendering","DropTargetOverlay","UploadButton","show","PATTERN_FILL_TYPE_OPTIONS","PatternPreview","pattern","onAddImage","onChangeImage","isHovering","handleImageFile","openFile","fileOpen","extensions","mimeTypes","createImage","onChangeFillType","onChangeTileScale","patternType","isTile","changeFillType","onSubmitTileScale","onNudgeTileScale","backgroundRepeat","backgroundSize","GridSmall","RadioGroupContainer","LayoutRadioGroup","setLayout","GradientsList","setGradientId","handleSelectMenuItem","onSelectGradientAsset","colorString","GradientsGrid","gridString","onCreate","onRename","gradientLayout","setGradientLayout","gradientId","PatternSquare","imageAssets","SwatchesList","selectedId","SwatchesGrid","onDetach","swatchLayout","setSwatchLayout","isSwatch","handleCreate","swatchName","Popover","maxHeight","overflowY","ColorFillPicker","onChangeSwatch","detachThemeColor","createThemeColor","GradientFillPicker","onChangeGradient","onChangeGradientColor","onChangeGradientPosition","onAddGradientStop","onDeleteGradientStop","createThemeGradient","gradientName","onRemoveThemeGradient","onRenameThemeGradient","PatternFillPicker","onChangePatternFillType","onChangePatternTileScale","onChangeFillImage","FillOptionSelect","onChangeType","onChangeGradientType","supportsGradients","supportsPatterns","fillOptions","gradientTypeString","hasMultipleFills","colorProps","gradientProps","patternProps","picker","toPositionString","borderPositionId","widthInputId","toPositionEnum","getMultiValue","getMultiNumberValue","selectedStyles","layerBorderLists","editableBorders","filtered","contextOpacity","ColorControlInput","onChangeHue","onChangeSaturation","onChangeBrightness","onChangeContrast","makeInterpolator","toDisplay","fromDisplay","hueInterpolator","saturationInterpolator","brightnessInterpolator","contrastInterpolator","firstColorControls","control","interpolatedHue","interpolatedSaturation","interpolatedBrightness","interpolatedContrast","handleClickPlus","handleClickTrash","handleChangeHue","handleChangeSaturation","handleChangeBrightness","handleChangeContrast","displayValue","ColorControlsRow","SUPPORTED_EXPORT_FORMAT_OPTIONS","JPG","WEBP","SVG","exportFormat","onChangeScale","onChangeName","onChangeFileFormat","onChangeNamingScheme","scaleString","scaleInputId","namingSchemeInputId","fileFormatInputId","canChangeScale","isPrefix","ExportFormatNamingScheme","Prefix","Suffix","ElementIdContext","ElementIdProvider","instancePrefix","stringifyAffineTransform","usePaintProps","toPrecision","stringifyColor","getRectProps","pointsString","toSVGString","fillRule","getFillType","ClipPath","getNextId","useGetNextElementId","SVGComponents","groupProps","encodedImage","fileType","svgId","idPrefix","generateImage","svg","renderToStaticMarkup","getColorSpace","pixels","getImageInfo","rawApplicationState","setImageData","valid","Inner","renderer","ratio","saveFile","File","fileSave","fileName","getExportSize","selectedLayer","renderImageForExportFormat","exportSize","getExportFileName","handleExport","base64","allSettled","GRADIENT_TYPE_OPTIONS","onSetContextOpacity","fillInputId","gradientTypeId","patternSizeId","fillLabel","handleSetContextOpacity","getGradientTypeTitle","handleSelectGradientType","handleSelectPatternSize","fields","allowMoreThanOne","NO_LAYER_STYLE","LayerThemeInspectorContent","sharedStyleId","layerStyleOptions","getLayerStyleTitle","onUpdate","onReset","LayerThemeInspector","opacityValue","roundedValue","CURVE_MODE_OPTIONS","getCurveModeString","Disconnected","handleSubmitRadius","handleNudgeRadius","pointTypeId","pointRadiusInputId","getCurveMode","roundNumber","roundTo","CoordinatesInspector","handleSetPointX","handleSetPointY","pointX","pointY","radii","radiusValue","onSetBlur","onSetSpread","xInputId","yInputId","blurInputId","spreadInputId","layerShadowLists","editableShadows","ShadowRow","onEditSource","symbolSourceOptions","getSymbolMasterTitle","useDeepArray","IconContainer","LayerIcon","LayerRow","visible","onChangeVisible","onChangeIsLocked","handleHoverChange","handleSetVisible","handleSetHidden","handleSetLocked","handleSetUnlocked","titleElement","getStateSnapshot","currentIndex","flattenLayerList","isSymbolClass","isArtboardClass","isGroupClass","lastSelectedIndex","sourceIds","relationDropPosition","sourcePaths","destinationPath","sourcePath","sourceLayers","destinationLayer","ThemeStyleSelector","themeStyles","themeStylesOptions","getThemeStylesTitle","TextStyleSelector","textStylesOptions","getTextStylesTitle","SymbolMasterSelector","getOverrideElements","idPath","onSetOverrideValue","nestedIdPath","titleRow","nestedOverrides","symbolIdOverrideName","stringValueOverrideName","textStyleOverrideName","imageOverrideName","layerStyleOverrideName","onResetOverrideValue","overrideElements","selectedSymbolInstance","setAdjustContentOnResize","setHasBackgroundColor","setBackgroundColor","setIncludeBackgroundInExport","setIncludeBackgroundInInstances","setIncludeBackgroundInExportCallback","evt","setIncludeBackgroundInInstancesCallback","setMinWidth","setLayoutAxis","setLayoutAnchor","inferredLayout","layoutAxis","isAnchorDisabled","handleNudgeMinWidth","handleSetMinWidth","Max","onSetOverrideProperty","onSetAllowsOverrides","selectedSymbol","textLayout","textVerticalAlignment","onChangeTextLayout","onChangeTextHorizontalAlignment","onChangeTextVerticalAlignment","Fixed","FixedWidthAndHeight","Bottom","capitalize","charAt","TextDecorationOptions","decorationInputId","transformInputId","onChangeTextTransform","onChangeTextDecoration","lineSpacing","onChangeFontColor","onChangeFontSize","onChangeFontFamily","onChangeFontWeight","onChangeLineSpacing","onChangeLetterSpacing","onChagenParagraphSpacing","characterInputId","lineInputId","paragraphInputId","fontSizes","textSizeOptions","getTextSizeTitle","textLayer","seletedText","TextStyleSelectors","NO_TEXT_STYLE","sharedTextStyles","selectedTextStyleId","textStyleOptions","styleName","LineInspector","startX","startY","endX","endY","findLineRotation","startPoint","endPoint","handleSetRotation","handleSetStartX","handleSetStartY","handleSetEndX","handleSetEndY","PointControlsContainer","hasContextSettingsLayers","hasFixedRadiusLayers","handleSetX","handleSetY","handleSetWidth","handleSetHeight","isEditingControlPoint","dimensionsInspectorProps","onlyBitmapLayers","hasTextLayer","hasLineLayer","hasAllTextLayer","hasSymbolMaster","hasSymbolInstance","hasOneSymbolMaster","hasOneSymbolInstance","views","SymbolInstanceInspector","header","MenubarContent","redoDisabled","undoDisabled","handleChangeTab","newFileHandle","Menubar","useHistory","PageListContent","selectedPageId","pageInfo","canDelete","handleAddPage","PageList","createItemGroup","createThemeTree","pathComponents","existing","newGroup","getGroup","flattenThemeTree","visitThemeTree","createThemeGroups","ContainerGroup","headerTitle","selectedGroup","groupArray","groupElements","SwatchesGroup","TextStylesGroup","ThemeStylesGroup","SymbolsGroup","tab","onNameChange","firstName","selectedSwatches","handleNameChange","selectedSymbols","showSymbolsInspector","TabsContainer","RightContainer","SwatchesToolbar","componentsTab","addSwatch","addThemeStyle","addTextStyle","removeSwatch","removeTextStyle","removeThemeStyle","addComponent","removeComponent","RCKStylePreview","selectedThemeStyleIds","onGroupThemeStyle","onDeleteThemeStyle","onSelectThemeStyle","onDuplicateThemeStyle","handleOnContextMenu","RCKTextStylePreview","measuredLayer","getMaxWidth","rbga","selectedTextStyles","onGroupTextStyle","onDuplicateTextStyle","onDeleteTextStyle","onSelectTextStyle","RCKColorSwatch","selectedSwatchIds","onGroupSwatch","onDeleteSwatch","onSelectSwatch","onDuplicateSwatch","alphaPercent","selectedSymbolsIds","onDeleteSymbol","onGroupSymbol","onSelectSymbol","onDuplicateSymbol","main","ThemeStyles","filterTheme","Swatches","TextStyles","filterText","Symbols","filterSymbols","gridElement","PointModeIcon","cx","cy","SYMBOL_ITEM_PREFIX","ToolbarContent","interactionType","itemSeparatorSize","symbolsMenuItems","isInsertArtboard","isInsertRectangle","isInsertOval","isInsertText","isCreatingPath","isPanning","handleInsertArtboard","handleInsertRectangle","handleInsertOval","handleInsertText","handleEnablePenTool","handleInsertSymbol","Space","Toolbar","LeftSidebar","borderRight","WebkitBackdropFilter","backdropFilter","RightSidebar","borderLeft","MainView","ContentArea","FilterContainer","CanvasTab","layersFilter","setLayersFilter","ThemeTab","Workspace","darkTheme","encoding","statusText","json","resourceCache","useResource","fetchData","Contents","sketchFileData","reducer","handleDispatch","App","ReactDOM","fallback"],"mappings":"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","file":"static/js/main.ee0643e9.chunk.js","sourcesContent":["// These types propagate generics through memo and forwardRef to support generic components\n//\n// https://stackoverflow.com/questions/60386614/how-to-use-props-with-generics-with-react-memo/60389122#60389122\n// https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref/58473012\ndeclare module 'react' {\n  function memo<A, B>(\n    Component: (props: A) => B,\n  ): (props: A) => ReactElement | null;\n\n  function forwardRef<T, P = {}>(\n    render: (props: P, ref: ForwardedRef<T>) => ReactElement | null,\n  ): (props: P & RefAttributes<T>) => ReactElement | null;\n}\n\n// Theme\nexport * from './theme';\nexport * as lightTheme from './theme/light';\nexport * as darkTheme from './theme/dark';\n\n// Components\nexport { default as Button } from './components/Button';\nexport * as Label from './components/Label';\nexport { default as Select } from './components/Select';\nexport { default as ColorInputField } from './components/FillInputField';\nexport * from './components/FillPreviewBackground';\nexport { default as LabeledElementView } from './components/LabeledElementView';\nexport { default as Slider } from './components/Slider';\nexport * as TreeView from './components/TreeView';\nexport { default as Divider } from './components/Divider';\nexport { default as ColorPicker } from './components/ColorPicker';\nexport { default as GradientPicker } from './components/GradientPicker';\nexport * as ListView from './components/ListView';\nexport * as GridView from './components/GridView';\nexport * as Sortable from './components/Sortable';\nexport type { RelativeDropPosition } from './components/Sortable';\nexport * as InputField from './components/InputField';\nexport * as RadioGroup from './components/RadioGroup';\nexport * as Spacer from './components/Spacer';\nexport { default as Tooltip } from './components/Tooltip';\nexport { default as ContextMenu } from './components/ContextMenu';\nexport { default as DropdownMenu } from './components/DropdownMenu';\nexport { default as ScrollArea } from './components/ScrollArea';\nexport { SEPARATOR_ITEM } from './components/internal/Menu';\nexport type { MenuItem, RegularMenuItem } from './components/internal/Menu';\n\n// Contexts\nexport * from './contexts/GlobalInputBlurContext';\n\n// Hooks\nexport * from './hooks/mergeEventHandlers';\nexport * from './hooks/useHover';\n\n// Utils\nexport * from './utils/sketchColor';\nexport * from './utils/createSectionedMenu';\nexport * from './utils/getGradientBackground';\nexport * from './utils/sketchPattern';\nexport { default as withSeparatorElements } from './utils/withSeparatorElements';\n","import { setAutoFreeze } from 'immer';\n\nsetAutoFreeze(false);\n\nexport * as Overrides from './overrides';\nexport * as Layers from './layers';\nexport * as GroupLayouts from './groupLayouts';\nexport * as ExportOptions from './exportOptions';\nexport * as Selectors from './selectors/selectors';\nexport * as TextStyleSelectors from './selectors/textStyleSelectors';\n\nexport type { SelectedPoint } from './reducers/pointReducer';\nexport * from './reducers/workspaceReducer';\nexport * from './reducers/applicationReducer';\nexport * from './reducers/historyReducer';\nexport * from './reducers/interactionReducer';\nexport * from './types';\n\nexport type { SelectionType } from './utils/selection';\n\nexport * as Primitives from './primitives';\nexport * from './primitives';\nexport * from './selection';\nexport * from './checkeredBackground';\nexport * from './snapping';\nexport * from './layers';\nexport * from './sketchFile';\nexport * from './selectors/transformSelectors';\nexport * from './selectors/pointSelectors';\nexport * from './selectors/layerSelectors';\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { ApplicationState } from '../index';\nimport { getSelectedLayers } from './layerSelectors';\nimport {\n  getSelectedLayerStyles,\n  getSelectedThemeTextStyles,\n} from './themeSelectors';\nimport { getCurrentComponentsTab, getCurrentTab } from './workspaceSelectors';\n\nexport const getSelectedStyles = (state: ApplicationState): Sketch.Style[] => {\n  const currentTab = getCurrentTab(state);\n  const currentComponentsTab = getCurrentComponentsTab(state);\n\n  return currentTab === 'canvas'\n    ? getSelectedLayers(state).flatMap((layer) =>\n        layer.style ? [layer.style] : [],\n      )\n    : currentComponentsTab === 'layerStyles'\n    ? getSelectedLayerStyles(state).map((style) => style.value)\n    : getSelectedThemeTextStyles(state).map((style) => style.value);\n};\n\nexport function visitStyleColors(\n  style: Sketch.Style,\n  f: (color: Sketch.Color) => void,\n): void {\n  if (style?.textStyle?.encodedAttributes.MSAttributedStringColorAttribute) {\n    f(style?.textStyle?.encodedAttributes.MSAttributedStringColorAttribute);\n  }\n  style?.fills?.forEach((fill) => f(fill.color));\n  style?.borders?.forEach((border) => f(border.color));\n  style?.shadows?.forEach((shadow) => f(shadow.color));\n  style?.innerShadows.forEach((fill) => f(fill.color));\n}\n\nexport function visitLayerColors(\n  layer: Sketch.AnyLayer,\n  f: (color: Sketch.Color) => void,\n) {\n  if (layer.style) visitStyleColors(layer.style, f);\n\n  if (layer._class === 'text') {\n    const attributes = layer.attributedString.attributes;\n    if (attributes) {\n      attributes.forEach((a) => {\n        if (a.attributes.MSAttributedStringColorAttribute)\n          f(a.attributes.MSAttributedStringColorAttribute);\n      });\n    }\n  }\n}\n","import { Point } from 'noya-geometry';\nimport { decodeCurvePoint } from 'noya-state';\nimport { ApplicationState, Layers } from '../index';\nimport { SelectedControlPoint } from '../reducers/applicationReducer';\nimport { SelectedPoint } from '../reducers/pointReducer';\nimport { getCurrentPage } from './pageSelectors';\nimport {\n  getBoundingRectMap,\n  getIndexPathOfOpenShapeLayer,\n  isPointInRange,\n  getSelectedLayers,\n} from './selectors';\n\ntype PathElement =\n  | {\n      type: 'point';\n      value: SelectedPoint;\n    }\n  | {\n      type: 'controlPoint';\n      value: SelectedControlPoint;\n    };\n\nexport function canClosePath(state: ApplicationState, element: SelectedPoint) {\n  if (state.keyModifiers.shiftKey) return false;\n\n  const [layerId, index] = element;\n\n  const layer = Layers.find(\n    getCurrentPage(state),\n    (layer) => layer.do_objectID === layerId,\n  );\n\n  if (!layer || !Layers.isPointsLayer(layer)) return false;\n\n  // A path needs at least 2 points to be closed.\n  // TODO: Don't allow closing a straight line segment with 2 points.\n  if (layer.points.length < 2) return false;\n\n  const selectedPoint = getIndexPathOfOpenShapeLayer(state);\n\n  if (!selectedPoint) return false;\n\n  const lastIndex = layer.points.length - 1;\n\n  return (\n    (index === lastIndex && selectedPoint.pointIndex === 0) ||\n    (index === 0 && selectedPoint.pointIndex === lastIndex)\n  );\n}\n\nexport const getCursorForEditPathMode = (\n  state: ApplicationState,\n  point: Point,\n) => {\n  const elementAtPoint = getPathElementAtPoint(state, point);\n  if (elementAtPoint) {\n    return elementAtPoint.type === 'point' &&\n      canClosePath(state, elementAtPoint.value)\n      ? 'pointer'\n      : 'move';\n  } else if (getIndexPathOfOpenShapeLayer(state)) {\n    return 'crosshair';\n  } else {\n    return 'default';\n  }\n};\n\nexport function getPathElementAtPoint(\n  state: ApplicationState,\n  point: Point,\n): PathElement | undefined {\n  let selectedPoint: SelectedPoint | undefined = undefined;\n  let selectedControlPoint: SelectedControlPoint | undefined;\n\n  const boundingRects = getBoundingRectMap(\n    getCurrentPage(state),\n    state.selectedObjects,\n    {\n      clickThroughGroups: true,\n      includeArtboardLayers: false,\n      includeHiddenLayers: false,\n    },\n  );\n\n  getSelectedLayers(state)\n    .filter(Layers.isPointsLayer)\n    .forEach((layer) => {\n      const boundingRect = boundingRects[layer.do_objectID];\n      layer.points.forEach((curvePoint, index) => {\n        const decodedPoint = decodeCurvePoint(curvePoint, boundingRect);\n\n        if (isPointInRange(decodedPoint.point, point)) {\n          selectedPoint = [layer.do_objectID, index];\n        } else if (isPointInRange(decodedPoint.curveTo, point)) {\n          selectedControlPoint = {\n            layerId: layer.do_objectID,\n            pointIndex: index,\n            controlPointType: 'curveTo',\n          };\n        } else if (isPointInRange(decodedPoint.curveFrom, point)) {\n          selectedControlPoint = {\n            layerId: layer.do_objectID,\n            pointIndex: index,\n            controlPointType: 'curveFrom',\n          };\n        }\n      });\n    });\n  if (selectedPoint) {\n    return { type: 'point', value: selectedPoint };\n  } else if (selectedControlPoint) {\n    return { type: 'controlPoint', value: selectedControlPoint };\n  } else {\n    return undefined;\n  }\n}\n","export * from './isShallowEqual';\nexport * from './isDeepEqual';\nexport * from './isNumberEqual';\nexport * from './zip';\nexport * from './clamp';\nexport * from './sum';\nexport * from './round';\nexport * from './windowsOf';\nexport * from './sortBy';\nexport * from './chunkBy';\nexport * from './groupBy';\nexport * from './getIncrementedName';\nexport * from './interpolate';\nexport * from './rotate';\nexport * from './invert';\nexport * from './base64';\nexport * from './utf16';\nexport * from './fileType';\nexport * from './memoize';\nexport * as delimitedPath from './delimitedPath';\n\n// Consider moving these to a more React-specific package\nexport * from './PromiseState';\nexport * from './SuspendedValue';\n\n// These are exposed for simpler dependency injection in tests\n// Consider moving to a separate package\nlet PATH_TO_WASM = '/wasm/';\n\nexport function getPathToWasm() {\n  return PATH_TO_WASM;\n}\n\nexport function setPathToWasm(path: string) {\n  PATH_TO_WASM = path + '/';\n}\n\nexport { v4 as uuid } from 'uuid';\n","export * from './types';\nexport * from './utils';\nexport * from './point';\nexport * from './rect';\nexport * from './resize';\nexport * from './AffineTransform';\n","import { useGlobalInputBlurTrigger } from 'noya-designsystem';\nimport { ApplicationState, WorkspaceAction, WorkspaceState } from 'noya-state';\nimport {\n  createContext,\n  memo,\n  ReactNode,\n  useCallback,\n  useContext,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n} from 'react';\n\nexport type Dispatcher = (action: WorkspaceAction) => void;\n\nexport type FlatDispatcher = (...args: WorkspaceAction) => void;\n\nconst StateContext = createContext<WorkspaceState | undefined>(undefined);\n\nconst noop = () => {};\n\nconst DispatchContext = createContext<Dispatcher>(noop);\n\n/**\n * We provide `state` and `dispatch` as separate contexts, to reducer re-rendering\n * for components that only need `dispatch`.\n */\nexport const StateProvider = memo(function StateProvider({\n  state,\n  dispatch,\n  children,\n}: {\n  state: WorkspaceState;\n  dispatch?: Dispatcher;\n  children?: ReactNode;\n}) {\n  return (\n    <StateContext.Provider value={state}>\n      <DispatchContext.Provider value={dispatch ?? noop}>\n        {children}\n      </DispatchContext.Provider>\n    </StateContext.Provider>\n  );\n});\n\n/**\n * This should only be used to propagate state between React reconcilers\n */\nexport const useWorkspaceState = (): WorkspaceState => {\n  const value = useContext(StateContext);\n\n  // If this happens, we'll conditionally call hooks afterward\n  // TODO: Is there a better solution?\n  if (!value) {\n    throw new Error(`Missing StateProvider`);\n  }\n\n  return value;\n};\n\n/**\n * Components should use this to update the application's state. The dispatch\n * function is referentially stable, so won't cause unnecessary re-renders.\n */\nexport const useDispatch = (): FlatDispatcher => {\n  const dispatch = useContext(DispatchContext);\n\n  const blurTrigger = useGlobalInputBlurTrigger();\n\n  // Simplify the dispatch function by flattening our action tuple\n  return useCallback(\n    (...args: WorkspaceAction) => {\n      // When changing selection, trigger any pending updates in input fields\n      if (\n        args[0] === 'selectLayer' ||\n        args[0] === 'selectPage' ||\n        args[0] === 'setTab'\n      ) {\n        blurTrigger();\n      }\n\n      dispatch(args);\n    },\n    [dispatch, blurTrigger],\n  );\n};\n\n/**\n * Get the application state, and a dispatch function to modify it.\n *\n * Only \"container\" components should use this, while \"presentational\" components\n * should instead be passed their data via props.\n */\nexport const useApplicationState = (): [ApplicationState, FlatDispatcher] => {\n  const state = useWorkspaceState();\n  const dispatch = useDispatch();\n\n  return useMemo(() => [state.history.present, dispatch], [\n    state.history.present,\n    dispatch,\n  ]);\n};\n\n/**\n * Get a snapshot of the current state wrapped in a ref. The ref is set during\n * the `useLayoutEffect` phase of the React lifecycle.\n *\n * We do this to avoid excessively re-rendering components that need to access\n * the entire state in event handlers.\n */\nexport const useGetWorkspaceStateSnapshot = (): (() => WorkspaceState) => {\n  const state = useWorkspaceState();\n\n  const stateSnapshot = useRef<WorkspaceState>(state);\n\n  useLayoutEffect(() => {\n    stateSnapshot.current = state;\n  }, [state]);\n\n  return useCallback(() => stateSnapshot.current, []);\n};\n\nexport const useGetStateSnapshot = (): (() => ApplicationState) => {\n  const getWorkspaceStateSnapshot = useGetWorkspaceStateSnapshot();\n\n  return useCallback(() => getWorkspaceStateSnapshot().history.present, [\n    getWorkspaceStateSnapshot,\n  ]);\n};\n\nexport function useSelector<Projection>(\n  selector: (state: ApplicationState) => Projection,\n) {\n  const [state] = useApplicationState();\n\n  return useMemo(() => selector(state), [selector, state]);\n}\n","import { LayerHighlight } from 'noya-state';\nimport { useCallback, useMemo } from 'react';\nimport { useWorkspaceState, useDispatch } from 'noya-app-state-context';\n\nexport function useWorkspace() {\n  const state = useWorkspaceState();\n  const dispatch = useDispatch();\n\n  const {\n    fileHandle,\n    highlightedLayer,\n    canvasSize,\n    canvasInsets,\n    preferences,\n  } = state;\n\n  const setCanvasSize = useCallback(\n    (\n      size: { width: number; height: number },\n      insets: { left: number; right: number },\n    ) => {\n      dispatch('setCanvasSize', size, insets);\n    },\n    [dispatch],\n  );\n\n  const setShowRulers = useCallback(\n    (value: boolean) => dispatch('setShowRulers', value),\n    [dispatch],\n  );\n\n  const highlightLayer = useCallback(\n    (highlight?: LayerHighlight) => dispatch('highlightLayer', highlight),\n    [dispatch],\n  );\n\n  return useMemo(\n    () => ({\n      canvasInsets,\n      canvasSize,\n      fileHandle,\n      highlightedLayer,\n      highlightLayer,\n      preferences,\n      setCanvasSize,\n      setShowRulers,\n    }),\n    [\n      canvasInsets,\n      canvasSize,\n      fileHandle,\n      highlightedLayer,\n      highlightLayer,\n      preferences,\n      setCanvasSize,\n      setShowRulers,\n    ],\n  );\n}\n","import { Point } from 'noya-geometry';\n\nexport const PointString = {\n  decode(pointString: string): Point {\n    const [x, y] = pointString.slice(1, -1).split(',');\n\n    return { x: parseFloat(x), y: parseFloat(y) };\n  },\n\n  encode({ x, y }: Point): string {\n    return `{${x.toString()},${y.toString()}}`;\n  },\n};\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { uuid } from 'noya-utils';\n\nexport { PointString } from './PointString';\nexport * from './debugDescription';\n\ntype ModelOptions<T> = Partial<Omit<T, '_class'>>;\n\n// We don't {...spread} options in order to preserve property order.\n// This makes colors a little nicer to read in logs/snapshots.\nfunction color(options?: ModelOptions<Sketch.Color>): Sketch.Color {\n  return {\n    red: options?.red ?? 0,\n    green: options?.green ?? 0,\n    blue: options?.blue ?? 0,\n    alpha: options?.alpha ?? 1,\n    _class: Sketch.ClassValue.Color,\n  };\n}\n\nfunction rect(options?: ModelOptions<Sketch.Rect>): Sketch.Rect {\n  return {\n    x: options?.x ?? 0,\n    y: options?.y ?? 0,\n    width: options?.width ?? 0,\n    height: options?.height ?? 0,\n    constrainProportions: false,\n    _class: Sketch.ClassValue.Rect,\n  };\n}\n\nfunction curvePoint(\n  options?: ModelOptions<Sketch.CurvePoint>,\n): Sketch.CurvePoint {\n  return {\n    cornerRadius: 0,\n    curveFrom: '{0, 0}',\n    curveMode: Sketch.CurveMode.Straight,\n    curveTo: '{0, 0}',\n    hasCurveFrom: false,\n    hasCurveTo: false,\n    point: '{0, 0}',\n    ...options,\n    _class: Sketch.ClassValue.CurvePoint,\n  };\n}\n\nfunction graphicsContextSettings(\n  options?: ModelOptions<Sketch.GraphicsContextSettings>,\n): Sketch.GraphicsContextSettings {\n  return {\n    blendMode: Sketch.BlendMode.Normal,\n    opacity: 1,\n    ...options,\n    _class: Sketch.ClassValue.GraphicsContextSettings,\n  };\n}\n\nfunction gradientStop(\n  options?: ModelOptions<Sketch.GradientStop>,\n): Sketch.GradientStop {\n  return {\n    position: 0,\n    color: color(),\n    ...options,\n    _class: Sketch.ClassValue.GradientStop,\n  };\n}\n\nfunction gradient(options?: ModelOptions<Sketch.Gradient>): Sketch.Gradient {\n  return {\n    elipseLength: 0,\n    from: '{0.5, 0}',\n    gradientType: 0,\n    to: '{0.5, 1}',\n    stops: [\n      gradientStop({\n        position: 0,\n        color: color({ red: 1, green: 1, blue: 1 }),\n      }),\n      gradientStop({\n        position: 1,\n        color: color({ red: 0, green: 0, blue: 0 }),\n      }),\n    ],\n    ...options,\n    _class: Sketch.ClassValue.Gradient,\n  };\n}\n\nfunction border(options?: ModelOptions<Sketch.Border>): Sketch.Border {\n  return {\n    isEnabled: true,\n    fillType: Sketch.FillType.Color,\n    color: color(),\n    contextSettings: graphicsContextSettings(),\n    gradient: gradient(),\n    position: Sketch.BorderPosition.Center,\n    thickness: 1,\n    ...options,\n    _class: Sketch.ClassValue.Border,\n  };\n}\n\nfunction fill(options?: ModelOptions<Sketch.Fill>): Sketch.Fill {\n  return {\n    isEnabled: true,\n    fillType: Sketch.FillType.Color,\n    color: color(),\n    contextSettings: graphicsContextSettings(),\n    gradient: gradient(),\n    noiseIndex: 0,\n    noiseIntensity: 0,\n    patternFillType: Sketch.PatternFillType.Fill,\n    patternTileScale: 1,\n    ...options,\n    _class: Sketch.ClassValue.Fill,\n  };\n}\n\nfunction shadow(options?: ModelOptions<Sketch.Shadow>): Sketch.Shadow {\n  return {\n    isEnabled: true,\n    color: color(),\n    contextSettings: graphicsContextSettings(),\n    blurRadius: 0,\n    offsetX: 0,\n    offsetY: 0,\n    spread: 0,\n    ...options,\n    _class: Sketch.ClassValue.Shadow,\n  };\n}\n\nfunction blur(options?: ModelOptions<Sketch.Blur>): Sketch.Blur {\n  return {\n    isEnabled: false,\n    center: '{0.5, 0.5}',\n    motionAngle: 0,\n    radius: 10,\n    saturation: 1,\n    type: Sketch.BlurType.Gaussian,\n    ...options,\n    _class: Sketch.ClassValue.Blur,\n  };\n}\n\nfunction borderOptions(\n  options?: ModelOptions<Sketch.BorderOptions>,\n): Sketch.BorderOptions {\n  return {\n    isEnabled: true,\n    dashPattern: [],\n    lineCapStyle: Sketch.LineCapStyle.Butt,\n    lineJoinStyle: Sketch.LineJoinStyle.Miter,\n    ...options,\n    _class: Sketch.ClassValue.BorderOptions,\n  };\n}\n\nfunction colorControls(\n  options?: ModelOptions<Sketch.ColorControls>,\n): Sketch.ColorControls {\n  return {\n    isEnabled: true,\n    brightness: 0,\n    contrast: 1,\n    hue: 0,\n    saturation: 1,\n    ...options,\n    _class: Sketch.ClassValue.ColorControls,\n  };\n}\n\nfunction exportOptions(\n  options?: ModelOptions<Sketch.ExportOptions>,\n): Sketch.ExportOptions {\n  return {\n    includedLayerIds: [],\n    layerOptions: 0,\n    shouldTrim: false,\n    exportFormats: [],\n    ...options,\n    _class: Sketch.ClassValue.ExportOptions,\n  };\n}\n\nfunction fontDescriptor(\n  options?: ModelOptions<Sketch.FontDescriptor>,\n): Sketch.FontDescriptor {\n  return {\n    attributes: {\n      name: 'Helvetica',\n      size: 18,\n    },\n    ...options,\n    _class: Sketch.ClassValue.FontDescriptor,\n  };\n}\n\nfunction paragraphStyle(\n  options?: ModelOptions<Sketch.ParagraphStyle>,\n): Sketch.ParagraphStyle {\n  return {\n    alignment: Sketch.TextHorizontalAlignment.Left,\n    ...options,\n    _class: Sketch.ClassValue.ParagraphStyle,\n  };\n}\n\nfunction encodedAttributes(\n  options?: ModelOptions<Sketch.TextStyle['encodedAttributes']>,\n): Sketch.TextStyle['encodedAttributes'] {\n  return {\n    MSAttributedStringFontAttribute: fontDescriptor(),\n    MSAttributedStringColorAttribute: color(),\n    textStyleVerticalAlignmentKey: Sketch.TextVerticalAlignment.Top,\n    paragraphStyle: paragraphStyle(),\n    ...options,\n  };\n}\n\nfunction textStyle(options?: ModelOptions<Sketch.TextStyle>): Sketch.TextStyle {\n  return {\n    verticalAlignment: Sketch.TextVerticalAlignment.Top,\n    encodedAttributes: encodedAttributes(),\n    ...options,\n    _class: Sketch.ClassValue.TextStyle,\n  };\n}\n\nfunction style(options?: ModelOptions<Sketch.Style>): Sketch.Style {\n  return {\n    do_objectID: options?.do_objectID ?? uuid(),\n    endMarkerType: Sketch.MarkerType.OpenArrow,\n    miterLimit: 10,\n    startMarkerType: Sketch.MarkerType.OpenArrow,\n    windingRule: Sketch.WindingRule.EvenOdd,\n    blur: blur(),\n    borderOptions: borderOptions(),\n    borders: [],\n    colorControls: colorControls(),\n    contextSettings: graphicsContextSettings(),\n    fills: [],\n    innerShadows: [],\n    shadows: [],\n    ...options,\n    _class: Sketch.ClassValue.Style,\n  };\n}\n\nfunction newLayerBase(options?: { do_objectID?: string }) {\n  return {\n    do_objectID: options?.do_objectID ?? uuid(),\n    booleanOperation: Sketch.BooleanOperation.None,\n    isFixedToViewport: false,\n    isFlippedHorizontal: false,\n    isFlippedVertical: false,\n    isLocked: false,\n    isVisible: true,\n    layerListExpandedType: Sketch.LayerListExpanded.Undecided,\n    nameIsFixed: false,\n    resizingConstraint: 63,\n    resizingType: Sketch.ResizeType.Stretch,\n    rotation: 0,\n    shouldBreakMaskChain: false,\n    exportOptions: exportOptions(),\n    frame: rect(),\n    clippingMaskMode: 0,\n    hasClippingMask: false,\n    edited: false,\n    isClosed: true,\n    pointRadiusBehaviour: Sketch.PointsRadiusBehaviour.Rounded,\n  };\n}\n\nfunction rectangle(options?: ModelOptions<Sketch.Rectangle>): Sketch.Rectangle {\n  return {\n    ...newLayerBase(options),\n    name: 'Rectangle',\n    style: style(),\n    points: [\n      curvePoint({\n        curveFrom: '{0, 0}',\n        curveTo: '{0, 0}',\n        point: '{0, 0}',\n        cornerRadius: options?.fixedRadius ?? 0,\n      }),\n      curvePoint({\n        curveFrom: '{1, 0}',\n        curveTo: '{1, 0}',\n        point: '{1, 0}',\n        cornerRadius: options?.fixedRadius ?? 0,\n      }),\n      curvePoint({\n        curveFrom: '{1, 1}',\n        curveTo: '{1, 1}',\n        point: '{1, 1}',\n        cornerRadius: options?.fixedRadius ?? 0,\n      }),\n      curvePoint({\n        curveFrom: '{0, 1}',\n        curveTo: '{0, 1}',\n        point: '{0, 1}',\n        cornerRadius: options?.fixedRadius ?? 0,\n      }),\n    ],\n    fixedRadius: 0,\n    needsConvertionToNewRoundCorners: false,\n    hasConvertedToNewRoundCorners: true,\n    ...options,\n    _class: Sketch.ClassValue.Rectangle,\n  };\n}\n\nfunction oval(options?: ModelOptions<Sketch.Oval>): Sketch.Oval {\n  return {\n    ...newLayerBase(options),\n    name: 'Oval',\n    style: style(),\n    points: [\n      curvePoint({\n        curveFrom: '{0.77614237490000004, 1}',\n        curveMode: Sketch.CurveMode.Mirrored,\n        curveTo: '{0.22385762510000001, 1}',\n        hasCurveFrom: true,\n        hasCurveTo: true,\n        point: '{0.5, 1}',\n      }),\n      curvePoint({\n        curveFrom: '{1, 0.22385762510000001}',\n        curveMode: Sketch.CurveMode.Mirrored,\n        curveTo: '{1, 0.77614237490000004}',\n        hasCurveFrom: true,\n        hasCurveTo: true,\n        point: '{1, 0.5}',\n      }),\n      curvePoint({\n        curveFrom: '{0.22385762510000001, 0}',\n        curveMode: Sketch.CurveMode.Mirrored,\n        curveTo: '{0.77614237490000004, 0}',\n        hasCurveFrom: true,\n        hasCurveTo: true,\n        point: '{0.5, 0}',\n      }),\n      curvePoint({\n        curveFrom: '{0, 0.77614237490000004}',\n        curveMode: Sketch.CurveMode.Mirrored,\n        curveTo: '{0, 0.22385762510000001}',\n        hasCurveFrom: true,\n        hasCurveTo: true,\n        point: '{0, 0.5}',\n      }),\n    ],\n    ...options,\n    _class: Sketch.ClassValue.Oval,\n  };\n}\n\nfunction shapePath(options?: ModelOptions<Sketch.ShapePath>): Sketch.ShapePath {\n  return {\n    ...newLayerBase(options),\n    name: 'Path',\n    points: [],\n    style: style(),\n    ...options,\n    _class: Sketch.ClassValue.ShapePath,\n  };\n}\n\nfunction shapeGroup(\n  options?: ModelOptions<Sketch.ShapeGroup>,\n): Sketch.ShapeGroup {\n  return {\n    ...newLayerBase(options),\n    name: 'Path',\n    style: style(),\n    hasClickThrough: true,\n    layers: [],\n    windingRule: Sketch.WindingRule.EvenOdd,\n    ...options,\n    _class: Sketch.ClassValue.ShapeGroup,\n  };\n}\n\nconst CHECKERED_BACKGROUND = `iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAQMAAADaua+7AAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAABNJREFUCNdjYOD/TxL+/4GBFAwAvMsj3bQ3H74AAAAASUVORK5CYII=`;\n\nfunction dataReference(options?: ModelOptions<Sketch.DataRef>): Sketch.DataRef {\n  return {\n    _ref_class: 'MSImageData',\n    _ref: '',\n    data: {\n      _data: CHECKERED_BACKGROUND,\n    },\n    sha1: {\n      _data: 'e17bf8d6e2e327a621e67be822bb4352949bded3',\n    },\n    ...options,\n    _class: Sketch.ClassValue.MSJSONOriginalDataReference,\n  };\n}\n\nfunction fileReference(options: Pick<Sketch.FileRef, '_ref'>): Sketch.FileRef {\n  return {\n    _ref_class: 'MSImageData',\n    _ref: options._ref,\n    _class: Sketch.ClassValue.MSJSONFileReference,\n  };\n}\n\nfunction bitmap(options?: ModelOptions<Sketch.Bitmap>): Sketch.Bitmap {\n  return {\n    ...newLayerBase(options),\n    name: 'Image',\n    style: style(),\n    clippingMask: '{{0, 0}, {1, 1}}',\n    fillReplacesImage: false,\n    image: dataReference(),\n    intendedDPI: 72,\n    ...options,\n    _class: Sketch.ClassValue.Bitmap,\n  };\n}\n\nfunction stringAttribute(\n  options?: ModelOptions<Sketch.StringAttribute>,\n): Sketch.StringAttribute {\n  return {\n    location: 0,\n    length: 0,\n    attributes: {\n      MSAttributedStringFontAttribute: fontDescriptor(),\n      MSAttributedStringColorAttribute: color(),\n      textStyleVerticalAlignmentKey: Sketch.TextVerticalAlignment.Top,\n      paragraphStyle: paragraphStyle(),\n    },\n    ...options,\n    _class: Sketch.ClassValue.StringAttribute,\n  };\n}\n\nfunction attributedString(\n  options?: ModelOptions<Sketch.AttributedString>,\n): Sketch.AttributedString {\n  return {\n    string: '',\n    attributes: [stringAttribute()],\n    ...options,\n    _class: Sketch.ClassValue.AttributedString,\n  };\n}\n\nfunction text(options?: ModelOptions<Sketch.Text>): Sketch.Text {\n  return {\n    ...newLayerBase(options),\n    name: 'Text',\n    style: style({\n      textStyle: textStyle(),\n    }),\n    attributedString: attributedString(),\n    automaticallyDrawOnUnderlyingPath: false,\n    dontSynchroniseWithSymbol: false,\n    glyphBounds: '{{0, 5}, {126, 17}}',\n    lineSpacingBehaviour: 3,\n    textBehaviour: Sketch.TextBehaviour.Flexible,\n    ...options,\n    _class: Sketch.ClassValue.Text,\n  };\n}\n\nfunction group(options?: ModelOptions<Sketch.Group>): Sketch.Group {\n  return {\n    ...newLayerBase(options),\n    name: 'Group',\n    style: style(),\n    hasClickThrough: false,\n    groupLayout: { _class: 'MSImmutableFreeformGroupLayout' },\n    layers: [],\n    ...options,\n    _class: Sketch.ClassValue.Group,\n  };\n}\n\nfunction rulerData(options?: ModelOptions<Sketch.RulerData>): Sketch.RulerData {\n  return {\n    base: 0,\n    guides: [],\n    ...options,\n    _class: Sketch.ClassValue.RulerData,\n  };\n}\n\nfunction artboard(options?: ModelOptions<Sketch.Artboard>): Sketch.Artboard {\n  return {\n    ...newLayerBase(options),\n    name: 'Artboard',\n    hasClickThrough: false,\n    groupLayout: { _class: 'MSImmutableFreeformGroupLayout' },\n    layers: [],\n    hasBackgroundColor: false,\n    includeBackgroundColorInExport: true,\n    isFlowHome: false,\n    presetDictionary: {},\n    resizesContent: false,\n    backgroundColor: color({ blue: 1, green: 1, red: 1 }),\n    horizontalRulerData: rulerData(),\n    verticalRulerData: rulerData(),\n    // includeInCloudUpload: true,\n    ...options,\n    _class: Sketch.ClassValue.Artboard,\n  };\n}\n\nfunction page(options?: ModelOptions<Sketch.Page>): Sketch.Page {\n  return {\n    ...newLayerBase(options),\n    name: 'Page',\n    hasClickThrough: false,\n    groupLayout: { _class: 'MSImmutableFreeformGroupLayout' },\n    layers: [],\n    horizontalRulerData: rulerData(),\n    verticalRulerData: rulerData(),\n    // includeInCloudUpload: true,\n    ...options,\n    _class: Sketch.ClassValue.Page,\n  };\n}\n\nfunction symbolInstance(\n  options: ModelOptions<Sketch.SymbolInstance> &\n    Pick<Sketch.SymbolInstance, 'symbolID'>,\n): Sketch.SymbolInstance {\n  return {\n    ...newLayerBase(options),\n    name: 'Symbol',\n    style: style(),\n    horizontalSpacing: 0,\n    scale: 1,\n    verticalSpacing: 0,\n    overrideValues: [],\n    ...options,\n    _class: Sketch.ClassValue.SymbolInstance,\n  };\n}\n\nfunction inferredGroupLayout(\n  options?: ModelOptions<Sketch.InferredGroupLayout>,\n): Sketch.InferredGroupLayout {\n  return {\n    axis: Sketch.InferredLayoutAxis.Horizontal,\n    layoutAnchor: Sketch.InferredLayoutAnchor.Middle,\n    maxSize: 0,\n    minSize: 0,\n    ...options,\n    _class: Sketch.ClassValue.MSImmutableInferredGroupLayout,\n  };\n}\n\nfunction freeformGroupLayout(): Sketch.FreeformGroupLayout {\n  return {\n    _class: Sketch.ClassValue.MSImmutableFreeformGroupLayout,\n  };\n}\n\nfunction symbolMaster(\n  options?: ModelOptions<Sketch.SymbolMaster>,\n): Sketch.SymbolMaster {\n  return {\n    ...newLayerBase(options),\n    name: 'Symbol',\n    style: style(),\n    hasClickThrough: true,\n    groupLayout: inferredGroupLayout(),\n    layers: [],\n    hasBackgroundColor: false,\n    includeBackgroundColorInExport: false,\n    isFlowHome: false,\n    presetDictionary: {},\n    resizesContent: false,\n    backgroundColor: color({ red: 1, green: 1, blue: 1 }),\n    horizontalRulerData: rulerData(),\n    verticalRulerData: rulerData(),\n    allowsOverrides: true,\n    includeBackgroundColorInInstance: false,\n    overrideProperties: [],\n    symbolID: options?.symbolID ?? uuid(),\n    ...options,\n    _class: Sketch.ClassValue.SymbolMaster,\n  };\n}\n\nfunction meta(options?: ModelOptions<Sketch.Meta>): Sketch.Meta {\n  const app = Sketch.BundleId.PublicRelease;\n  const build = 109185;\n  const commit = '1cee2bd6f09ef2258eb62d151bbe50dd6c3af3f2';\n  const version = 134;\n  const variant = 'NONAPPSTORE';\n  const appVersion = '70.4';\n  const compatibilityVersion = 99;\n\n  // We don't include `fonts` or `pagesAndArtboards` since they don't seem\n  // to be necessary for Sketch to load the resulting file\n  return {\n    app,\n    appVersion,\n    autosaved: 0,\n    build,\n    commit,\n    compatibilityVersion,\n    created: {\n      commit,\n      appVersion,\n      build,\n      app,\n      compatibilityVersion,\n      version,\n      variant,\n    },\n    pagesAndArtboards: {},\n    saveHistory: [`${variant}.${build}`],\n    variant,\n    version,\n    ...options,\n  };\n}\n\nfunction createSharedObjectContainer<T extends string>(_class: T) {\n  return {\n    _class,\n    do_objectID: uuid(),\n    objects: [],\n  };\n}\n\nfunction document(options?: ModelOptions<Sketch.Document>): Sketch.Document {\n  return {\n    _class: 'document',\n    do_objectID: uuid(),\n    documentState: { _class: 'documentState' },\n    colorSpace: 0,\n    currentPageIndex: 0,\n    assets: {\n      _class: Sketch.ClassValue.AssetCollection,\n      do_objectID: uuid(),\n      images: [],\n      colorAssets: [],\n      exportPresets: [],\n      gradientAssets: [],\n      imageCollection: {\n        _class: Sketch.ClassValue.ImageCollection,\n        images: {},\n      },\n      colors: [],\n      gradients: [],\n    },\n    fontReferences: [],\n    foreignLayerStyles: [],\n    foreignSwatches: [],\n    foreignSymbols: [],\n    foreignTextStyles: [],\n    layerStyles: createSharedObjectContainer(\n      Sketch.ClassValue.SharedStyleContainer,\n    ),\n    layerTextStyles: createSharedObjectContainer(\n      Sketch.ClassValue.SharedTextStyleContainer,\n    ),\n    sharedSwatches: createSharedObjectContainer(\n      Sketch.ClassValue.SwatchContainer,\n    ),\n    pages: [],\n    // Legacy, not used in new documents\n    layerSymbols: createSharedObjectContainer(\n      Sketch.ClassValue.SymbolContainer,\n    ) as any,\n    ...options,\n  };\n}\n\nfunction user(options?: ModelOptions<Sketch.User>): Sketch.User {\n  return {\n    document: {\n      pageListHeight: 0,\n      pageListCollapsed: Sketch.NumericalBool.False,\n    },\n    ...options,\n  };\n}\n\nexport const SketchModel = {\n  artboard,\n  bitmap,\n  border,\n  borderOptions,\n  color,\n  colorControls,\n  curvePoint,\n  dataReference,\n  document,\n  encodedAttributes,\n  fileReference,\n  fill,\n  fontDescriptor,\n  freeformGroupLayout,\n  gradient,\n  gradientStop,\n  graphicsContextSettings,\n  group,\n  inferredGroupLayout,\n  meta,\n  oval,\n  page,\n  paragraphStyle,\n  rect,\n  rectangle,\n  shadow,\n  shapeGroup,\n  shapePath,\n  style,\n  symbolInstance,\n  symbolMaster,\n  text,\n  textStyle,\n  user,\n};\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  BaseOptions,\n  IndexPath,\n  SKIP,\n  STOP,\n  visit as visitNode,\n  withOptions,\n} from 'tree-visit';\n\nexport type ParentLayer = Extract<Sketch.AnyLayer, { layers: any }>;\n\nexport type ChildLayer = Exclude<\n  Sketch.AnyLayer,\n  { _class: 'artboard' | 'symbolMaster' | 'page' }\n>;\n\nexport type PointsLayer = Extract<Sketch.AnyLayer, { points: any }>;\n\nexport const isParentLayer = (layer: Sketch.AnyLayer): layer is ParentLayer => {\n  switch (layer._class) {\n    case 'artboard':\n    case 'group':\n    case 'page':\n    case 'shapeGroup':\n    case 'symbolMaster':\n      return true;\n    default:\n      return false;\n  }\n};\n\nexport const isChildLayer = (layer: Sketch.AnyLayer): layer is ChildLayer => {\n  return (\n    layer._class !== 'artboard' &&\n    layer._class !== 'symbolMaster' &&\n    layer._class !== 'page'\n  );\n};\n\nexport const isPointsLayer = (layer: Sketch.AnyLayer): layer is PointsLayer => {\n  return 'points' in layer;\n};\n\nexport const isLayerWithEditedProperty = <T extends Sketch.AnyLayer>(\n  layer: Sketch.AnyLayer,\n): layer is T & { edited: boolean } => {\n  return 'edited' in layer;\n};\n\nexport const isPageLayer = (layer: Sketch.AnyLayer): layer is Sketch.Page => {\n  return layer._class === 'page';\n};\n\nexport const isTextLayer = (layer: Sketch.AnyLayer): layer is Sketch.Text => {\n  return layer._class === 'text';\n};\n\nexport const isBitmapLayer = (\n  layer: Sketch.AnyLayer,\n): layer is Sketch.Bitmap => {\n  return layer._class === 'bitmap';\n};\n\nexport const isGroup = (layer: Sketch.AnyLayer): layer is Sketch.Group => {\n  return layer._class === 'group';\n};\n\nexport const isSymbolMaster = (\n  layer: Sketch.AnyLayer,\n): layer is Sketch.SymbolMaster => {\n  return layer._class === 'symbolMaster';\n};\n\nexport const isArtboard = (\n  layer: Sketch.AnyLayer,\n): layer is Sketch.Artboard => {\n  return layer._class === 'artboard';\n};\n\nexport const isSymbolMasterOrArtboard = (\n  layer: Sketch.AnyLayer,\n): layer is Sketch.SymbolMaster | Sketch.Artboard => {\n  return isSymbolMaster(layer) || isArtboard(layer);\n};\n\nexport const isSymbolInstance = (\n  layer: Sketch.AnyLayer,\n): layer is Sketch.SymbolInstance => {\n  return layer._class === 'symbolInstance';\n};\n\nexport const hasTextStyle = (\n  layer: Sketch.Text,\n): layer is Sketch.Text & { style: { textStyle: Sketch.TextStyle } } => {\n  return !!layer.style?.textStyle;\n};\n\nexport const hasInspectableShadow = (layer: Sketch.AnyLayer): boolean => {\n  switch (layer._class) {\n    case 'bitmap':\n    case 'oval':\n    case 'polygon':\n    case 'rectangle':\n    case 'shapeGroup':\n    case 'shapePath':\n    case 'star':\n    case 'triangle':\n    case 'group':\n    case 'symbolInstance':\n    case 'text':\n      return true;\n    case 'page':\n    case 'artboard':\n    case 'MSImmutableHotspotLayer':\n    case 'slice':\n    case 'symbolMaster':\n      return false;\n  }\n};\n\nexport const hasInspectableBorder = (layer: Sketch.AnyLayer): boolean => {\n  switch (layer._class) {\n    case 'bitmap':\n    case 'oval':\n    case 'polygon':\n    case 'rectangle':\n    case 'shapeGroup':\n    case 'shapePath':\n    case 'star':\n    case 'triangle':\n    case 'text':\n      return true;\n    case 'group':\n    case 'symbolInstance':\n    case 'page':\n    case 'artboard':\n    case 'MSImmutableHotspotLayer':\n    case 'slice':\n    case 'symbolMaster':\n      return false;\n  }\n};\n\nexport const getChildren = <T extends Sketch.AnyLayer>(layer: T): T[] => {\n  return isParentLayer(layer) ? (layer.layers as T[]) : [];\n};\n\nexport const getChildrenReversed = <T extends Sketch.AnyLayer>(\n  layer: T,\n): T[] => {\n  return [...getChildren(layer)].reverse();\n};\n\nconst INCLUDE_AND_SKIP = 'include_and_skip';\nconst EXCLUDE_AND_SKIP = 'exclude_and_skip';\n\ntype FindAllPredicate<T> = (\n  node: T,\n  indexPath: IndexPath,\n) => boolean | typeof INCLUDE_AND_SKIP | typeof EXCLUDE_AND_SKIP;\n\nfunction findAllIndexPaths<T>(\n  node: T,\n  options: BaseOptions<T> & {\n    predicate: FindAllPredicate<T>;\n  },\n): IndexPath[] {\n  let found: IndexPath[] = [];\n\n  visitNode(node, {\n    onEnter: (child, indexPath) => {\n      const result = options.predicate(child, indexPath);\n\n      if (result === true || result === INCLUDE_AND_SKIP) {\n        // Copy the indexPath, since indexPath may be mutated\n        found.push([...indexPath]);\n      }\n\n      if (result === EXCLUDE_AND_SKIP || result === INCLUDE_AND_SKIP) {\n        return 'skip';\n      }\n    },\n    getChildren: options.getChildren,\n  });\n\n  return found;\n}\n\nconst findAllLayerIndexPaths = <T extends Sketch.AnyLayer>(\n  node: T,\n  predicate: FindAllPredicate<T>,\n) => {\n  return findAllIndexPaths(node, {\n    getChildren,\n    predicate,\n  });\n};\n\nexport const {\n  visit,\n  find,\n  findAll,\n  findIndexPath,\n  access,\n  accessPath,\n  diagram,\n} = withOptions<Sketch.AnyLayer>({\n  getChildren,\n});\n\n/**\n * An alternative to the `find` method that searches within an array, rather than\n * a single layer.\n *\n * This is useful for searching the top-level pages array.\n */\nexport function findInArray(\n  layers: Sketch.AnyLayer[],\n  predicate: (layer: Sketch.AnyLayer) => boolean,\n): Sketch.AnyLayer | undefined {\n  for (let i = 0; i < layers.length; i++) {\n    const result = find(layers[i], predicate);\n\n    if (result) return result;\n  }\n}\n\nexport const {\n  visit: visitReversed,\n  access: accessReversed,\n  accessPath: accessPathReversed,\n} = withOptions<Sketch.AnyLayer>({\n  getChildren: getChildrenReversed,\n});\n\nexport {\n  SKIP,\n  STOP,\n  INCLUDE_AND_SKIP,\n  EXCLUDE_AND_SKIP,\n  findAllLayerIndexPaths as findAllIndexPaths,\n};\n\nexport function getFixedRadius(layer: Sketch.AnyLayer): number {\n  return layer._class === 'rectangle' ? layer.fixedRadius : 0;\n}\n\nexport function isWithinMaskChain(\n  parent: ParentLayer,\n  reversedChildIndex: number,\n) {\n  const childLayers = [...parent.layers].reverse();\n\n  const layer = childLayers[reversedChildIndex];\n\n  const remainingSiblings = childLayers.slice(reversedChildIndex + 1);\n\n  let isMasked = false;\n\n  if (!layer.shouldBreakMaskChain) {\n    for (let sibling of remainingSiblings) {\n      if (sibling.hasClippingMask) {\n        isMasked = true;\n        break;\n      } else if (sibling.shouldBreakMaskChain) {\n        break;\n      }\n    }\n  }\n\n  return isMasked;\n}\n","export async function generateImageFromPDF(data: Uint8Array): Promise<Blob> {\n  const pdf = await import('pdfjs-dist/legacy/build/pdf');\n  const workerSrc = await import(\n    'pdfjs-dist/legacy/build/pdf.worker.entry' as any\n  );\n\n  pdf.GlobalWorkerOptions.workerSrc = workerSrc;\n\n  const canvas = document.createElement('canvas');\n  const canvasContext = canvas.getContext('2d')!;\n\n  const pdfDocument = await pdf.getDocument(data).promise;\n\n  const page = await pdfDocument.getPage(1);\n\n  // Render the page on a canvas with 100% scale.\n  const viewport = page.getViewport({ scale: 1.0 });\n\n  canvas.width = viewport.width;\n  canvas.height = viewport.height;\n\n  await page.render({\n    canvasContext,\n    viewport,\n    background: 'rgba(0,0,0,0)',\n  }).promise;\n\n  return new Promise((resolve, reject) => {\n    canvas.toBlob((blob) => {\n      if (blob) {\n        resolve(blob);\n      } else {\n        reject('Failed to convert canvas to blob');\n      }\n    });\n  });\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { generateImageFromPDF } from 'noya-pdf';\nimport {\n  createContext,\n  memo,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useReducer,\n} from 'react';\nimport { useApplicationState } from 'noya-app-state-context';\n\ntype ImageCache = Record<string, ArrayBuffer>;\ntype ImageCacheContextValue = [\n  ImageCache,\n  (key: string, value: ArrayBuffer) => void,\n];\n\n// We decode images using a global mutable cache since currently all React CanvasKit\n// elements re-render on every state change, so state/ref gets recreated. When we fix\n// that, we should move the cache into the Provider.\n//\n// TODO: Remove unused images so we don't run out of memory\nconst globalImageCache: ImageCache = {};\n\nconst ImageCacheContext = createContext<ImageCacheContextValue | undefined>(\n  undefined,\n);\n\nexport const ImageCacheProvider = memo(function ImageCacheProvider({\n  children,\n}: {\n  children?: ReactNode;\n}) {\n  const [id, forceUpdate] = useReducer((x) => x + 1, 0);\n\n  const addImageToCache = useCallback((key: string, value: ArrayBuffer) => {\n    globalImageCache[key] = value;\n    forceUpdate();\n  }, []);\n\n  const contextValue = useMemo(\n    (): ImageCacheContextValue => [globalImageCache, addImageToCache],\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [addImageToCache, id],\n  );\n\n  return (\n    <ImageCacheContext.Provider value={contextValue}>\n      {children}\n    </ImageCacheContext.Provider>\n  );\n});\n\nfunction useImageCache(): ImageCacheContextValue {\n  const value = useContext(ImageCacheContext);\n\n  if (!value) {\n    throw new Error('Missing ImageCacheProvider');\n  }\n\n  return value;\n}\n\nexport function useSketchImage(image?: Sketch.FileRef | Sketch.DataRef) {\n  const [state] = useApplicationState();\n  const [imageCache, addImageToCache] = useImageCache();\n\n  const imageData = image\n    ? imageCache[image._ref] || state.sketch.images[image._ref]\n    : undefined;\n\n  const ref = image?._ref;\n\n  useEffect(() => {\n    if (!ref || !ref.endsWith('.pdf') || !imageData || ref in imageCache)\n      return;\n\n    generateImageFromPDF(new Uint8Array(imageData))\n      .then((blob) => blob.arrayBuffer())\n      .then((arrayBuffer) => {\n        addImageToCache(ref, arrayBuffer);\n      });\n  }, [addImageToCache, imageCache, imageData, ref]);\n\n  return imageData;\n}\n","import { toRadians } from 'noya-geometry';\n\n// Descriptions of color filters:\n// https://www.w3.org/TR/filter-effects-1\n\n// Guide to brightness/contrast/saturation matrix:\n// https://docs.rainmeter.net/tips/colormatrix-guide/\n\nconst lumR = 0.2125;\nconst lumG = 0.7154;\nconst lumB = 0.0721;\n\nexport function getSaturationMatrix(s: number) {\n  const sr = lumR * (1 - s);\n  const sg = lumG * (1 - s);\n  const sb = lumB * (1 - s);\n\n  return new Float32Array(\n    [\n      [sr + s, sg, sb, 0, 0],\n      [sr, sg + s, sb, 0, 0],\n      [sr, sg, sb + s, 0, 0],\n      [0, 0, 0, 1, 0],\n    ].flat(),\n  );\n}\n\nexport function getBrightnessMatrix(w: number) {\n  return new Float32Array(\n    [\n      [1, 0, 0, 0, w],\n      [0, 1, 0, 0, w],\n      [0, 0, 1, 0, w],\n      [0, 0, 0, 1, 0],\n    ].flat(),\n  );\n}\n\nexport function getContrastMatrix(c: number) {\n  const t = (1 - c) / 2.0;\n  return new Float32Array(\n    [\n      [c, 0, 0, 0, t],\n      [0, c, 0, 0, t],\n      [0, 0, c, 0, t],\n      [0, 0, 0, 1, 0],\n    ].flat(),\n  );\n}\n\n// Hue rotation matrix code taken from Skia (BSD 3-Clause):\n// https://github.com/google/skia/blob/a1feabd38305ea7f5e3961f96585fbe1f1c00f91/modules/svg/src/SkSVGFeColorMatrix.cpp#L56\nexport function getHueRotationMatrix(degrees: number) {\n  const theta = toRadians(degrees);\n  const c = Math.cos(theta);\n  const s = Math.sin(theta);\n\n  return new Float32Array(\n    [\n      [\n        0.213 + c * 0.787 + s * -0.213,\n        0.715 + c * -0.715 + s * -0.715,\n        0.072 + c * -0.072 + s * 0.928,\n        0,\n        0,\n      ],\n      [\n        0.213 + c * -0.213 + s * 0.143,\n        0.715 + c * 0.285 + s * 0.14,\n        0.072 + c * -0.072 + s * -0.283,\n        0,\n        0,\n      ],\n      [\n        0.213 + c * -0.213 + s * -0.787,\n        0.715 + c * -0.715 + s * 0.715,\n        0.072 + c * 0.928 + s * 0.072,\n        0,\n        0,\n      ],\n      [0, 0, 0, 1, 0],\n    ].flat(),\n  );\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit } from 'canvaskit';\nimport { toDegrees } from 'noya-geometry';\nimport { useCanvasKit } from 'noya-renderer';\nimport { memo, ReactNode, useMemo } from 'react';\nimport { Group } from '../..';\nimport {\n  getBrightnessMatrix,\n  getContrastMatrix,\n  getHueRotationMatrix,\n  getSaturationMatrix,\n} from '../../colorMatrix';\n\nfunction multiplyColorMatrix(\n  CanvasKit: CanvasKit,\n  [first, ...rest]: Float32Array[],\n) {\n  if (!first) return CanvasKit.ColorMatrix.identity();\n\n  return rest.reduce(\n    (result, item) => CanvasKit.ColorMatrix.concat(result, item),\n    first,\n  );\n}\n\ninterface Props {\n  colorControls: Sketch.ColorControls;\n  children: ReactNode;\n}\n\nexport default memo(function ColorControlsGroup({\n  colorControls,\n  children,\n}: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const colorFilter = useMemo(() => {\n    const { isEnabled, hue, saturation, brightness, contrast } = colorControls;\n\n    return isEnabled\n      ? CanvasKit.ColorFilter.MakeMatrix(\n          multiplyColorMatrix(CanvasKit, [\n            getHueRotationMatrix(toDegrees(hue)),\n            getSaturationMatrix(saturation),\n            getBrightnessMatrix(brightness),\n            getContrastMatrix(contrast),\n          ]),\n        )\n      : undefined;\n  }, [CanvasKit, colorControls]);\n\n  return <Group colorFilter={colorFilter}>{children}</Group>;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Group, useCanvasKit } from 'noya-renderer';\nimport { Primitives } from 'noya-state';\nimport React, { memo, ReactNode, useMemo } from 'react';\n\ninterface Props {\n  shadow: Sketch.Shadow;\n  children: ReactNode;\n}\n\nexport default memo(function DropShadowGroup({ shadow, children }: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const imageFilter = useMemo(\n    () =>\n      CanvasKit.ImageFilter.MakeDropShadowOnly(\n        shadow.offsetX,\n        shadow.offsetY,\n        shadow.blurRadius / 2,\n        shadow.blurRadius / 2,\n        Primitives.color(CanvasKit, shadow.color),\n        null,\n      ),\n    [CanvasKit, shadow],\n  );\n\n  return <Group imageFilter={imageFilter}>{children}</Group>;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport * as CanvasKit from 'canvaskit';\nimport { useDeletable, useFill } from 'noya-react-canvaskit';\nimport { Path, useCanvasKit } from 'noya-renderer';\nimport { Primitives } from 'noya-state';\nimport { memo, useMemo } from 'react';\n\nexport default memo(function SketchBorder({\n  path,\n  border,\n}: {\n  path: CanvasKit.Path;\n  border: Sketch.Border;\n}) {\n  const CanvasKit = useCanvasKit();\n\n  const paint = useFill({\n    color: Primitives.color(CanvasKit, border.color),\n  });\n\n  const strokedPath = useMemo(\n    () =>\n      Primitives.getStrokedBorderPath(\n        CanvasKit,\n        path,\n        border.thickness,\n        border.position,\n      ),\n    [CanvasKit, border.position, border.thickness, path],\n  );\n\n  useDeletable(strokedPath);\n\n  return <Path path={strokedPath} paint={paint} />;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { getRectCornerPoints } from 'noya-geometry';\nimport { Primitives } from 'noya-state';\nimport { makePath } from 'noya-react-canvaskit';\nimport { Group, Image, useCanvasKit } from 'noya-renderer';\nimport React, { memo, useMemo } from 'react';\nimport { useSketchImage } from '../../ImageCache';\nimport ColorControlsGroup from '../effects/ColorControlsGroup';\nimport DropShadowGroup from '../effects/DropShadowGroup';\nimport SketchBorder from '../effects/SketchBorder';\n\ninterface Props {\n  layer: Sketch.Bitmap;\n}\n\nexport default memo(function SketchBitmap({ layer }: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const image = useSketchImage(layer.image);\n\n  const paint = useMemo(() => new CanvasKit.Paint(), [CanvasKit]);\n\n  const path = useMemo(() => {\n    const path = makePath(CanvasKit, getRectCornerPoints(layer.frame));\n\n    path.setFillType(CanvasKit.FillType.EvenOdd);\n\n    return path;\n  }, [CanvasKit, layer.frame]);\n\n  if (!layer.style || !image) return null;\n\n  const imageElement = (\n    <Image\n      rect={Primitives.rect(CanvasKit, layer.frame)}\n      image={image}\n      paint={paint}\n    />\n  );\n\n  const borders = (layer.style.borders ?? []).filter((x) => x.isEnabled);\n  const shadows = (layer.style.shadows ?? []).filter((x) => x.isEnabled);\n\n  const element = (\n    <>\n      {shadows.map((shadow, index) => (\n        <DropShadowGroup shadow={shadow} key={`shadow-${index}`}>\n          {imageElement}\n        </DropShadowGroup>\n      ))}\n      <ColorControlsGroup colorControls={layer.style.colorControls}>\n        {imageElement}\n      </ColorControlsGroup>\n      {borders.map((border, index) => (\n        <SketchBorder key={`border-${index}`} path={path} border={border} />\n      ))}\n    </>\n  );\n\n  const opacity = layer.style?.contextSettings?.opacity ?? 1;\n  const needsGroup = opacity < 1 || shadows.length > 0;\n\n  return needsGroup ? <Group opacity={opacity}>{element}</Group> : element;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport * as CanvasKit from 'canvaskit';\nimport { AffineTransform } from 'noya-geometry';\nimport { ClipProps, useDeletable, usePaint } from 'noya-react-canvaskit';\nimport { PaintParameters } from 'noya-react-canvaskit';\nimport { Group, Path, useCanvasKit } from 'noya-renderer';\nimport { memo, useMemo } from 'react';\nimport { Rect, Primitives, getStrokedPath } from 'noya-state';\nimport { useSketchImage } from '../../ImageCache';\nimport SketchBorder from '../effects/SketchBorder';\n\nconst SketchFill = memo(function SketchFill({\n  path,\n  fill,\n  frame,\n}: {\n  path: CanvasKit.Path;\n  fill: Sketch.Fill;\n  frame: Rect;\n}) {\n  const CanvasKit = useCanvasKit();\n\n  const image = useSketchImage(fill.image);\n\n  // TODO: Delete internal gradient shaders on unmount\n  const paint = useMemo(() => Primitives.fill(CanvasKit, fill, frame, image), [\n    CanvasKit,\n    fill,\n    frame,\n    image,\n  ]);\n\n  useDeletable(paint);\n\n  return <Path path={path} paint={paint} />;\n});\n\nconst SketchShadow = memo(function SketchShadow({\n  path,\n  shadow,\n}: {\n  path: CanvasKit.Path;\n  shadow: Sketch.Shadow;\n}) {\n  const CanvasKit = useCanvasKit();\n\n  const paintParameters: PaintParameters = useMemo(\n    () => ({\n      style: CanvasKit.PaintStyle.Fill,\n      color: Primitives.color(CanvasKit, shadow.color),\n      maskFilter: CanvasKit.MaskFilter.MakeBlur(\n        CanvasKit.BlurStyle.Normal,\n        shadow.blurRadius / 2, // Skia blurs seem twice as large as Sketch blurs\n        true,\n      ),\n    }),\n    [CanvasKit, shadow],\n  );\n  const paint = usePaint(paintParameters);\n\n  const transform = useMemo(\n    () => AffineTransform.translation(shadow.offsetX, shadow.offsetY),\n    [shadow.offsetX, shadow.offsetY],\n  );\n\n  return (\n    <Group transform={transform}>\n      <Path path={path} paint={paint} />\n    </Group>\n  );\n});\n\n/**\n * This is a special case of layer shadow. If there are no fills but\n * at least one border, then we draw a shadow just for the border.\n */\nconst SketchBorderShadow = memo(function SketchBorderShadow({\n  path,\n  shadow,\n  borderWidth,\n  borderPosition,\n}: {\n  path: CanvasKit.Path;\n  shadow: Sketch.Shadow;\n  borderWidth: number;\n  borderPosition: Sketch.BorderPosition;\n}) {\n  const CanvasKit = useCanvasKit();\n\n  const strokedPath = useMemo(\n    () =>\n      Primitives.getStrokedBorderPath(\n        CanvasKit,\n        path,\n        borderWidth,\n        borderPosition,\n      ),\n    [CanvasKit, borderPosition, borderWidth, path],\n  );\n\n  return <SketchShadow shadow={shadow} path={strokedPath} />;\n});\n\nconst SketchFillShadow = memo(function SketchFillShadow({\n  path,\n  shadow,\n  borderWidth,\n  borderPosition,\n  shouldClipPath,\n}: {\n  path: CanvasKit.Path;\n  shadow: Sketch.Shadow;\n  borderWidth: number;\n  borderPosition: Sketch.BorderPosition;\n  shouldClipPath: boolean;\n}) {\n  const CanvasKit = useCanvasKit();\n\n  // Spread needs to be multiplied by 2 to match Sketch's behavior\n  const additionalRadius =\n    shadow.spread * 2 +\n    borderWidth *\n      (borderPosition === Sketch.BorderPosition.Outside\n        ? 2\n        : borderPosition === Sketch.BorderPosition.Center\n        ? 1\n        : 0);\n\n  // TODO: We can optimize this: if there's no spread, we don't need to copy the path.\n  // We currently need to copy the path since we use `useDeletable` after, and don't want\n  // to delete a path passed in as a prop.\n  const strokedPath: CanvasKit.Path = getStrokedPath(\n    CanvasKit,\n    path,\n    additionalRadius,\n    CanvasKit.PathOp.Union,\n  );\n\n  useDeletable(strokedPath);\n\n  const clip: ClipProps | undefined = useMemo(\n    () =>\n      shouldClipPath\n        ? {\n            path: path,\n            op: CanvasKit.ClipOp.Difference,\n          }\n        : undefined,\n    [CanvasKit.ClipOp.Difference, path, shouldClipPath],\n  );\n\n  return (\n    <Group clip={clip}>\n      <SketchShadow shadow={shadow} path={strokedPath} />\n    </Group>\n  );\n});\n\ninterface Props {\n  layer:\n    | Sketch.Rectangle\n    | Sketch.Oval\n    | Sketch.Triangle\n    | Sketch.Star\n    | Sketch.Polygon\n    | Sketch.ShapePath;\n}\n\nexport default memo(function SketchShape({ layer }: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const path = Primitives.path(\n    CanvasKit,\n    layer.points,\n    layer.frame,\n    layer.isClosed,\n  );\n\n  path.setFillType(CanvasKit.FillType.EvenOdd);\n\n  if (!layer.style) return null;\n\n  const fills = (layer.style.fills ?? []).filter((x) => x.isEnabled);\n  const borders = (layer.style.borders ?? [])\n    .filter((x) => x.isEnabled)\n    .reverse();\n  const shadows = (layer.style.shadows ?? [])\n    .filter((x) => x.isEnabled)\n    .reverse();\n\n  const borderWidth = Math.max(0, ...borders.map((border) => border.thickness));\n  const borderPosition =\n    borders.length > 0 ? borders[0].position : Sketch.BorderPosition.Inside;\n\n  const elements = (\n    <>\n      {shadows.map((shadow, index) =>\n        fills.length === 0 && borders.length > 0 ? (\n          <SketchBorderShadow\n            key={`shadow-${index}`}\n            shadow={shadow}\n            path={path}\n            borderWidth={borderWidth}\n            borderPosition={borderPosition}\n          />\n        ) : (\n          <SketchFillShadow\n            key={`shadow-${index}`}\n            shadow={shadow}\n            path={path}\n            shouldClipPath={fills.length > 0}\n            borderWidth={borderWidth}\n            borderPosition={borderPosition}\n          />\n        ),\n      )}\n      {fills.map((fill, index) => (\n        <SketchFill\n          key={`fill-${index}`}\n          fill={fill}\n          path={path}\n          frame={layer.frame}\n        />\n      ))}\n      {borders.map((border, index) => (\n        <SketchBorder key={`border-${index}`} path={path} border={border} />\n      ))}\n    </>\n  );\n\n  const opacity = layer.style?.contextSettings?.opacity ?? 1;\n\n  return opacity < 1 ? <Group opacity={opacity}>{elements}</Group> : elements;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { AffineTransform } from 'noya-geometry';\nimport { useFill } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { Layers, Overrides, PageLayer, Primitives } from 'noya-state';\nimport { memo, useMemo } from 'react';\nimport { Group, Rect } from '../..';\nimport { useApplicationState } from 'noya-app-state-context';\nimport { useTintColorFilter } from '../../hooks/useTintColorFilter';\nimport SketchGroup from './SketchGroup';\n\ninterface SymbolProps {\n  layer: Sketch.SymbolInstance;\n  symbolMaster: Sketch.SymbolMaster;\n  layerStyles: Sketch.SharedStyleContainer;\n  layerTextStyles: Sketch.SharedTextStyleContainer;\n}\n\nconst Symbol = memo(function Symbol({\n  layer,\n  symbolMaster,\n  layerStyles,\n  layerTextStyles,\n}: SymbolProps) {\n  const CanvasKit = useCanvasKit();\n\n  const backgroundFillProperties = useMemo(\n    () => ({\n      color: Primitives.color(CanvasKit, symbolMaster.backgroundColor),\n    }),\n    [CanvasKit, symbolMaster.backgroundColor],\n  );\n  const fill = useFill(backgroundFillProperties);\n\n  const rect = useMemo(() => Primitives.rect(CanvasKit, symbolMaster.frame), [\n    CanvasKit,\n    symbolMaster.frame,\n  ]);\n\n  const transform = useMemo(\n    () =>\n      AffineTransform.translation(\n        layer.frame.x - symbolMaster.frame.x,\n        layer.frame.y - symbolMaster.frame.y,\n      ),\n    [layer.frame, symbolMaster.frame],\n  );\n\n  const overriddenSymbolMaster = useMemo(() => {\n    return produce(symbolMaster, (draft) => {\n      layer.overrideValues.forEach(({ overrideName, value }) => {\n        const {\n          layerIdPath: [layerId, ...remainingLayerIdPath],\n          propertyType,\n        } = Overrides.decodeName(overrideName);\n\n        const targetLayer = Layers.find(\n          draft,\n          (l) => l.do_objectID === layerId,\n        ) as PageLayer;\n\n        if (!targetLayer) return;\n\n        if (remainingLayerIdPath.length > 0) {\n          if (!Layers.isSymbolInstance(targetLayer)) return;\n\n          // Propagate the override into the nested symbol and handle it there instead\n          targetLayer.overrideValues.push({\n            _class: 'overrideValue',\n            overrideName: Overrides.encodeName(\n              remainingLayerIdPath,\n              propertyType,\n            ),\n            value,\n          });\n        } else {\n          const override = Overrides.getLayerOverride(\n            targetLayer,\n            propertyType,\n            value,\n          );\n\n          if (!override) return;\n\n          switch (override.type) {\n            case 'stringValue':\n              override.layer.attributedString.string = override.value;\n              break;\n            case 'symbolID':\n              override.layer.symbolID = override.value;\n              break;\n            case 'image':\n              override.layer.image = override.value;\n              break;\n            case 'textStyle': {\n              const style = layerTextStyles.objects.find(\n                (obj) => obj.do_objectID === override.value,\n              )?.value;\n\n              if (!style || !style.textStyle) return;\n\n              override.layer.style = style;\n              override.layer.attributedString.attributes = [\n                {\n                  _class: 'stringAttribute',\n                  location: 0,\n                  length: override.layer.attributedString.string.length,\n                  attributes: style.textStyle.encodedAttributes,\n                },\n              ];\n              break;\n            }\n            case 'layerStyle': {\n              override.layer.style = layerStyles.objects.find(\n                (obj) => obj.do_objectID === override.value,\n              )?.value;\n              break;\n            }\n          }\n        }\n      });\n    });\n  }, [\n    symbolMaster,\n    layer.overrideValues,\n    layerStyles.objects,\n    layerTextStyles.objects,\n  ]);\n\n  const opacity = layer.style?.contextSettings?.opacity ?? 1;\n\n  const firstFill = layer.style?.fills?.[0];\n  const tintColor =\n    firstFill && firstFill.isEnabled ? firstFill.color : undefined;\n  const colorFilter = useTintColorFilter(tintColor);\n\n  return (\n    <Group transform={transform} opacity={opacity} colorFilter={colorFilter}>\n      {overriddenSymbolMaster.includeBackgroundColorInInstance && (\n        <Rect paint={fill} rect={rect} />\n      )}\n      <SketchGroup layer={overriddenSymbolMaster} />\n    </Group>\n  );\n});\n\ninterface Props {\n  layer: Sketch.SymbolInstance;\n}\n\nexport default memo(function SketchSymbolInstance({ layer }: Props) {\n  const [state] = useApplicationState();\n\n  const symbolMaster = useMemo(\n    () =>\n      Layers.findInArray(\n        state.sketch.pages,\n        (child) =>\n          Layers.isSymbolMaster(child) && layer.symbolID === child.symbolID,\n      ) as Sketch.SymbolMaster | undefined,\n    [layer.symbolID, state.sketch.pages],\n  );\n\n  if (!symbolMaster) return null;\n\n  return (\n    <Symbol\n      layer={layer}\n      symbolMaster={symbolMaster}\n      layerStyles={state.sketch.document.layerStyles}\n      layerTextStyles={state.sketch.document.layerTextStyles}\n    />\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { useDeletable } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useMemo } from 'react';\nimport { Primitives } from 'noya-state';\n\nexport function useTintColorFilter(tintColor: Sketch.Color | undefined) {\n  const CanvasKit = useCanvasKit();\n\n  const colorFilter = useMemo(() => {\n    return tintColor\n      ? CanvasKit.ColorFilter.MakeBlend(\n          Primitives.color(CanvasKit, tintColor),\n          CanvasKit.BlendMode.SrcIn,\n        )\n      : undefined;\n  }, [CanvasKit, tintColor]);\n\n  useDeletable(colorFilter);\n\n  return colorFilter;\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { useDeletable } from 'noya-react-canvaskit';\nimport { Primitives } from 'noya-state';\nimport { Group, Text, useCanvasKit, useFontManager } from 'noya-renderer';\nimport { memo, useMemo } from 'react';\n\ninterface Props {\n  layer: Sketch.Text;\n}\n\nfunction getTextStyleAttributes(layer: Sketch.Text) {\n  const encodedAttributes = layer.style?.textStyle?.encodedAttributes;\n  const paragraphStyle = encodedAttributes?.paragraphStyle;\n\n  return {\n    fontSize:\n      encodedAttributes?.MSAttributedStringFontAttribute.attributes.size ?? 12,\n    lineHeight: paragraphStyle?.maximumLineHeight,\n    textHorizontalAlignment:\n      paragraphStyle?.alignment ?? Sketch.TextHorizontalAlignment.Left,\n    textTransform:\n      encodedAttributes?.MSAttributedStringTextTransformAttribute ??\n      Sketch.TextTransform.None,\n    textDecoration: encodedAttributes?.underlineStyle\n      ? ('underline' as const)\n      : encodedAttributes?.strikethroughStyle\n      ? ('strikethrough' as const)\n      : ('none' as const),\n  };\n}\n\nfunction applyTextTransform(text: string, transform: Sketch.TextTransform) {\n  switch (transform) {\n    case Sketch.TextTransform.None:\n      return text;\n    case Sketch.TextTransform.Lowercase:\n      return text.toLowerCase();\n    case Sketch.TextTransform.Uppercase:\n      return text.toUpperCase();\n  }\n}\n\nexport function useTextLayerParagraph(layer: Sketch.Text) {\n  const CanvasKit = useCanvasKit();\n  const fontManager = useFontManager();\n\n  const {\n    fontSize,\n    lineHeight,\n    textHorizontalAlignment,\n    textTransform,\n    textDecoration,\n  } = getTextStyleAttributes(layer);\n\n  const paragraph = useMemo(() => {\n    const heightMultiplier = lineHeight ? lineHeight / fontSize : undefined;\n\n    const paragraphStyle = new CanvasKit.ParagraphStyle({\n      // Note: We can put a heightMultiplier in text style, but it has no effect\n      textStyle: {\n        color: CanvasKit.BLACK,\n        fontFamilies: ['Roboto'],\n        fontSize,\n      },\n      textAlign: Primitives.textHorizontalAlignment(\n        CanvasKit,\n        textHorizontalAlignment,\n      ),\n      // TODO:\n      // Using a strut for line height is somewhat different from how Sketch works.\n      // Sketch does not apply the additional height to the first line, so we may\n      // want to handle this differently or move the whole paragraph up to compensate.\n      //\n      // For more on struts: https://en.wikipedia.org/wiki/Strut_(typesetting)\n      strutStyle: {\n        fontFamilies: ['Roboto'],\n        strutEnabled: true,\n        forceStrutHeight: true,\n        fontSize,\n        heightMultiplier,\n      },\n    });\n\n    const builder = CanvasKit.ParagraphBuilder.Make(\n      paragraphStyle,\n      fontManager,\n    );\n\n    layer.attributedString.attributes.forEach((attribute) => {\n      const { location, length } = attribute;\n      const string = layer.attributedString.string.substr(location, length);\n      const style = Primitives.stringAttribute(\n        CanvasKit,\n        attribute,\n        textDecoration,\n      );\n      builder.pushStyle(style);\n      builder.addText(applyTextTransform(string, textTransform));\n      builder.pop();\n    });\n\n    const paragraph = builder.build();\n\n    builder.delete();\n\n    paragraph.layout(layer.frame.width);\n\n    return paragraph;\n  }, [\n    CanvasKit,\n    fontSize,\n    textHorizontalAlignment,\n    lineHeight,\n    fontManager,\n    layer.attributedString.attributes,\n    layer.attributedString.string,\n    layer.frame.width,\n    textDecoration,\n    textTransform,\n  ]);\n\n  useDeletable(paragraph);\n\n  return paragraph;\n}\n\nexport default memo(function SketchText({ layer }: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const paragraph = useTextLayerParagraph(layer);\n\n  const rect = useMemo(() => Primitives.rect(CanvasKit, layer.frame), [\n    CanvasKit,\n    layer.frame,\n  ]);\n\n  const element = <Text paragraph={paragraph} rect={rect} />;\n\n  const opacity = layer.style?.contextSettings?.opacity ?? 1;\n\n  return opacity < 1 ? <Group opacity={opacity}>{element}</Group> : element;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { AffineTransform } from 'noya-geometry';\nimport { memo, useMemo } from 'react';\nimport { Group } from '../..';\nimport SketchLayer from './SketchLayer';\n\ninterface Props {\n  layer: Sketch.ShapeGroup;\n}\n\nexport default memo(function SketchShapeGroup({ layer }: Props) {\n  const transform = useMemo(\n    () => AffineTransform.translation(layer.frame.x, layer.frame.y),\n    [layer.frame.x, layer.frame.y],\n  );\n\n  const opacity = layer.style?.contextSettings?.opacity ?? 1;\n\n  // TODO: Join with path ops\n  const elements = layer.layers.map((child) => (\n    <SketchLayer\n      key={child.do_objectID}\n      layer={{ ...child, style: layer.style }}\n    />\n  ));\n\n  return (\n    <Group opacity={opacity} transform={transform}>\n      {elements}\n    </Group>\n  );\n});\n","import { AffineTransform } from 'noya-geometry';\nimport { PageLayer, Selectors } from 'noya-state';\nimport { memo } from 'react';\nimport { Group } from '../..';\nimport SketchArtboard from './SketchArtboard';\nimport SketchBitmap from './SketchBitmap';\nimport SketchGroup from './SketchGroup';\nimport SketchShape from './SketchShape';\nimport SketchSymbolInstance from './SketchSymbolInstance';\nimport SketchText from './SketchText';\nimport SketchShapeGroup from './SketchShapeGroup';\n\ninterface Props {\n  layer: PageLayer;\n}\n\nexport default memo(function SketchLayer({ layer }: Props) {\n  if (!layer.isVisible) return null;\n\n  let element: JSX.Element;\n\n  switch (layer._class) {\n    case 'artboard':\n      element = <SketchArtboard layer={layer} isSymbolMaster={false} />;\n      break;\n    case 'symbolMaster':\n      element = <SketchArtboard layer={layer} isSymbolMaster={true} />;\n      break;\n    case 'group':\n      element = <SketchGroup layer={layer} />;\n      break;\n    case 'text':\n      element = <SketchText layer={layer} />;\n      break;\n    case 'bitmap':\n      element = <SketchBitmap layer={layer} />;\n      break;\n    case 'rectangle':\n    case 'oval':\n    case 'triangle':\n    case 'star':\n    case 'polygon':\n    case 'shapePath':\n      element = <SketchShape layer={layer} />;\n      break;\n    case 'shapeGroup':\n      element = <SketchShapeGroup layer={layer} />;\n      break;\n    case 'symbolInstance':\n      element = <SketchSymbolInstance layer={layer} />;\n      break;\n    default:\n      console.info(layer._class, 'not handled');\n      element = <></>;\n  }\n\n  let transforms: AffineTransform[] = [];\n\n  if (layer.isFlippedHorizontal || layer.isFlippedVertical) {\n    transforms.push(Selectors.getLayerFlipTransform(layer));\n  }\n\n  // TODO: Investigate rotation appearing incorrect in inspector, e.g. rotate the image\n  // in the demo file to 45. The rotation in our inspector will be -45.\n  if (layer.rotation % 360 !== 0) {\n    transforms.push(Selectors.getLayerRotationTransform(layer));\n  }\n\n  return transforms.length > 0 ? (\n    <Group transform={AffineTransform.multiply(...transforms)}>{element}</Group>\n  ) : (\n    element\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit, ImageFilter, Shader } from 'canvaskit';\nimport { AffineTransform } from 'noya-geometry';\nimport { ClipProps, useDeletable } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { PageLayer, Primitives } from 'noya-state';\nimport { chunkBy } from 'noya-utils';\nimport { memo, ReactNode, useMemo } from 'react';\nimport { Group } from '../..';\nimport SketchLayer from './SketchLayer';\n\nfunction composeImageFilters(\n  CanvasKit: CanvasKit,\n  imageFilters: ImageFilter[],\n): ImageFilter {\n  // If there are no image filters, return a transparent color image filter\n  if (imageFilters.length === 0) {\n    return CanvasKit.ImageFilter.MakeShader(\n      CanvasKit.Shader.MakeColor(\n        CanvasKit.TRANSPARENT,\n        CanvasKit.ColorSpace.SRGB,\n      ),\n    );\n  }\n\n  const [first, ...rest] = imageFilters;\n\n  return rest.reduce(\n    (result, item) =>\n      CanvasKit.ImageFilter.MakeBlend(CanvasKit.BlendMode.Plus, item, result),\n    first,\n  );\n}\n\ninterface Props {\n  layer: Sketch.Group | Sketch.Artboard | Sketch.SymbolMaster | Sketch.Page;\n}\n\nconst SketchMask = memo(function SketchGroup({\n  layer,\n  maskMode,\n  children,\n}: {\n  layer: Sketch.AnyLayer;\n  children: ReactNode;\n  maskMode: 'outline' | 'alpha';\n}) {\n  const CanvasKit = useCanvasKit();\n\n  const maskPath = useMemo(() => {\n    if (!layer || !('points' in layer)) return;\n\n    const path = Primitives.path(\n      CanvasKit,\n      layer.points,\n      layer.frame,\n      layer.isClosed,\n    );\n\n    return path;\n  }, [CanvasKit, layer]);\n\n  const clip: ClipProps | undefined = useMemo(\n    () =>\n      maskPath\n        ? {\n            path: maskPath,\n            op: CanvasKit.ClipOp.Intersect,\n            antiAlias: true,\n          }\n        : undefined,\n    [CanvasKit.ClipOp.Intersect, maskPath],\n  );\n\n  useDeletable(maskPath);\n\n  const imageFilter = useMemo(() => {\n    if (maskMode !== 'alpha' || !layer.style?.fills) return;\n\n    const shaderFilters = layer.style.fills\n      .filter((fill) => fill.isEnabled)\n      .map((fill) => Primitives.shader(CanvasKit, fill, layer.frame, undefined))\n      .filter((shader): shader is Shader => !!shader)\n      .map((shader) => CanvasKit.ImageFilter.MakeShader(shader));\n\n    const shaderFilter = composeImageFilters(CanvasKit, shaderFilters);\n\n    const srcFilter = CanvasKit.ImageFilter.MakeCompose(null, null);\n\n    return CanvasKit.ImageFilter.MakeBlend(\n      CanvasKit.BlendMode.SrcIn,\n      shaderFilter,\n      srcFilter,\n    );\n  }, [CanvasKit, layer.frame, layer.style, maskMode]);\n\n  return (\n    <Group imageFilter={imageFilter} clip={clip}>\n      {children}\n    </Group>\n  );\n});\n\nexport default memo(function SketchGroup({ layer }: Props) {\n  const transform = useMemo(\n    () => AffineTransform.translation(layer.frame.x, layer.frame.y),\n    [layer.frame.x, layer.frame.y],\n  );\n\n  const opacity = layer.style?.contextSettings?.opacity ?? 1;\n\n  const layers: PageLayer[] = layer.layers;\n\n  // We make a new rendering chain for each mask, or each layer with\n  // `shouldBreakMaskChain` set to true. Masks don't apply to other masks.\n  const maskChains = chunkBy(\n    layers,\n    (a, b) => !b.hasClippingMask && !b.shouldBreakMaskChain,\n  );\n\n  const elements = maskChains.map((chain) => {\n    const hasClippingMask = chain[0].hasClippingMask;\n    const hasAlphaMask = hasClippingMask && chain[0].clippingMaskMode === 1;\n\n    const chainElements = chain\n      .slice(hasAlphaMask ? 1 : 0)\n      .map((child) => <SketchLayer key={child.do_objectID} layer={child} />);\n\n    return hasClippingMask ? (\n      <SketchMask\n        key={chain[0].do_objectID}\n        layer={chain[0]}\n        maskMode={hasAlphaMask ? 'alpha' : 'outline'}\n      >\n        {chainElements}\n      </SketchMask>\n    ) : (\n      chainElements\n    );\n  });\n\n  return (\n    <Group opacity={opacity} transform={transform}>\n      {elements}\n    </Group>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Rect } from 'noya-geometry';\nimport {\n  ClipProps,\n  useBlurMaskFilter,\n  useDeletable,\n  usePaint,\n} from 'noya-react-canvaskit';\nimport { Primitives } from 'noya-state';\nimport {\n  Group,\n  Rect as RCKRect,\n  Text,\n  useCanvasKit,\n  useFontManager,\n} from 'noya-renderer';\nimport { memo, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport SketchGroup from './SketchGroup';\n\ninterface ArtboardLabelProps {\n  text: string;\n  layerFrame: Rect;\n  isSymbolMaster: boolean;\n}\n\nconst ArtboardLabel = memo(function ArtboardLabel({\n  text,\n  layerFrame,\n  isSymbolMaster,\n}: ArtboardLabelProps) {\n  const CanvasKit = useCanvasKit();\n  const { colors } = useTheme();\n  const textColor = isSymbolMaster ? colors.primary : colors.textMuted;\n  const fontManager = useFontManager();\n\n  const paragraph = useMemo(() => {\n    const paragraphStyle = new CanvasKit.ParagraphStyle({\n      textStyle: {\n        color: CanvasKit.parseColorString(textColor),\n        fontSize: 11,\n        fontFamilies: ['Roboto'],\n        letterSpacing: 0.2,\n      },\n    });\n\n    const builder = CanvasKit.ParagraphBuilder.Make(\n      paragraphStyle,\n      fontManager,\n    );\n    builder.addText(text);\n\n    const paragraph = builder.build();\n    paragraph.layout(10000);\n\n    builder.delete();\n\n    return paragraph;\n  }, [CanvasKit, fontManager, text, textColor]);\n\n  useDeletable(paragraph);\n\n  const labelRect = Primitives.rect(CanvasKit, {\n    x: layerFrame.x + 3,\n    y: layerFrame.y - paragraph.getHeight() - 3,\n    width: layerFrame.width,\n    height: layerFrame.height,\n  });\n\n  return <Text rect={labelRect} paragraph={paragraph} />;\n});\n\ninterface ArtboardBlurProps {\n  layerFrame: Rect;\n}\n\nconst ArtboardBlur = memo(function ArtboardBlur({\n  layerFrame,\n}: ArtboardBlurProps) {\n  const CanvasKit = useCanvasKit();\n\n  const maskFilter = useBlurMaskFilter({\n    style: CanvasKit.BlurStyle.Normal,\n    sigma: 2,\n    respectCTM: true,\n  });\n\n  const blur = usePaint({\n    style: CanvasKit.BlurStyle.Normal,\n    color: CanvasKit.BLACK,\n    opacity: 0.2,\n    maskFilter,\n  });\n\n  const blurRect = Primitives.rect(CanvasKit, {\n    ...layerFrame,\n    y: layerFrame.y + 1,\n  });\n\n  return <RCKRect rect={blurRect} paint={blur} />;\n});\n\ninterface SketchArtboardContentProps {\n  layer: Sketch.Artboard | Sketch.SymbolMaster;\n  showBackground: boolean;\n}\n\nexport const SketchArtboardContent = memo(function SketchArtboardContent({\n  layer,\n  showBackground,\n}: SketchArtboardContentProps) {\n  const CanvasKit = useCanvasKit();\n\n  const paint = usePaint({\n    color: layer.hasBackgroundColor\n      ? Primitives.color(CanvasKit, layer.backgroundColor)\n      : CanvasKit.WHITE,\n    style: CanvasKit.PaintStyle.Fill,\n  });\n\n  const rect = Primitives.rect(CanvasKit, layer.frame);\n\n  const clip: ClipProps = useMemo(\n    () => ({\n      path: rect,\n      op: CanvasKit.ClipOp.Intersect,\n    }),\n    [CanvasKit.ClipOp.Intersect, rect],\n  );\n\n  return (\n    <>\n      {showBackground && <RCKRect rect={rect} paint={paint} />}\n      <Group clip={clip}>\n        <SketchGroup layer={layer} />\n      </Group>\n    </>\n  );\n});\n\ninterface Props {\n  layer: Sketch.Artboard | Sketch.SymbolMaster;\n  isSymbolMaster: boolean;\n}\n\nexport default memo(function SketchArtboard({ layer, isSymbolMaster }: Props) {\n  return (\n    <>\n      <ArtboardLabel\n        text={layer.name}\n        layerFrame={layer.frame}\n        isSymbolMaster={isSymbolMaster}\n      />\n      <ArtboardBlur layerFrame={layer.frame} />\n      <SketchArtboardContent layer={layer} showBackground={true} />\n    </>\n  );\n});\n","import {\n  AffineTransform,\n  createBounds,\n  Rect,\n  resize,\n  resizeIfLarger,\n  Size,\n} from 'noya-geometry';\nimport {\n  Group,\n  Rect as RCKRect,\n  SketchLayer,\n  useCanvasKit,\n} from 'noya-renderer';\nimport { Layers, PageLayer, Primitives } from 'noya-state';\nimport { useMemo } from 'react';\nimport useCheckeredFill from '../hooks/useCheckeredFill';\nimport { SketchArtboardContent } from './layers/SketchArtboard';\n\nfunction CheckeredRect({ rect }: { rect: Rect }) {\n  const paint = useCheckeredFill();\n  const CanvasKit = useCanvasKit();\n\n  return <RCKRect paint={paint} rect={Primitives.rect(CanvasKit, rect)} />;\n}\n\ninterface Props {\n  layer: PageLayer;\n  size: Size;\n  padding?: number;\n  scalingMode?: 'upOrDown' | 'down';\n  showCheckeredBackground?: boolean;\n}\n\nexport default function LayerPreview({\n  layer,\n  size,\n  padding = 0,\n  scalingMode = 'upOrDown',\n  showCheckeredBackground = false,\n}: Props) {\n  const bounds = createBounds(layer.frame);\n\n  const paddedSize = {\n    width: size.width - padding * 2,\n    height: size.height - padding * 2,\n  };\n\n  const layerSize = { width: layer.frame.width, height: layer.frame.height };\n\n  const scaledRect =\n    scalingMode === 'down'\n      ? resizeIfLarger(layerSize, paddedSize)\n      : resize(layerSize, paddedSize);\n\n  const transform = useMemo(() => {\n    return AffineTransform.multiply(\n      // Translate to the center of the size\n      AffineTransform.translation(size.width / 2, size.height / 2),\n      AffineTransform.scale(\n        scaledRect.width / layerSize.width,\n        scaledRect.height / layerSize.height,\n      ),\n      // Translate to (0,0) before scaling, since scale is applied at the origin\n      AffineTransform.translation(-bounds.midX, -bounds.midY),\n    );\n  }, [\n    size.width,\n    size.height,\n    scaledRect.width,\n    scaledRect.height,\n    layerSize.width,\n    layerSize.height,\n    bounds.midX,\n    bounds.midY,\n  ]);\n\n  return (\n    <>\n      {showCheckeredBackground && <CheckeredRect rect={scaledRect} />}\n      <Group transform={transform}>\n        {Layers.isSymbolMasterOrArtboard(layer) ? (\n          <SketchArtboardContent\n            layer={layer}\n            showBackground={\n              layer.hasBackgroundColor && layer.includeBackgroundColorInExport\n            }\n          />\n        ) : (\n          <SketchLayer layer={layer} />\n        )}\n      </Group>\n    </>\n  );\n}\n","import { useDeletable } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { CHECKERED_BACKGROUND_BYTES } from 'noya-state';\nimport { useMemo } from 'react';\nimport { useTheme } from 'styled-components';\n\nexport default function useCheckeredFill() {\n  const CanvasKit = useCanvasKit();\n  const { transparentChecker } = useTheme().colors;\n\n  const paint = useMemo(() => {\n    const paint = new CanvasKit.Paint();\n    const image = CanvasKit.MakeImageFromEncoded(CHECKERED_BACKGROUND_BYTES);\n\n    if (!image) return paint;\n\n    const imageShader = image.makeShaderCubic(\n      CanvasKit.TileMode.Repeat,\n      CanvasKit.TileMode.Repeat,\n      0,\n      0,\n      CanvasKit.Matrix.scaled(0.5, 0.5),\n    );\n\n    const colorShader = CanvasKit.Shader.MakeColor(\n      CanvasKit.parseColorString(transparentChecker),\n      CanvasKit.ColorSpace.SRGB,\n    );\n\n    paint.setShader(\n      CanvasKit.Shader.MakeBlend(\n        CanvasKit.BlendMode.DstATop,\n        colorShader,\n        imageShader,\n      ),\n    );\n\n    return paint;\n  }, [CanvasKit, transparentChecker]);\n\n  useDeletable(paint);\n\n  return paint;\n}\n","import { createContext, memo, useContext } from 'react';\nimport type { Components } from 'noya-react-canvaskit';\n\nexport type ComponentsContextValue = typeof Components;\n\nconst ComponentsContext = createContext<ComponentsContextValue | undefined>(\n  undefined,\n);\n\nexport const ComponentsProvider = ComponentsContext.Provider;\n\nfunction useComponents(): ComponentsContextValue {\n  const value = useContext(ComponentsContext);\n\n  if (!value) {\n    throw new Error('Missing ComponentsProvider');\n  }\n\n  return value;\n}\n\ntype ComponentParameters<K extends keyof typeof Components> = Parameters<\n  typeof Components[K]\n>[0];\n\nexport const Rect = memo(function Rect(props: ComponentParameters<'Rect'>) {\n  const { Rect } = useComponents();\n  return <Rect {...props} />;\n});\n\nexport const Path = memo(function Path(props: ComponentParameters<'Path'>) {\n  const { Path } = useComponents();\n  return <Path {...props} />;\n});\n\nexport const Text = memo(function Text(props: ComponentParameters<'Text'>) {\n  const { Text } = useComponents();\n  return <Text {...props} />;\n});\n\nexport const Image = memo(function Image(props: ComponentParameters<'Image'>) {\n  const { Image } = useComponents();\n  return <Image {...props} />;\n});\n\nexport const Polyline = memo(function Polyline(\n  props: ComponentParameters<'Polyline'>,\n) {\n  const { Polyline } = useComponents();\n  return <Polyline {...props} />;\n});\n\nexport const Group = memo(function Group(props: ComponentParameters<'Group'>) {\n  const { Group } = useComponents();\n  return <Group {...props} />;\n});\n","import { Point } from 'noya-geometry';\nimport { usePaint } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport React from 'react';\nimport { Polyline } from '..';\n\nexport default function AlignmentGuides({ lines }: { lines: Point[][] }) {\n  const CanvasKit = useCanvasKit();\n\n  const snapGuidePaint = usePaint({\n    color: CanvasKit.Color4f(0.52, 0.248, 1.0),\n    strokeWidth: 1,\n    style: CanvasKit.PaintStyle.Stroke,\n  });\n\n  return (\n    <>\n      {lines.map((points, index) => (\n        <Polyline key={index} paint={snapGuidePaint} points={points} />\n      ))}\n    </>\n  );\n}\n","import * as CanvasKit from 'canvaskit';\nimport { insetRect } from 'noya-geometry';\nimport { useColorFill } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport {\n  getLineDragHandles,\n  getRectDragHandles,\n  Primitives,\n  Rect,\n  Selectors,\n} from 'noya-state';\nimport React, { memo } from 'react';\nimport { useApplicationState } from 'noya-app-state-context';\nimport { Rect as RCKRect } from '../ComponentsContext';\n\ninterface Props {\n  selectionPaint: CanvasKit.Paint;\n  rect: Rect;\n}\n\nexport default memo(function DragHandles({ selectionPaint, rect }: Props) {\n  const CanvasKit = useCanvasKit();\n  const [state] = useApplicationState();\n\n  const dragHandlePaint = useColorFill(CanvasKit.Color(255, 255, 255, 1));\n\n  const lineLayer = Selectors.getSelectedLineLayer(state);\n  const dragHandles =\n    lineLayer && state.selectedObjects.length === 1\n      ? getLineDragHandles(lineLayer.frame, lineLayer.points, lineLayer)\n      : getRectDragHandles(rect);\n\n  return (\n    <>\n      {dragHandles.map((handle, index) => (\n        <React.Fragment key={index}>\n          <RCKRect\n            rect={Primitives.rect(CanvasKit, handle.rect)}\n            paint={dragHandlePaint}\n          />\n          <RCKRect\n            rect={Primitives.rect(CanvasKit, insetRect(handle.rect, 0.5, 0.5))}\n            paint={selectionPaint}\n          />\n        </React.Fragment>\n      ))}\n    </>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Paint } from 'canvaskit';\nimport { AffineTransform, Point } from 'noya-geometry';\nimport { useDeletable, useFill, useStroke } from 'noya-react-canvaskit';\nimport { Group, Path, Polyline, Rect, useCanvasKit } from 'noya-renderer';\nimport {\n  Layers,\n  SelectedControlPoint,\n  Selectors,\n  Primitives,\n} from 'noya-state';\nimport React, { Fragment, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\n\nconst CONTROL_POINT_SIZE = 2;\n\ninterface EditablePathPointProps {\n  point: Point;\n  fill: Paint;\n  stroke: Paint;\n}\n\nexport function EditablePathPoint({\n  point,\n  fill,\n  stroke,\n}: EditablePathPointProps) {\n  const CanvasKit = useCanvasKit();\n\n  const path = useMemo(() => {\n    const path = new CanvasKit.Path();\n\n    path.addOval(\n      CanvasKit.XYWHRect(\n        point.x - Selectors.POINT_RADIUS,\n        point.y - Selectors.POINT_RADIUS,\n        Selectors.POINT_RADIUS * 2,\n        Selectors.POINT_RADIUS * 2,\n      ),\n    );\n\n    return path;\n  }, [CanvasKit, point.x, point.y]);\n\n  useDeletable(path);\n\n  return (\n    <>\n      <Path path={path} paint={fill} />\n      <Path path={path} paint={stroke} />\n    </>\n  );\n}\n\ninterface EditablePathControlPointProps {\n  point: Point;\n  fill: Paint;\n}\n\nfunction EditablePathControlPoint({\n  point,\n  fill,\n}: EditablePathControlPointProps) {\n  const CanvasKit = useCanvasKit();\n\n  const rect = Primitives.rect(CanvasKit, {\n    x: point.x - CONTROL_POINT_SIZE,\n    y: point.y - CONTROL_POINT_SIZE,\n    width: CONTROL_POINT_SIZE * 2,\n    height: CONTROL_POINT_SIZE * 2,\n  });\n\n  return <Rect rect={rect} paint={fill} />;\n}\n\ninterface EditablePathOutlineProps {\n  layer: Layers.PointsLayer;\n  stroke: Paint;\n}\n\nfunction EditablePathOutline({ layer, stroke }: EditablePathOutlineProps) {\n  const CanvasKit = useCanvasKit();\n\n  const path = useMemo(() => {\n    const path = Primitives.path(\n      CanvasKit,\n      layer.points,\n      layer.frame,\n      layer.isClosed,\n    );\n\n    path.setFillType(CanvasKit.FillType.EvenOdd);\n\n    return path;\n  }, [CanvasKit, layer.frame, layer.isClosed, layer.points]);\n\n  return <Path path={path} paint={stroke} />;\n}\n\ninterface Props {\n  layer: Sketch.AnyLayer;\n  transform: AffineTransform;\n  selectedIndexes: number[];\n  selectedControlPoint?: SelectedControlPoint;\n}\n\nexport default function EditablePath({\n  layer,\n  transform,\n  selectedIndexes,\n  selectedControlPoint,\n}: Props) {\n  const CanvasKit = useCanvasKit();\n  const {\n    canvas: { dragHandleStroke },\n    primary,\n  } = useTheme().colors;\n\n  let localTransform = useMemo(\n    () =>\n      AffineTransform.multiply(\n        transform,\n        Selectors.getLayerRotationTransform(layer),\n      ),\n    [layer, transform],\n  );\n\n  const fill = useFill({ color: CanvasKit.WHITE });\n  const stroke = useStroke({ color: dragHandleStroke });\n\n  const selectedFill = useFill({ color: primary });\n  const selectedStroke = useStroke({ color: CanvasKit.WHITE });\n\n  if (!Layers.isPointsLayer(layer)) return null;\n\n  const decodeCurvePoints = layer.points.map((point) =>\n    Primitives.decodeCurvePoint(point, layer.frame),\n  );\n\n  const points = decodeCurvePoints.map((point) => point.point);\n\n  return (\n    <Group transform={localTransform}>\n      <EditablePathOutline layer={layer} stroke={stroke} />\n      {decodeCurvePoints.map((point, index) => {\n        if (point.curveMode === Sketch.CurveMode.Straight) return null;\n        const points = [point.point, point.curveFrom];\n        const isSelected =\n          selectedControlPoint?.pointIndex === index &&\n          selectedControlPoint.controlPointType === 'curveFrom';\n        return (\n          <Fragment key={index}>\n            <Polyline points={points} paint={stroke} />\n            <EditablePathControlPoint\n              point={point.curveFrom}\n              fill={isSelected ? selectedFill : fill}\n            />\n          </Fragment>\n        );\n      })}\n      {decodeCurvePoints.map((point, index) => {\n        if (point.curveMode === Sketch.CurveMode.Straight) return null;\n        const points = [point.point, point.curveTo];\n        const isSelected =\n          selectedControlPoint?.pointIndex === index &&\n          selectedControlPoint.controlPointType === 'curveTo';\n        return (\n          <Fragment key={index}>\n            <Polyline points={points} paint={stroke} />\n            <EditablePathControlPoint\n              point={point.curveTo}\n              fill={isSelected ? selectedFill : fill}\n            />\n          </Fragment>\n        );\n      })}\n      {points.map((point, index) => {\n        const isSelected = selectedIndexes.includes(index);\n\n        return (\n          <EditablePathPoint\n            key={index}\n            point={point}\n            fill={isSelected ? selectedFill : fill}\n            stroke={isSelected ? selectedStroke : stroke}\n          />\n        );\n      })}\n    </Group>\n  );\n}\n","import { Point } from 'noya-geometry';\nimport { useCanvasKit } from 'noya-renderer';\nimport React from 'react';\nimport { Polyline } from '..';\n\ninterface Props {\n  points: Point[];\n}\n\nexport default function ExtensionGuide({ points }: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const paint = new CanvasKit.Paint();\n  paint.setColor(CanvasKit.Color4f(0.52, 0.248, 1.0));\n  paint.setPathEffect(CanvasKit.PathEffect.MakeDash([1, 2]));\n  paint.setStyle(CanvasKit.PaintStyle.Stroke);\n  paint.setStrokeWidth(1);\n\n  return <Polyline paint={paint} points={points} />;\n}\n","import { Bounds, distance, Point, Axis } from 'noya-geometry';\n\nexport type DistanceMeasurementProps = {\n  distance: number;\n  midpoint: Point;\n};\n\ntype BoundsKey = keyof Bounds;\nexport type Direction = '+' | '-';\ntype AxisDirectionPair = [Direction, Axis];\n\nexport const X_DIRECTIONS: AxisDirectionPair[] = [\n  ['+', 'x'],\n  ['-', 'x'],\n];\nexport const Y_DIRECTIONS: AxisDirectionPair[] = [\n  ['+', 'y'],\n  ['-', 'y'],\n];\nexport const ALL_DIRECTIONS = [...X_DIRECTIONS, ...Y_DIRECTIONS];\n\nexport function getAxisProperties(\n  axis: Axis,\n  direction: Direction,\n): [BoundsKey, BoundsKey, BoundsKey] {\n  switch (`${direction}${axis}` as const) {\n    case '+x':\n      return ['minX', 'midX', 'maxX'];\n    case '-x':\n      return ['maxX', 'midX', 'minX'];\n    case '+y':\n      return ['minY', 'midY', 'maxY'];\n    case '-y':\n      return ['maxY', 'midY', 'minY'];\n  }\n}\n\nexport type Guides = {\n  extension: Point[];\n  measurement: Point[];\n  distanceMeasurement: DistanceMeasurementProps;\n};\n\nexport function getGuides(\n  mainDirection: Direction,\n  mainAxis: Axis,\n  selected: Bounds,\n  highlighted: Bounds,\n): Guides | undefined {\n  const m = mainAxis;\n  const c = mainAxis === 'x' ? 'y' : 'x';\n\n  const [minM, , maxM] = getAxisProperties(m, mainDirection);\n  const [minC, midC, maxC] = getAxisProperties(c, '+');\n\n  const [startC, endC] =\n    selected[midC] > highlighted[midC]\n      ? [highlighted[maxC], selected[maxC]]\n      : [highlighted[minC], selected[minC]];\n\n  // Is `a` further along the direction of the primary axis than `b`?\n  const isFurther = (a: number, b: number) =>\n    mainDirection === '+' ? a > b : a < b;\n\n  let edge = isFurther(selected[minM], highlighted[maxM])\n    ? highlighted[maxM]\n    : isFurther(selected[maxM], highlighted[maxM]) ||\n      isFurther(selected[minM], highlighted[minM])\n    ? highlighted[minM]\n    : undefined;\n\n  if (edge === undefined) return;\n\n  const extension = [\n    { [m]: edge, [c]: startC } as Point,\n    { [m]: edge, [c]: endC } as Point,\n  ];\n\n  const measurement = [\n    { [m]: selected[minM], [c]: selected[midC] } as Point,\n    { [m]: edge, [c]: selected[midC] } as Point,\n  ];\n\n  const itemDistance = distance(\n    { [m]: selected[minM], [c]: selected[midC] } as Point,\n    { [m]: edge, [c]: selected[midC] } as Point,\n  );\n\n  const distanceMeasurement: DistanceMeasurementProps = {\n    distance: itemDistance,\n    midpoint: {\n      [m]: (selected[minM] + edge) / 2,\n      [c]: selected[midC],\n    } as Point,\n  };\n\n  return { extension, measurement, distanceMeasurement };\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { useCanvasKit } from 'noya-renderer';\nimport { Primitives } from 'noya-state';\nimport { useMemo } from 'react';\n\nexport default function useLayerFrameRect(layer: Sketch.AnyLayer) {\n  const CanvasKit = useCanvasKit();\n\n  return useMemo(() => {\n    return Primitives.rect(CanvasKit, layer.frame);\n  }, [CanvasKit, layer]);\n}\n","import { useCanvasKit } from 'noya-renderer';\nimport { Layers, Primitives } from 'noya-state';\nimport { useMemo } from 'react';\n\nexport default function useLayerPath(layer: Layers.PointsLayer) {\n  const CanvasKit = useCanvasKit();\n\n  return useMemo(() => {\n    const path = Primitives.path(\n      CanvasKit,\n      layer.points,\n      layer.frame,\n      layer.isClosed,\n    );\n\n    path.setFillType(CanvasKit.FillType.EvenOdd);\n\n    return path;\n  }, [CanvasKit, layer]);\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Paint } from 'canvaskit';\nimport { AffineTransform } from 'noya-geometry';\nimport { Layers, Selectors } from 'noya-state';\nimport { ReactNode, useMemo } from 'react';\nimport { Group, Path, Rect } from '..';\nimport useLayerFrameRect from '../hooks/useLayerFrameRect';\nimport useLayerPath from '../hooks/useLayerPath';\n\ninterface HoverOutlinePathProps {\n  layer: Layers.PointsLayer;\n  paint: Paint;\n}\n\nfunction HoverOutlinePath({ layer, paint }: HoverOutlinePathProps) {\n  return <Path path={useLayerPath(layer)} paint={paint} />;\n}\n\ninterface HoverOutlineRectProps {\n  layer: Sketch.AnyLayer;\n  paint: Paint;\n}\n\nfunction HoverOutlineRect({ layer, paint }: HoverOutlineRectProps) {\n  return <Rect rect={useLayerFrameRect(layer)} paint={paint} />;\n}\n\ninterface Props {\n  layer: Sketch.AnyLayer;\n  paint: Paint;\n  transform: AffineTransform;\n}\n\nexport default function HoverOutline({ layer, paint, transform }: Props) {\n  let localTransform = useMemo(\n    () =>\n      AffineTransform.multiply(\n        transform,\n        Selectors.getLayerRotationTransform(layer),\n      ),\n    [layer, transform],\n  );\n\n  let element: ReactNode;\n\n  switch (layer._class) {\n    case 'artboard':\n    case 'bitmap':\n    case 'group':\n    case 'text':\n    case 'symbolInstance':\n    case 'symbolMaster': {\n      element = <HoverOutlineRect layer={layer} paint={paint} />;\n      break;\n    }\n    case 'triangle':\n    case 'star':\n    case 'polygon':\n    case 'shapePath':\n    case 'rectangle':\n    case 'oval': {\n      element = <HoverOutlinePath layer={layer} paint={paint} />;\n      break;\n    }\n    default:\n      console.info(layer._class, 'not handled');\n      element = null;\n      break;\n  }\n\n  return <Group transform={localTransform}>{element}</Group>;\n}\n","import { usePaint } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { Rect, Primitives } from 'noya-state';\nimport React, { memo } from 'react';\nimport { Rect as RCKRect } from '../ComponentsContext';\n\ninterface Props {\n  rect: Rect;\n}\n\nexport default memo(function Marquee({ rect }: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const stroke = usePaint({\n    color: CanvasKit.Color(220, 220, 220, 0.9),\n    strokeWidth: 2,\n    style: CanvasKit.PaintStyle.Stroke,\n  });\n\n  const fill = usePaint({\n    color: CanvasKit.Color(255, 255, 255, 0.2),\n    style: CanvasKit.PaintStyle.Fill,\n  });\n\n  const boundingRect = Primitives.rect(CanvasKit, rect);\n\n  return (\n    <>\n      <RCKRect rect={boundingRect} paint={stroke} />\n      <RCKRect rect={boundingRect} paint={fill} />\n    </>\n  );\n});\n","import { Point } from 'noya-geometry';\nimport { useColorFill, usePaint } from 'noya-react-canvaskit';\nimport { useCanvasKit, useFontManager } from 'noya-renderer';\nimport { round } from 'noya-utils';\nimport React, { useMemo } from 'react';\nimport { Polyline, Rect, Text } from '..';\nimport { DistanceMeasurementProps } from './guides';\n\nconst padding = {\n  width: 6,\n  height: 2,\n};\n\nfunction DistanceMeasurement({\n  distance,\n  midpoint: bounds,\n}: DistanceMeasurementProps) {\n  const CanvasKit = useCanvasKit();\n  const fontManager = useFontManager();\n  const paragraph = useMemo(() => {\n    const paragraphStyle = new CanvasKit.ParagraphStyle({\n      textStyle: {\n        color: CanvasKit.parseColorString('rgb(255,255,225)'),\n        fontSize: 11,\n        fontFamilies: ['Roboto'],\n        letterSpacing: 0.2,\n      },\n    });\n\n    const builder = CanvasKit.ParagraphBuilder.Make(\n      paragraphStyle,\n      fontManager,\n    );\n    builder.addText(distance.toString());\n\n    const paragraph = builder.build();\n    paragraph.layout(10000);\n\n    return paragraph;\n  }, [CanvasKit, fontManager, distance]);\n\n  const labelRect = useMemo(\n    () =>\n      CanvasKit.XYWHRect(\n        bounds.x,\n        bounds.y,\n        paragraph.getMinIntrinsicWidth(),\n        paragraph.getHeight(),\n      ),\n    [CanvasKit, paragraph, bounds],\n  );\n\n  const size = useMemo(\n    () => ({\n      width: paragraph.getMinIntrinsicWidth() + padding.width * 2,\n      height: paragraph.getHeight() + padding.height * 2,\n    }),\n    [paragraph],\n  );\n\n  const bgRect = useMemo(\n    () =>\n      CanvasKit.XYWHRect(\n        round(bounds.x - padding.width),\n        round(bounds.y - padding.height),\n        round(size.width),\n        round(size.height),\n      ),\n    [CanvasKit, bounds.x, bounds.y, size.width, size.height],\n  );\n\n  const backgroundFill = useColorFill('rgb(43, 92, 207)');\n\n  return (\n    <>\n      <Rect\n        rect={bgRect}\n        paint={backgroundFill}\n        cornerRadius={size.height / 2}\n      />\n      <Text rect={labelRect} paragraph={paragraph} />\n    </>\n  );\n}\n\ninterface Props {\n  measurement: Point[];\n  distanceMeasurement: DistanceMeasurementProps;\n}\n\nexport default function MeasurementGuide({\n  measurement,\n  distanceMeasurement,\n}: Props) {\n  const CanvasKit = useCanvasKit();\n\n  const extensionGuidePaint = new CanvasKit.Paint();\n  extensionGuidePaint.setColor(CanvasKit.Color4f(0.52, 0.248, 1.0));\n  extensionGuidePaint.setPathEffect(CanvasKit.PathEffect.MakeDash([1, 2]));\n  extensionGuidePaint.setStyle(CanvasKit.PaintStyle.Stroke);\n  extensionGuidePaint.setStrokeWidth(1);\n\n  const measurementGuidePaint = usePaint({\n    color: CanvasKit.Color4f(0.0, 0.2, 1.0),\n    strokeWidth: 1,\n    style: CanvasKit.PaintStyle.Stroke,\n  });\n\n  return (\n    <>\n      <Polyline paint={measurementGuidePaint} points={measurement} />\n      <DistanceMeasurement\n        midpoint={distanceMeasurement.midpoint}\n        distance={distanceMeasurement.distance}\n      />\n    </>\n  );\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CurvePoint } from '@sketch-hq/sketch-file-format-ts/dist/cjs/types';\nimport { useStroke } from 'noya-react-canvaskit';\nimport React from 'react';\nimport { useTheme } from 'styled-components';\nimport { Path, useCanvasKit } from '..';\nimport { Primitives } from 'noya-state';\n\ninterface EditablePathPointProps {\n  points: CurvePoint[];\n  frame: Sketch.Rect;\n}\n\nexport default function PseudoPathLine({\n  points,\n  frame,\n}: EditablePathPointProps) {\n  const CanvasKit = useCanvasKit();\n  const { primary } = useTheme().colors;\n  const stroke = useStroke({ color: primary });\n\n  const path = Primitives.path(CanvasKit, points, frame, false);\n\n  return <Path path={path} paint={stroke} />;\n}\n","import { Point } from 'noya-geometry';\nimport { useFill, useStroke } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport React from 'react';\nimport { useTheme } from 'styled-components';\nimport { EditablePathPoint } from './EditablePath';\n\ninterface PseudoPointProps {\n  point: Point;\n}\n\nexport default function PseudoPoint({ point }: PseudoPointProps) {\n  const CanvasKit = useCanvasKit();\n  const { primary } = useTheme().colors;\n\n  const fill = useFill({ color: CanvasKit.WHITE });\n  const stroke = useStroke({ color: primary });\n\n  return <EditablePathPoint point={point} fill={fill} stroke={stroke} />;\n}\n","import { useApplicationState, useWorkspace } from 'noya-app-state-context';\nimport { useColorFill } from 'noya-react-canvaskit';\nimport { useCanvasKit, useFontManager } from 'noya-renderer';\nimport { Point, Selectors } from 'noya-state';\nimport React, { useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport { Rect, Text } from '..';\n\nfunction RulerLabel({ text, origin }: { text: string; origin: Point }) {\n  const CanvasKit = useCanvasKit();\n  const textColor = useTheme().colors.textMuted;\n  const fontManager = useFontManager();\n\n  const paragraph = useMemo(() => {\n    const paragraphStyle = new CanvasKit.ParagraphStyle({\n      textStyle: {\n        color: CanvasKit.parseColorString(textColor),\n        fontSize: 11,\n        fontFamilies: ['Roboto'],\n        letterSpacing: 0.2,\n      },\n    });\n\n    const builder = CanvasKit.ParagraphBuilder.Make(\n      paragraphStyle,\n      fontManager,\n    );\n    builder.addText(text);\n\n    const paragraph = builder.build();\n    paragraph.layout(10000);\n\n    return paragraph;\n  }, [CanvasKit, fontManager, text, textColor]);\n\n  const labelRect = useMemo(\n    () =>\n      CanvasKit.XYWHRect(\n        origin.x,\n        origin.y,\n        paragraph.getMinIntrinsicWidth(),\n        paragraph.getHeight(),\n      ),\n    [CanvasKit, paragraph, origin.x, origin.y],\n  );\n\n  return <Text rect={labelRect} paragraph={paragraph} />;\n}\n\nfunction range(\n  min: number,\n  max: number,\n  stride: number,\n  snapTo: number = 1,\n): number[] {\n  const values: number[] = [];\n\n  const remainder = min % snapTo;\n  const start = remainder === 0 ? min : min - remainder;\n\n  for (let n = start; n <= max; n += stride) {\n    values.push(n);\n  }\n\n  return values;\n}\n\nexport function HorizontalRuler() {\n  const CanvasKit = useCanvasKit();\n  const backgroundColor = useTheme().colors.canvas.background;\n\n  const [state] = useApplicationState();\n  const { canvasSize } = useWorkspace();\n  const page = Selectors.getCurrentPage(state);\n  const { scrollOrigin } = Selectors.getCurrentPageMetadata(state);\n\n  const rulerRect = useMemo(\n    () => CanvasKit.XYWHRect(0, 0, canvasSize.width, 25),\n    [CanvasKit, canvasSize.width],\n  );\n  const dividerRect = useMemo(\n    () => CanvasKit.XYWHRect(0, 24, canvasSize.width, 1),\n    [CanvasKit, canvasSize.width],\n  );\n\n  const backgroundPaint = useColorFill(backgroundColor);\n  const dividerPaint = useColorFill('#555');\n\n  const markOffset = page.horizontalRulerData.base;\n  const marks = range(-100 + markOffset, canvasSize.width + 100, 100);\n\n  return (\n    <>\n      <Rect rect={rulerRect} paint={backgroundPaint} />\n      <Rect rect={dividerRect} paint={dividerPaint} />\n      {marks.map((mark, index) => {\n        const x = mark + scrollOrigin.x;\n\n        return (\n          <React.Fragment key={index}>\n            <Rect rect={CanvasKit.XYWHRect(x, 0, 1, 25)} paint={dividerPaint} />\n            <RulerLabel\n              origin={{ x: x + 5, y: 0 }}\n              text={(mark - markOffset).toString()}\n            />\n          </React.Fragment>\n        );\n      })}\n      <RulerLabel\n        origin={{ x: 5, y: 10 }}\n        text={`(base: ${markOffset}, scroll: ${scrollOrigin.x})`}\n      />\n    </>\n  );\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport * as CanvasKit from 'canvaskit';\nimport produce from 'immer';\nimport { useApplicationState, useWorkspace } from 'noya-app-state-context';\nimport {\n  AffineTransform,\n  Axis,\n  Bounds,\n  createBounds,\n  createRect,\n  insetRect,\n  Point,\n} from 'noya-geometry';\nimport { useColorFill, useStroke } from 'noya-react-canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport {\n  DecodedCurvePoint,\n  encodeCurvePoint,\n  getAxisValues,\n  getLayerAxisInfo,\n  getPossibleSnapLayers,\n  getSnappingPairs,\n  Layers,\n  Primitives,\n  Rect,\n  Selectors,\n  SnappingPair,\n} from 'noya-state';\nimport { groupBy } from 'noya-utils';\nimport React, { Fragment, memo, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport { Group, Rect as RCKRect } from '../ComponentsContext';\nimport AlignmentGuides from './AlignmentGuides';\nimport DragHandles from './DragHandles';\nimport EditablePath from './EditablePath';\nimport ExtensionGuide from './ExtensionGuide';\nimport {\n  ALL_DIRECTIONS,\n  getAxisProperties,\n  getGuides,\n  Guides,\n  X_DIRECTIONS,\n  Y_DIRECTIONS,\n} from './guides';\nimport HoverOutline from './HoverOutline';\nimport { Polyline } from 'noya-renderer';\nimport { SketchArtboardContent } from './layers/SketchArtboard';\nimport SketchGroup from './layers/SketchGroup';\nimport SketchLayer from './layers/SketchLayer';\nimport Marquee from './Marquee';\nimport MeasurementGuide from './MeasurementGuide';\nimport PseudoPathLine from './PseudoPathLine';\nimport PseudoPoint from './PseudoPoint';\nimport { HorizontalRuler } from './Rulers';\n\nconst BoundingRect = memo(function BoundingRect({\n  selectionPaint,\n  rect,\n}: {\n  selectionPaint: CanvasKit.Paint;\n  rect: Rect;\n}) {\n  const CanvasKit = useCanvasKit();\n  const alignedRect = useMemo(\n    () => Primitives.rect(CanvasKit, insetRect(rect, 0.5, 0.5)),\n    [CanvasKit, rect],\n  );\n\n  return <>{<RCKRect rect={alignedRect} paint={selectionPaint} />}</>;\n});\n\nexport default memo(function SketchFileRenderer() {\n  const {\n    canvasSize,\n    canvasInsets,\n    preferences: { showRulers },\n    highlightedLayer,\n  } = useWorkspace();\n  const [state] = useApplicationState();\n  const interactionState = state.interactionState;\n  const CanvasKit = useCanvasKit();\n  const page = Selectors.getCurrentPage(state);\n  const screenTransform = Selectors.getScreenTransform(canvasInsets);\n  const canvasTransform = Selectors.getCanvasTransform(state, canvasInsets);\n  const isEditingPath = Selectors.getIsEditingPath(interactionState.type);\n\n  const canvasRect = useMemo(\n    () =>\n      CanvasKit.XYWHRect(\n        canvasInsets.left,\n        0,\n        canvasSize.width,\n        canvasSize.height,\n      ),\n    [CanvasKit, canvasInsets.left, canvasSize.height, canvasSize.width],\n  );\n  const {\n    canvas: { background: backgroundColor, dragHandleStroke },\n  } = useTheme().colors;\n  const backgroundFill = useColorFill(backgroundColor);\n\n  const selectionPaint = useStroke({\n    color: dragHandleStroke,\n  });\n\n  const highlightPaint = useStroke({\n    color: CanvasKit.Color(132, 63, 255, 1),\n    strokeWidth: 2,\n  });\n\n  const boundingRect = useMemo(\n    () =>\n      Selectors.getBoundingRect(\n        page,\n        AffineTransform.identity,\n        state.selectedObjects,\n        {\n          clickThroughGroups: true,\n          includeHiddenLayers: true,\n          includeArtboardLayers: false,\n        },\n      ),\n    [page, state.selectedObjects],\n  );\n\n  const boundingPoints = useMemo(\n    () =>\n      state.selectedObjects.map((id: string) =>\n        Selectors.getBoundingPoints(page, AffineTransform.identity, id, {\n          clickThroughGroups: true,\n          includeHiddenLayers: true,\n          includeArtboardLayers: false,\n        }),\n      ),\n    [page, state.selectedObjects],\n  );\n\n  const quickMeasureGuides = useMemo(() => {\n    if (\n      !highlightedLayer ||\n      !highlightedLayer.isMeasured ||\n      !boundingRect ||\n      state.selectedObjects.length === 0 ||\n      state.selectedObjects.includes(highlightedLayer.id)\n    ) {\n      return;\n    }\n\n    const indexPath = Layers.findIndexPath(\n      page,\n      (layer) => layer.do_objectID === highlightedLayer.id,\n    );\n\n    if (!indexPath) return;\n\n    const highlightedBoundingRect = Selectors.getBoundingRect(\n      page,\n      AffineTransform.identity,\n      [highlightedLayer.id],\n      {\n        clickThroughGroups: true,\n        includeHiddenLayers: true,\n        includeArtboardLayers: false,\n      },\n    );\n\n    if (!highlightedBoundingRect) return;\n\n    const highlightedBounds = createBounds(highlightedBoundingRect);\n    const selectedBounds = createBounds(boundingRect);\n\n    const guides = ALL_DIRECTIONS.flatMap(([direction, axis]) => {\n      const result = getGuides(\n        direction,\n        axis,\n        selectedBounds,\n        highlightedBounds,\n      );\n\n      return result ? [result] : [];\n    });\n\n    return (\n      <>\n        {guides.map((guide, index) => (\n          <ExtensionGuide key={index} points={guide.extension} />\n        ))}\n        {guides.map((guide, index) => (\n          <MeasurementGuide\n            key={index}\n            distanceMeasurement={guide.distanceMeasurement!}\n            measurement={guide.measurement}\n          />\n        ))}\n      </>\n    );\n  }, [highlightedLayer, page, state.selectedObjects, boundingRect]);\n\n  const smartSnapGuides = useMemo(() => {\n    if (interactionState.type !== 'moving' || !boundingRect) return;\n\n    const layerIndexPaths = Selectors.getSelectedLayerIndexPathsExcludingDescendants(\n      state,\n    );\n\n    const possibleSnapLayers = getPossibleSnapLayers(\n      state,\n      layerIndexPaths,\n      interactionState.canvasSize,\n    )\n      // Ensure we don't snap to the selected layer itself\n      .filter((layer) => !state.selectedObjects.includes(layer.do_objectID));\n\n    const snappingLayerInfos = getLayerAxisInfo(page, possibleSnapLayers);\n\n    const bounds = createBounds(boundingRect);\n    const selectedBounds = createBounds(boundingRect);\n\n    const xPairs = getSnappingPairs(\n      getAxisValues(bounds, 'x'),\n      snappingLayerInfos,\n      'x',\n    ).filter((pair) => pair.selectedLayerValue === pair.visibleLayerValue);\n\n    const yPairs = getSnappingPairs(\n      getAxisValues(bounds, 'y'),\n      snappingLayerInfos,\n      'y',\n    ).filter((pair) => pair.selectedLayerValue === pair.visibleLayerValue);\n\n    const axisSnappingPairs: [Axis, SnappingPair[]][] = [\n      ['x', xPairs],\n      ['y', yPairs],\n    ];\n\n    const layerBoundsMap: Record<string, Bounds> = {};\n\n    [...xPairs, ...yPairs]\n      .map((pair) => pair.visibleLayerId)\n      .forEach((layerId) => {\n        if (layerId in layerBoundsMap) return;\n\n        const layerToSnapBoundingRect = Selectors.getBoundingRect(\n          page,\n          AffineTransform.identity,\n          [layerId],\n          {\n            clickThroughGroups: true,\n            includeHiddenLayers: false,\n            includeArtboardLayers: false,\n          },\n        );\n\n        if (!layerToSnapBoundingRect) return;\n\n        layerBoundsMap[layerId] = createBounds(layerToSnapBoundingRect);\n      });\n\n    const nearestLayerGuides = axisSnappingPairs.map(\n      ([axis, snappingPairs]) => {\n        const getMinGuideDistance = (guides: Guides[]) =>\n          Math.min(\n            ...guides.map((guide) => guide.distanceMeasurement.distance),\n          );\n\n        const guides = snappingPairs\n          .map((pair) => {\n            const visibleLayerBounds = layerBoundsMap[pair.visibleLayerId];\n\n            const directions = axis === 'y' ? X_DIRECTIONS : Y_DIRECTIONS;\n\n            return directions.flatMap(([direction, axis]) => {\n              const result = getGuides(\n                direction,\n                axis,\n                selectedBounds,\n                visibleLayerBounds,\n              );\n\n              return result ? [result] : [];\n            });\n          })\n          .sort((a, b) => getMinGuideDistance(a) - getMinGuideDistance(b));\n\n        return guides.length > 0 ? guides[0] : undefined;\n      },\n    );\n\n    const alignmentGuides = axisSnappingPairs.flatMap(\n      ([axis, snappingPairs]) => {\n        const groupedPairs = groupBy(\n          snappingPairs,\n          (value) => value.selectedLayerValue,\n        );\n\n        return Object.values(groupedPairs).map((pairs): Point[] => {\n          const visibleLayerBounds = pairs.map(\n            ({ visibleLayerId }) => layerBoundsMap[visibleLayerId],\n          );\n\n          const m = axis;\n          const c = axis === 'x' ? 'y' : 'x';\n\n          const [minC, , maxC] = getAxisProperties(c, '+');\n\n          return [\n            {\n              [m]: pairs[0].visibleLayerValue,\n              [c]: Math.min(\n                selectedBounds[minC],\n                ...visibleLayerBounds.map((bounds) => bounds[minC]),\n              ),\n            } as Point,\n            {\n              [m]: pairs[0].visibleLayerValue,\n              [c]: Math.max(\n                selectedBounds[maxC],\n                ...visibleLayerBounds.map((bounds) => bounds[maxC]),\n              ),\n            } as Point,\n          ];\n        });\n      },\n    );\n\n    return (\n      <>\n        <AlignmentGuides lines={alignmentGuides} />\n        {nearestLayerGuides.map(\n          (guides, i) =>\n            guides && (\n              <Fragment key={i}>\n                {guides.map((guide, j) => (\n                  <ExtensionGuide\n                    key={`extension-${i}-${j}`}\n                    points={guide.extension}\n                  />\n                ))}\n                {guides.map((guide, j) => (\n                  <MeasurementGuide\n                    key={`measurement-${i}-${j}`}\n                    distanceMeasurement={guide.distanceMeasurement!}\n                    measurement={guide.measurement}\n                  />\n                ))}\n              </Fragment>\n            ),\n        )}\n      </>\n    );\n  }, [interactionState, boundingRect, state, page]);\n\n  const highlightedSketchLayer = useMemo(() => {\n    if (\n      !highlightedLayer ||\n      // Don't draw a highlight when hovering over a selected layer on the canvas\n      (state.selectedObjects.includes(highlightedLayer.id) &&\n        highlightedLayer.precedence === 'belowSelection')\n    ) {\n      return;\n    }\n\n    const indexPath = Layers.findIndexPath(\n      page,\n      (layer) => layer.do_objectID === highlightedLayer.id,\n    );\n\n    if (!indexPath) return;\n\n    const layer = Layers.access(page, indexPath);\n    const layerTransform = Selectors.getLayerTransformAtIndexPath(\n      page,\n      indexPath,\n      AffineTransform.identity,\n    );\n\n    return (\n      highlightedLayer && (\n        <HoverOutline\n          transform={layerTransform}\n          layer={layer}\n          paint={highlightPaint}\n        />\n      )\n    );\n  }, [highlightPaint, highlightedLayer, page, state.selectedObjects]);\n\n  const penToolPseudoElements = useMemo(() => {\n    if (interactionState.type !== 'drawingShapePath' || !interactionState.point)\n      return;\n\n    return <PseudoPoint point={interactionState.point} />;\n  }, [interactionState]);\n\n  // The `useMemo` is just for organization here, since we have `state` in the deps\n  const editPathPseudoElements = useMemo(() => {\n    const indexPath = Selectors.getIndexPathOfOpenShapeLayer(state);\n\n    if (\n      !indexPath ||\n      interactionState.type !== 'editPath' ||\n      !interactionState.point ||\n      Selectors.getPathElementAtPoint(state, interactionState.point)\n    )\n      return;\n\n    const layer = Layers.access(\n      page,\n      indexPath.indexPath,\n    ) as Layers.PointsLayer;\n\n    const decodedPointToDraw: DecodedCurvePoint = {\n      _class: 'curvePoint',\n      cornerRadius: 0,\n      curveFrom: interactionState.point,\n      curveTo: interactionState.point,\n      hasCurveFrom: false,\n      hasCurveTo: false,\n      curveMode: Sketch.CurveMode.Straight,\n      point: interactionState.point,\n    };\n\n    const encodedPointToDraw = encodeCurvePoint(\n      decodedPointToDraw,\n      layer.frame,\n    );\n    const points = [encodedPointToDraw, layer.points[indexPath.pointIndex]];\n\n    return (\n      <>\n        <PseudoPathLine points={points} frame={layer.frame} />\n        <PseudoPoint point={interactionState.point} />\n      </>\n    );\n  }, [interactionState, page, state]);\n\n  const editablePaths = useMemo(() => {\n    if (!isEditingPath) return;\n    const selectedLayerIndexPaths = Selectors.getSelectedLayerIndexPaths(state);\n\n    return (\n      <>\n        {selectedLayerIndexPaths.map((indexPath, index) => {\n          const layer = Layers.access(page, indexPath);\n\n          if (!Layers.isPointsLayer(layer)) return null;\n\n          const layerTransform = Selectors.getLayerTransformAtIndexPath(\n            page,\n            indexPath,\n          );\n\n          return (\n            <EditablePath\n              key={layer.do_objectID}\n              transform={layerTransform}\n              layer={layer}\n              selectedIndexes={\n                state.selectedPointLists[layer.do_objectID] ?? []\n              }\n              selectedControlPoint={\n                state.selectedControlPoint\n                  ? state.selectedControlPoint\n                  : undefined\n              }\n            />\n          );\n        })}\n      </>\n    );\n  }, [isEditingPath, page, state]);\n\n  const symbol = useMemo(() => {\n    if (interactionState.type !== 'insertingSymbol') return;\n\n    const point = interactionState.point;\n    if (!point) return;\n\n    const symbol = {\n      ...Selectors.getSymbols(state).find(\n        ({ do_objectID }) => do_objectID === interactionState.symbolID,\n      ),\n    } as Sketch.SymbolMaster;\n\n    const symbolInstance = produce(symbol, (draft) => {\n      if (!symbol || !draft.style) return;\n\n      draft.style.contextSettings = {\n        _class: 'graphicsContextSettings',\n        blendMode: 1,\n        opacity: 0.5,\n      };\n\n      draft.frame = {\n        ...symbol.frame,\n        x: point.x - symbol.frame.width / 2,\n        y: point.y - symbol.frame.height / 2,\n      };\n    });\n\n    return symbolInstance;\n  }, [state, interactionState]);\n\n  return (\n    <>\n      <RCKRect rect={canvasRect} paint={backgroundFill} />\n      <Group transform={canvasTransform}>\n        <SketchGroup layer={page} />\n        {symbol && (\n          <SketchArtboardContent layer={symbol} showBackground={false} />\n        )}\n        {interactionState.type === 'drawingShapePath' ? (\n          penToolPseudoElements\n        ) : isEditingPath ? (\n          <>\n            {editablePaths}\n            {editPathPseudoElements}\n          </>\n        ) : (\n          <>\n            {(state.selectedObjects.length > 1 ||\n              !Selectors.getSelectedLineLayer(state)) &&\n              boundingRect && (\n                <>\n                  <BoundingRect\n                    rect={boundingRect}\n                    selectionPaint={selectionPaint}\n                  />\n                  {boundingPoints.map((points: Point[], index: number) => (\n                    <Polyline\n                      key={index}\n                      points={points}\n                      paint={selectionPaint}\n                    />\n                  ))}\n                </>\n              )}\n            {!isEditingPath && highlightedSketchLayer}\n            {smartSnapGuides}\n            {quickMeasureGuides}\n            {boundingRect && (\n              <DragHandles\n                rect={boundingRect}\n                selectionPaint={selectionPaint}\n              />\n            )}\n            {interactionState.type === 'drawing' && (\n              <SketchLayer\n                key={interactionState.value.do_objectID}\n                layer={interactionState.value}\n              />\n            )}\n          </>\n        )}\n      </Group>\n      <Group transform={screenTransform}>\n        {interactionState.type === 'marquee' && (\n          <Marquee\n            rect={createRect(interactionState.origin, interactionState.current)}\n          />\n        )}\n        {showRulers && <HorizontalRuler />}\n      </Group>\n    </>\n  );\n});\n","import type { CanvasKit } from 'canvaskit';\nimport { loadCanvasKit } from 'noya-renderer';\nimport { SuspendedValue } from 'noya-utils';\nimport { createContext, memo, useContext, ReactNode } from 'react';\n// import loadSVGKit from 'noya-svgkit';\n\n// We don't start loading CanvasKit until the Provider renders the first time,\n// since we currently support setting the wasm path at runtime when the app starts,\n// which needs to happen before `loadCanvasKit` is called.\nlet suspendedCanvasKit: SuspendedValue<CanvasKit>;\n\nconst CanvasKitContext = createContext<CanvasKit | undefined>(undefined);\n\nexport const CanvasKitProvider = memo(function CanvasKitProvider({\n  children,\n  CanvasKit,\n}: {\n  children?: ReactNode;\n  CanvasKit?: CanvasKit;\n}) {\n  if (!suspendedCanvasKit) {\n    suspendedCanvasKit = new SuspendedValue<CanvasKit>(loadCanvasKit());\n  }\n\n  const LoadedCanvasKit = CanvasKit ?? suspendedCanvasKit.getValueOrThrow();\n\n  return (\n    <CanvasKitContext.Provider value={LoadedCanvasKit}>\n      {children}\n    </CanvasKitContext.Provider>\n  );\n});\n\nexport function useCanvasKit() {\n  const value = useContext(CanvasKitContext);\n\n  if (!value) {\n    throw new Error('Missing CanvasKitProvider');\n  }\n\n  return value;\n}\n","import fetch from 'cross-fetch';\nimport { FontMgr } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { SuspendedValue } from 'noya-utils';\nimport { createContext, memo, ReactNode, useContext, useMemo } from 'react';\n\nconst FontManagerContext = createContext<FontMgr | undefined>(undefined);\n\nconst suspendedDefaultFont = new SuspendedValue<ArrayBuffer>(\n  fetch(\n    'https://storage.googleapis.com/skia-cdn/google-web-fonts/Roboto-Regular.ttf',\n  ).then((resp) => resp.arrayBuffer()),\n);\n\nexport const FontManagerProvider = memo(function FontManagerProvider({\n  children,\n}: {\n  children?: ReactNode;\n}) {\n  const CanvasKit = useCanvasKit();\n\n  const defaultFont = suspendedDefaultFont.getValueOrThrow();\n  const fontManager = useMemo(\n    () =>\n      CanvasKit.FontMgr.FromData(defaultFont) ?? CanvasKit.FontMgr.RefDefault(),\n    [CanvasKit.FontMgr, defaultFont],\n  );\n\n  return (\n    <FontManagerContext.Provider value={fontManager}>\n      {children}\n    </FontManagerContext.Provider>\n  );\n});\n\nexport function useFontManager(): FontMgr {\n  const value = useContext(FontManagerContext);\n\n  if (!value) {\n    throw new Error('Missing FontManagerProvider');\n  }\n\n  return value;\n}\n","import { CanvasKitInit, Paint, PaintStyle } from 'canvaskit';\nimport { getPathToWasm } from 'noya-utils';\nimport { Context } from './context';\nexport { default as LayerPreview } from './components/LayerPreview';\nexport { default as SketchArtboard } from './components/layers/SketchArtboard';\nexport { default as SketchGroup } from './components/layers/SketchGroup';\nexport { default as SketchLayer } from './components/layers/SketchLayer';\nexport { default as SketchFileRenderer } from './components/SketchFileRenderer';\nexport * from './ComponentsContext';\nexport * from './FontManagerContext';\nexport * from './hooks/useCanvasKit';\nexport { ImageCacheProvider, useSketchImage } from './ImageCache';\nexport type { Context };\nexport { useTextLayerParagraph } from './components/layers/SketchText';\n\ndeclare module 'canvaskit' {\n  interface Paint {\n    style?: PaintStyle;\n  }\n}\n\n// Using `var` avoids this being uninitialized, maybe due to circular dependencies\nvar loadingPromise: ReturnType<typeof CanvasKitInit> | undefined = undefined;\n\nexport function loadCanvasKit() {\n  if (loadingPromise) return loadingPromise;\n\n  loadingPromise = new Promise(async (resolve) => {\n    const CanvasKit = await CanvasKitInit({\n      locateFile: (file: string) => getPathToWasm() + file,\n    });\n\n    const _setStyle = CanvasKit.Paint.prototype.setStyle;\n\n    CanvasKit.Paint.prototype.setStyle = function (\n      this: Paint,\n      paintStyle: PaintStyle,\n    ) {\n      this.style = paintStyle;\n      _setStyle.call(this, paintStyle);\n    };\n\n    resolve(CanvasKit);\n  });\n\n  return loadingPromise;\n}\n","// Components\nimport Group from './components/Group';\nimport Image from './components/Image';\nimport Path from './components/Path';\nimport Polyline from './components/Polyline';\nimport Rect from './components/Rect';\nimport Text from './components/Text';\n\nexport const Components = { Rect, Path, Group, Image, Text, Polyline };\n\n// Hooks\nexport { default as useBlurMaskFilter } from './hooks/useBlurMaskFilter';\nexport { default as useColor } from './hooks/useColor';\nexport { default as useDeletable } from './hooks/useDeletable';\nexport * from './hooks/useFill';\nexport { default as usePaint } from './hooks/usePaint';\nexport type { PaintParameters } from './hooks/usePaint';\nexport { default as useRect } from './hooks/useRect';\nexport { default as useStableColor } from './hooks/useStable4ElementArray';\nexport * from './hooks/useStroke';\nexport { render, unmount } from './reconciler';\nexport * from './types';\n\n// Utils\nexport { default as makePath } from './utils/makePath';\n","import { Draft } from 'immer';\nimport { Primitives } from 'noya-state';\nimport { ApplicationState, Layers } from '../index';\nimport type { Point } from '../types';\n\nexport type EncodedPageMetadata = {\n  zoomValue: number;\n  scrollOrigin: string;\n};\n\nexport type PageMetadata = {\n  zoomValue: number;\n  scrollOrigin: Point;\n};\n\nexport const getCurrentPageIndex = (state: Draft<ApplicationState>) => {\n  const pageIndex = state.sketch.pages.findIndex(\n    (page) => page.do_objectID === state.selectedPage,\n  );\n\n  if (pageIndex === -1) {\n    throw new Error('A page must always be selected');\n  }\n\n  return pageIndex;\n};\n\nexport const getSymbolsPageIndex = (state: ApplicationState) => {\n  const pageIndex = state.sketch.pages.findIndex(\n    (page) => page.name === 'Symbols',\n  );\n\n  return pageIndex;\n};\n\nexport const getCurrentPage = (state: Draft<ApplicationState>) => {\n  return state.sketch.pages[getCurrentPageIndex(state)];\n};\n\nexport const getCurrentPageMetadata = (\n  state: ApplicationState,\n): PageMetadata => {\n  const currentPage = getCurrentPage(state);\n\n  const meta: EncodedPageMetadata = state.sketch.user[currentPage.do_objectID];\n\n  return meta\n    ? {\n        zoomValue: meta.zoomValue,\n        scrollOrigin: Primitives.parsePoint(meta.scrollOrigin),\n      }\n    : {\n        zoomValue: 1,\n        scrollOrigin: { x: 100, y: 100 },\n      };\n};\n\nexport const getCurrentSymbolPageIndex = (\n  state: ApplicationState,\n  symbolID: string,\n) => {\n  const pageIndex = state.sketch.pages.findIndex((page) =>\n    page.layers.some(\n      (l) => Layers.isSymbolMaster(l) && l.symbolID === symbolID,\n    ),\n  );\n\n  return pageIndex;\n};\n","import { CSSObject } from 'styled-components';\nimport { Theme } from '../../theme';\n\nexport const SEPARATOR_ITEM = 'separator';\n\nexport type RegularMenuItem<T extends string> = {\n  value: T;\n  title: string;\n  checked?: boolean;\n};\n\nexport type MenuItem<T extends string> =\n  | typeof SEPARATOR_ITEM\n  | RegularMenuItem<T>;\n\nexport const CHECKBOX_WIDTH = 15;\nexport const CHECKBOX_RIGHT_INSET = 3;\n\nexport const styles = {\n  separatorStyle: ({ theme }: { theme: Theme }): CSSObject => ({\n    height: '1px',\n    backgroundColor: theme.colors.divider,\n    margin: '4px 8px',\n  }),\n\n  itemStyle: ({\n    theme,\n    disabled,\n  }: {\n    theme: Theme;\n    disabled?: boolean;\n  }): CSSObject => ({\n    ...theme.textStyles.small,\n    fontWeight: 500,\n    fontSize: '0.8rem',\n    flex: '0 0 auto',\n    userSelect: 'none',\n    cursor: 'pointer',\n    borderRadius: '3px',\n    padding: '4px 8px',\n    ...(disabled && {\n      color: theme.colors.textDisabled,\n    }),\n    '&:focus': {\n      outline: 'none',\n      color: 'white',\n      backgroundColor: theme.colors.primary,\n    },\n    display: 'flex',\n    alignItems: 'center',\n  }),\n\n  itemIndicatorStyle: {\n    display: 'flex',\n    alignItems: 'center',\n    left: `-${CHECKBOX_WIDTH / 2}px`,\n    position: 'relative',\n    marginRight: `-${CHECKBOX_RIGHT_INSET}px`,\n  } as CSSObject,\n\n  contentStyle: ({ theme }: { theme: Theme }): CSSObject => ({\n    borderRadius: 4,\n    backgroundColor: theme.colors.popover.background,\n    color: theme.colors.text,\n    boxShadow: '0 2px 4px rgba(0,0,0,0.2), 0 0 12px rgba(0,0,0,0.1)',\n    padding: '4px',\n    border: `1px solid ${theme.colors.divider}`,\n  }),\n};\n","import Alpha from './components/Alpha';\nimport Hue from './components/Hue';\nimport Saturation from './components/Saturation';\nimport Gradient from './components/Gradient';\nimport Pointer from './components/Pointer';\nimport HexColorInput from './components/HexColorInput';\nimport ColorPicker from './components/ColorPicker';\n\nexport { Alpha, Hue, Gradient, Pointer, HexColorInput, Saturation, ColorPicker };\n\nexport * from './components/Interactive';\nexport * from './utils/convert';\nexport * from './utils/compare';\nexport * from './types';\n","export const round = (number: number, digits = 0, base = Math.pow(10, digits)): number => {\n  return Math.round(base * number) / base;\n};\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { delimitedPath } from 'noya-utils';\nimport { Layers } from '..';\nimport { Draft } from 'immer';\nimport { ApplicationState } from '../reducers/applicationReducer';\nimport { findPageLayerIndexPaths, LayerIndexPaths } from './indexPathSelectors';\nimport { getCurrentTab } from './workspaceSelectors';\nimport { uuid } from 'noya-utils';\nimport { CHECKERED_BACKGROUND_BYTES } from '../checkeredBackground';\n\nexport type ComponentsTypes =\n  | Sketch.Swatch\n  | Sketch.SharedStyle\n  | Sketch.SymbolMaster;\n\nexport const getSharedSwatches = (state: ApplicationState): Sketch.Swatch[] => {\n  return state.sketch.document.sharedSwatches?.objects ?? [];\n};\n\nexport const getGradientAssets = (\n  state: ApplicationState,\n): Sketch.GradientAsset[] => {\n  return state.sketch.document.assets.gradientAssets ?? [];\n};\n\nexport const getImageAssets = (\n  state: ApplicationState,\n): (Sketch.FileRef | Sketch.DataRef)[] => {\n  return state.sketch.document.assets.images ?? [];\n};\n\nexport const getSharedTextStyles = (\n  state: ApplicationState,\n): Sketch.SharedStyle[] => {\n  return state.sketch.document.layerTextStyles?.objects ?? [];\n};\n\nexport const getSharedStyles = (\n  state: ApplicationState,\n): Sketch.SharedStyle[] => {\n  return state.sketch.document.layerStyles?.objects ?? [];\n};\n\nexport const getSelectedSwatches = (\n  state: ApplicationState,\n): Sketch.Swatch[] => {\n  const sharedSwatches = getSharedSwatches(state);\n\n  return sharedSwatches.filter((swatch) =>\n    state.selectedThemeTab.swatches.ids.includes(swatch.do_objectID),\n  );\n};\n\nexport const getSelectedLayerStyles = (\n  state: ApplicationState,\n): Sketch.SharedStyle[] => {\n  const sharedStyles = getSharedStyles(state);\n\n  return sharedStyles.filter((swatch) =>\n    state.selectedThemeTab.layerStyles.ids.includes(swatch.do_objectID),\n  );\n};\n\nexport const getSelectedThemeTextStyles = (\n  state: ApplicationState,\n): Sketch.SharedStyle[] => {\n  const sharedStyles = getSharedTextStyles(state);\n\n  return sharedStyles.filter((swatch) =>\n    state.selectedThemeTab.textStyles.ids.includes(swatch.do_objectID),\n  );\n};\n\nexport function groupThemeComponents<T extends ComponentsTypes>(\n  currentIds: string[],\n  groupName: string | undefined,\n  array: T[],\n) {\n  array.forEach((object: T) => {\n    if (!currentIds.includes(object.do_objectID)) return;\n    const prevGroup = groupName ? delimitedPath.dirname(object.name) : '';\n    const name = delimitedPath.basename(object.name);\n    const newName = delimitedPath.join([prevGroup, groupName, name]);\n\n    object.name = newName;\n  });\n\n  return array;\n}\n\nexport function setComponentName<T extends ComponentsTypes>(\n  ids: string[],\n  name: string,\n  array: T[],\n) {\n  array.forEach((object: ComponentsTypes) => {\n    if (!ids.includes(object.do_objectID)) return;\n\n    const group = delimitedPath.dirname(object.name);\n    object.name = delimitedPath.join([group, name]);\n  });\n}\n\nexport const getSymbols = (\n  state: Draft<ApplicationState>,\n): Sketch.SymbolMaster[] => {\n  return state.sketch.pages.flatMap((p) =>\n    p.layers.flatMap((l) => (Layers.isSymbolMaster(l) ? [l] : [])),\n  );\n};\n\nexport const getSelectedSymbols = (\n  state: ApplicationState | Draft<ApplicationState>,\n): Sketch.SymbolMaster[] => {\n  const symbols = getSymbols(state);\n\n  const filter =\n    getCurrentTab(state) === 'canvas'\n      ? state.selectedObjects\n      : state.selectedThemeTab.symbols.ids;\n\n  return symbols.filter((symbol) => filter.includes(symbol.do_objectID));\n};\n\nexport const getSymbolsInstancesIndexPaths = (\n  state: ApplicationState,\n  symbolMasterId: string,\n): LayerIndexPaths[] =>\n  findPageLayerIndexPaths(\n    state,\n    (layer) =>\n      Layers.isSymbolInstance(layer) && layer.symbolID === symbolMasterId,\n  ).filter((l) => l.indexPaths.length);\n\nexport const getSymbolsInstancesIds = (\n  state: ApplicationState,\n  symbolMasterId: string,\n): string[] => {\n  return state.sketch.pages.flatMap((p, index) =>\n    p.layers.flatMap((l) =>\n      Layers.isSymbolInstance(l) && l.symbolID === symbolMasterId\n        ? [l.do_objectID]\n        : [],\n    ),\n  );\n};\n\nexport const setNewPatternFill = (\n  fills: Sketch.Fill[],\n  index: number,\n  draft: Draft<ApplicationState>,\n) => {\n  if (fills[index].image) return;\n\n  const _ref = `images/${uuid()}.png`;\n  fills[index].image = {\n    _class: 'MSJSONFileReference',\n    _ref: _ref,\n    _ref_class: 'MSImageData',\n  };\n  draft.sketch.images[_ref] = CHECKERED_BACKGROUND_BYTES;\n};\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { AffineTransform, createBounds } from 'noya-geometry';\nimport { IndexPath } from 'tree-visit';\nimport { ApplicationState, Layers } from '../index';\nimport { CanvasInsets } from '../reducers/workspaceReducer';\nimport { toRadians } from '../utils/radians';\nimport { getCurrentPageMetadata } from './pageSelectors';\n\nexport function getLayerTransform(\n  ctm: AffineTransform,\n  layer: Sketch.AnyLayer,\n): AffineTransform {\n  const rotation = getLayerRotationTransform(layer);\n  const translation = getLayerTranslationTransform(layer);\n  const flip = getLayerFlipTransform(layer);\n\n  return AffineTransform.multiply(ctm, rotation, translation, flip);\n}\n\nexport function getLayerFlipTransform(layer: Sketch.AnyLayer) {\n  if (!layer.isFlippedHorizontal && !layer.isFlippedVertical)\n    return AffineTransform.identity;\n\n  const bounds = createBounds(layer.frame);\n\n  return AffineTransform.multiply(\n    AffineTransform.translation(bounds.midX, bounds.midY),\n    AffineTransform.scale(\n      layer.isFlippedHorizontal ? -1 : 1,\n      layer.isFlippedVertical ? -1 : 1,\n    ),\n    AffineTransform.translation(-bounds.midX, -bounds.midY),\n  );\n}\n\nexport function getLayerTranslationTransform(\n  layer: Sketch.AnyLayer,\n): AffineTransform {\n  return AffineTransform.translation(layer.frame.x, layer.frame.y);\n}\n\nexport function getLayerRotationTransform(\n  layer: Sketch.AnyLayer,\n): AffineTransform {\n  const bounds = createBounds(layer.frame);\n  const midpoint = { x: bounds.midX, y: bounds.midY };\n  const rotation = getLayerRotationRadians(layer);\n\n  return AffineTransform.rotation(rotation, midpoint.x, midpoint.y);\n}\n\nexport function getLayerTransformAtIndexPath(\n  node: Sketch.AnyLayer,\n  indexPath: IndexPath,\n  ctm: AffineTransform = AffineTransform.identity,\n  behavior?: 'includeLast',\n): AffineTransform {\n  const path = Layers.accessPath(node, indexPath).slice(\n    1,\n    behavior === 'includeLast' ? undefined : -1,\n  );\n\n  return path.reduce((result, layer) => getLayerTransform(result, layer), ctm);\n}\n\nexport function getLayerTransformAtIndexPathReversed(\n  node: Sketch.AnyLayer,\n  indexPath: IndexPath,\n  ctm: AffineTransform,\n): AffineTransform {\n  const path = Layers.accessPathReversed(node, indexPath).slice(1, -1);\n\n  return path.reduce((result, layer) => getLayerTransform(result, layer), ctm);\n}\n\nexport function getLayerRotationMultiplier(): number {\n  return -1;\n}\n\n/**\n * Clamp rotation within the range [-180, 360)\n *\n * -1801  => -1\n * -181   =>  179\n * -180   =>  180\n * -179   => -179\n *  45    =>  45\n *  360   =>  0\n *  3601  =>  1\n */\nexport function clampRotation(rotation: number) {\n  if (rotation <= -180) {\n    // Round toward the positive direction\n    return rotation + 360 * Math.round(-rotation / 360);\n  } else if (rotation >= 360) {\n    return rotation - 360 * Math.floor(rotation / 360);\n  } else {\n    return rotation;\n  }\n}\n\nexport function getLayerRotation(layer: Sketch.AnyLayer): number {\n  return clampRotation(layer.rotation * getLayerRotationMultiplier());\n}\n\nexport function getLayerRotationRadians(layer: Sketch.AnyLayer): number {\n  return toRadians(getLayerRotation(layer));\n}\n\nexport function getScreenTransform(insets: CanvasInsets) {\n  return AffineTransform.translation(insets.left, 0);\n}\n\nexport function getCanvasTransform(\n  state: ApplicationState,\n  insets: CanvasInsets,\n) {\n  const { scrollOrigin, zoomValue } = getCurrentPageMetadata(state);\n\n  return AffineTransform.multiply(\n    getScreenTransform(insets),\n    AffineTransform.translation(scrollOrigin.x, scrollOrigin.y),\n    AffineTransform.scale(zoomValue),\n  );\n}\n","export function toRadians(degrees: number) {\n  return (degrees * Math.PI) / 180;\n}\n\nexport function toDegrees(radians: number) {\n  return (radians * 180) / Math.PI;\n}\n","import { MaskFilter, Paint, PaintStyle } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useMemo } from 'react';\nimport useColor, { ColorParameters } from './useColor';\nimport useDeletable from './useDeletable';\n\nexport interface PaintParameters {\n  color: ColorParameters;\n  opacity?: number;\n  style: PaintStyle;\n  strokeWidth?: number;\n  antiAlias?: boolean;\n  maskFilter?: MaskFilter;\n}\n\nfunction isPaint(value: Paint | PaintParameters): value is Paint {\n  return 'delete' in value;\n}\n\nexport default function usePaint(parameters: PaintParameters | Paint): Paint {\n  const CanvasKit = useCanvasKit();\n\n  const maybePaintObject = isPaint(parameters) ? parameters : undefined;\n  const maybeParameters = useStablePaintParameters(\n    !isPaint(parameters) ? parameters : undefined,\n  );\n\n  const paint = useMemo(() => {\n    if (!maybeParameters) return;\n\n    const paint = new CanvasKit.Paint();\n    paint.setColor(maybeParameters.color);\n    paint.setStyle(maybeParameters.style);\n    paint.setAntiAlias(maybeParameters.antiAlias ?? true);\n    paint.setStrokeWidth(maybeParameters.strokeWidth ?? 1);\n\n    if (maybeParameters.opacity !== undefined && maybeParameters.opacity < 1) {\n      paint.setAlphaf(maybeParameters.opacity);\n    }\n\n    if (maybeParameters.maskFilter) {\n      paint.setMaskFilter(maybeParameters.maskFilter);\n    }\n\n    return paint;\n  }, [maybeParameters, CanvasKit.Paint]);\n\n  const deletablePaint = useDeletable(paint);\n\n  return maybePaintObject ?? deletablePaint!;\n}\n\nfunction useStablePaintParameters(parameters: PaintParameters | undefined) {\n  const maybeColor = useColor(parameters?.color);\n\n  const paint = useMemo(\n    () => {\n      if (!maybeColor || !parameters) return;\n\n      return {\n        color: maybeColor!,\n        style: parameters.style,\n        antiAlias: parameters.antiAlias,\n        strokeWidth: parameters.strokeWidth,\n        maskFilter: parameters.maskFilter,\n        opacity: parameters.opacity,\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      maybeColor,\n      parameters?.style,\n      parameters?.antiAlias,\n      parameters?.strokeWidth,\n      parameters?.maskFilter,\n      parameters?.opacity,\n    ],\n  );\n\n  return paint;\n}\n","import styled from 'styled-components';\n\ninterface Props {\n  size?: number;\n}\n\n/* ----------------------------------------------------------------------------\n * Vertical\n * ------------------------------------------------------------------------- */\n\nconst SpacerVertical = styled.span<Props>(({ size }) => ({\n  display: 'block',\n  ...(size === undefined ? { flex: 1 } : { minHeight: size }),\n}));\n\n/* ----------------------------------------------------------------------------\n * Horizontal\n * ------------------------------------------------------------------------- */\n\nconst SpacerHorizontal = styled.span<Props>(({ size }) => ({\n  display: 'block',\n  ...(size === undefined ? { flex: 1 } : { minWidth: size }),\n}));\n\nexport const Vertical = SpacerVertical;\nexport const Horizontal = SpacerHorizontal;\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { createRect, Size } from 'noya-geometry';\nimport { SketchModel } from 'noya-sketch-model';\nimport type { PageLayer } from '..';\nimport { Point, Rect, UUID } from '../types';\nimport { defaultFillColor } from './styleReducer';\n\nexport const cardinalDirections = ['n', 'e', 's', 'w'] as const;\nexport const ordinalDirections = ['ne', 'se', 'sw', 'nw'] as const;\n\nexport type CardinalDirection = typeof cardinalDirections[number];\nexport type OrdinalDirection = typeof ordinalDirections[number];\nexport type CompassDirection = CardinalDirection | OrdinalDirection;\n\nexport const compassDirections: CompassDirection[] = [\n  ...cardinalDirections,\n  ...ordinalDirections,\n];\n\nexport function getCardinalDirections(\n  direction: CompassDirection,\n): CardinalDirection[] {\n  return direction.split('') as CardinalDirection[];\n}\n\nexport type DragHandle = {\n  rect: Rect;\n  compassDirection: CompassDirection;\n};\n\nexport type ShapeType = 'rectangle' | 'oval' | 'text' | 'artboard';\n\ntype Append<T extends unknown[], I extends unknown[]> = [...T, ...I];\n\n// These actions need to be augmented by additional state (a snapshot of the\n// current page) before being passed to the interaction reducer.\nexport type SnapshotInteractionAction =\n  | [type: 'maybeMove', origin: Point, canvasSize: Size]\n  | [\n      type: 'maybeScale',\n      origin: Point,\n      direction: CompassDirection,\n      canvasSize: Size,\n    ]\n  | [type: 'maybeMovePoint', origin: Point]\n  | [type: 'maybeMoveControlPoint', origin: Point];\n\nexport type InteractionAction =\n  | ['reset']\n  | [`insert${Capitalize<ShapeType>}`]\n  | [`insertingSymbol`, UUID, Point?]\n  | [type: 'editPath', current?: Point]\n  | [type: 'drawingShapePath', current?: Point]\n  | [type: 'resetEditPath', current?: Point]\n  | [type: 'startDrawing', shapeType: ShapeType, id: UUID, point: Point]\n  | [type: 'updateDrawing', point: Point]\n  | [type: 'startMarquee', point: Point]\n  | [type: 'updateMarquee', point: Point]\n  | [type: 'hoverHandle', direction: CompassDirection]\n  | [type: 'startMoving', point: Point]\n  | [type: 'startScaling', point: Point]\n  | [type: 'startPanning', point: Point]\n  | [type: 'updateMoving', point: Point]\n  | [type: 'updateScaling', point: Point]\n  | [type: 'updatePanning', point: Point]\n  | [type: 'enablePanMode']\n  | [type: 'maybePan', origin: Point]\n  | [type: 'maybeConvertCurveMode', origin: Point]\n  | [type: 'movingPoint', origin: Point, current: Point]\n  | [type: 'movingControlPoint', origin: Point, current: Point]\n  | [type: 'updateMovingPoint', origin: Point, current: Point]\n  | [type: 'updateMovingControlPoint', origin: Point, current: Point];\n\nexport type InteractionState =\n  | {\n      type: 'none';\n    }\n  | {\n      type: `insert${Capitalize<ShapeType>}`;\n    }\n  | {\n      type: 'insertingSymbol';\n      symbolID: UUID;\n      point?: Point;\n    }\n  | {\n      type: 'editPath';\n      point?: Point;\n    }\n  | {\n      type: 'drawingShapePath';\n      point?: Point;\n    }\n  | {\n      type: 'drawing';\n      origin: Point;\n      value: PageLayer;\n    }\n  | {\n      type: 'marquee';\n      origin: Point;\n      current: Point;\n    }\n  | {\n      type: 'maybeMove';\n      origin: Point;\n      canvasSize: Size;\n      pageSnapshot: Sketch.Page;\n    }\n  | {\n      type: 'maybeMovePoint';\n      origin: Point;\n      pageSnapshot: Sketch.Page;\n    }\n  | {\n      type: 'maybeConvertCurveMode';\n      origin: Point;\n    }\n  | {\n      type: 'maybeMoveControlPoint';\n      origin: Point;\n      pageSnapshot: Sketch.Page;\n    }\n  | {\n      type: 'movingPoint';\n      origin: Point;\n      current: Point;\n      pageSnapshot: Sketch.Page;\n    }\n  | {\n      type: 'movingControlPoint';\n      origin: Point;\n      current: Point;\n      pageSnapshot: Sketch.Page;\n    }\n  | { type: 'hoverHandle'; direction: CompassDirection }\n  | {\n      type: 'maybeScale';\n      origin: Point;\n      direction: CompassDirection;\n      canvasSize: Size;\n      pageSnapshot: Sketch.Page;\n    }\n  | {\n      type: 'moving';\n      origin: Point;\n      current: Point;\n      canvasSize: Size;\n      pageSnapshot: Sketch.Page;\n    }\n  | {\n      type: 'scaling';\n      origin: Point;\n      current: Point;\n      direction: CompassDirection;\n      canvasSize: Size;\n      pageSnapshot: Sketch.Page;\n    }\n  | { type: 'panMode' }\n  | { type: 'maybePan'; origin: Point }\n  | { type: 'panning'; previous: Point; next: Point };\n\nexport type InteractionType = InteractionState['type'];\n\ntype CreateLayerReturnType =\n  | Sketch.Oval\n  | Sketch.Rectangle\n  | Sketch.Text\n  | Sketch.Artboard;\n\nfunction createLayer(shapeType: ShapeType): CreateLayerReturnType {\n  const style = SketchModel.style({\n    fills: [\n      SketchModel.fill({\n        color: defaultFillColor,\n      }),\n    ],\n  });\n\n  switch (shapeType) {\n    case 'oval':\n      return SketchModel.oval({ style });\n    case 'rectangle':\n      return SketchModel.rectangle({ style });\n    case 'text':\n      return SketchModel.text();\n    case 'artboard':\n      return SketchModel.artboard();\n  }\n}\n\nexport function interactionReducer(\n  state: InteractionState,\n  action:\n    | InteractionAction\n    | Append<SnapshotInteractionAction, [pageSnapshot: Sketch.Page]>,\n): InteractionState {\n  switch (action[0]) {\n    case 'editPath':\n    case 'resetEditPath': {\n      const [, point] = action;\n      return { type: 'editPath', point: point };\n    }\n\n    case 'insertArtboard':\n    case 'insertOval':\n    case 'insertRectangle':\n    case 'insertText': {\n      return { type: action[0] };\n    }\n    case 'insertingSymbol': {\n      const [, symbolID, point] = action;\n      return { type: 'insertingSymbol', symbolID, point };\n    }\n    case 'hoverHandle': {\n      const [type, direction] = action;\n\n      return { type, direction };\n    }\n    case 'startMarquee': {\n      const [, point] = action;\n\n      return {\n        type: 'marquee',\n        origin: point,\n        current: point,\n      };\n    }\n    case 'updateMarquee': {\n      if (state.type !== 'marquee') return state;\n\n      const [, point] = action;\n\n      return produce(state, (draft) => {\n        draft.current = point;\n      });\n    }\n    case 'drawingShapePath': {\n      const [type, point] = action;\n\n      return {\n        type,\n        point,\n      };\n    }\n    case 'startDrawing': {\n      const [, shapeType, id, point] = action;\n\n      let layer = produce(createLayer(shapeType), (layer) => {\n        layer.do_objectID = id;\n        layer.frame = {\n          _class: 'rect',\n          constrainProportions: false,\n          ...createRect(point, point),\n        };\n      });\n\n      return {\n        type: 'drawing',\n        value: layer,\n        origin: point,\n      };\n    }\n    case 'updateDrawing': {\n      if (state.type !== 'drawing') return state;\n      const [, point] = action;\n\n      const rect = createRect(state.origin, point);\n\n      return produce(state, (draft) => {\n        draft.value.frame = {\n          ...draft.value.frame,\n          ...rect,\n        };\n      });\n    }\n    case 'maybeMove': {\n      const [, origin, canvasSize, pageSnapshot] = action;\n\n      return { type: action[0], origin, canvasSize, pageSnapshot };\n    }\n    case 'maybeScale': {\n      const [, origin, direction, canvasSize, pageSnapshot] = action;\n\n      return {\n        type: action[0],\n        origin,\n        direction,\n        canvasSize,\n        pageSnapshot,\n      };\n    }\n    case 'maybeMovePoint': {\n      const [type, origin, pageSnapshot] = action;\n\n      return {\n        type,\n        origin,\n        pageSnapshot,\n      };\n    }\n    case 'maybeConvertCurveMode': {\n      const [type, origin] = action;\n      return {\n        type,\n        origin,\n      };\n    }\n    case 'maybeMoveControlPoint': {\n      const [type, origin, pageSnapshot] = action;\n\n      return {\n        type,\n        origin,\n        pageSnapshot,\n      };\n    }\n    case 'movingPoint': {\n      const [type, origin, current] = action;\n\n      if (state.type !== 'maybeMovePoint') {\n        throw new Error(\n          'Bad interaction state - should be in `maybeMovePoint`',\n        );\n      }\n\n      return {\n        type,\n        origin,\n        current,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'updateMovingPoint': {\n      const [, origin, current] = action;\n\n      if (state.type !== 'movingPoint') {\n        throw new Error('Bad interaction state - should be in `movingPoint`');\n      }\n\n      return {\n        type: 'movingPoint',\n        origin,\n        current,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'updateMovingControlPoint': {\n      const [, origin, current] = action;\n\n      if (state.type !== 'movingControlPoint') {\n        throw new Error(\n          'Bad interaction state - should be in `movingControlPoint`',\n        );\n      }\n\n      return {\n        type: 'movingControlPoint',\n        origin,\n        current,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'movingControlPoint': {\n      const [type, origin, current] = action;\n\n      if (state.type !== 'maybeMoveControlPoint') {\n        throw new Error(\n          'Bad interaction state - should be in `maybeMoveControlPoint`',\n        );\n      }\n\n      return {\n        type,\n        origin,\n        current,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'startMoving': {\n      const [, point] = action;\n\n      if (state.type !== 'maybeMove') {\n        throw new Error('Bad interaction state - should be in `maybeMove`');\n      }\n\n      return {\n        type: 'moving',\n        origin: state.origin,\n        current: point,\n        canvasSize: state.canvasSize,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'startScaling': {\n      const [, point] = action;\n\n      if (state.type !== 'maybeScale') {\n        throw new Error('Bad interaction state - should be in `maybeScale`');\n      }\n\n      return {\n        type: 'scaling',\n        origin: state.origin,\n        current: point,\n        direction: state.direction,\n        canvasSize: state.canvasSize,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'updateMoving': {\n      const [, point] = action;\n\n      if (state.type !== 'moving') {\n        throw new Error('Bad interaction state - should be in `moving`');\n      }\n\n      return {\n        type: 'moving',\n        origin: state.origin,\n        current: point,\n        canvasSize: state.canvasSize,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'updateScaling': {\n      const [, point] = action;\n\n      if (state.type !== 'scaling') {\n        throw new Error('Bad interaction state - should be in `scaling`');\n      }\n\n      return {\n        type: 'scaling',\n        origin: state.origin,\n        current: point,\n        direction: state.direction,\n        canvasSize: state.canvasSize,\n        pageSnapshot: state.pageSnapshot,\n      };\n    }\n    case 'enablePanMode':\n      return { type: 'panMode' };\n    case 'maybePan': {\n      const [, origin] = action;\n\n      return { type: 'maybePan', origin };\n    }\n    case 'startPanning': {\n      const [, point] = action;\n\n      if (state.type !== 'maybePan') {\n        throw new Error('Bad interaction state - should be in `maybePan`');\n      }\n\n      return {\n        type: 'panning',\n        previous: state.origin,\n        next: point,\n      };\n    }\n    case 'updatePanning': {\n      const [, point] = action;\n\n      if (state.type !== 'panning') {\n        throw new Error('Bad interaction state - should be in `panning`');\n      }\n\n      return {\n        type: 'panning',\n        previous: state.next,\n        next: point,\n      };\n    }\n    case 'reset': {\n      return { type: 'none' };\n    }\n    default:\n      return state;\n  }\n}\n\nexport function createInitialInteractionState(): InteractionState {\n  return { type: 'none' };\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  AffineTransform,\n  Bounds,\n  createBounds,\n  Size,\n  Axis,\n} from 'noya-geometry';\nimport { isDeepEqual } from 'noya-utils';\nimport { IndexPath } from 'tree-visit';\nimport { Layers } from '.';\nimport { ParentLayer } from './layers';\nimport { ApplicationState } from './reducers/applicationReducer';\nimport { getLayersInRect } from './selectors/geometrySelectors';\nimport { getBoundingRect, getCurrentPage } from './selectors/selectors';\n\nexport function getAxisValues(\n  rectBounds: Bounds,\n  axis: Axis,\n): [number, number, number] {\n  if (axis === 'x') {\n    return [rectBounds.minX, rectBounds.midX, rectBounds.maxX];\n  } else {\n    return [rectBounds.minY, rectBounds.midY, rectBounds.maxY];\n  }\n}\n\nexport function getPossibleSnapLayers(\n  state: ApplicationState,\n  selectedIndexPaths: IndexPath[],\n  canvasSize: Size,\n) {\n  const page = getCurrentPage(state);\n\n  const allVisibleLayers = getLayersInRect(\n    state,\n    { left: 0, right: 0 },\n    { x: 0, y: 0, width: canvasSize.width, height: canvasSize.height },\n    {\n      clickThroughGroups: false,\n      includeHiddenLayers: false,\n      includeArtboardLayers: true,\n    },\n  );\n\n  // Are all selected ids in the same artboard?\n  const inSameArtboard =\n    Layers.isSymbolMasterOrArtboard(page.layers[selectedIndexPaths[0][0]]) &&\n    selectedIndexPaths.every((indexPath) => indexPath.length > 1) &&\n    selectedIndexPaths.every(\n      (indexPath) => indexPath[0] === selectedIndexPaths[0][0],\n    );\n\n  // Do all selected ids have the same parent?\n  const sharedParentIndex = selectedIndexPaths[0].slice(0, -1);\n  const inSameParent = selectedIndexPaths.every((indexPath) =>\n    isDeepEqual(indexPath.slice(0, -1), sharedParentIndex),\n  );\n\n  // TODO: Make sure these layers are visible\n  let groupLayers: Sketch.AnyLayer[] = [];\n\n  if (inSameArtboard) {\n    const artboard = page.layers[selectedIndexPaths[0][0]] as Sketch.Artboard;\n\n    groupLayers.push(artboard);\n\n    if (!inSameParent) {\n      groupLayers.push(...artboard.layers);\n    }\n  }\n\n  if (inSameParent) {\n    const parent = Layers.access(\n      page,\n      selectedIndexPaths[0].slice(0, -1),\n    ) as ParentLayer;\n\n    groupLayers.push(...parent.layers);\n  }\n\n  const visibleLayers =\n    inSameArtboard || inSameParent ? groupLayers : allVisibleLayers;\n\n  return visibleLayers;\n}\n\nexport function getLayerAxisInfo(\n  page: Sketch.Page,\n  layers: Sketch.AnyLayer[],\n): SnappingLayerInfo[] {\n  return layers.flatMap((layer) => {\n    const rect = getBoundingRect(\n      page,\n      AffineTransform.identity,\n      [layer.do_objectID],\n      {\n        clickThroughGroups: true,\n        includeHiddenLayers: false,\n        includeArtboardLayers: false,\n      },\n    );\n\n    if (!rect) return [];\n\n    const bounds = createBounds(rect);\n\n    return [\n      {\n        layerId: layer.do_objectID,\n        y: getAxisValues(bounds, 'y'),\n        x: getAxisValues(bounds, 'x'),\n      },\n    ];\n  });\n}\n\nexport function findSmallestSnappingDistance(values: SnappingPair[]) {\n  const getDelta = (pair: SnappingPair) =>\n    pair.selectedLayerValue - pair.visibleLayerValue;\n\n  const getDistance = (pair: SnappingPair) => Math.abs(getDelta(pair));\n\n  const distances = values\n    .filter((pair) => getDistance(pair) <= 6)\n    .sort((a, b) => getDistance(a) - getDistance(b));\n\n  return distances.length > 0 ? getDelta(distances[0]) : 0;\n}\n\ntype SnappingLayerInfo = {\n  layerId: string;\n  y: [number, number, number];\n  x: [number, number, number];\n};\n\nexport type SnappingPair = {\n  selectedLayerValue: number;\n  visibleLayerValue: number;\n  visibleLayerId: string;\n};\n\nexport function getSnappingPairs(\n  selectedAxisValues: [number, number, number],\n  visibleLayersAxisValues: SnappingLayerInfo[],\n  axis: Axis,\n): SnappingPair[] {\n  return visibleLayersAxisValues.flatMap((axisValues) =>\n    selectedAxisValues.flatMap((selectedLayerValue) =>\n      axisValues[axis].map((visibleLayerValue) => ({\n        selectedLayerValue: selectedLayerValue,\n        visibleLayerValue: visibleLayerValue,\n        visibleLayerId: axisValues.layerId,\n      })),\n    ),\n  );\n}\n","import React, { memo, useMemo } from 'react';\nimport styled from 'styled-components';\n\nconst Container = styled.div<{ selected: boolean }>(({ theme, selected }) => ({\n  width: '10px',\n  height: '10px',\n  borderRadius: '10px',\n  border: '2px solid white',\n  boxShadow: '0 0 1px 1px rgba(0,0,0,0.4), 0 0 1px 1px rgba(0,0,0,0.4) inset',\n  zIndex: 1,\n  borderColor: selected ? theme.colors.primary : 'white',\n  transform: 'translate(-50%, -50%)',\n  ...({ position: 'absolute' } as any),\n}));\n\ninterface Props {\n  top?: number;\n  left: number;\n  index?: number;\n  selected?: boolean;\n  onClick?: () => void;\n}\n\nexport default memo(function Pointer({\n  top = 0.5,\n  left,\n  index,\n  selected = false,\n  onClick,\n}: Props): JSX.Element {\n  const style = useMemo(\n    () => ({\n      top: `${top * 100}%`,\n      left: `${left * 100}%`,\n    }),\n    [left, top],\n  );\n\n  return (\n    <Container\n      data-index={index}\n      className={'pointer'}\n      style={style}\n      onClick={onClick}\n      selected={selected}\n    />\n  );\n});\n","import { useLayoutEffect, useEffect } from \"react\";\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nexport const useIsomorphicLayoutEffect =\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n","import React, { useCallback, useRef } from 'react';\nimport styled from 'styled-components';\nimport { useEventCallback } from '../hooks/useEventCallback';\nimport { useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect';\nimport { clamp } from '../utils/clamp';\n\nconst Container = styled.div(() => ({\n  position: 'absolute' as any,\n  left: 0,\n  top: 0,\n  right: 0,\n  bottom: 0,\n  borderRadius: 'inherit',\n  outline: 'none',\n  /* Don't trigger the default scrolling behavior when the event is originating from this element */\n  touchAction: 'none',\n}));\n\nexport interface Interaction {\n  left: number;\n  top: number;\n}\n\n// Check if an event was triggered by touch\nconst isTouch = (e: MouseEvent | TouchEvent): e is TouchEvent => 'touches' in e;\n\n// Returns a relative position of the pointer inside the node's bounding box\nconst getRelativePosition = (\n  node: HTMLDivElement,\n  event: MouseEvent | TouchEvent,\n): Interaction => {\n  const rect = node.getBoundingClientRect();\n\n  // Get user's pointer position from `touches` array if it's a `TouchEvent`\n  const pointer = isTouch(event) ? event.touches[0] : (event as MouseEvent);\n\n  return {\n    left: clamp(\n      (pointer.pageX - (rect.left + window.pageXOffset)) / rect.width,\n    ),\n    top: clamp((pointer.pageY - (rect.top + window.pageYOffset)) / rect.height),\n  };\n};\n\ninterface Props {\n  onMove: (interaction: Interaction) => void;\n  onKey: (offset: Interaction) => void;\n  onClick?: (interaction: Interaction | number) => void;\n  onDelete?: () => void;\n  onClickPointer?: (index: number) => void;\n  children: React.ReactNode;\n}\n\nconst InteractiveBase = ({\n  onMove,\n  onKey,\n  onClick,\n  onDelete,\n  onClickPointer,\n  ...rest\n}: Props) => {\n  const container = useRef<HTMLDivElement>(null);\n  const hasTouched = useRef(false);\n  const isDragging = useRef(false);\n  const onMoveCallback = useEventCallback(onMove);\n  const onKeyCallback = useEventCallback(onKey);\n  const onClickCallback = useEventCallback(onClick);\n  const onClickPointerCallback = useEventCallback(onClickPointer);\n\n  // Prevent mobile browsers from handling mouse events (conflicting with touch ones).\n  // If we detected a touch interaction before, we prefer reacting to touch events only.\n  const isValid = (event: MouseEvent | TouchEvent): boolean => {\n    if (hasTouched.current && !isTouch(event)) return false;\n    if (!hasTouched.current) hasTouched.current = isTouch(event);\n    return true;\n  };\n\n  const handleMove = useCallback(\n    (event: MouseEvent | TouchEvent) => {\n      if (!isDragging.current || !container.current) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation();\n\n      onMoveCallback(getRelativePosition(container.current, event));\n\n      // // If user moves the pointer outside of the window or iframe bounds and release it there,\n      // // `mouseup`/`touchend` won't be fired. In order to stop the picker from following the cursor\n      // // after the user has moved the mouse/finger back to the document, we check `event.buttons`\n      // // and `event.touches`. It allows us to detect that the user is just moving his pointer\n      // // without pressing it down\n      // const isDown = isTouch(event)\n      //   ? event.touches.length > 0\n      //   : event.buttons > 0;\n\n      // if (isDown && container.current) {\n      //   onMoveCallback(getRelativePosition(container.current, event));\n      // } else {\n      //   isDragging.current = false;\n      // }\n    },\n    [onMoveCallback],\n  );\n\n  const handleMoveStart = useCallback(\n    ({ nativeEvent: event }: React.MouseEvent | React.TouchEvent) => {\n      event.preventDefault();\n\n      if (!isValid(event)) return;\n\n      if (onClick) {\n        if (\n          event.target instanceof HTMLElement &&\n          !event.target.classList.contains('pointer')\n        ) {\n          onClickCallback(getRelativePosition(container.current!, event));\n          return;\n        }\n        if (onClickPointer && event.target instanceof HTMLElement) {\n          onClickPointerCallback(Number(event.target.dataset.index));\n        }\n      } else {\n        // The node/ref must actually exist when user start an interaction.\n        // We won't suppress the ESLint warning though, as it should probably be something to be aware of.\n        onMoveCallback(getRelativePosition(container.current!, event));\n      }\n\n      isDragging.current = true;\n    },\n    [\n      onMoveCallback,\n      onClickCallback,\n      onClickPointer,\n      onClickPointerCallback,\n      onClick,\n    ],\n  );\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      const keyCode = event.which || event.keyCode;\n\n      if (onDelete && keyCode === 46) onDelete();\n      // Ignore all keys except arrow ones\n      if (keyCode < 37 || keyCode > 40) return;\n      // Do not scroll page by arrow keys when document is focused on the element\n      event.preventDefault();\n      // Send relative offset to the parent component.\n      // We use codes (37, 38, 39, 40) instead of keys ('ArrowRight', 'ArrowDown', etc)\n      // to reduce the size of the library\n      onKeyCallback({\n        left: keyCode === 39 ? 0.05 : keyCode === 37 ? -0.05 : 0,\n        top: keyCode === 40 ? 0.05 : keyCode === 38 ? -0.05 : 0,\n      });\n    },\n    [onKeyCallback, onDelete],\n  );\n\n  const handleMoveEnd = useCallback((event: MouseEvent | TouchEvent) => {\n    // console.log('is dragging?', isDragging.current);\n\n    if (!isDragging.current) return;\n\n    // console.log('handle end');\n\n    event.preventDefault();\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n\n    isDragging.current = false;\n  }, []);\n\n  const toggleDocumentEvents = useCallback(\n    (state) => {\n      // console.log(state ? 'add' : 'remove', 'events');\n\n      // add or remove additional pointer event listeners\n      const toggleEvent = state\n        ? window.addEventListener\n        : window.removeEventListener;\n      toggleEvent(\n        hasTouched.current ? 'touchmove' : 'mousemove',\n        handleMove,\n        true,\n      );\n      toggleEvent(\n        hasTouched.current ? 'touchend' : 'mouseup',\n        handleMoveEnd,\n        true,\n      );\n    },\n    [handleMove, handleMoveEnd],\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    toggleDocumentEvents(true);\n\n    return () => {\n      toggleDocumentEvents(false);\n    };\n  }, [toggleDocumentEvents]);\n\n  return (\n    <Container\n      {...rest}\n      ref={container}\n      onTouchStart={handleMoveStart}\n      onMouseDown={handleMoveStart}\n      onKeyDown={handleKeyDown}\n      tabIndex={0}\n      role=\"slider\"\n    />\n  );\n};\n\nexport const Interactive = React.memo(InteractiveBase);\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  hsvaToHex,\n  hsvaToRgbaString,\n  RgbaColor,\n  rgbaToHsva,\n} from 'noya-colorpicker';\n\nexport function sketchColorToRgba(value: Sketch.Color): RgbaColor {\n  return {\n    r: Math.floor(value.red * 255),\n    g: Math.floor(value.green * 255),\n    b: Math.floor(value.blue * 255),\n    a: value.alpha,\n  };\n}\n\nexport function sketchColorToRgbaString(value: Sketch.Color): string {\n  return hsvaToRgbaString(rgbaToHsva(sketchColorToRgba(value)));\n}\n\nexport function rgbaToSketchColor(value: RgbaColor): Sketch.Color {\n  return {\n    _class: 'color',\n    alpha: value.a,\n    red: value.r / 255,\n    green: value.g / 255,\n    blue: value.b / 255,\n  };\n}\n\nexport function sketchColorToHex(value: Sketch.Color): string {\n  return hsvaToHex(rgbaToHsva(sketchColorToRgba(value))).toUpperCase();\n}\n","import { round } from \"./round\";\nimport { RgbaColor, RgbColor, HslaColor, HslColor, HsvaColor, HsvColor } from \"../types\";\n\nexport const hexToHsva = (hex: string): HsvaColor => rgbaToHsva(hexToRgba(hex));\n\nexport const hexToRgba = (hex: string): RgbaColor => {\n  if (hex[0] === \"#\") hex = hex.substr(1);\n\n  if (hex.length < 6) {\n    return {\n      r: parseInt(hex[0] + hex[0], 16),\n      g: parseInt(hex[1] + hex[1], 16),\n      b: parseInt(hex[2] + hex[2], 16),\n      a: 1,\n    };\n  }\n\n  return {\n    r: parseInt(hex.substr(0, 2), 16),\n    g: parseInt(hex.substr(2, 2), 16),\n    b: parseInt(hex.substr(4, 2), 16),\n    a: 1,\n  };\n};\n\nexport const hslaStringToHsva = (hslString: string): HsvaColor => {\n  const matcher = /hsla?\\((\\d+\\.?\\d*),\\s*(\\d+\\.?\\d*)%?,\\s*(\\d+\\.?\\d*)%?,?\\s*(\\d+\\.?\\d*)?\\)/;\n  const match = matcher.exec(hslString);\n\n  if (!match) return { h: 0, s: 0, v: 0, a: 1 };\n\n  return hslaToHsva({\n    h: Number(match[1]),\n    s: Number(match[2]),\n    l: Number(match[3]),\n    a: match[4] === undefined ? 1 : Number(match[4]),\n  });\n};\n\nexport const hslStringToHsva = hslaStringToHsva;\n\nexport const hslaToHsva = ({ h, s, l, a }: HslaColor): HsvaColor => {\n  s *= (l < 50 ? l : 100 - l) / 100;\n\n  return {\n    h: h,\n    s: s > 0 ? ((2 * s) / (l + s)) * 100 : 0,\n    v: l + s,\n    a,\n  };\n};\n\nexport const hsvaToHex = (hsva: HsvaColor): string => rgbaToHex(hsvaToRgba(hsva));\n\nexport const hsvaToHsla = ({ h, s, v, a }: HsvaColor): HslaColor => {\n  const hh = ((200 - s) * v) / 100;\n\n  return {\n    h: round(h),\n    s: round(hh > 0 && hh < 200 ? ((s * v) / 100 / (hh <= 100 ? hh : 200 - hh)) * 100 : 0),\n    l: round(hh / 2),\n    a: round(a, 2),\n  };\n};\n\nexport const hsvaToHslString = (hsva: HsvaColor): string => {\n  const { h, s, l } = hsvaToHsla(hsva);\n  return `hsl(${h}, ${s}%, ${l}%)`;\n};\n\nexport const hsvaToHsvString = (hsva: HsvaColor): string => {\n  const { h, s, v } = roundHsva(hsva);\n  return `hsv(${h}, ${s}%, ${v}%)`;\n};\n\nexport const hsvaToHsvaString = (hsva: HsvaColor): string => {\n  const { h, s, v, a } = roundHsva(hsva);\n  return `hsva(${h}, ${s}%, ${v}%, ${a})`;\n};\n\nexport const hsvaToHslaString = (hsva: HsvaColor): string => {\n  const { h, s, l, a } = hsvaToHsla(hsva);\n  return `hsla(${h}, ${s}%, ${l}%, ${a})`;\n};\n\nexport const hsvaToRgba = ({ h, s, v, a }: HsvaColor): RgbaColor => {\n  h = (h / 360) * 6;\n  s = s / 100;\n  v = v / 100;\n\n  const hh = Math.floor(h),\n    b = v * (1 - s),\n    c = v * (1 - (h - hh) * s),\n    d = v * (1 - (1 - h + hh) * s),\n    module = hh % 6;\n\n  return {\n    r: round([v, c, b, b, d, v][module] * 255),\n    g: round([d, v, v, c, b, b][module] * 255),\n    b: round([b, b, d, v, v, c][module] * 255),\n    a: round(a, 2),\n  };\n};\n\nexport const hsvaToRgbString = (hsva: HsvaColor): string => {\n  const { r, g, b } = hsvaToRgba(hsva);\n  return `rgb(${r}, ${g}, ${b})`;\n};\n\nexport const hsvaToRgbaString = (hsva: HsvaColor): string => {\n  const { r, g, b, a } = hsvaToRgba(hsva);\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n};\n\nexport const hsvaStringToHsva = (hsvString: string): HsvaColor => {\n  const matcher = /hsva?\\((\\d+\\.?\\d*),\\s*(\\d+\\.?\\d*)%?,\\s*(\\d+\\.?\\d*)%?,?\\s*(\\d+\\.?\\d*)?\\)/;\n  const match = matcher.exec(hsvString);\n\n  if (!match) return { h: 0, s: 0, v: 0, a: 1 };\n\n  return roundHsva({\n    h: Number(match[1]),\n    s: Number(match[2]),\n    v: Number(match[3]),\n    a: match[4] === undefined ? 1 : Number(match[4]),\n  });\n};\n\nexport const hsvStringToHsva = hsvaStringToHsva;\n\nexport const rgbaStringToHsva = (rgbaString: string): HsvaColor => {\n  const matcher = /rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),?\\s*(\\d+\\.?\\d*)?\\)/;\n  const match = matcher.exec(rgbaString);\n\n  if (!match) return { h: 0, s: 0, v: 0, a: 1 };\n\n  return rgbaToHsva({\n    r: Number(match[1]),\n    g: Number(match[2]),\n    b: Number(match[3]),\n    a: match[4] === undefined ? 1 : Number(match[4]),\n  });\n};\n\nexport const rgbStringToHsva = rgbaStringToHsva;\n\nconst format = (number: number) => {\n  const hex = number.toString(16);\n  return hex.length < 2 ? \"0\" + hex : hex;\n};\n\nexport const rgbaToHex = ({ r, g, b }: RgbaColor): string => {\n  return \"#\" + format(r) + format(g) + format(b);\n};\n\nexport const rgbaToHsva = ({ r, g, b, a }: RgbaColor): HsvaColor => {\n  const max = Math.max(r, g, b);\n  const delta = max - Math.min(r, g, b);\n\n  // prettier-ignore\n  const hh = delta\n    ? max === r\n      ? (g - b) / delta\n      : max === g\n        ? 2 + (b - r) / delta\n        : 4 + (r - g) / delta\n    : 0;\n\n  return {\n    h: round(60 * (hh < 0 ? hh + 6 : hh)),\n    s: round(max ? (delta / max) * 100 : 0),\n    v: round((max / 255) * 100),\n    a,\n  };\n};\n\nexport const roundHsva = (hsva: HsvaColor): HsvaColor => ({\n  h: round(hsva.h),\n  s: round(hsva.s),\n  v: round(hsva.v),\n  a: round(hsva.a, 2),\n});\n\nexport const rgbaToRgb = ({ r, g, b }: RgbaColor): RgbColor => ({ r, g, b });\n\nexport const hslaToHsl = ({ h, s, l }: HslaColor): HslColor => ({ h, s, l });\n\nexport const hsvaToHsv = (hsva: HsvaColor): HsvColor => {\n  const { h, s, v } = roundHsva(hsva);\n  return { h, s, v };\n};\n","// Clamps a value between an upper and lower bound.\n// We use ternary operators because it makes the minified code\n// 2 times shorter then `Math.min(Math.max(a,b),c)`\nexport const clamp = (number: number, min = 0, max = 1): number => {\n  return number > max ? max : number < min ? min : number;\n};\n","import { useRef, useEffect, useCallback } from 'react';\n\n// Saves incoming handler to the ref in order to avoid \"useCallback hell\"\nfunction useEventCallback<T extends any[]>(\n  handler?: (...values: T) => void,\n): (...values: T) => void {\n  const callbackRef = useRef(handler);\n\n  useEffect(() => {\n    callbackRef.current = handler;\n  });\n\n  return useCallback(\n    (...values: T) => callbackRef.current && callbackRef.current(...values),\n    [],\n  );\n}\n\nexport { useEventCallback };","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce, { Draft } from 'immer';\nimport { RelativeDropPosition } from 'noya-designsystem';\nimport {\n  AffineTransform,\n  createBounds,\n  rectContainsPoint,\n  rectsIntersect,\n  transformRect,\n} from 'noya-geometry';\nimport { IndexPath } from 'tree-visit';\nimport {\n  ApplicationState,\n  isLine,\n  isPointsLayer,\n  Layers,\n  PageLayer,\n  Selectors,\n} from '../index';\nimport type { Point, UUID } from '../types';\nimport {\n  getLayerIndexPathsExcludingDescendants,\n  getSelectedLayerIndexPathsExcludingDescendants,\n} from './indexPathSelectors';\nimport { getCurrentPage, getCurrentPageIndex } from './pageSelectors';\nimport { getLayerTransformAtIndexPath } from './transformSelectors';\n\nexport const getSelectedLayersExcludingDescendants = (\n  state: ApplicationState,\n): Sketch.AnyLayer[] => {\n  const pageIndex = getCurrentPageIndex(state);\n\n  return getSelectedLayerIndexPathsExcludingDescendants(state).map(\n    (layerIndex) => {\n      return Layers.access(state.sketch.pages[pageIndex], layerIndex);\n    },\n  );\n};\n\nexport const getSelectedTextLayers = (\n  state: ApplicationState,\n): Sketch.Text[] => {\n  return getSelectedLayers(state).filter(\n    (layer): layer is Sketch.Text => layer._class === 'text',\n  );\n};\n\nexport const getSelectedLayers = (\n  state: Draft<ApplicationState>,\n): PageLayer[] => {\n  const page = getCurrentPage(state);\n\n  return Layers.findAll(page, (layer) =>\n    state.selectedObjects.includes(layer.do_objectID),\n  ) as PageLayer[];\n};\n\nexport const getSelectedLayersWithContextSettings = (\n  state: ApplicationState,\n): PageLayer[] => {\n  const page = getCurrentPage(state);\n\n  return (Layers.findAll(page, (layer) =>\n    state.selectedObjects.includes(layer.do_objectID),\n  ) as PageLayer[]).filter(\n    (layer) => layer._class !== 'artboard' && layer.style?.contextSettings,\n  );\n};\n\nexport const getSelectedLayersWithFixedRadius = (\n  state: ApplicationState,\n): Sketch.Rectangle[] => {\n  const page = getCurrentPage(state);\n\n  return Layers.findAll(page, (layer) =>\n    state.selectedObjects.includes(layer.do_objectID),\n  ).filter((layer): layer is Sketch.Rectangle => layer._class === 'rectangle');\n};\n\nexport const makeGetPageLayers = (\n  state: ApplicationState,\n): ((ids: UUID[]) => PageLayer[]) => {\n  const page = getCurrentPage(state);\n\n  return (ids: UUID[]) =>\n    ids\n      .map((id) => page.layers.find((layer) => layer.do_objectID === id))\n      .filter((layer): layer is PageLayer => !!layer);\n};\n\nexport const deleteLayers = (layers: IndexPath[], page: Sketch.Page) => {\n  // We delete in reverse so that the indexPaths remain accurate even\n  // after some layers are deleted.\n  const reversed = [...layers].reverse();\n\n  reversed.forEach((indexPath) => {\n    const childIndex = indexPath[indexPath.length - 1];\n    const parent = Layers.access(\n      page,\n      indexPath.slice(0, -1),\n    ) as Layers.ParentLayer;\n    parent.layers.splice(childIndex, 1);\n  });\n};\n\nexport const getParentLayer = (page: Sketch.AnyLayer, indexPath: IndexPath) =>\n  Layers.access(page, indexPath.slice(0, -1)) as Layers.ParentLayer;\n\nexport const addSiblingLayer = <\n  T extends Exclude<Sketch.AnyLayer, { _class: 'page' }>\n>(\n  page: Sketch.AnyLayer,\n  indexPath: IndexPath,\n  layer: T | T[],\n) => {\n  const parent = getParentLayer(page, indexPath);\n  const layers = layer instanceof Array ? layer : [layer];\n  parent.layers.splice(indexPath[indexPath.length - 1], 0, ...layers);\n};\n\nexport const getRightMostLayerBounds = (page: Sketch.Page) => {\n  const layer = page.layers.sort((a, b) => {\n    const aBounds = createBounds(a.frame);\n    const bBounds = createBounds(b.frame);\n\n    return bBounds.maxX - aBounds.maxX;\n  })[0];\n\n  return createBounds(layer.frame);\n};\n\nexport function findSymbolMaster<T extends Sketch.SymbolMaster | undefined>(\n  state: ApplicationState,\n  symbolID: string,\n): T {\n  return Layers.findInArray(\n    state.sketch.pages,\n    (child) => Layers.isSymbolMaster(child) && symbolID === child.symbolID,\n  ) as T;\n}\n\nexport function addToParentLayer(\n  layers: Sketch.AnyLayer[],\n  layer: Sketch.AnyLayer,\n) {\n  const parent = layers\n    .filter(\n      (layer): layer is Sketch.Artboard | Sketch.SymbolMaster =>\n        Layers.isArtboard(layer) || Layers.isSymbolMaster(layer),\n    )\n    .find((artboard) => rectsIntersect(artboard.frame, layer.frame));\n\n  if (parent && Layers.isChildLayer(layer)) {\n    layer.frame.x -= parent.frame.x;\n    layer.frame.y -= parent.frame.y;\n\n    parent.layers.push(layer);\n  } else {\n    layers.push(layer);\n  }\n}\n\nexport function getSelectedLineLayer(\n  state: ApplicationState,\n): Layers.PointsLayer | undefined {\n  const page = Selectors.getCurrentPage(state);\n  const indexPath = Layers.findIndexPath(\n    page,\n    (layer) => layer.do_objectID === state.selectedObjects[0],\n  );\n  if (!indexPath) return undefined;\n\n  const layer = Layers.access(page, indexPath);\n\n  if (!isPointsLayer(layer)) return undefined;\n\n  return isLine(layer.points) ? layer : undefined;\n}\nexport function getParentLayerAtPoint(page: Sketch.Page, point: Point) {\n  return page.layers\n    .filter(\n      (layer): layer is Sketch.Artboard | Sketch.SymbolMaster =>\n        Layers.isArtboard(layer) || Layers.isSymbolMaster(layer),\n    )\n    .find((artboard) => rectContainsPoint(artboard.frame, point));\n}\n\nexport function moveLayer(\n  state: ApplicationState,\n  id: string | string[],\n  destinationId: string,\n  rawPosition: RelativeDropPosition,\n) {\n  const position =\n    rawPosition === 'above'\n      ? 'below'\n      : rawPosition === 'below'\n      ? 'above'\n      : rawPosition;\n\n  const ids = typeof id === 'string' ? [id] : id;\n\n  const indexPaths = getLayerIndexPathsExcludingDescendants(state, ids);\n  const pageIndex = getCurrentPageIndex(state);\n\n  return produce(state, (draft) => {\n    const draftPage = draft.sketch.pages[pageIndex];\n\n    const layerInfo = indexPaths.map((indexPath) => ({\n      layer: Layers.access(draftPage, indexPath) as Layers.ChildLayer,\n      transform: getLayerTransformAtIndexPath(draftPage, indexPath),\n    }));\n\n    deleteLayers(indexPaths, draftPage);\n\n    const destinationIndexPath = Layers.findIndexPath(\n      draftPage,\n      (layer) => layer.do_objectID === destinationId,\n    );\n\n    if (!destinationIndexPath) return;\n\n    let parentIndexPath: IndexPath;\n    let parent: Layers.ParentLayer;\n    let destinationIndex: number;\n\n    switch (position) {\n      case 'inside': {\n        parentIndexPath = destinationIndexPath;\n        parent = Layers.access(\n          draftPage,\n          parentIndexPath,\n        ) as Layers.ParentLayer;\n\n        destinationIndex = parent.layers.length;\n        break;\n      }\n      case 'above':\n      case 'below': {\n        parentIndexPath = destinationIndexPath.slice(0, -1);\n        parent = Layers.access(\n          draftPage,\n          parentIndexPath,\n        ) as Layers.ParentLayer;\n\n        const siblingIndex =\n          destinationIndexPath[destinationIndexPath.length - 1];\n\n        destinationIndex =\n          position === 'above' ? siblingIndex : siblingIndex + 1;\n        break;\n      }\n    }\n\n    const parentTransform = getLayerTransformAtIndexPath(\n      draftPage,\n      parentIndexPath,\n      undefined,\n      'includeLast',\n    );\n\n    const adjustedLayers = layerInfo.map(({ layer, transform }) => {\n      // First we undo the original parent's transform, then we apply the new parent's transform\n      const newTransform = AffineTransform.multiply(\n        transform,\n        parentTransform.invert(),\n      );\n\n      return produce(layer, (draftLayer) => {\n        draftLayer.frame = {\n          ...draftLayer.frame,\n          ...transformRect(draftLayer.frame, newTransform),\n        };\n      });\n    });\n\n    parent.layers.splice(destinationIndex, 0, ...adjustedLayers);\n  });\n}\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { IndexPath } from 'tree-visit';\nimport { ApplicationState, Layers } from '../index';\nimport { findIndexPath, INCLUDE_AND_SKIP } from '../layers';\nimport type { UUID } from '../types';\nimport { getCurrentPage, getCurrentPageIndex } from './pageSelectors';\n\nexport type LayerIndexPath = { pageIndex: number; indexPath: IndexPath };\n\nexport type LayerIndexPaths = { pageIndex: number; indexPaths: IndexPath[] };\n\nexport const getLayerIndexPath = (\n  state: ApplicationState,\n  id: UUID,\n): LayerIndexPath | undefined => {\n  const page = getCurrentPage(state);\n  const pageIndex = getCurrentPageIndex(state);\n  const indexPath = findIndexPath(page, (layer) => layer.do_objectID === id);\n\n  return indexPath ? { pageIndex, indexPath } : undefined;\n};\n\nexport const findPageLayerIndexPaths = (\n  state: ApplicationState,\n  predicate: (layer: Sketch.AnyLayer) => boolean,\n): LayerIndexPaths[] => {\n  return state.sketch.pages.map((page, pageIndex) => ({\n    pageIndex: pageIndex,\n    indexPaths: Layers.findAllIndexPaths(page, predicate),\n  }));\n};\n\nexport const getSelectedLayerIndexPaths = (\n  state: ApplicationState,\n): IndexPath[] => {\n  const page = getCurrentPage(state);\n\n  return Layers.findAllIndexPaths(page, (layer) =>\n    state.selectedObjects.includes(layer.do_objectID),\n  );\n};\n\nexport const getLayerIndexPathsExcludingDescendants = (\n  state: ApplicationState,\n  ids: string[],\n): IndexPath[] => {\n  const page = getCurrentPage(state);\n\n  return Layers.findAllIndexPaths<Sketch.AnyLayer>(page, (layer) => {\n    const included = ids.includes(layer.do_objectID);\n\n    if (included && Layers.isParentLayer(layer)) {\n      return INCLUDE_AND_SKIP;\n    }\n\n    return included;\n  });\n};\n\nexport const getSelectedLayerIndexPathsExcludingDescendants = (\n  state: ApplicationState,\n): IndexPath[] => {\n  return getLayerIndexPathsExcludingDescendants(state, state.selectedObjects);\n};\n\nexport const getIndexPathsForGroup = (\n  state: ApplicationState,\n  ids: string[],\n) => {\n  return getLayerIndexPathsExcludingDescendants(\n    state,\n    ids,\n  ).filter((indexPath) =>\n    Layers.isChildLayer(Layers.access(getCurrentPage(state), indexPath)),\n  );\n};\n\nexport const getIndexPathsOfArtboardLayers = (\n  state: ApplicationState,\n  ids: string[],\n) => {\n  return getLayerIndexPathsExcludingDescendants(\n    state,\n    ids,\n  ).filter((indexPath) =>\n    Layers.isArtboard(Layers.access(getCurrentPage(state), indexPath)),\n  );\n};\n","import { useEffect, useRef } from 'react';\n\ninterface Deletable {\n  delete: () => void;\n  isDeleted: () => boolean;\n}\n\nexport default function useDeletable<T extends Deletable>(object: T): T;\nexport default function useDeletable<T extends Deletable>(\n  object: T | undefined,\n): T | undefined;\nexport default function useDeletable<T extends Deletable>(\n  object: T | undefined,\n): T | undefined {\n  const ref = useRef<T | undefined>(object);\n\n  // Delete whenever the value changes\n  if (ref.current !== object) {\n    if (ref.current && !ref.current.isDeleted()) {\n      ref.current.delete();\n    }\n\n    ref.current = object;\n  }\n\n  // Delete on unmount\n  useEffect(() => {\n    return () => {\n      if (ref.current && !ref.current.isDeleted()) {\n        ref.current.delete();\n      }\n    };\n  }, []);\n\n  return object;\n}\n","import { Rect } from 'canvaskit';\nimport useStable4ElementArray from './useStable4ElementArray';\n\nexport type RectParameters = Float32Array;\n\nexport default function useRect(parameters: RectParameters): Rect {\n  return useStable4ElementArray(parameters);\n}\n","import { createContext, useContext } from 'react';\nimport { HsvaColor } from '../types';\n\ntype ColorPickerContextValue = [\n  hsva: HsvaColor,\n  onChange: (\n    color: Partial<HsvaColor>,\n  ) => void,\n];\n\nconst ColorPickerContext = createContext<ColorPickerContextValue | undefined>(\n  undefined,\n);\n\nexport const ColorPickerProvider = ColorPickerContext.Provider;\n\nexport function useColorPicker(): ColorPickerContextValue {\n  const value = useContext(ColorPickerContext);\n\n  if (!value) {\n    throw new Error('Missing ColorPickerProvider');\n  }\n\n  return value;\n}","import { Draft } from 'immer';\nimport { ApplicationState } from '../index';\nimport { ThemeTab, WorkspaceTab } from '../reducers/applicationReducer';\n\nexport const getCurrentTab = (\n  state: ApplicationState | Draft<ApplicationState>,\n): WorkspaceTab => {\n  return state.currentTab;\n};\n\nexport const getCurrentComponentsTab = (state: ApplicationState): ThemeTab => {\n  return state.currentThemeTab;\n};\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit, Path, PathOp } from 'canvaskit';\nimport { distance, Rect } from 'noya-geometry';\nimport { parsePoint, Point, stringifyPoint } from 'noya-state';\nimport { rotate, windowsOf, zip } from 'noya-utils';\n\n/**\n * The radius of an edge should be less than half the length of that edge\n */\nfunction getEdgeRadius(a: Point, b: Point, cornerRadius: number): number {\n  const dist = distance(a, b);\n\n  return dist <= cornerRadius * 2 ? dist / 2 : cornerRadius;\n}\n\n/**\n * The radius of a corner should be symmetric on both sides\n */\nfunction getCornerRadius(\n  before: Point,\n  corner: Point,\n  after: Point,\n  cornerRadius: number,\n): number {\n  const beforeRadius = getEdgeRadius(corner, before, cornerRadius);\n  const afterRadius = getEdgeRadius(corner, after, cornerRadius);\n  return Math.min(beforeRadius, afterRadius);\n}\n\n// Implementation loosely follows:\n// https://github.com/google/skia/blob/13d6c4f55db0d1429f889704ed9b2e48968ac7a3/src/effects/SkCornerPathEffect.cpp#L24\nfunction getStep(\n  a: Point,\n  b: Point,\n  radius: number,\n): { step: Point; drawSegment: boolean } {\n  let dist = distance(a, b);\n\n  const step: Point = { x: b.x - a.x, y: b.y - a.y };\n\n  // Since we clamp radius beforehand, the dist will never be < radius * 2, only equal\n  if (dist <= radius * 2) {\n    step.x /= 2;\n    step.y /= 2;\n\n    return { step, drawSegment: false };\n  }\n\n  step.x *= radius / dist;\n  step.y *= radius / dist;\n\n  return { step, drawSegment: true };\n}\n\nexport type DecodedCurvePoint = Omit<\n  Sketch.CurvePoint,\n  'curveFrom' | 'curveTo' | 'point'\n> & {\n  curveFrom: Point;\n  curveTo: Point;\n  point: Point;\n};\n\nexport function scalePoint(point: Point, { x, y, width, height }: Rect): Point {\n  return { x: x + point.x * width, y: y + point.y * height };\n}\n\nexport function unscalePoint(\n  point: Point,\n  { x, y, width, height }: Rect,\n): Point {\n  return { x: (point.x - x) / width, y: (point.y - y) / height };\n}\n\nexport function decodeCurvePoint(\n  curvePoint: Sketch.CurvePoint,\n  frame: Rect,\n): DecodedCurvePoint {\n  return {\n    ...curvePoint,\n    hasCurveFrom: curvePoint.hasCurveTo,\n    hasCurveTo: curvePoint.hasCurveFrom,\n    curveFrom: scalePoint(parsePoint(curvePoint.curveTo), frame),\n    curveTo: scalePoint(parsePoint(curvePoint.curveFrom), frame),\n    point: scalePoint(parsePoint(curvePoint.point), frame),\n  };\n}\n\nexport function encodeCurvePoint(\n  curvePoint: DecodedCurvePoint,\n  frame: Rect,\n): Sketch.CurvePoint {\n  return {\n    ...curvePoint,\n    hasCurveFrom: curvePoint.hasCurveTo,\n    hasCurveTo: curvePoint.hasCurveFrom,\n    curveFrom: stringifyPoint(unscalePoint(curvePoint.curveTo, frame)),\n    curveTo: stringifyPoint(unscalePoint(curvePoint.curveFrom, frame)),\n    point: stringifyPoint(unscalePoint(curvePoint.point, frame)),\n  };\n}\n\nfunction curveTo(\n  path: Path,\n  current: DecodedCurvePoint,\n  next: DecodedCurvePoint,\n) {\n  const curveTo = current.hasCurveTo ? current.curveTo : current.point;\n  const curveFrom = next.hasCurveFrom ? next.curveFrom : next.point;\n  const nextPoint = next.point;\n\n  path.cubicTo(\n    curveTo.x,\n    curveTo.y,\n    curveFrom.x,\n    curveFrom.y,\n    nextPoint.x,\n    nextPoint.y,\n  );\n}\n\nfunction lineTo(path: Path, next: DecodedCurvePoint) {\n  const nextPoint = next.point;\n\n  path.lineTo(nextPoint.x, nextPoint.y);\n}\n\nfunction curveOrLineTo(\n  path: Path,\n  current: DecodedCurvePoint,\n  next: DecodedCurvePoint,\n) {\n  if (\n    current.curveMode === Sketch.CurveMode.Straight &&\n    next.curveMode === Sketch.CurveMode.Straight\n  ) {\n    lineTo(path, next);\n  } else {\n    curveTo(path, current, next);\n  }\n}\n\ntype CurveInfo = {\n  radius: number;\n  step: Point;\n  drawSegment: boolean;\n};\n\nfunction stepToCurve(\n  path: Path,\n  current: DecodedCurvePoint,\n  curveInfo: CurveInfo,\n) {\n  const currentPoint = current.point;\n\n  const { radius, step } = curveInfo;\n\n  if (radius > 0) {\n    path.arcToTangent(\n      currentPoint.x,\n      currentPoint.y,\n      currentPoint.x + step.x,\n      currentPoint.y + step.y,\n      radius,\n    );\n  } else {\n    path.lineTo(currentPoint.x + step.x, currentPoint.y + step.y);\n  }\n}\n\nexport function path(\n  CanvasKit: CanvasKit,\n  points: Sketch.CurvePoint[],\n  frame: Rect,\n  isClosed: boolean,\n): Path {\n  const path = new CanvasKit.Path();\n\n  if (points.length < 2) return path;\n\n  const curvePoints = points.map((point) => decodeCurvePoint(point, frame));\n\n  // Curves with only 2 points don't support corner radius, so we handle this\n  // case specially\n  if (curvePoints.length === 2) {\n    const [current, next] = curvePoints;\n\n    path.moveTo(current.point.x, current.point.y);\n\n    curveOrLineTo(path, current, next);\n\n    if (isClosed) {\n      curveOrLineTo(path, next, current);\n\n      path.close();\n    }\n\n    return path;\n  }\n\n  // Create an array of point tuples, [prev, current, next]\n  const pairs = rotate(windowsOf(curvePoints, 3, true), -1);\n\n  const curveInfoList: CurveInfo[] = pairs.map((pair) => {\n    const [prev, current, next] = pair;\n\n    const currentPoint = current.point;\n    const nextPoint = next.point;\n    const prevPoint = prev.point;\n\n    const radius = getCornerRadius(\n      prevPoint,\n      currentPoint,\n      nextPoint,\n      current.cornerRadius,\n    );\n\n    const { step, drawSegment } = getStep(currentPoint, nextPoint, radius);\n\n    return { radius, step, drawSegment };\n  });\n\n  zip(pairs, curveInfoList).forEach(([pair, curveInfo], index) => {\n    const [, current, next] = pair;\n    const isLast = index === pairs.length - 1;\n\n    const currentPoint = current.point;\n    const nextPoint = next.point;\n\n    if (index === 0) {\n      const { step } = curveInfo;\n\n      path.moveTo(currentPoint.x + step.x, currentPoint.y + step.y);\n\n      if (next.curveMode !== Sketch.CurveMode.Straight) {\n        curveTo(path, current, next);\n      }\n    } else {\n      if (\n        // TODO: Handle one straight point with radius and one curve\n        current.curveMode === Sketch.CurveMode.Straight &&\n        next.curveMode === Sketch.CurveMode.Straight\n      ) {\n        stepToCurve(path, current, curveInfo);\n\n        const { step, drawSegment } = curveInfo;\n\n        if (drawSegment && (isClosed || !isLast)) {\n          path.lineTo(nextPoint.x - step.x, nextPoint.y - step.y);\n        }\n      } else if (isClosed || !isLast) {\n        curveTo(path, current, next);\n      }\n    }\n\n    if (isClosed && isLast) {\n      const [, current, next] = pairs[0];\n\n      // If we have a corner radius, draw the final curve\n      if (\n        current.curveMode === Sketch.CurveMode.Straight &&\n        next.curveMode === Sketch.CurveMode.Straight\n      ) {\n        stepToCurve(path, current, curveInfoList[0]);\n      }\n\n      // We need the path to be closed for line caps to draw correctly\n      path.close();\n    }\n  });\n\n  return path;\n}\n\nconst getBorderPositionPathOp = (\n  CanvasKit: CanvasKit,\n  position: Sketch.BorderPosition,\n): PathOp | undefined => {\n  switch (position) {\n    case Sketch.BorderPosition.Center:\n      return;\n    case Sketch.BorderPosition.Outside:\n      return CanvasKit.PathOp.Difference;\n    case Sketch.BorderPosition.Inside:\n      return CanvasKit.PathOp.Intersect;\n  }\n};\n\nexport function getStrokedPath(\n  CanvasKit: CanvasKit,\n  path: Path,\n  width: number,\n  pathOp?: PathOp,\n) {\n  const copy = path.copy();\n\n  // A 0-width path will never change the original when unioned\n  if (width === 0 && pathOp === CanvasKit.PathOp.Union) return copy;\n\n  if (\n    !copy.stroke({\n      width,\n    })\n  ) {\n    console.info('[getStrokedPath] Failed to stroke path');\n    return copy;\n  }\n\n  if (pathOp !== undefined) {\n    if (!copy.op(path, pathOp)) {\n      console.info('[getStrokedPath] Failed to combine paths');\n    }\n  }\n\n  return copy;\n}\n\nexport function getStrokedBorderPath(\n  CanvasKit: CanvasKit,\n  path: Path,\n  borderWidth: number,\n  borderPosition: Sketch.BorderPosition,\n) {\n  switch (borderPosition) {\n    case Sketch.BorderPosition.Center:\n      break;\n    case Sketch.BorderPosition.Outside:\n    case Sketch.BorderPosition.Inside:\n      borderWidth *= 2;\n  }\n\n  const pathOp = getBorderPositionPathOp(CanvasKit, borderPosition);\n\n  return getStrokedPath(CanvasKit, path, borderWidth, pathOp);\n}\n","import { SketchFile } from 'noya-sketch-file';\nimport { CanvasKit } from 'canvaskit';\nimport produce from 'immer';\nimport {\n  ApplicationState,\n  Action,\n  applicationReducer,\n  createInitialState,\n} from './applicationReducer';\nimport { createInitialInteractionState } from './interactionReducer';\n\nexport type HistoryEntry = {\n  actionType: Action[0];\n  timestamp: number;\n  state: ApplicationState;\n};\n\nexport type HistoryState = {\n  past: HistoryEntry[];\n  present: ApplicationState;\n  future: HistoryEntry[];\n};\n\nexport type HistoryAction = [type: 'undo'] | [type: 'redo'] | Action;\n\nconst FILE_CHANGED_TIMEOUT = 300;\n\nexport function historyReducer(\n  state: HistoryState,\n  action: HistoryAction,\n  CanvasKit: CanvasKit,\n) {\n  const currentState = state.present;\n  switch (action[0]) {\n    case 'undo':\n      if (state.past.length === 0) {\n        return state;\n      } else {\n        return produce(state, (draft) => {\n          const nextPresent = draft.past.pop();\n          if (nextPresent) {\n            draft.future.unshift(\n              createHistoryEntry(nextPresent.actionType, currentState),\n            );\n            draft.present = nextPresent.state;\n          }\n        });\n      }\n    case 'redo':\n      if (state.future.length === 0) {\n        return state;\n      } else {\n        return produce(state, (draft) => {\n          const nextPresent = draft.future.shift();\n          if (nextPresent) {\n            draft.past.push(\n              createHistoryEntry(nextPresent.actionType, currentState),\n            );\n            draft.present = nextPresent.state;\n          }\n        });\n      }\n    default:\n      const nextState = applicationReducer(currentState, action, CanvasKit);\n      const mergableEntry = getMergableHistoryEntry(state, action[0]);\n      const sketchFileChanged = currentState.sketch !== nextState.sketch;\n      return produce(state, (draft) => {\n        const historyEntry = createHistoryEntry(action[0], {\n          ...currentState,\n          interactionState: createInitialInteractionState(),\n        });\n        if (sketchFileChanged) {\n          if (mergableEntry) {\n            draft.past[draft.past.length - 1] = {\n              ...historyEntry,\n              state: mergableEntry.state,\n            };\n          } else {\n            draft.past.push(historyEntry);\n          }\n          draft.future = [];\n        }\n        draft.present = nextState;\n      });\n  }\n}\n\nexport function createInitialHistoryState(sketch: SketchFile): HistoryState {\n  const applicationState = createInitialState(sketch);\n  return {\n    past: [],\n    present: applicationState,\n    future: [],\n  };\n}\n\nfunction createHistoryEntry(\n  actionType: Action[0],\n  state: ApplicationState,\n): HistoryEntry {\n  return {\n    actionType,\n    state,\n    timestamp: Date.now(),\n  };\n}\n\nfunction getMergableHistoryEntry(\n  state: HistoryState,\n  actionType: Action[0],\n): HistoryEntry | undefined {\n  if (state.past.length === 0) {\n    return;\n  }\n\n  const newTimestamp = Date.now();\n  const previousEntry = state.past[state.past.length - 1];\n\n  if (\n    actionType !== previousEntry.actionType ||\n    newTimestamp - previousEntry.timestamp > FILE_CHANGED_TIMEOUT\n  ) {\n    return;\n  }\n\n  return previousEntry;\n}\n","import { composeRefs } from '@radix-ui/react-compose-refs';\nimport ScrollArea from './ScrollArea';\nimport {\n  Children,\n  createContext,\n  ForwardedRef,\n  forwardRef,\n  isValidElement,\n  memo,\n  ReactNode,\n  Ref,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport styled, { CSSObject } from 'styled-components';\nimport { useHover } from '../hooks/useHover';\nimport ContextMenu from './ContextMenu';\nimport * as Sortable from './Sortable';\nimport { MenuItem } from './internal/Menu';\nimport { Spacer } from '..';\n\nexport type ListRowPosition = 'only' | 'first' | 'middle' | 'last';\n\nconst listReset: CSSObject = {\n  marginTop: 0,\n  marginRight: 0,\n  marginBottom: 0,\n  marginLeft: 0,\n  paddingTop: 0,\n  paddingRight: 0,\n  paddingBottom: 0,\n  paddingLeft: 0,\n  textIndent: 0,\n  listStyleType: 'none',\n};\n\ntype ListRowContextValue = {\n  position: ListRowPosition;\n  selectedPosition: ListRowPosition;\n  sortable: boolean;\n  expandable: boolean;\n  indentation: number;\n};\n\nexport const ListRowContext = createContext<ListRowContextValue>({\n  position: 'only',\n  selectedPosition: 'only',\n  sortable: false,\n  expandable: true,\n  indentation: 12,\n});\n\n/* ----------------------------------------------------------------------------\n * RowTitle\n * ------------------------------------------------------------------------- */\n\nconst ListViewRowTitle = styled.span(({ theme }) => ({\n  flex: '1 1 0',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  whiteSpace: 'pre',\n}));\n\n/* ----------------------------------------------------------------------------\n * Row\n * ------------------------------------------------------------------------- */\n\nconst SectionHeaderContainer = styled.li<{\n  selected: boolean;\n  disabled: boolean;\n  hovered: boolean;\n}>(({ theme, selected, disabled, hovered }) => ({\n  ...listReset,\n  ...theme.textStyles.small,\n  flex: '0 0 auto',\n  userSelect: 'none',\n  cursor: 'pointer',\n  fontWeight: 500,\n  paddingTop: '6px',\n  paddingRight: '20px',\n  paddingBottom: '6px',\n  paddingLeft: '20px',\n  borderBottom: `1px solid ${\n    selected ? theme.colors.primaryDark : theme.colors.divider\n  }`,\n  color: theme.colors.textMuted,\n  backgroundColor: theme.colors.listView.raisedBackground,\n  ...(disabled && {\n    color: theme.colors.textDisabled,\n  }),\n  ...(selected && {\n    color: 'white',\n    backgroundColor: theme.colors.primary,\n  }),\n  display: 'flex',\n  alignItems: 'center',\n  position: 'relative',\n  ...(hovered && {\n    boxShadow: `0 0 0 1px ${theme.colors.primary}`,\n  }),\n}));\n\nconst RowContainer = styled.li<{\n  position: ListRowPosition;\n  selected: boolean;\n  selectedPosition: ListRowPosition;\n  disabled: boolean;\n  hovered: boolean;\n}>(({ theme, position, selected, selectedPosition, disabled, hovered }) => ({\n  ...listReset,\n  ...theme.textStyles.small,\n  flex: '0 0 auto',\n  userSelect: 'none',\n  cursor: 'pointer',\n  borderTopRightRadius: '4px',\n  borderTopLeftRadius: '4px',\n  borderBottomRightRadius: '4px',\n  borderBottomLeftRadius: '4px',\n  paddingTop: '6px',\n  paddingRight: '12px',\n  paddingBottom: '6px',\n  paddingLeft: '12px',\n  marginLeft: '8px',\n  marginRight: '8px',\n  color: theme.colors.textMuted,\n  ...(disabled && {\n    color: theme.colors.textDisabled,\n  }),\n  ...(selected && {\n    color: 'white',\n    backgroundColor: theme.colors.primary,\n  }),\n  display: 'flex',\n  alignItems: 'center',\n  ...((position === 'first' || position === 'only') && {\n    marginTop: '8px',\n  }),\n  ...((position === 'last' || position === 'only') && {\n    marginBottom: '8px',\n  }),\n  ...(selected &&\n    (selectedPosition === 'middle' || selectedPosition === 'last') && {\n      borderTopRightRadius: '0px',\n      borderTopLeftRadius: '0px',\n    }),\n  ...(selected &&\n    (selectedPosition === 'middle' || selectedPosition === 'first') && {\n      borderBottomRightRadius: '0px',\n      borderBottomLeftRadius: '0px',\n    }),\n  position: 'relative',\n  ...(hovered && {\n    boxShadow: `0 0 0 1px ${theme.colors.primary}`,\n  }),\n}));\n\nconst DragIndicatorElement = styled.div<{\n  relativeDropPosition: Sortable.RelativeDropPosition;\n  offsetLeft: number;\n}>(({ theme, relativeDropPosition, offsetLeft }) => ({\n  zIndex: 1,\n  position: 'absolute',\n  borderRadius: '3px',\n  ...(relativeDropPosition === 'inside'\n    ? {\n        inset: 2,\n        boxShadow: `0 0 0 1px ${theme.colors.sidebar.background}, 0 0 0 3px ${theme.colors.dragOutline}`,\n      }\n    : {\n        top: relativeDropPosition === 'above' ? -3 : undefined,\n        bottom: relativeDropPosition === 'below' ? -3 : undefined,\n        left: offsetLeft,\n        right: 0,\n        height: 6,\n        background: theme.colors.primary,\n        border: `2px solid white`,\n        boxShadow: '0 0 2px rgba(0,0,0,0.5)',\n      }),\n}));\n\nexport interface ListViewClickInfo {\n  shiftKey: boolean;\n  altKey: boolean;\n  metaKey: boolean;\n}\n\nexport interface ListViewRowProps<MenuItemType extends string = string> {\n  id?: string;\n  selected?: boolean;\n  depth?: number;\n  disabled?: boolean;\n  hovered?: boolean;\n  sortable?: boolean;\n  onClick?: (info: ListViewClickInfo) => void;\n  onHoverChange?: (isHovering: boolean) => void;\n  children?: ReactNode;\n  isSectionHeader?: boolean;\n  menuItems?: MenuItem<MenuItemType>[];\n  onSelectMenuItem?: (value: MenuItemType) => void;\n  onContextMenu?: () => void;\n}\n\nconst ListViewRow = forwardRef(function ListViewRow<\n  MenuItemType extends string\n>(\n  {\n    id,\n    selected = false,\n    depth = 0,\n    disabled = false,\n    hovered = false,\n    isSectionHeader = false,\n    onClick,\n    onHoverChange,\n    children,\n    menuItems,\n    onContextMenu,\n    onSelectMenuItem,\n  }: ListViewRowProps<MenuItemType>,\n  forwardedRef: ForwardedRef<HTMLLIElement>,\n) {\n  const { position, selectedPosition, sortable, indentation } = useContext(\n    ListRowContext,\n  );\n  const { hoverProps } = useHover({\n    onHoverChange,\n  });\n\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.stopPropagation();\n\n      onClick?.(event);\n    },\n    [onClick],\n  );\n\n  const renderContent = (\n    {\n      relativeDropPosition,\n      ...renderProps\n    }: React.ComponentProps<typeof RowContainer> & {\n      relativeDropPosition?: Sortable.RelativeDropPosition;\n    },\n    ref: Ref<HTMLLIElement>,\n  ) => {\n    const Component = isSectionHeader ? SectionHeaderContainer : RowContainer;\n\n    const element = (\n      <Component\n        ref={ref}\n        onContextMenu={onContextMenu}\n        id={id}\n        {...hoverProps}\n        onClick={handleClick}\n        position={position}\n        disabled={disabled}\n        hovered={hovered}\n        selected={selected}\n        selectedPosition={selectedPosition}\n        aria-selected={selected}\n        {...renderProps}\n      >\n        {relativeDropPosition && (\n          <DragIndicatorElement\n            relativeDropPosition={relativeDropPosition}\n            offsetLeft={33 + depth * indentation}\n          />\n        )}\n        {depth > 0 && <Spacer.Horizontal size={depth * indentation} />}\n        {children}\n      </Component>\n    );\n\n    if (menuItems) {\n      return (\n        <ContextMenu<MenuItemType>\n          items={menuItems}\n          onSelect={onSelectMenuItem}\n        >\n          {element}\n        </ContextMenu>\n      );\n    }\n\n    return element;\n  };\n\n  if (sortable && id) {\n    return (\n      <Sortable.Item id={id}>\n        {({ ref: sortableRef, ...sortableProps }) =>\n          renderContent(sortableProps, composeRefs(sortableRef, forwardedRef))\n        }\n      </Sortable.Item>\n    );\n  }\n\n  return renderContent({}, forwardedRef);\n});\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst RootContainer = styled.ul<{ scrollable?: boolean }>(\n  ({ theme, scrollable }) => ({\n    ...listReset,\n    flex: scrollable ? '1 0 0' : '0 0 auto',\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'nowrap',\n    color: theme.colors.textMuted,\n  }),\n);\n\nexport type ItemInfo = {\n  isDragging: boolean;\n};\n\ntype ChildrenProps<T> =\n  | {\n      children: ReactNode;\n    }\n  | {\n      items: T[];\n      renderItem: (item: T, index: number, info: ItemInfo) => ReactNode;\n    };\n\ntype ListViewRootProps<T> = ChildrenProps<T> & {\n  onClick?: () => void;\n  sortable?: boolean;\n  scrollable?: boolean;\n  expandable?: boolean;\n  onMoveItem?: (\n    sourceIndex: number,\n    destinationIndex: number,\n    position: Sortable.RelativeDropPosition,\n  ) => void;\n  indentation?: number;\n  acceptsDrop?: Sortable.DropValidator;\n};\n\nfunction ListViewRoot<T = any>({\n  onClick,\n  sortable = false,\n  scrollable = false,\n  expandable = true,\n  onMoveItem,\n  indentation = 12,\n  acceptsDrop,\n  ...props\n}: ListViewRootProps<T>) {\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.stopPropagation();\n\n      onClick?.();\n    },\n    [onClick],\n  );\n\n  const flattened =\n    'items' in props\n      ? props.items.map((item, index) =>\n          props.renderItem(item, index, { isDragging: false }),\n        )\n      : Children.toArray(props.children);\n\n  const ids: string[] = flattened.flatMap((current) =>\n    isValidElement(current) && typeof current.props.id === 'string'\n      ? [current.props.id]\n      : [],\n  );\n\n  const getWrappedChild = (current: ReactNode, i: number) => {\n    if (!isValidElement(current)) return current;\n\n    const prev = flattened[i - 1];\n    const next = flattened[i + 1];\n\n    const nextItem =\n      isValidElement(next) && !next.props.isSectionHeader ? next : undefined;\n    const prevItem =\n      isValidElement(prev) && !prev.props.isSectionHeader ? prev : undefined;\n\n    let position: ListRowPosition = 'only';\n    let selectedPosition: ListRowPosition = 'only';\n\n    if (nextItem && prevItem) {\n      position = 'middle';\n    } else if (nextItem && !prevItem) {\n      position = 'first';\n    } else if (!nextItem && prevItem) {\n      position = 'last';\n    }\n\n    if (current.props.selected) {\n      const nextSelected = nextItem && nextItem.props.selected;\n      const prevSelected = prevItem && prevItem.props.selected;\n\n      if (nextSelected && prevSelected) {\n        selectedPosition = 'middle';\n      } else if (nextSelected && !prevSelected) {\n        selectedPosition = 'first';\n      } else if (!nextSelected && prevSelected) {\n        selectedPosition = 'last';\n      }\n    }\n\n    const contextValue = {\n      position,\n      selectedPosition,\n      sortable,\n      expandable,\n      indentation,\n    };\n\n    return (\n      <ListRowContext.Provider key={current.key} value={contextValue}>\n        {current}\n      </ListRowContext.Provider>\n    );\n  };\n\n  const wrappedChildren = flattened.map(getWrappedChild);\n\n  if (sortable && ids.length !== wrappedChildren.length) {\n    throw new Error(\n      'Bad ListView props: each row element needs an id to be sortable',\n    );\n  }\n\n  const renderItem = 'items' in props ? props.renderItem : undefined;\n  const items = 'items' in props ? props.items : undefined;\n\n  const renderOverlay = useMemo(\n    () =>\n      renderItem && items\n        ? (index: number) =>\n            renderItem(items[index], index, {\n              isDragging: true,\n            })\n        : undefined,\n    [renderItem, items],\n  );\n\n  const content = sortable ? (\n    <Sortable.Root\n      onMoveItem={onMoveItem}\n      keys={ids}\n      renderOverlay={renderOverlay}\n      acceptsDrop={acceptsDrop}\n    >\n      {wrappedChildren}\n    </Sortable.Root>\n  ) : (\n    wrappedChildren\n  );\n\n  const scrollableContent = scrollable ? (\n    <ScrollArea>{content}</ScrollArea>\n  ) : (\n    content\n  );\n\n  return (\n    <RootContainer onClick={handleClick} scrollable={scrollable}>\n      {scrollableContent}\n    </RootContainer>\n  );\n}\n\nexport const RowTitle = memo(ListViewRowTitle);\nexport const Row = memo(ListViewRow);\nexport const Root = memo(ListViewRoot);\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\n\nexport type StyleElementType = 'Fill' | 'Border';\n\nexport type GradientAction =\n  | [\n      type: `set${StyleElementType}FillType`,\n      index: number,\n      value: Sketch.FillType,\n    ]\n  | [\n      type: `set${StyleElementType}Gradient`,\n      index: number,\n      value: Sketch.Gradient,\n    ]\n  | [\n      type: `set${StyleElementType}GradientColor`,\n      index: number,\n      gradientIndex: number,\n      value: Sketch.Color,\n    ]\n  | [\n      type: `set${StyleElementType}GradientPosition`,\n      index: number,\n      gradientIndex: number,\n      value: number,\n    ]\n  | [\n      type: `add${StyleElementType}GradientStop`,\n      index: number,\n      color: Sketch.Color,\n      position: number,\n    ]\n  | [\n      type: `delete${StyleElementType}GradientStop`,\n      index: number,\n      stopIndex: number,\n    ]\n  | [\n      type: `set${StyleElementType}GradientType`,\n      index: number,\n      value: Sketch.GradientType,\n    ];\n\nexport function gradientReducer(\n  state: Sketch.Gradient,\n  action: GradientAction,\n): Sketch.Gradient {\n  switch (action[0]) {\n    case 'setFillGradientColor':\n    case 'setBorderGradientColor': {\n      const [, , stopIndex, color] = action;\n\n      return produce(state, (draft) => {\n        if (!draft || !draft.stops[stopIndex]) return;\n\n        draft.stops[stopIndex].color = color;\n      });\n    }\n    case 'setFillGradientPosition':\n    case 'setBorderGradientPosition': {\n      const [, , stopIndex, position] = action;\n\n      return produce(state, (draft) => {\n        if (!draft || !draft.stops[stopIndex]) return;\n        draft.stops[stopIndex].position = position;\n        /*TODO >>> Sort the stops by position\n         draft.fills[fillIndex].gradient.stops.sort(\n          (a, b) => a.position - b.position,\n        );  */\n      });\n    }\n    case 'addFillGradientStop':\n    case 'addBorderGradientStop': {\n      const [, , color, position] = action;\n\n      return produce(state, (draft) => {\n        if (!draft) return;\n\n        draft.stops.push({\n          _class: 'gradientStop',\n          color,\n          position,\n        });\n      });\n    }\n    case 'setFillGradientType':\n    case 'setBorderGradientType': {\n      const [, , value] = action;\n\n      return produce(state, (draft) => {\n        if (!draft) return;\n        draft.gradientType = value;\n      });\n    }\n    case 'deleteFillGradientStop':\n    case 'deleteBorderGradientStop': {\n      const [, , index] = action;\n\n      return produce(state, (draft) => {\n        if (!draft) return;\n        draft.stops.splice(index, 1);\n      });\n    }\n    case 'setFillGradient':\n    case 'setBorderGradient': {\n      const [, , gradient] = action;\n\n      return gradient;\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { GradientAction, gradientReducer } from './gradientReducer';\nimport {\n  ColorControlsAction,\n  colorControlsReducer,\n} from './colorControlsReducer';\nimport { clamp } from 'noya-utils';\nimport { SketchModel } from 'noya-sketch-model';\n\nexport const defaultBorderColor = SketchModel.color({\n  red: 0.6,\n  green: 0.6,\n  blue: 0.6,\n});\n\nexport const defaultFillColor = SketchModel.color({\n  red: 0.85,\n  green: 0.85,\n  blue: 0.85,\n});\n\nexport type SetNumberMode = 'replace' | 'adjust';\n\nexport type StyleElementType = 'Fill' | 'Border' | 'Shadow';\n\nexport type StyleShadowProperty = 'X' | 'Y' | 'Blur' | 'Spread';\n\nexport type StyleAction =\n  | [type: `addNew${StyleElementType}`]\n  | [type: `delete${StyleElementType}`, index: number]\n  | [\n      type: `move${StyleElementType}`,\n      sourceIndex: number,\n      destinationIndex: number,\n    ]\n  | [type: `deleteDisabled${StyleElementType}s`]\n  | [type: `set${StyleElementType}Enabled`, index: number, isEnabled: boolean]\n  | [\n      type: 'setBorderWidth',\n      index: number,\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | [type: 'setBorderPosition', index: number, position: Sketch.BorderPosition]\n  | [\n      type: 'setFillOpacity',\n      index: number,\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | [\n      type: `setShadow${StyleShadowProperty}`,\n      index: number,\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | [type: 'setOpacity', amount: number, mode?: SetNumberMode]\n  | [type: 'setFixedRadius', amount: number, mode?: SetNumberMode]\n  | [type: `set${StyleElementType}Color`, index: number, value: Sketch.Color]\n  | [\n      type: `set${Exclude<StyleElementType, 'Shadow'>}FillType`,\n      index: number,\n      value: Sketch.FillType,\n    ]\n  | [type: 'setPatternFillType', index: number, value: Sketch.PatternFillType]\n  | [\n      type: 'setPatternTileScale',\n      index: number,\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | [\n      type: 'setFillImage',\n      index: number,\n      value: Sketch.FileRef | Sketch.DataRef,\n    ]\n  | [\n      type: 'setFillContextSettingsOpacity',\n      index: number,\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | GradientAction\n  | ColorControlsAction;\n\nexport function styleReducer(\n  state: Sketch.Style,\n  action: StyleAction,\n): Sketch.Style {\n  switch (action[0]) {\n    case 'addNewBorder':\n      return produce(state, (draft) => {\n        const border = SketchModel.border({\n          color: defaultBorderColor,\n        });\n\n        if (draft.borders) {\n          draft.borders.unshift(border);\n        } else {\n          draft.borders = [border];\n        }\n      });\n    case 'addNewFill':\n      return produce(state, (draft) => {\n        const fill = SketchModel.fill({\n          color: defaultFillColor,\n        });\n\n        if (draft.fills) {\n          draft.fills.unshift(fill);\n        } else {\n          draft.fills = [fill];\n        }\n      });\n    case 'addNewShadow':\n      const shadow = SketchModel.shadow({\n        color: SketchModel.color({ alpha: 0.5 }),\n        offsetY: 2,\n        blurRadius: 4,\n      });\n\n      return produce(state, (draft) => {\n        if (draft.shadows) {\n          draft.shadows.unshift(shadow);\n        } else {\n          draft.shadows = [shadow];\n        }\n      });\n    case 'setBorderEnabled': {\n      const [, index, isEnabled] = action;\n      return produce(state, (draft) => {\n        if (draft.borders && draft.borders[index]) {\n          draft.borders[index].isEnabled = isEnabled;\n        }\n      });\n    }\n    case 'setFillEnabled': {\n      const [, index, isEnabled] = action;\n      return produce(state, (draft) => {\n        if (draft.fills && draft.fills[index]) {\n          draft.fills[index].isEnabled = isEnabled;\n        }\n      });\n    }\n    case 'setShadowEnabled': {\n      const [, index, isEnabled] = action;\n      return produce(state, (draft) => {\n        if (draft.shadows && draft.shadows[index]) {\n          draft.shadows[index].isEnabled = isEnabled;\n        }\n      });\n    }\n    case 'deleteBorder':\n      return produce(state, (draft) => {\n        if (draft.borders) {\n          draft.borders.splice(action[1], 1);\n        }\n      });\n    case 'deleteFill':\n      return produce(state, (draft) => {\n        if (draft.fills) {\n          draft.fills.splice(action[1], 1);\n        }\n      });\n    case 'deleteShadow':\n      return produce(state, (draft) => {\n        if (draft.shadows) {\n          draft.shadows.splice(action[1], 1);\n        }\n      });\n    case 'moveBorder': {\n      const [, sourceIndex, destinationIndex] = action;\n      return produce(state, (draft) => {\n        if (!draft.borders) return;\n\n        const sourceItem = draft.borders[sourceIndex];\n\n        draft.borders.splice(sourceIndex, 1);\n        draft.borders.splice(destinationIndex, 0, sourceItem);\n      });\n    }\n    case 'moveFill': {\n      const [, sourceIndex, destinationIndex] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills) return;\n\n        const sourceItem = draft.fills[sourceIndex];\n\n        draft.fills.splice(sourceIndex, 1);\n        draft.fills.splice(destinationIndex, 0, sourceItem);\n      });\n    }\n    case 'moveShadow': {\n      const [, sourceIndex, destinationIndex] = action;\n      return produce(state, (draft) => {\n        if (!draft.shadows) return;\n\n        const sourceItem = draft.shadows[sourceIndex];\n\n        draft.shadows.splice(sourceIndex, 1);\n        draft.shadows.splice(destinationIndex, 0, sourceItem);\n      });\n    }\n    case 'deleteDisabledBorders':\n      return produce(state, (draft) => {\n        if (draft.borders) {\n          draft.borders = draft.borders.filter((border) => border.isEnabled);\n        }\n      });\n    case 'deleteDisabledFills':\n      return produce(state, (draft) => {\n        if (draft.fills) {\n          draft.fills = draft.fills.filter((fill) => fill.isEnabled);\n        }\n      });\n    case 'deleteDisabledShadows':\n      return produce(state, (draft) => {\n        if (draft.shadows) {\n          draft.shadows = draft.shadows.filter((fill) => fill.isEnabled);\n        }\n      });\n    case 'setBorderColor': {\n      const [, index, color] = action;\n      return produce(state, (draft) => {\n        if (draft.borders && draft.borders[index]) {\n          draft.borders[index].color = color;\n        }\n      });\n    }\n    case 'setFillColor': {\n      const [, index, color] = action;\n      return produce(state, (draft) => {\n        if (draft.fills && draft.fills[index]) {\n          draft.fills[index].color = color;\n        }\n      });\n    }\n    case 'setShadowColor': {\n      const [, index, color] = action;\n      return produce(state, (draft) => {\n        if (draft.shadows && draft.shadows[index]) {\n          draft.shadows[index].color = color;\n        }\n      });\n    }\n    case 'setBorderWidth': {\n      const [, index, amount, mode = 'replace'] = action;\n      return produce(state, (draft) => {\n        if (!draft.borders || !draft.borders[index]) return;\n\n        const newValue =\n          mode === 'replace' ? amount : draft.borders[index].thickness + amount;\n\n        draft.borders[index].thickness = Math.max(0, newValue);\n      });\n    }\n    case 'setFillOpacity': {\n      const [, index, amount, mode = 'replace'] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n\n        const newValue =\n          mode === 'replace' ? amount : draft.fills[index].color.alpha + amount;\n\n        draft.fills[index].color.alpha = clamp(newValue, 0, 1);\n      });\n    }\n    case 'setOpacity': {\n      const [, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        if (!draft.contextSettings) return;\n\n        const newValue =\n          mode === 'replace' ? amount : draft.contextSettings.opacity + amount;\n\n        draft.contextSettings.opacity = clamp(newValue, 0, 1);\n      });\n    }\n    case 'setShadowX': {\n      const [, index, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        if (!draft.shadows || !draft.shadows[index]) return;\n\n        const newValue =\n          mode === 'replace' ? amount : draft.shadows[index].offsetX + amount;\n\n        draft.shadows[index].offsetX = newValue;\n      });\n    }\n    case 'setShadowY': {\n      const [, index, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        if (!draft.shadows || !draft.shadows[index]) return;\n\n        const newValue =\n          mode === 'replace' ? amount : draft.shadows[index].offsetY + amount;\n\n        draft.shadows[index].offsetY = newValue;\n      });\n    }\n    case 'setShadowBlur': {\n      const [, index, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        if (!draft.shadows || !draft.shadows[index]) return;\n\n        const newValue =\n          mode === 'replace'\n            ? amount\n            : draft.shadows[index].blurRadius + amount;\n\n        draft.shadows[index].blurRadius = newValue;\n      });\n    }\n    case 'setShadowSpread': {\n      const [, index, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        if (!draft.shadows || !draft.shadows[index]) return;\n\n        const newValue =\n          mode === 'replace' ? amount : draft.shadows[index].spread + amount;\n\n        draft.shadows[index].spread = newValue;\n      });\n    }\n    case 'setBorderPosition': {\n      const [, index, position] = action;\n\n      return produce(state, (draft) => {\n        if (!draft.borders || !draft.borders[index]) return;\n\n        draft.borders[index].position = position;\n      });\n    }\n    case 'setFillFillType': {\n      const [, index, type] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n        draft.fills[index].fillType = type;\n\n        if (type === Sketch.FillType.Gradient && !draft.fills[index].gradient) {\n          draft.fills[index].gradient = SketchModel.gradient();\n        }\n      });\n    }\n    case 'setBorderFillType': {\n      const [, index, type] = action;\n      return produce(state, (draft) => {\n        if (!draft.borders || !draft.borders![index]) return;\n        draft.borders[index].fillType = type;\n\n        if (!draft.borders[index].gradient) {\n          draft.borders[index].gradient = SketchModel.gradient();\n        }\n      });\n    }\n    case 'setFillGradientColor':\n    case 'setFillGradientPosition':\n    case 'setFillGradientType':\n    case 'addFillGradientStop':\n    case 'deleteFillGradientStop':\n    case 'setFillGradient': {\n      const [, index] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n\n        draft.fills[index].gradient = gradientReducer(\n          draft.fills[index].gradient,\n          action,\n        );\n      });\n    }\n    case 'setBorderGradientColor':\n    case 'setBorderGradientPosition':\n    case 'setBorderGradientType':\n    case 'addBorderGradientStop':\n    case 'deleteBorderGradientStop':\n    case 'setBorderGradient': {\n      const [, index] = action;\n      return produce(state, (draft) => {\n        if (!draft.borders || !draft.borders[index]) return;\n\n        draft.borders[index].gradient = gradientReducer(\n          draft.borders[index].gradient,\n          action,\n        );\n      });\n    }\n    case 'setColorControlsEnabled':\n    case 'setHue':\n    case 'setSaturation':\n    case 'setBrightness':\n    case 'setContrast':\n      return produce(state, (draft) => {\n        draft.colorControls = colorControlsReducer(draft.colorControls, action);\n      });\n    case 'setPatternFillType': {\n      const [, index, value] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n\n        draft.fills[index].patternFillType = value;\n      });\n    }\n    case 'setPatternTileScale': {\n      const [, index, amount, mode = 'replace'] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n\n        const newValue =\n          mode === 'replace'\n            ? amount\n            : draft.fills[index].patternTileScale + amount;\n\n        draft.fills[index].patternTileScale = clamp(newValue, 0.1, 2);\n      });\n    }\n    case 'setFillImage': {\n      const [, index, value] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n\n        draft.fills[index].image = value;\n      });\n    }\n    case 'setFillContextSettingsOpacity': {\n      const [, index, amount, mode = 'replace'] = action;\n      return produce(state, (draft) => {\n        if (!draft.fills || !draft.fills[index]) return;\n        const newValue =\n          mode === 'replace'\n            ? amount\n            : draft.fills[index].contextSettings.opacity + amount;\n\n        draft.fills[index].contextSettings.opacity = clamp(newValue, 0, 1);\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { clamp } from 'noya-utils';\nimport { SetNumberMode } from '..';\n\nexport type ColorControlsAction =\n  | [type: 'setColorControlsEnabled', isEnabled: boolean]\n  | [type: 'setHue', amount: number, mode?: SetNumberMode]\n  | [type: 'setSaturation', amount: number, mode?: SetNumberMode]\n  | [type: 'setBrightness', amount: number, mode?: SetNumberMode]\n  | [type: 'setContrast', amount: number, mode?: SetNumberMode];\n\nexport function colorControlsReducer(\n  state: Sketch.ColorControls,\n  action: ColorControlsAction,\n): Sketch.ColorControls {\n  switch (action[0]) {\n    case 'setColorControlsEnabled': {\n      const [, isEnabled] = action;\n\n      return produce(state, (draft) => {\n        draft.isEnabled = isEnabled;\n      });\n    }\n    case 'setHue': {\n      const [, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        const newValue = mode === 'replace' ? amount : draft.hue + amount;\n\n        draft.hue = clamp(newValue, -Math.PI, Math.PI);\n      });\n    }\n    case 'setSaturation': {\n      const [, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        const newValue =\n          mode === 'replace' ? amount : draft.saturation + amount;\n\n        draft.saturation = clamp(newValue, 0, 2);\n      });\n    }\n    case 'setBrightness': {\n      const [, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        const newValue =\n          mode === 'replace' ? amount : draft.brightness + amount;\n\n        draft.brightness = clamp(newValue, -1, 1);\n      });\n    }\n    case 'setContrast': {\n      const [, amount, mode = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        const newValue = mode === 'replace' ? amount : draft.contrast + amount;\n\n        draft.contrast = clamp(newValue, 0, 4);\n      });\n    }\n    default:\n      return state;\n  }\n}\n","const size = {\n  medium: '800px',\n  large: '1280px',\n  xlarge: '1550px',\n  xxlarge: '1680px',\n};\n\nconst mediaQuery = {\n  small: `@media (max-width: ${size.medium})`,\n  medium: `@media (max-width: ${size.large}) and (min-width: ${size.medium})`,\n  large: `@media (max-width: ${size.xlarge}) and (min-width: ${size.large})`,\n  xlarge: `@media (min-width: ${size.xlarge})`,\n};\n\nexport default mediaQuery;\n","import mediaQuery from '../mediaQuery';\nimport { CSSObject } from 'styled-components';\n\nexport const colors = {\n  text: 'rgb(38, 48, 83)',\n  textMuted: 'rgb(85, 85, 85)',\n  textDisabled: 'rgb(160, 160, 160)',\n  textDecorativeLight: 'rgb(168, 185, 212)',\n  // textLink: 'rgb(51, 122, 183)',\n  textLink: 'rgb(58, 108, 234)',\n  textLinkFocused: 'rgb(35, 82, 124)',\n  divider: 'rgba(0, 0, 0, 0.07)',\n  dividerStrong: 'rgba(0, 0, 0, 0.09)',\n  primary: 'rgb(132, 63, 255)',\n  primaryDark: 'rgb(116, 36, 255)',\n  neutralBackground: 'rgb(222,223,232)',\n  inputBackground: 'rgb(240, 240, 242)',\n  codeBackground: 'rgb(250, 250, 250)',\n  selectedBackground: 'rgb(242, 245, 250)',\n  transparentChecker: 'rgba(255,255,255,0.8)',\n  scrollbar: 'rgba(199,199,199,0.8)',\n  placeholderDots: 'rgba(0,0,0,0.3)',\n  listView: {\n    raisedBackground: 'rgba(255,255,255,0.8)',\n  },\n  canvas: {\n    background: 'rgb(249,249,249)',\n    dragHandleStroke: 'rgba(180,180,180,0.5)',\n  },\n  sidebar: {\n    background: 'rgba(252,252,252,0.85)',\n  },\n  popover: {\n    background: 'rgb(252,252,252)',\n  },\n  slider: {\n    background: 'white',\n    border: '#BBB',\n  },\n  icon: 'rgb(139, 139, 139)',\n  iconSelected: 'rgb(220, 220, 220)',\n  mask: 'rgb(12,193,67)',\n  imageOverlay:\n    'linear-gradient(0deg, rgba(132, 63, 255,0.55), rgba(132, 63, 255,0.55))',\n  get dragOutline() {\n    return colors.primary;\n  },\n};\n\nexport const fonts = {\n  normal: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n  monospace: \"Menlo, Monaco, Consolas, 'Courier New', monospace\",\n};\n\n// The last one, 0.85, I just eyeballed\nconst typeScale = [3.052, 2.441, 1.953, 1.563, 1.25, 1, 0.85]; // Major third\n\nexport const textStyles = {\n  title: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[0]}rem`,\n    fontWeight: 'bold',\n    lineHeight: '1.4',\n    [mediaQuery.small]: {\n      fontSize: '36px',\n    },\n  } as CSSObject,\n  subtitle: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[3]}rem`,\n    fontWeight: 500,\n    lineHeight: '1.75',\n    [mediaQuery.small]: {\n      fontSize: '18px',\n    },\n  } as CSSObject,\n  heading1: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[2]}rem`,\n    fontWeight: 500,\n    lineHeight: '1.75',\n  } as CSSObject,\n  heading2: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[3]}rem`,\n    fontWeight: 500,\n    lineHeight: '1.75',\n  } as CSSObject,\n  heading3: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[4]}rem`,\n    fontWeight: 500,\n    lineHeight: '1.75',\n  } as CSSObject,\n  body: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[5]}rem`,\n    fontWeight: 400,\n    lineHeight: '1.75',\n  } as CSSObject,\n  small: {\n    fontFamily: fonts.normal,\n    fontSize: `${typeScale[6]}rem`,\n    fontWeight: 400,\n    lineHeight: '1.4',\n  } as CSSObject,\n  code: {\n    fontFamily: fonts.monospace,\n    fontSize: '90%',\n    lineHeight: '1.5',\n  } as CSSObject,\n};\n\nexport const sizes = {\n  sidebarWidth: 260,\n  toolbar: {\n    height: 46,\n    itemSeparator: 8,\n  },\n  spacing: {\n    nano: 2,\n    micro: 4,\n    small: 8,\n    medium: 16,\n    large: 32,\n    xlarge: 64,\n    xxlarge: 128,\n  },\n};\n","import { useMemo } from 'react';\n\nexport default function useStable4ElementArray(\n  value: Float32Array,\n): Float32Array;\nexport default function useStable4ElementArray(\n  value: Float32Array | undefined,\n): Float32Array | undefined;\nexport default function useStable4ElementArray(\n  value: Float32Array | undefined,\n): Float32Array | undefined {\n  return useMemo(\n    () => value,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [value?.[0], value?.[1], value?.[2], value?.[3]],\n  );\n}\n","export function isEqualArray<T>(a: T[], b: T[], deep: boolean) {\n  if (a === b) return true;\n\n  if (a.length !== b.length) return false;\n\n  for (let i = 0; i < a.length; i++) {\n    if (!(deep ? isEqual(a[i], b[i], deep) : a[i] === b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isEqualObject<T extends Record<string, any>>(\n  a: T,\n  b: T,\n  deep: boolean,\n) {\n  if (a === b) return true;\n\n  if (!a || !b) return false;\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n\n  if (aKeys.length !== bKeys.length) return false;\n\n  for (let i = 0; i < aKeys.length; i++) {\n    const key = aKeys[i];\n\n    if (\n      !(deep ? isEqual(a[key], b[key], deep) : a[key] === b[key]) ||\n      !Object.prototype.hasOwnProperty.call(b, key)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function isEqual<T>(a: T, b: T, deep: boolean) {\n  const aType = typeof a;\n  const bType = typeof b;\n\n  if (aType !== bType) return false;\n\n  if (aType !== 'object') return a === b;\n\n  if (a instanceof Array && b instanceof Array) {\n    return isEqualArray(a, b, deep);\n  }\n\n  return isEqualObject(a, b, deep);\n}\n","import {\n  closestCenter,\n  DndContext,\n  DragEndEvent,\n  DragMoveEvent,\n  DragOverlay,\n  DragStartEvent,\n  PointerSensor,\n  Translate,\n  useSensor,\n  useSensors,\n} from '@dnd-kit/core';\nimport {\n  SortableContext,\n  useSortable,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport React, {\n  createContext,\n  memo,\n  ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\n\nexport type RelativeDropPosition = 'above' | 'below' | 'inside';\n\nexport type DropValidator = (\n  sourceId: string,\n  destinationId: string,\n  position: RelativeDropPosition,\n) => boolean;\n\nconst defaultAcceptsDrop: DropValidator = (\n  sourceId,\n  destinationId,\n  position,\n) => {\n  return position !== 'inside' && sourceId !== destinationId;\n};\n\nconst SortableItemContext = createContext<{\n  position: Translate;\n  acceptsDrop: DropValidator;\n  setActivatorEvent: (event: PointerEvent) => void;\n}>({\n  position: { x: 0, y: 0 },\n  acceptsDrop: defaultAcceptsDrop,\n  setActivatorEvent: () => {},\n});\n\n/* ----------------------------------------------------------------------------\n * Item\n * ------------------------------------------------------------------------- */\n\ninterface ItemProps {\n  id: string;\n  children: (props: any) => JSX.Element;\n}\n\nfunction validateDropIndicator(\n  acceptsDrop: DropValidator,\n  activeId: string,\n  overId: string,\n  offsetTop: number,\n  elementTop: number,\n  elementHeight: number,\n): RelativeDropPosition | undefined {\n  const acceptsDropInside = acceptsDrop(activeId, overId, 'inside');\n\n  // If we're in the center of the element, prefer dropping inside\n  if (\n    offsetTop >= elementTop + elementHeight / 3 &&\n    offsetTop <= elementTop + (elementHeight * 2) / 3 &&\n    acceptsDropInside\n  )\n    return 'inside';\n\n  // Are we over the top or bottom half of the element?\n  const indicator =\n    offsetTop < elementTop + elementHeight / 2 ? 'above' : 'below';\n\n  // Drop above or below if possible, falling back to inside\n  return acceptsDrop(activeId, overId, indicator)\n    ? indicator\n    : acceptsDropInside\n    ? 'inside'\n    : undefined;\n}\n\nfunction SortableItem({ id, children }: ItemProps) {\n  const { position, acceptsDrop, setActivatorEvent } = useContext(\n    SortableItemContext,\n  );\n  const sortable = useSortable({ id });\n\n  const {\n    active,\n    activatorEvent,\n    attributes,\n    listeners,\n    setNodeRef,\n    isDragging,\n    index,\n    overIndex,\n    over,\n  } = sortable;\n\n  if (activatorEvent) {\n    setActivatorEvent(activatorEvent as PointerEvent);\n  }\n\n  const eventY = (activatorEvent as PointerEvent | null)?.clientY ?? 0;\n  const offsetTop = eventY + position.y;\n\n  return children({\n    ref: setNodeRef,\n    ...attributes,\n    ...listeners,\n    relativeDropPosition:\n      index === overIndex && !isDragging && active && over\n        ? validateDropIndicator(\n            acceptsDrop,\n            active.id,\n            over.id,\n            offsetTop,\n            over.rect.offsetTop,\n            over.rect.height,\n          )\n        : undefined,\n  });\n}\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\ninterface RootProps {\n  keys: string[];\n  children: ReactNode;\n  renderOverlay?: (index: number) => ReactNode;\n  onMoveItem?: (\n    sourceIndex: number,\n    destinationIndex: number,\n    position: RelativeDropPosition,\n  ) => void;\n  acceptsDrop?: DropValidator;\n}\n\nfunction SortableRoot({\n  keys,\n  children,\n  onMoveItem,\n  renderOverlay,\n  acceptsDrop = defaultAcceptsDrop,\n}: RootProps) {\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 4,\n      },\n    }),\n  );\n\n  const [activeIndex, setActiveIndex] = useState<number | undefined>();\n  const activatorEvent = useRef<PointerEvent | null>(null);\n\n  const setActivatorEvent = useCallback((event: PointerEvent) => {\n    activatorEvent.current = event;\n  }, []);\n\n  const [position, setPosition] = useState<Translate>({ x: 0, y: 0 });\n\n  const handleDragStart = useCallback(\n    (event: DragStartEvent) => {\n      setActiveIndex(keys.indexOf(event.active.id));\n    },\n    [keys],\n  );\n\n  const handleDragMove = useCallback((event: DragMoveEvent) => {\n    setPosition({ ...event.delta });\n  }, []);\n\n  const handleDragEnd = useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event;\n\n      setActiveIndex(undefined);\n\n      if (over && active.id !== over.id) {\n        const oldIndex = keys.indexOf(active.id);\n        const newIndex = keys.indexOf(over.id);\n\n        const eventY = activatorEvent.current?.clientY ?? 0;\n        const offsetTop = eventY + position.y;\n\n        const indicator = validateDropIndicator(\n          acceptsDrop,\n          active.id,\n          over.id,\n          offsetTop,\n          over.rect.offsetTop,\n          over.rect.height,\n        );\n\n        if (!indicator) return;\n\n        onMoveItem?.(oldIndex, newIndex, indicator);\n      }\n    },\n    [acceptsDrop, keys, onMoveItem, position.y],\n  );\n\n  return (\n    <SortableItemContext.Provider\n      value={useMemo(\n        () => ({\n          acceptsDrop,\n          position,\n          setActivatorEvent,\n        }),\n        [acceptsDrop, position, setActivatorEvent],\n      )}\n    >\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCenter}\n        onDragStart={handleDragStart}\n        onDragMove={handleDragMove}\n        onDragEnd={handleDragEnd}\n      >\n        <SortableContext items={keys} strategy={verticalListSortingStrategy}>\n          {children}\n        </SortableContext>\n        {renderOverlay &&\n          createPortal(\n            <DragOverlay dropAnimation={null}>\n              {activeIndex !== undefined && renderOverlay(activeIndex)}\n            </DragOverlay>,\n            document.body,\n          )}\n      </DndContext>\n    </SortableItemContext.Provider>\n  );\n}\n\nexport const Item = memo(SortableItem);\nexport const Root = memo(SortableRoot);\n","import { CommandWithoutQuadratics } from '@lona/svg-model';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Point } from 'noya-geometry';\nimport { PointString, SketchModel } from 'noya-sketch-model';\n\nfunction makeCurvePoint(\n  curveMode: Sketch.CurveMode,\n  point: Point,\n  curveTo?: Point,\n  curveFrom?: Point,\n): Sketch.CurvePoint {\n  return SketchModel.curvePoint({\n    curveMode: curveMode || Sketch.CurveMode.None,\n    point: PointString.encode(point),\n    curveTo: PointString.encode(curveTo || point),\n    curveFrom: PointString.encode(curveFrom || point),\n    hasCurveTo: !!curveTo,\n    hasCurveFrom: !!curveFrom,\n  });\n}\n\ntype Path = Pick<Sketch.ShapePath, 'isClosed' | 'points'>;\n\n// This is a rough port of Lona's PDF to Sketch path conversion\n// https://github.com/airbnb/Lona/blob/94fd0b26de3e3f4b4496cdaa4ab31c6d258dc4ac/studio/LonaStudio/Utils/Sketch.swift#L285\nclass PathBuilder {\n  addCommand(command: CommandWithoutQuadratics) {\n    switch (command.type) {\n      case 'line': {\n        const curvePoint = makeCurvePoint(\n          Sketch.CurveMode.Straight,\n          command.to,\n        );\n        this.curvePoints.push(curvePoint);\n        break;\n      }\n      case 'move': {\n        this.finishPath(false);\n\n        const curvePoint = makeCurvePoint(\n          Sketch.CurveMode.Straight,\n          command.to,\n        );\n        this.curvePoints.push(curvePoint);\n        break;\n      }\n      case 'cubicCurve': {\n        const last = this.lastCurvePoint;\n\n        if (last) {\n          last.curveFrom = PointString.encode(command.controlPoint1);\n          last.curveMode = Sketch.CurveMode.Mirrored;\n          last.hasCurveFrom = true;\n        }\n\n        const curvePoint = makeCurvePoint(\n          Sketch.CurveMode.Mirrored,\n          command.to,\n          command.controlPoint2,\n        );\n\n        this.curvePoints.push(curvePoint);\n        break;\n      }\n      case 'close': {\n        const first = this.firstCurvePoint;\n        const last = this.lastCurvePoint;\n\n        // If first and last points are equal, combine them\n        if (first && last && first.point === last.point && last.hasCurveTo) {\n          first.curveTo = last.curveTo;\n          first.hasCurveTo = last.hasCurveTo;\n          first.curveMode = Sketch.CurveMode.Mirrored;\n\n          this.curvePoints.pop();\n        }\n\n        this.finishPath(true);\n        break;\n      }\n      default:\n        throw new Error(`Invalid SVG path command: ${JSON.stringify(command)}`);\n    }\n  }\n\n  done() {\n    this.finishPath(false);\n\n    return this.paths;\n  }\n\n  private paths: Path[] = [];\n\n  private curvePoints: Sketch.CurvePoint[] = [];\n\n  private finishPath(isClosed: boolean) {\n    if (this.curvePoints.length === 0) return;\n\n    this.paths.push({ points: this.curvePoints, isClosed });\n    this.curvePoints = [];\n  }\n\n  get firstCurvePoint(): Sketch.CurvePoint | undefined {\n    return this.curvePoints.length > 0 ? this.curvePoints[0] : undefined;\n  }\n\n  get lastCurvePoint(): Sketch.CurvePoint | undefined {\n    return this.curvePoints.length > 0\n      ? this.curvePoints[this.curvePoints.length - 1]\n      : undefined;\n  }\n}\n\nexport function makePathsFromCommands(\n  commands: CommandWithoutQuadratics[],\n): Path[] {\n  const builder = new PathBuilder();\n\n  commands.forEach((command) => {\n    builder.addCommand(command);\n  });\n\n  return builder.done();\n}\n","import {\n  CommandWithoutQuadratics,\n  convert,\n  getCommandPoints,\n  mapCommandPoints,\n  parseCSSColor,\n  PathWithoutQuadratics,\n} from '@lona/svg-model';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  AffineTransform,\n  computeBoundsFromPoints,\n  Point,\n  Rect,\n  resize,\n  transformRect,\n  unionRects,\n} from 'noya-geometry';\nimport { SketchModel } from 'noya-sketch-model';\nimport { makePathsFromCommands } from './PathBuilder';\n\nfunction getBoundingRectFromCommands(\n  commands: CommandWithoutQuadratics[],\n): Rect {\n  return computeBoundsFromPoints(commands.flatMap(getCommandPoints));\n}\n\nfunction makeLineCapStyle(\n  strokeLineCap: 'butt' | 'round' | 'square',\n): Sketch.LineCapStyle {\n  switch (strokeLineCap) {\n    case 'butt':\n      return Sketch.LineCapStyle.Butt;\n    case 'round':\n      return Sketch.LineCapStyle.Round;\n    case 'square':\n      return Sketch.LineCapStyle.Projecting;\n    default:\n      throw new Error(`Invalid SVG stroke line cap: ${strokeLineCap}`);\n  }\n}\n\nfunction makeColor(cssString: string) {\n  const [red, green, blue, alpha] = parseCSSColor(cssString) ?? [0, 0, 0, 1];\n\n  return SketchModel.color({\n    red: red / 255,\n    green: green / 255,\n    blue: blue / 255,\n    alpha,\n  });\n}\n\n/**\n * Return the original frame, and scale all points within [0, 1]\n */\nfunction makeLayerPaths(commands: CommandWithoutQuadratics[]) {\n  // Find the original frame\n  const frame = getBoundingRectFromCommands(commands);\n\n  const transform = AffineTransform.scale(\n    1 / frame.width,\n    1 / frame.height,\n  ).translate(-frame.x, -frame.y);\n\n  // Scale points to within [0, 1]\n  const scaledCommands = commands.map((command) =>\n    mapCommandPoints(command, (point) => transform.applyTo(point)),\n  );\n\n  const paths = makePathsFromCommands(scaledCommands);\n\n  return { frame, paths };\n}\n\nfunction makeLayerFromPathElement(\n  pathElement: PathWithoutQuadratics,\n  scale: number,\n  offset: Point,\n) {\n  const { commands, style } = pathElement;\n\n  const { frame, paths } = makeLayerPaths(commands);\n\n  const shapeGroupFrame = transformRect(\n    frame,\n    AffineTransform.scale(scale).translate(offset.x, offset.y),\n  );\n\n  // Each shape path has an origin of {0, 0}, since the shapeGroup layer stores the real origin,\n  // and we don't want to apply the origin translation twice.\n  const shapePathFrame = {\n    x: 0,\n    y: 0,\n    width: shapeGroupFrame.width,\n    height: shapeGroupFrame.height,\n  };\n\n  const shapePaths = paths.map((path) =>\n    SketchModel.shapePath({\n      frame: SketchModel.rect(shapePathFrame),\n      points: path.points,\n      isClosed: path.isClosed,\n    }),\n  );\n\n  const shapeGroup = SketchModel.shapeGroup({\n    frame: SketchModel.rect(shapeGroupFrame),\n    layers: shapePaths,\n    style: SketchModel.style({\n      fills: style.fill\n        ? [\n            SketchModel.fill({\n              color: makeColor(style.fill),\n            }),\n          ]\n        : [],\n    }),\n  });\n\n  if (style.stroke && shapeGroup.style) {\n    const border = SketchModel.border({\n      thickness: style.strokeWidth * scale,\n      color: makeColor(style.stroke),\n      position: Sketch.BorderPosition.Center,\n    });\n\n    shapeGroup.style = {\n      ...shapeGroup.style,\n      borders: [border],\n      borderOptions: {\n        ...shapeGroup.style.borderOptions,\n        lineCapStyle: makeLineCapStyle(style.strokeLineCap),\n      },\n    };\n  }\n\n  return shapeGroup;\n}\n\n// Loosely based on the react-sketchapp (MIT) implementation (which I wrote)\n// https://github.com/airbnb/react-sketchapp/blob/b238e69c6f1e65ec6b1d8a908a91fbd9a8cc43a7/src/jsonUtils/makeSvgLayer/index.ts#L81\nexport function svgToLayer(name: string, svgString: string) {\n  const { viewBox, width, height, children } = convert(svgString, {\n    convertQuadraticsToCubics: true,\n  });\n\n  // The top-level frame is the union of every path within\n  const originalFrame = unionRects(\n    ...children.map((pathElement) =>\n      getBoundingRectFromCommands(pathElement.commands),\n    ),\n  );\n\n  // Figure out which dimensions to use for scaling\n  const layoutWidth = width ?? viewBox?.width ?? originalFrame.width;\n  const layoutHeight = height ?? viewBox?.height ?? originalFrame.height;\n  const layoutSize = { width: layoutWidth, height: layoutHeight };\n  const layoutFrame = viewBox ?? originalFrame;\n\n  // Determine the rect to generate layers within\n  const croppedRect = resize(layoutFrame, layoutSize, 'scaleAspectFit');\n  const scale = croppedRect.width / layoutFrame.width;\n\n  // Scale the frame to our resized scale\n  const scaledFrame = transformRect(\n    originalFrame,\n    AffineTransform.scale(scale),\n  );\n\n  // Undo any translation in the frame so that our new layers appear at {0,0}\n  const layerOffset = { x: -scaledFrame.x, y: -scaledFrame.y };\n\n  const layers = children.map((element) =>\n    makeLayerFromPathElement(element, scale, layerOffset),\n  );\n\n  return SketchModel.group({\n    frame: SketchModel.rect({\n      ...scaledFrame,\n      x: 0,\n      y: 0,\n    }),\n    name,\n    layers,\n  });\n}\n","export type SelectionType = 'replace' | 'intersection' | 'difference';\n\nexport function updateSelection<T extends string | number>(\n  currentIds: T[],\n  newIds: T | T[] | undefined,\n  selectionType: SelectionType,\n) {\n  const ids =\n    newIds === undefined ? [] : Array.isArray(newIds) ? newIds : [newIds];\n\n  switch (selectionType) {\n    case 'intersection':\n      currentIds.push(...ids.filter((id) => !currentIds.includes(id)));\n      return;\n    case 'difference':\n      ids.forEach((id) => {\n        const selectedIndex = currentIds.indexOf(id);\n        currentIds.splice(selectedIndex, 1);\n      });\n      return;\n    case 'replace':\n      // Update currentIds array in-place\n      currentIds.length = 0;\n      currentIds.push(...ids);\n      return;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { SketchModel } from 'noya-sketch-model';\nimport { uuid } from 'noya-utils';\nimport * as Layers from '../layers';\nimport {\n  getCurrentPage,\n  getCurrentPageIndex,\n  getSymbolsInstancesIndexPaths,\n} from '../selectors/selectors';\nimport { UUID } from '../types';\nimport { ApplicationState } from './applicationReducer';\nimport { detachSymbolIntances } from './layerReducer';\n\nexport type PageAction =\n  | [type: 'movePage', sourceIndex: number, destinationIndex: number]\n  | [type: 'selectPage', pageId: UUID]\n  | [type: 'addPage', name: string]\n  | [type: 'deletePage']\n  | [type: 'renamePage', name: string]\n  | [type: 'duplicatePage'];\n\nexport const createPage = (\n  pages: Sketch.Page[],\n  user: Sketch.User,\n  name: string,\n): Sketch.Page => {\n  const newPage = SketchModel.page({ name });\n\n  user[newPage.do_objectID] = {\n    scrollOrigin: '{0, 0}',\n    zoomValue: 1,\n  };\n\n  pages.push(newPage);\n\n  return newPage;\n};\n\nexport function pageReducer(\n  state: ApplicationState,\n  action: PageAction,\n): ApplicationState {\n  switch (action[0]) {\n    case 'selectPage': {\n      return produce(state, (draft) => {\n        draft.selectedPage = action[1];\n      });\n    }\n    case 'addPage': {\n      const [, name] = action;\n\n      return produce(state, (draft) => {\n        const newPage = createPage(draft.sketch.pages, draft.sketch.user, name);\n        draft.selectedPage = newPage.do_objectID;\n      });\n    }\n    case 'renamePage': {\n      const [, name] = action;\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        const pages = draft.sketch.pages;\n        const page = pages[pageIndex];\n\n        pages[pageIndex] = produce(page, (page) => {\n          page.name = name || `Page ${pages.length + 1}`;\n          return page;\n        });\n      });\n    }\n    case 'duplicatePage': {\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        const pages = draft.sketch.pages;\n        const user = draft.sketch.user;\n        const page = pages[pageIndex];\n\n        const mappedSymbolIDs: Record<string, string> = {};\n\n        page.layers.filter(Layers.isSymbolMaster).forEach((symbolMaster) => {\n          mappedSymbolIDs[symbolMaster.symbolID] = uuid();\n        });\n\n        const duplicatePage = produce(page, (page) => {\n          page.name = `${page.name} Copy`;\n\n          Layers.visit(page, (layer) => {\n            layer.do_objectID = uuid();\n            if (layer.style) layer.style.do_objectID = uuid();\n\n            if (\n              Layers.isSymbolMaster(layer) ||\n              (Layers.isSymbolInstance(layer) &&\n                layer.symbolID in mappedSymbolIDs)\n            ) {\n              layer.symbolID = mappedSymbolIDs[layer.symbolID];\n            }\n          });\n\n          return page;\n        });\n\n        user[duplicatePage.do_objectID] = {\n          scrollOrigin: user[page.do_objectID].scrollOrigin,\n          zoomValue: user[page.do_objectID].zoomValue,\n        };\n\n        pages.push(duplicatePage);\n        draft.selectedPage = duplicatePage.do_objectID;\n      });\n    }\n    case 'deletePage': {\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n\n      const symbolsIds = page.layers.flatMap((layer) =>\n        Layers.isSymbolMaster(layer) ? [layer.symbolID] : [],\n      );\n\n      const symbolsInstancesIndexPaths = symbolsIds.flatMap((ids) =>\n        getSymbolsInstancesIndexPaths(state, ids),\n      );\n\n      return produce(state, (draft) => {\n        const pages = draft.sketch.pages;\n        const user = draft.sketch.user;\n\n        delete user[page.do_objectID];\n        pages.splice(pageIndex, 1);\n\n        detachSymbolIntances(pages, state, symbolsInstancesIndexPaths);\n\n        const newIndex = Math.max(pageIndex - 1, 0);\n        draft.selectedPage = pages[newIndex].do_objectID;\n      });\n    }\n    case 'movePage': {\n      const [, sourceIndex, destinationIndex] = action;\n\n      return produce(state, (draft) => {\n        const sourceItem = draft.sketch.pages[sourceIndex];\n\n        draft.sketch.pages.splice(sourceIndex, 1);\n        draft.sketch.pages.splice(destinationIndex, 0, sourceItem);\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { RelativeDropPosition } from 'noya-designsystem';\nimport { AffineTransform, Point, transformRect } from 'noya-geometry';\nimport { svgToLayer } from 'noya-import-svg';\nimport { SketchModel } from 'noya-sketch-model';\nimport { uuid } from 'noya-utils';\nimport { IndexPath } from 'tree-visit';\nimport * as Layers from '../layers';\nimport {\n  addSiblingLayer,\n  deleteLayers,\n  findPageLayerIndexPaths,\n  getBoundingRect,\n  getCurrentPage,\n  getCurrentPageIndex,\n  getIndexPathsForGroup,\n  getIndexPathsOfArtboardLayers,\n  getLayerTransformAtIndexPath,\n  getParentLayer,\n  getRightMostLayerBounds,\n  getSelectedSymbols,\n  getSymbols,\n  getSymbolsInstancesIndexPaths,\n  getSymbolsPageIndex,\n  LayerIndexPaths,\n  moveLayer,\n} from '../selectors/selectors';\nimport { SelectionType, updateSelection } from '../utils/selection';\nimport { ApplicationState } from './applicationReducer';\nimport { createPage } from './pageReducer';\n\nexport type LayerAction =\n  | [type: 'importSvg', point: Point, name: string, svgString: string]\n  | [\n      type: 'moveLayer',\n      layerId: string | string[],\n      relativeLayer: string,\n      position: RelativeDropPosition,\n    ]\n  | [type: 'deleteLayer', layerId: string | string[]]\n  | [type: 'groupLayer', layerId: string | string[], name: string]\n  | [type: 'ungroupLayer', layerId: string | string[]]\n  | [type: 'createSymbol', layerId: string | string[], name: string]\n  | [type: 'detachSymbol', layerId: string | string[]]\n  | [type: 'deleteSymbol', ids: string[]]\n  | [type: 'duplicateLayer', ids: string[]]\n  | [\n      type: 'selectLayer',\n      layerId: string | string[] | undefined,\n      selectionType?: SelectionType,\n    ]\n  | [type: 'selectAllLayers'];\n\nconst createGroup = <T extends Sketch.Group | Sketch.SymbolMaster>(\n  model: T,\n  page: Sketch.Page,\n  ids: string[],\n  name: string,\n  indexPaths: IndexPath[],\n): T | undefined => {\n  const boundingRect = getBoundingRect(page, AffineTransform.identity, ids, {\n    clickThroughGroups: true,\n    includeHiddenLayers: true,\n    includeArtboardLayers: false,\n  });\n\n  if (!boundingRect) {\n    console.info('[groupLayer] Selected layers not found');\n    return undefined;\n  }\n\n  const newParentTransform = getLayerTransformAtIndexPath(page, indexPaths[0]);\n\n  const groupFrame = transformRect(boundingRect, newParentTransform.invert());\n\n  const newGroupTransform = AffineTransform.multiply(\n    newParentTransform,\n    AffineTransform.translation(groupFrame.x, groupFrame.y),\n  );\n\n  return produce(model, (draft) => {\n    draft.do_objectID = uuid();\n    draft.name = name;\n    draft.frame = {\n      _class: 'rect',\n      constrainProportions: false,\n      ...groupFrame,\n    };\n    draft.style = SketchModel.style();\n\n    draft.layers = [...indexPaths].map((indexPath) => {\n      const layer = Layers.access(page, indexPath) as Layers.ChildLayer;\n\n      const originalParentTransform = getLayerTransformAtIndexPath(\n        page,\n        indexPath,\n      );\n\n      // First we undo original parent's transform, then we apply the new group's transform\n      const transform = AffineTransform.multiply(\n        originalParentTransform,\n        newGroupTransform.invert(),\n      );\n\n      return produce(layer, (draftLayer) => {\n        draftLayer.frame = {\n          ...draftLayer.frame,\n          ...transformRect(draftLayer.frame, transform),\n        };\n      });\n    });\n  });\n};\n\nconst unGroup = (parent: Layers.ParentLayer, indexPath: IndexPath) => {\n  const groupIndex = indexPath[indexPath.length - 1];\n  const group = parent.layers[groupIndex] as Sketch.Group;\n  return group.layers.map((l) =>\n    produce(l, (l) => {\n      l.frame = {\n        ...l.frame,\n        x: l.frame.x + group.frame.x,\n        y: l.frame.y + group.frame.y,\n      };\n    }),\n  );\n};\n\nconst symbolToGroup = (\n  page: Sketch.Page,\n  state: ApplicationState,\n  parent: Layers.ParentLayer,\n  indexPath: IndexPath,\n) => {\n  const index = indexPath[indexPath.length - 1];\n  const element = parent.layers[index] as Sketch.SymbolInstance;\n\n  const symbol = getSymbols(state).filter(\n    (s) => s.symbolID === element.symbolID,\n  )[0];\n\n  const group = SketchModel.group({\n    name: element.name,\n    frame: element.frame,\n    layers: symbol.layers.map((l) =>\n      produce(l, (l) => {\n        l.do_objectID = uuid();\n      }),\n    ),\n  });\n\n  deleteLayers([indexPath], page);\n  addSiblingLayer(page, indexPath, group);\n};\n\nexport const detachSymbolIntances = (\n  pages: Sketch.Page[],\n  state: ApplicationState,\n  symbolsInstancesIndexPaths: LayerIndexPaths[],\n) => {\n  symbolsInstancesIndexPaths.forEach((element) => {\n    const { indexPaths, pageIndex } = element;\n    indexPaths.forEach((indexPath) => {\n      const page = pages[pageIndex];\n\n      const parent = getParentLayer(page, indexPath);\n      symbolToGroup(page, state, parent, indexPath);\n    });\n  });\n};\n\nexport function layerReducer(\n  state: ApplicationState,\n  action: LayerAction,\n): ApplicationState {\n  switch (action[0]) {\n    case 'importSvg': {\n      const [, point, name, svgString] = action;\n\n      const layer = svgToLayer(name, svgString);\n\n      layer.frame = {\n        ...layer.frame,\n        x: point.x - layer.frame.width / 2,\n        y: point.y - layer.frame.height / 2,\n      };\n\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        const page = draft.sketch.pages[pageIndex];\n        page.layers.push(layer);\n      });\n    }\n    case 'moveLayer': {\n      const [, id, destinationId, rawPosition] = action;\n\n      // Since layers are stored in reverse order, to place a layer \"above\",\n      // we actually place it \"below\" in terms of index, etc.\n      return moveLayer(state, id, destinationId, rawPosition);\n    }\n    case 'deleteLayer':\n    case 'deleteSymbol': {\n      const [, id] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      const indexPaths = findPageLayerIndexPaths(state, (layer) =>\n        ids.includes(layer.do_objectID),\n      );\n\n      const symbolsInstancesIndexPaths = getSelectedSymbols(\n        state,\n      ).flatMap((symbol) =>\n        getSymbolsInstancesIndexPaths(state, symbol.symbolID),\n      );\n\n      return produce(state, (draft) => {\n        detachSymbolIntances(\n          draft.sketch.pages,\n          state,\n          symbolsInstancesIndexPaths,\n        );\n        indexPaths.forEach((i) =>\n          deleteLayers(i.indexPaths, draft.sketch.pages[i.pageIndex]),\n        );\n      });\n    }\n    case 'groupLayer': {\n      const [, id, name] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n\n      const indexPaths = getIndexPathsForGroup(state, ids);\n\n      const group = createGroup(\n        SketchModel.group(),\n        page,\n        ids,\n        name,\n        indexPaths,\n      );\n\n      if (!group) return state;\n\n      // Fire we remove selected layers, then we insert the group layer\n      return produce(state, (draft) => {\n        const pages = draft.sketch.pages;\n        deleteLayers(indexPaths, pages[pageIndex]);\n        addSiblingLayer(pages[pageIndex], indexPaths[0], group);\n\n        draft.selectedObjects = [group.do_objectID];\n      });\n    }\n    case 'ungroupLayer':\n    case 'detachSymbol': {\n      const [, id] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n      const indexPaths = getIndexPathsForGroup(state, ids)[0];\n\n      return produce(state, (draft) => {\n        const parent = getParentLayer(page, indexPaths);\n        const pages = draft.sketch.pages[pageIndex];\n\n        if (action[0] === 'ungroupLayer') {\n          const layers = unGroup(parent, indexPaths);\n          deleteLayers([indexPaths], pages);\n          addSiblingLayer(pages, indexPaths, layers);\n        } else {\n          symbolToGroup(pages, state, parent, indexPaths);\n        }\n\n        if (!Layers.isPageLayer(parent)) {\n          draft.selectedObjects = [parent.do_objectID];\n        }\n      });\n    }\n    case 'selectLayer': {\n      const [, id, selectionType = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        updateSelection(draft.selectedObjects, id, selectionType);\n      });\n    }\n    case 'selectAllLayers': {\n      const page = getCurrentPage(state);\n      const ids = page.layers.map((layer) => layer.do_objectID);\n\n      return produce(state, (draft) => {\n        updateSelection(draft.selectedObjects, ids, 'replace');\n      });\n    }\n    case 'createSymbol': {\n      const [, id, name] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n      const indexPathsArtboards = getIndexPathsOfArtboardLayers(state, ids);\n\n      if (indexPathsArtboards.length > 0) {\n        return produce(state, (draft) => {\n          const pages = draft.sketch.pages;\n\n          deleteLayers(indexPathsArtboards, pages[pageIndex]);\n          draft.selectedObjects = [];\n          indexPathsArtboards.forEach((indexPath: IndexPath) => {\n            const artboard = Layers.access(page, indexPath) as Sketch.Artboard;\n\n            const symbolMaster = SketchModel.symbolMaster({\n              ...artboard,\n            });\n\n            addSiblingLayer(pages[pageIndex], indexPath, symbolMaster);\n            draft.selectedObjects = [\n              ...draft.selectedObjects,\n              symbolMaster.do_objectID,\n            ];\n          });\n        });\n      }\n\n      const symbolsPageIndex = getSymbolsPageIndex(state);\n      const indexPaths = getIndexPathsForGroup(state, ids);\n      const symbolMaster = createGroup(\n        SketchModel.symbolMaster(),\n        page,\n        ids,\n        name,\n        indexPaths,\n      );\n\n      if (!symbolMaster) return state;\n\n      const originalFrame = { ...symbolMaster.frame };\n      const symbolsPage = state.sketch.pages[symbolsPageIndex];\n\n      const rect = symbolsPage\n        ? getRightMostLayerBounds(symbolsPage)\n        : { maxX: 0, minY: 25 };\n\n      symbolMaster.frame.x = rect.maxX + 100;\n      symbolMaster.frame.y = rect.minY;\n\n      return produce(state, (draft) => {\n        const pages = draft.sketch.pages;\n\n        deleteLayers(indexPaths, pages[pageIndex]);\n\n        const symbolsPage =\n          symbolsPageIndex === -1\n            ? createPage(pages, draft.sketch.user, 'Symbols')\n            : pages[symbolsPageIndex];\n\n        const symbolInstance = SketchModel.symbolInstance({\n          name: symbolMaster.name,\n          symbolID: symbolMaster.symbolID,\n          frame: originalFrame,\n        });\n\n        symbolsPage.layers = [...symbolsPage.layers, symbolMaster];\n        addSiblingLayer(pages[pageIndex], indexPaths[0], symbolInstance);\n\n        draft.selectedObjects = [symbolInstance.do_objectID];\n      });\n    }\n    case 'duplicateLayer': {\n      const [, id] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      const pages = state.sketch.pages;\n      const pagesIndexPaths = findPageLayerIndexPaths(state, (layer) =>\n        ids.includes(layer.do_objectID),\n      ).reverse();\n\n      return produce(state, (draft) => {\n        pagesIndexPaths.forEach((pagesIndexPath) => {\n          const { indexPaths, pageIndex } = pagesIndexPath;\n          const page = pages[pageIndex];\n          const draftPage = draft.sketch.pages[pageIndex];\n\n          indexPaths.forEach((indexPath) => {\n            const layer = Layers.access(page, indexPath);\n            const elem = produce(layer, (layer) => {\n              layer.name = layer.name + ' Copy';\n\n              Layers.visit(layer, (layer) => {\n                if (layer.style) layer.style.do_objectID = uuid();\n                if (Layers.isSymbolMaster(layer)) {\n                  layer.symbolID = uuid();\n                  layer.frame = {\n                    ...layer.frame,\n                    x: layer.frame.x + layer.frame.width + 25,\n                    y: layer.frame.y,\n                  };\n                }\n                layer.do_objectID = uuid();\n              });\n            }) as Exclude<Sketch.AnyLayer, { _class: 'page' }>;\n\n            addSiblingLayer(draftPage, indexPath, elem);\n          });\n        });\n      });\n    }\n\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit } from 'canvaskit';\nimport produce from 'immer';\nimport * as Layers from '../layers';\nimport {\n  getCurrentPageIndex,\n  getSelectedLayerIndexPaths,\n  moveControlPoints,\n  moveSelectedPoints,\n} from '../selectors/selectors';\nimport { SelectionType, updateSelection } from '../utils/selection';\nimport {\n  ApplicationState,\n  SelectedPointLists,\n  SetNumberMode,\n} from './applicationReducer';\n\nexport type PointAction =\n  | [type: 'setPointCurveMode', curveMode: Sketch.CurveMode]\n  | [type: 'setPointCornerRadius', amount: number, mode?: SetNumberMode]\n  | [\n      type: 'setPointX' | 'setPointY',\n      pointLists: SelectedPointLists,\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | [\n      type: 'setControlPointX' | 'setControlPointY',\n      amount: number,\n      mode?: SetNumberMode,\n    ]\n  | [\n      type: 'selectPoint',\n      selectedPoint: SelectedPoint | undefined,\n      selectionType?: SelectionType,\n    ]\n  | [\n      type: 'selectControlPoint',\n      layerId: string,\n      pointIndex: number,\n      controlPointType: 'curveFrom' | 'curveTo',\n    ];\n\nexport type SelectedPoint = [layerId: string, index: number];\n\nexport function pointReducer(\n  state: ApplicationState,\n  action: PointAction,\n  CanvasKit: CanvasKit,\n): ApplicationState {\n  switch (action[0]) {\n    case 'setPointCurveMode': {\n      const [, curveMode] = action;\n\n      return visitSelectedDraftPoints(state, (curvePoint) => {\n        curvePoint.curveMode = curveMode;\n        if (curveMode !== Sketch.CurveMode.Straight) {\n          curvePoint.hasCurveFrom = true;\n          curvePoint.hasCurveTo = true;\n        }\n      });\n    }\n    case 'setPointCornerRadius': {\n      const [, amount, mode] = action;\n\n      return visitSelectedDraftPoints(state, (curvePoint) => {\n        const newValue =\n          mode === 'replace' ? amount : curvePoint.cornerRadius + amount;\n\n        curvePoint.cornerRadius = Math.max(0, newValue);\n      });\n    }\n    case 'selectPoint': {\n      const [, selectedPoint, selectionType = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        draft.selectedControlPoint = undefined;\n        for (let layerId in draft.selectedPointLists) {\n          const currentIds = draft.selectedPointLists[layerId];\n          updateSelection(\n            currentIds,\n            selectedPoint && selectedPoint[0] === layerId\n              ? selectedPoint[1]\n              : undefined,\n            selectionType,\n          );\n        }\n      });\n    }\n    case 'selectControlPoint': {\n      const [, layerId, pointIndex, controlPointType] = action;\n\n      return produce(state, (draft) => {\n        for (let layerId in draft.selectedPointLists) {\n          draft.selectedPointLists[layerId] = [];\n        }\n\n        draft.selectedControlPoint = {\n          layerId,\n          pointIndex,\n          controlPointType,\n        };\n      });\n    }\n    case 'setPointX':\n    case 'setPointY': {\n      const [type, selectedPointList, amount, mode = 'replace'] = action;\n\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        const delta = type === 'setPointX' ? { x: amount } : { y: amount };\n\n        moveSelectedPoints(\n          selectedPointList,\n          layerIndexPaths,\n          delta,\n          mode,\n          draft.sketch.pages[pageIndex],\n          draft.sketch.pages[pageIndex],\n          CanvasKit,\n        );\n      });\n    }\n    case 'setControlPointX':\n    case 'setControlPointY': {\n      const [type, amount, mode = 'replace'] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        if (!draft.selectedControlPoint) return;\n        const delta =\n          type === 'setControlPointX' ? { x: amount } : { y: amount };\n\n        moveControlPoints(\n          draft.selectedControlPoint,\n          layerIndexPaths,\n          delta,\n          mode,\n          draft.sketch.pages[pageIndex],\n          draft.sketch.pages[pageIndex],\n          CanvasKit,\n        );\n      });\n    }\n    default:\n      return state;\n  }\n}\n\nfunction visitSelectedDraftPoints(\n  state: ApplicationState,\n  f: (point: Sketch.CurvePoint) => void,\n) {\n  const pageIndex = getCurrentPageIndex(state);\n  const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n  return produce(state, (draft) => {\n    layerIndexPaths.forEach((indexPath) => {\n      const page = draft.sketch.pages[pageIndex];\n      const layer = Layers.access(page, indexPath);\n      const pointList = draft.selectedControlPoint\n        ? [draft.selectedControlPoint.pointIndex]\n        : draft.selectedPointLists[layer.do_objectID];\n\n      if (!Layers.isPointsLayer(layer) || !pointList) return;\n\n      layer.points.forEach((point, index) => {\n        if (!pointList.includes(index)) return;\n\n        f(point);\n      });\n    });\n  });\n}\n\n/**\n * Layers with an `edited` property track whether their points have been changed.\n * This affects whether certain inspectable properties, like `numberOfPoints`, are\n * still meaningful/editable.\n */\nexport function markLayersAsEdited(state: ApplicationState) {\n  const pageIndex = getCurrentPageIndex(state);\n  const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n  return produce(state, (draft) => {\n    layerIndexPaths.forEach((indexPath) => {\n      const page = draft.sketch.pages[pageIndex];\n      const layer = Layers.access(page, indexPath);\n      const pointList = draft.selectedControlPoint\n        ? [draft.selectedControlPoint.pointIndex]\n        : draft.selectedPointLists[layer.do_objectID];\n\n      if (\n        !Layers.isLayerWithEditedProperty(layer) ||\n        !pointList ||\n        pointList.length === 0\n      )\n        return;\n\n      layer.edited = true;\n    });\n  });\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\n\nexport type StringAttributeAction =\n  | [type: 'setTextColor', value: Sketch.Color]\n  | [type: 'setTextFontName', value: string]\n  | [type: 'setTextFontSize', value: number]\n  | [type: 'setTextLetterSpacing', value: number]\n  | [type: 'setTextLineSpacing', value: number]\n  | [type: 'setTextParagraphSpacing', value: number]\n  | [type: 'setTextHorizontalAlignment', value: number]\n  | [type: 'setTextVerticalAlignment', value: number];\n\ntype CommonStringAttributes =\n  | Sketch.StringAttribute['attributes']\n  | Sketch.TextStyle['encodedAttributes'];\n\nexport function stringAttributeReducer<T extends CommonStringAttributes>(\n  state: T,\n  action: StringAttributeAction,\n): T {\n  switch (action[0]) {\n    case 'setTextColor': {\n      const [, color] = action;\n\n      return produce(state, (draft) => {\n        draft.MSAttributedStringColorAttribute = color;\n      });\n    }\n    case 'setTextFontName': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const attributes = draft.MSAttributedStringFontAttribute.attributes;\n\n        // This logic is temporary and will be replaced when we handle fonts\n        const split = attributes.name.split('-');\n        const face = split[1] ? '-' + split[1] : '';\n\n        attributes.name = value.startsWith('-')\n          ? split[0] + value\n          : value + face;\n      });\n    }\n    case 'setTextFontSize': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.MSAttributedStringFontAttribute.attributes.size = value;\n      });\n    }\n    case 'setTextLetterSpacing': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.kerning = value;\n      });\n    }\n    case 'setTextLineSpacing': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.paragraphStyle = draft.paragraphStyle ?? {\n          _class: 'paragraphStyle',\n          alignment: 0,\n        };\n\n        draft.paragraphStyle.maximumLineHeight = value;\n        draft.paragraphStyle.maximumLineHeight = value;\n      });\n    }\n    case 'setTextParagraphSpacing': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.paragraphStyle = draft.paragraphStyle ?? {\n          _class: 'paragraphStyle',\n          alignment: 0,\n        };\n\n        draft.paragraphStyle.paragraphSpacing = value;\n      });\n    }\n    case 'setTextHorizontalAlignment': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.paragraphStyle = draft.paragraphStyle ?? {\n          _class: 'paragraphStyle',\n          alignment: 0,\n        };\n\n        draft.paragraphStyle.alignment = value;\n      });\n    }\n    case 'setTextVerticalAlignment': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.textStyleVerticalAlignmentKey = value;\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit } from 'canvaskit';\nimport produce from 'immer';\nimport { WritableDraft } from 'immer/dist/internal';\nimport { uuid } from 'noya-utils';\nimport { SketchFile } from 'noya-sketch-file';\nimport { IndexPath } from 'tree-visit';\nimport { KeyModifiers } from 'noya-keymap';\nimport * as Layers from '../layers';\nimport {\n  findPageLayerIndexPaths,\n  getCurrentComponentsTab,\n  getCurrentPageIndex,\n  getCurrentTab,\n  getSelectedLayerIndexPaths,\n  setNewPatternFill,\n} from '../selectors/selectors';\nimport { AlignmentAction, alignmentReducer } from './alignmentReducer';\nimport { CanvasAction, canvasReducer } from './canvasReducer';\nimport { ExportAction, exportReducer } from './exportReducer';\nimport {\n  createInitialInteractionState,\n  interactionReducer,\n  InteractionState,\n} from './interactionReducer';\nimport {\n  LayerPropertyAction,\n  layerPropertyReducer,\n} from './layerPropertyReducer';\nimport { LayerAction, layerReducer } from './layerReducer';\nimport { PageAction, pageReducer } from './pageReducer';\nimport { markLayersAsEdited, PointAction, pointReducer } from './pointReducer';\nimport { SetNumberMode, StyleAction, styleReducer } from './styleReducer';\nimport { SymbolsAction, symbolsReducer } from './symbolsReducer';\nimport { TextStyleAction, textStyleReducer } from './textStyleReducer';\nimport { ThemeAction, themeReducer } from './themeReducer';\n\nexport type { SetNumberMode };\n\nexport type WorkspaceTab = 'canvas' | 'theme';\n\nexport type ThemeTab = 'swatches' | 'textStyles' | 'layerStyles' | 'symbols';\ntype ThemeSelection = { ids: string[]; groupName: string };\n\nexport type controlPointType = 'curveFrom' | 'curveTo';\n\nexport type SelectedControlPoint = {\n  layerId: string;\n  pointIndex: number;\n  controlPointType: controlPointType;\n};\n\nexport type SelectedPointLists = Record<string, number[]>;\n\nexport type ApplicationState = {\n  currentTab: WorkspaceTab;\n  currentThemeTab: ThemeTab;\n  interactionState: InteractionState;\n  keyModifiers: KeyModifiers;\n  selectedPage: string;\n  selectedObjects: string[];\n  selectedPointLists: SelectedPointLists;\n  selectedControlPoint?: SelectedControlPoint;\n  selectedThemeTab: Record<ThemeTab, ThemeSelection>;\n  sketch: SketchFile;\n};\n\nexport type Action =\n  | [type: 'setTab', value: WorkspaceTab]\n  | [type: 'setKeyModifier', name: keyof KeyModifiers, value: boolean]\n  | PageAction\n  | CanvasAction\n  | LayerPropertyAction\n  | LayerAction\n  | AlignmentAction\n  | StyleAction\n  | TextStyleAction\n  | ThemeAction\n  | SymbolsAction\n  | ExportAction\n  | PointAction;\n\nexport function applicationReducer(\n  state: ApplicationState,\n  action: Action,\n  CanvasKit: CanvasKit,\n): ApplicationState {\n  switch (action[0]) {\n    case 'setKeyModifier':\n      const [, name, value] = action;\n      return produce(state, (draft) => {\n        draft.keyModifiers[name] = value;\n      });\n    case 'setTab': {\n      const [, value] = action;\n      return produce(state, (draft) => {\n        draft.currentTab = value;\n        draft.interactionState = interactionReducer(draft.interactionState, [\n          'reset',\n        ]);\n      });\n    }\n    case 'selectPage':\n    case 'addPage':\n    case 'renamePage':\n    case 'duplicatePage':\n    case 'deletePage':\n    case 'movePage': {\n      return pageReducer(state, action);\n    }\n    case 'insertArtboard':\n    case 'addDrawnLayer':\n    case 'addShapePathLayer':\n    case 'addSymbolLayer':\n    case 'addPointToPath':\n    case 'pan':\n    case 'insertBitmap':\n    case 'interaction':\n    case 'moveLayersIntoParentAtPoint':\n      return canvasReducer(state, action, CanvasKit);\n    case 'setLayerVisible':\n    case 'setLayerIsLocked':\n    case 'setExpandedInLayerList':\n    case 'setFixedRadius':\n    case 'setLayerX':\n    case 'setLayerY':\n    case 'setLayerWidth':\n    case 'setLayerHeight':\n    case 'setLayerRotation':\n    case 'setIsClosed':\n    case 'setIsFlippedHorizontal':\n    case 'setIsFlippedVertical':\n    case 'setHasClippingMask':\n    case 'setShouldBreakMaskChain':\n    case 'setMaskMode':\n      return layerPropertyReducer(state, action, CanvasKit);\n    case 'importSvg':\n    case 'groupLayer':\n    case 'deleteLayer':\n    case 'moveLayer':\n    case 'selectLayer':\n    case 'selectAllLayers':\n    case 'ungroupLayer':\n    case 'createSymbol':\n    case 'detachSymbol':\n    case 'deleteSymbol':\n    case 'duplicateLayer':\n      return layerReducer(state, action);\n    case 'distributeLayers':\n    case 'alignLayers': {\n      return alignmentReducer(state, action);\n    }\n    case 'addNewBorder':\n    case 'addNewFill':\n    case 'addNewShadow':\n    case 'setBorderEnabled':\n    case 'setFillEnabled':\n    case 'setShadowEnabled':\n    case 'deleteBorder':\n    case 'deleteFill':\n    case 'deleteShadow':\n    case 'moveBorder':\n    case 'moveFill':\n    case 'moveShadow':\n    case 'deleteDisabledBorders':\n    case 'deleteDisabledFills':\n    case 'deleteDisabledShadows':\n    case 'setBorderColor':\n    case 'setFillColor':\n    case 'setShadowColor':\n    case 'setBorderWidth':\n    case 'setFillOpacity':\n    case 'setOpacity':\n    case 'setShadowX':\n    case 'setShadowY':\n    case 'setShadowBlur':\n    case 'setBorderPosition':\n    case 'setShadowSpread':\n    case 'setFillFillType':\n    case 'setBorderFillType':\n    case 'setFillGradientColor':\n    case 'setFillGradientPosition':\n    case 'setFillGradientType':\n    case 'setFillGradient':\n    case 'addFillGradientStop':\n    case 'deleteFillGradientStop':\n    case 'setBorderGradient':\n    case 'setBorderGradientColor':\n    case 'setBorderGradientPosition':\n    case 'setBorderGradientType':\n    case 'addBorderGradientStop':\n    case 'deleteBorderGradientStop':\n    case 'setColorControlsEnabled':\n    case 'setHue':\n    case 'setSaturation':\n    case 'setBrightness':\n    case 'setContrast':\n    case 'setPatternFillType':\n    case 'setPatternTileScale':\n    case 'setFillImage':\n    case 'setFillContextSettingsOpacity': {\n      if (getCurrentTab(state) === 'canvas') {\n        const pageIndex = getCurrentPageIndex(state);\n        const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n        return produce(state, (draft) => {\n          accessPageLayers(draft, pageIndex, layerIndexPaths).forEach(\n            (layer) => {\n              if (!layer.style) return;\n              if (\n                action[0] === 'setFillFillType' &&\n                action[2] === Sketch.FillType.Pattern &&\n                layer.style.fills\n              )\n                setNewPatternFill(layer.style.fills, action[1], draft);\n\n              layer.style = styleReducer(layer.style, action);\n            },\n          );\n        });\n      } else {\n        const ids = state.selectedThemeTab.layerStyles.ids;\n\n        const layerIndexPathsWithSharedStyle = findPageLayerIndexPaths(\n          state,\n          (layer) =>\n            layer.sharedStyleID !== undefined &&\n            ids.includes(layer.sharedStyleID),\n        );\n\n        const currentComponentsTab = getCurrentComponentsTab(state);\n\n        const selectedIds = state.selectedThemeTab[currentComponentsTab].ids;\n\n        return produce(state, (draft) => {\n          const styles =\n            currentComponentsTab === 'layerStyles'\n              ? draft.sketch.document.layerStyles?.objects\n              : draft.sketch.document.layerTextStyles?.objects ?? [];\n\n          styles.forEach((style) => {\n            if (!selectedIds.includes(style.do_objectID)) return;\n\n            style.value = styleReducer(style.value, action);\n\n            if (\n              action[0] === 'setFillFillType' &&\n              action[2] === Sketch.FillType.Pattern &&\n              style.value.fills\n            )\n              setNewPatternFill(style.value.fills, action[1], draft);\n\n            layerIndexPathsWithSharedStyle.forEach((layerPath) =>\n              accessPageLayers(\n                draft,\n                layerPath.pageIndex,\n                layerPath.indexPaths,\n              ).forEach((layer) => {\n                layer.style = produce(style.value, (style) => {\n                  style.do_objectID = uuid();\n                  return style;\n                });\n              }),\n            );\n          });\n        });\n      }\n    }\n    case 'setTextColor':\n    case 'setTextFontName':\n    case 'setTextFontSize':\n    case 'setTextLineSpacing':\n    case 'setTextLetterSpacing':\n    case 'setTextParagraphSpacing':\n    case 'setTextHorizontalAlignment':\n    case 'setTextVerticalAlignment':\n    case 'setTextAlignment':\n    case 'setTextDecoration':\n    case 'setTextTransform':\n      return textStyleReducer(state, action);\n    case 'setAdjustContentOnResize':\n    case 'setHasBackgroundColor':\n    case 'setBackgroundColor':\n    case 'setIncludeBackgroundColorInExport':\n    case 'setIncludeBackgroundColorInInstance':\n    case 'setLayoutAxis':\n    case 'setLayoutAnchor':\n    case 'setMinWidth':\n    case 'setAllowsOverrides':\n    case 'onSetOverrideProperty':\n    case 'setInstanceSymbolSource':\n    case 'goToSymbolSource':\n    case 'setOverrideValue':\n      return symbolsReducer(state, action);\n    case 'setExportScale':\n    case 'setExportName':\n    case 'setExportFileFormat':\n    case 'setExportNamingScheme':\n    case 'addExportFormat':\n    case 'deleteExportFormat':\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          layer.exportOptions = exportReducer(\n            layer.exportOptions,\n            action,\n            layer.frame,\n          );\n        });\n      });\n    case 'setPointCurveMode':\n    case 'setPointCornerRadius':\n    case 'setPointX':\n    case 'setPointY':\n    case 'setControlPointX':\n    case 'setControlPointY': {\n      return markLayersAsEdited(pointReducer(state, action, CanvasKit));\n    }\n    case 'selectPoint':\n    case 'selectControlPoint':\n      return pointReducer(state, action, CanvasKit);\n    default:\n      return themeReducer(state, action);\n  }\n}\n\n/*\n * Get an array of all layers using as few lookups as possible on the state tree.\n *\n * Immer will duplicate any objects we access within a produce method, so we\n * don't want to walk every layer, since that would duplicate all of them.\n */\nexport function accessPageLayers(\n  state: WritableDraft<ApplicationState>,\n  pageIndex: number,\n  layerIndexPaths: IndexPath[],\n): Sketch.AnyLayer[] {\n  return layerIndexPaths.map((layerIndex) => {\n    return Layers.access(state.sketch.pages[pageIndex], layerIndex);\n  });\n}\n\nexport function createInitialState(sketch: SketchFile): ApplicationState {\n  if (sketch.pages.length === 0) {\n    throw new Error('Invalid Sketch file - no pages');\n  }\n\n  return {\n    currentTab: 'canvas',\n    currentThemeTab: 'swatches',\n    interactionState: createInitialInteractionState(),\n    keyModifiers: {\n      altKey: false,\n      ctrlKey: false,\n      metaKey: false,\n      shiftKey: false,\n    },\n    selectedPage: sketch.pages[0].do_objectID,\n    selectedObjects: [],\n    selectedPointLists: {},\n    selectedControlPoint: undefined,\n    selectedThemeTab: {\n      swatches: { ids: [], groupName: '' },\n      layerStyles: { ids: [], groupName: '' },\n      textStyles: { ids: [], groupName: '' },\n      symbols: { ids: [], groupName: '' },\n    },\n    sketch,\n  };\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit } from 'canvaskit';\nimport produce from 'immer';\nimport { AffineTransform, createBounds, normalizeRect } from 'noya-geometry';\nimport { SketchModel } from 'noya-sketch-model';\nimport {\n  decodeCurvePoint,\n  DecodedCurvePoint,\n  encodeCurvePoint,\n  Primitives,\n  resizeRect,\n} from 'noya-state';\nimport { uuid } from 'noya-utils';\nimport * as Layers from '../layers';\nimport {\n  addToParentLayer,\n  computeNewBoundingRect,\n  EncodedPageMetadata,\n  fixZeroLayerDimensions,\n  getBoundingRect,\n  getCurrentPage,\n  getCurrentPageIndex,\n  getCurrentPageMetadata,\n  getIndexPathOfOpenShapeLayer,\n  getParentLayer,\n  getParentLayerAtPoint,\n  getSelectedLayerIndexPathsExcludingDescendants,\n  getSymbols,\n  moveControlPoints,\n  moveLayer,\n  moveSelectedPoints,\n} from '../selectors/selectors';\nimport {\n  findSmallestSnappingDistance,\n  getAxisValues,\n  getLayerAxisInfo,\n  getPossibleSnapLayers,\n  getSnappingPairs,\n} from '../snapping';\nimport { Point, Rect } from '../types';\nimport { ApplicationState } from './applicationReducer';\nimport {\n  InteractionAction,\n  interactionReducer,\n  SnapshotInteractionAction,\n} from './interactionReducer';\nimport { defaultBorderColor } from './styleReducer';\n\nexport type CanvasAction =\n  | [\n      type: 'insertArtboard',\n      details: { name: string; width: number; height: number },\n    ]\n  | [type: 'addDrawnLayer']\n  | [type: 'addShapePathLayer', point: Point]\n  | [type: 'addSymbolLayer', symbolId: string, point: Point]\n  | [\n      type: 'insertBitmap',\n      file: ArrayBuffer,\n      details: { name: string; frame: Rect; extension: string },\n    ]\n  | [type: 'addPointToPath', point: Point]\n  | [type: 'moveLayersIntoParentAtPoint', point: Point]\n  | [type: 'pan', point: Point]\n  | [\n      type: 'interaction',\n      action: InteractionAction | SnapshotInteractionAction,\n    ];\n\nexport function canvasReducer(\n  state: ApplicationState,\n  action: CanvasAction,\n  CanvasKit: CanvasKit,\n): ApplicationState {\n  switch (action[0]) {\n    case 'insertArtboard': {\n      const [, { name, width, height }] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const { scrollOrigin } = getCurrentPageMetadata(state);\n\n      return produce(state, (draft) => {\n        const layer = SketchModel.artboard({\n          name,\n          frame: SketchModel.rect({\n            // TODO: Figure out positioning based on other artboards.\n            // Also, don't hardcode sidebar width.\n            x: -scrollOrigin.x + 100,\n            y: -scrollOrigin.y + 100,\n            width,\n            height,\n          }),\n        });\n\n        draft.sketch.pages[pageIndex].layers.push(layer);\n        draft.interactionState = interactionReducer(draft.interactionState, [\n          'reset',\n        ]);\n        draft.selectedObjects = [layer.do_objectID];\n      });\n    }\n    case 'addDrawnLayer': {\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        if (draft.interactionState.type !== 'drawing') return;\n\n        const layer = draft.interactionState.value;\n\n        if (layer.frame.width > 0 && layer.frame.height > 0) {\n          addToParentLayer(draft.sketch.pages[pageIndex].layers, layer);\n          draft.selectedObjects = [layer.do_objectID];\n        }\n\n        draft.interactionState = interactionReducer(draft.interactionState, [\n          'reset',\n        ]);\n      });\n    }\n    case 'addShapePathLayer': {\n      const [, point] = action;\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        const layer = SketchModel.shapePath({\n          frame: SketchModel.rect({\n            x: point.x,\n            y: point.y,\n            width: 1,\n            height: 1,\n          }),\n          style: SketchModel.style({\n            borders: [\n              SketchModel.border({\n                color: defaultBorderColor,\n              }),\n            ],\n          }),\n          isClosed: false,\n        });\n\n        addToParentLayer(draft.sketch.pages[pageIndex].layers, layer);\n\n        const decodedPoint: DecodedCurvePoint = {\n          _class: 'curvePoint',\n          cornerRadius: 0,\n          curveFrom: point,\n          curveTo: point,\n          hasCurveFrom: false,\n          hasCurveTo: false,\n          curveMode: Sketch.CurveMode.Straight,\n          point,\n        };\n\n        const encodedPoint = encodeCurvePoint(decodedPoint, layer.frame);\n        layer.points = [encodedPoint];\n\n        draft.selectedObjects = [layer.do_objectID];\n        draft.selectedPointLists = { [layer.do_objectID]: [0] };\n      });\n    }\n    case 'addSymbolLayer': {\n      const [, symbolId, point] = action;\n      const pageIndex = getCurrentPageIndex(state);\n\n      const symbol = getSymbols(state).find(\n        ({ do_objectID }) => do_objectID === symbolId,\n      ) as Sketch.SymbolMaster;\n\n      const layer = SketchModel.symbolInstance({\n        name: symbol.name,\n        symbolID: symbol.symbolID,\n        frame: {\n          ...symbol.frame,\n          x: point.x - symbol.frame.width / 2,\n          y: point.y - symbol.frame.height / 2,\n        },\n      });\n\n      return produce(state, (draft) => {\n        addToParentLayer(draft.sketch.pages[pageIndex].layers, layer);\n        draft.selectedObjects = [layer.do_objectID];\n      });\n    }\n    case 'addPointToPath': {\n      const [, point] = action;\n\n      const pointIndexPath = getIndexPathOfOpenShapeLayer(state);\n\n      if (!pointIndexPath) return state;\n\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        const layer = Layers.access(\n          draft.sketch.pages[pageIndex],\n          pointIndexPath.indexPath,\n        );\n\n        const boundingRect = getBoundingRect(\n          draft.sketch.pages[pageIndex],\n          AffineTransform.identity,\n          [layer.do_objectID],\n          {\n            clickThroughGroups: true,\n            includeHiddenLayers: false,\n            includeArtboardLayers: false,\n          },\n        );\n\n        if (!boundingRect || !layer || !Layers.isPointsLayer(layer)) return;\n\n        // Update all points by first transforming to the canvas's coordinate system\n        const decodedPoints = layer.points.map((curvePoint) =>\n          decodeCurvePoint(curvePoint, boundingRect),\n        );\n\n        const decodedPoint: DecodedCurvePoint = {\n          _class: 'curvePoint',\n          cornerRadius: 0,\n          curveFrom: point,\n          curveTo: point,\n          hasCurveFrom: false,\n          hasCurveTo: false,\n          curveMode: Sketch.CurveMode.Straight,\n          point,\n        };\n\n        const isLastPointSelected =\n          pointIndexPath.pointIndex === layer.points.length - 1;\n\n        const newDecodedPoints = isLastPointSelected\n          ? [...decodedPoints, decodedPoint]\n          : [decodedPoint, ...decodedPoints];\n\n        layer.frame = {\n          ...layer.frame,\n          ...computeNewBoundingRect(CanvasKit, newDecodedPoints, layer),\n        };\n\n        fixZeroLayerDimensions(layer);\n\n        layer.points = newDecodedPoints.map((decodedCurvePoint, index) =>\n          encodeCurvePoint(decodedCurvePoint, layer.frame),\n        );\n\n        draft.selectedPointLists[layer.do_objectID] = isLastPointSelected\n          ? [layer.points.length - 1]\n          : [0];\n\n        draft.selectedControlPoint = undefined;\n        return;\n      });\n    }\n    case 'pan': {\n      const page = getCurrentPage(state);\n      const currentPageId = page.do_objectID;\n      const { x, y } = action[1];\n\n      return produce(state, (draft) => {\n        const meta: EncodedPageMetadata = draft.sketch.user[currentPageId] ?? {\n          zoomValue: 1,\n          scrollOrigin: '{100,100}',\n        };\n\n        const parsed = Primitives.parsePoint(meta.scrollOrigin);\n\n        parsed.x -= x;\n        parsed.y -= y;\n\n        draft.sketch.user[currentPageId] = {\n          ...meta,\n          scrollOrigin: Primitives.stringifyPoint(parsed),\n        };\n      });\n    }\n    case 'moveLayersIntoParentAtPoint': {\n      const [, point] = action;\n\n      const page = getCurrentPage(state);\n      const parentId =\n        getParentLayerAtPoint(page, point)?.do_objectID ?? page.do_objectID;\n      const indexPaths = getSelectedLayerIndexPathsExcludingDescendants(state);\n\n      if (\n        indexPaths.every(\n          (indexPath) =>\n            getParentLayer(page, indexPath).do_objectID === parentId,\n        ) ||\n        indexPaths.some((indexPath) => {\n          const layer = Layers.access(page, indexPath) as Layers.ChildLayer;\n          return Layers.isArtboard(layer) || Layers.isSymbolMaster(layer);\n        })\n      )\n        return state;\n\n      return moveLayer(state, state.selectedObjects, parentId, 'inside');\n    }\n    case 'interaction': {\n      const page = getCurrentPage(state);\n      const currentPageId = page.do_objectID;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPathsExcludingDescendants(\n        state,\n      );\n\n      const layerIds = layerIndexPaths.map(\n        (indexPath) => Layers.access(page, indexPath).do_objectID,\n      );\n\n      const interactionState = interactionReducer(\n        state.interactionState,\n        action[1][0] === 'maybeScale' ||\n          action[1][0] === 'maybeMove' ||\n          action[1][0] === 'maybeMovePoint' ||\n          action[1][0] === 'maybeMoveControlPoint'\n          ? [...action[1], page]\n          : action[1],\n      );\n\n      return produce(state, (draft) => {\n        draft.interactionState = interactionState;\n        switch (interactionState.type) {\n          case 'editPath': {\n            if (action[1][0] === 'resetEditPath') break;\n\n            draft.selectedPointLists = {};\n\n            // Selects the first point in the first selected layer and initializes a point list for each selected layer\n            layerIndexPaths.forEach((layerIndex, index) => {\n              const layer = Layers.access(page, layerIndex);\n\n              if (Layers.isPointsLayer(layer)) {\n                draft.selectedPointLists[layer.do_objectID] =\n                  index === 0 ? [0] : [];\n              }\n            });\n            break;\n          }\n          case 'moving': {\n            const { origin, current, pageSnapshot } = interactionState;\n\n            const selectedRect = getBoundingRect(\n              pageSnapshot,\n              AffineTransform.identity,\n              layerIds,\n              {\n                clickThroughGroups: true,\n                includeHiddenLayers: false,\n                includeArtboardLayers: false,\n              },\n            );\n\n            if (!selectedRect) {\n              console.info('No selected rect');\n              return;\n            }\n\n            const delta = {\n              x: current.x - origin.x,\n              y: current.y - origin.y,\n            };\n\n            const possibleSnapLayers = getPossibleSnapLayers(\n              state,\n              layerIndexPaths,\n              interactionState.canvasSize,\n            )\n              // Ensure we don't snap to the selected layer itself\n              .filter((layer) => !layerIds.includes(layer.do_objectID));\n\n            const snappingLayerInfos = getLayerAxisInfo(\n              page,\n              possibleSnapLayers,\n            );\n\n            // Simulate where the selection rect would be, assuming no snapping\n            selectedRect.x += delta.x;\n            selectedRect.y += delta.y;\n\n            const selectedBounds = createBounds(selectedRect);\n\n            const xValues = getAxisValues(selectedBounds, 'x');\n            const yValues = getAxisValues(selectedBounds, 'y');\n\n            const xPairs = getSnappingPairs(xValues, snappingLayerInfos, 'x');\n            const yPairs = getSnappingPairs(yValues, snappingLayerInfos, 'y');\n\n            delta.y -= findSmallestSnappingDistance(yPairs);\n            delta.x -= findSmallestSnappingDistance(xPairs);\n\n            layerIndexPaths.forEach((indexPath) => {\n              const initialRect = Layers.access(pageSnapshot, indexPath).frame;\n              const layer = Layers.access(\n                draft.sketch.pages[pageIndex],\n                indexPath,\n              );\n\n              layer.frame.x = initialRect.x + delta.x;\n              layer.frame.y = initialRect.y + delta.y;\n            });\n\n            break;\n          }\n          case 'movingPoint': {\n            const { current, origin, pageSnapshot } = interactionState;\n\n            const delta = {\n              x: current.x - origin.x,\n              y: current.y - origin.y,\n            };\n\n            moveSelectedPoints(\n              draft.selectedPointLists,\n              layerIndexPaths,\n              delta,\n              'adjust',\n              draft.sketch.pages[pageIndex],\n              pageSnapshot,\n              CanvasKit,\n            );\n\n            break;\n          }\n          case 'movingControlPoint': {\n            if (!draft.selectedControlPoint) return;\n\n            const { current, origin, pageSnapshot } = interactionState;\n\n            const delta = {\n              x: current.x - origin.x,\n              y: current.y - origin.y,\n            };\n\n            moveControlPoints(\n              draft.selectedControlPoint,\n              layerIndexPaths,\n              delta,\n              'adjust',\n              draft.sketch.pages[pageIndex],\n              pageSnapshot,\n              CanvasKit,\n            );\n            break;\n          }\n          case 'scaling': {\n            const {\n              origin,\n              current,\n              pageSnapshot,\n              direction,\n            } = interactionState;\n\n            const originalBoundingRect = getBoundingRect(\n              pageSnapshot,\n              AffineTransform.identity,\n              layerIds,\n            )!;\n\n            const newBoundingRect = resizeRect(\n              originalBoundingRect,\n              {\n                x: current.x - origin.x,\n                y: current.y - origin.y,\n              },\n              direction,\n            );\n\n            const originalTransform = AffineTransform.multiply(\n              AffineTransform.translation(\n                originalBoundingRect.x,\n                originalBoundingRect.y,\n              ),\n              AffineTransform.scale(\n                originalBoundingRect.width,\n                originalBoundingRect.height,\n              ),\n            ).invert();\n\n            const newTransform = AffineTransform.multiply(\n              AffineTransform.translation(newBoundingRect.x, newBoundingRect.y),\n              AffineTransform.scale(\n                newBoundingRect.width,\n                newBoundingRect.height,\n              ),\n            );\n\n            layerIndexPaths.forEach((layerIndex) => {\n              const originalLayer = Layers.access(pageSnapshot, layerIndex);\n\n              const layerTransform = AffineTransform.multiply(\n                ...Layers.accessPath(pageSnapshot, layerIndex)\n                  .slice(1, -1) // Remove the page and current layer\n                  .map((layer) =>\n                    AffineTransform.translation(layer.frame.x, layer.frame.y),\n                  )\n                  .reverse(),\n              );\n\n              const newLayer = Layers.access(\n                draft.sketch.pages[pageIndex],\n                layerIndex,\n              );\n\n              const min = AffineTransform.multiply(\n                layerTransform.invert(),\n                newTransform,\n                originalTransform,\n                layerTransform,\n              ).applyTo({\n                x: originalLayer.frame.x,\n                y: originalLayer.frame.y,\n              });\n\n              const max = AffineTransform.multiply(\n                layerTransform.invert(),\n                newTransform,\n                originalTransform,\n                layerTransform,\n              ).applyTo({\n                x: originalLayer.frame.x + originalLayer.frame.width,\n                y: originalLayer.frame.y + originalLayer.frame.height,\n              });\n\n              const width = max.x - min.x;\n              const height = max.y - min.y;\n\n              const newFrame = normalizeRect({\n                x: Math.round(min.x),\n                y: Math.round(min.y),\n                width: Math.round(width),\n                height: Math.round(height),\n              });\n\n              newLayer.isFlippedHorizontal = width < 0;\n              newLayer.isFlippedVertical = height < 0;\n\n              newLayer.frame.x = newFrame.x;\n              newLayer.frame.y = newFrame.y;\n              newLayer.frame.width = newFrame.width;\n              newLayer.frame.height = newFrame.height;\n            });\n\n            break;\n          }\n          case 'panning': {\n            const { previous, next } = interactionState;\n\n            const delta = {\n              x: next.x - previous.x,\n              y: next.y - previous.y,\n            };\n\n            const meta: EncodedPageMetadata = draft.sketch.user[\n              currentPageId\n            ] ?? {\n              zoomValue: 1,\n              scrollOrigin: '{100,100}',\n            };\n\n            const parsed = Primitives.parsePoint(meta.scrollOrigin);\n\n            parsed.x += delta.x;\n            parsed.y += delta.y;\n\n            draft.sketch.user[currentPageId] = {\n              ...meta,\n              scrollOrigin: Primitives.stringifyPoint(parsed),\n            };\n\n            break;\n          }\n        }\n      });\n    }\n    case 'insertBitmap': {\n      const [, file, { name, frame, extension }] = action;\n      const pageIndex = getCurrentPageIndex(state);\n\n      return produce(state, (draft) => {\n        const _ref = `images/${uuid()}.${extension}`;\n\n        draft.sketch.images[_ref] = file;\n\n        const layer = SketchModel.bitmap({\n          name: name.replace(`.${extension}`, ''),\n          image: SketchModel.fileReference({ _ref }),\n          frame: SketchModel.rect(frame),\n        });\n\n        addToParentLayer(draft.sketch.pages[pageIndex].layers, layer);\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit } from 'canvaskit';\nimport produce from 'immer';\nimport * as Layers from '../layers';\nimport { decodeCurvePoint, encodeCurvePoint } from '../primitives/path';\nimport {\n  computeNewBoundingRect,\n  getCurrentPage,\n  getCurrentPageIndex,\n  getLayerRotation,\n  getLayerRotationMultiplier,\n  getSelectedLayerIndexPaths,\n} from '../selectors/selectors';\nimport { accessPageLayers, ApplicationState } from './applicationReducer';\nimport { SetNumberMode } from './styleReducer';\n\nexport type LayerPropertyAction =\n  | [type: 'setLayerVisible', layerId: string | string[], visible: boolean]\n  | [type: 'setLayerIsLocked', layerId: string | string[], isLocked: boolean]\n  | [type: 'setExpandedInLayerList', layerId: string, expanded: boolean]\n  | [type: 'setLayerX', value: number, mode?: SetNumberMode]\n  | [type: 'setLayerY', value: number, mode?: SetNumberMode]\n  | [type: 'setLayerWidth', value: number, mode?: SetNumberMode]\n  | [type: 'setLayerHeight', value: number, mode?: SetNumberMode]\n  | [type: 'setLayerRotation', value: number, mode?: SetNumberMode]\n  | [type: 'setFixedRadius', amount: number, mode?: SetNumberMode]\n  | [type: 'setIsClosed', value: boolean]\n  | [type: 'setIsFlippedVertical', value: boolean]\n  | [type: 'setIsFlippedHorizontal', value: boolean]\n  | [type: 'setHasClippingMask', value: boolean]\n  | [type: 'setShouldBreakMaskChain', value: boolean]\n  | [type: 'setMaskMode', value: 'alpha' | 'outline'];\n\nexport function layerPropertyReducer(\n  state: ApplicationState,\n  action: LayerPropertyAction,\n  CanvasKit: CanvasKit,\n): ApplicationState {\n  switch (action[0]) {\n    case 'setLayerVisible':\n    case 'setLayerIsLocked': {\n      const [type, id, value] = action;\n      const propertyName =\n        type === 'setLayerVisible' ? 'isVisible' : 'isLocked';\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n      const indexPaths = Layers.findAllIndexPaths(page, (layer) =>\n        ids.includes(layer.do_objectID),\n      );\n\n      return produce(state, (draft) => {\n        const layers = accessPageLayers(draft, pageIndex, indexPaths);\n\n        layers.forEach((layer) => {\n          layer[propertyName] = value;\n        });\n      });\n    }\n    case 'setExpandedInLayerList': {\n      const [, id, expanded] = action;\n\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n      const indexPath = Layers.findIndexPath(\n        page,\n        (layer) => layer.do_objectID === id,\n      );\n\n      if (!indexPath) return state;\n\n      return produce(state, (draft) => {\n        const layer = Layers.access(draft.sketch.pages[pageIndex], indexPath);\n\n        layer.layerListExpandedType = expanded\n          ? Sketch.LayerListExpanded.Expanded\n          : Sketch.LayerListExpanded.Collapsed;\n      });\n    }\n    case 'setFixedRadius': {\n      const [, amount, mode = 'replace'] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          if (layer._class !== 'rectangle') return;\n\n          const newValue =\n            mode === 'replace' ? amount : layer.fixedRadius + amount;\n\n          layer.fixedRadius = Math.max(0, newValue);\n          layer.points.forEach((point) => {\n            point.cornerRadius = layer.fixedRadius;\n          });\n        });\n      });\n    }\n    case 'setLayerRotation': {\n      const [, amount, mode = 'replace'] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          const rotation = getLayerRotation(layer);\n          const newValue = mode === 'replace' ? amount : rotation + amount;\n\n          layer.rotation = newValue * getLayerRotationMultiplier();\n        });\n      });\n    }\n    case 'setLayerX':\n    case 'setLayerY': {\n      const [type, amount, mode = 'replace'] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      const property = type === 'setLayerX' ? ('x' as const) : ('y' as const);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          const value = layer.frame[property];\n\n          layer.frame[property] = mode === 'replace' ? amount : value + amount;\n        });\n      });\n    }\n    case 'setLayerWidth':\n    case 'setLayerHeight': {\n      const [type, amount, mode = 'replace'] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      const property =\n        type === 'setLayerWidth' ? ('width' as const) : ('height' as const);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          const value = layer.frame[property];\n\n          layer.frame[property] = Math.max(\n            mode === 'replace' ? amount : value + amount,\n            0.5,\n          );\n        });\n      });\n    }\n    case 'setIsClosed': {\n      const [, value] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          if (!Layers.isPointsLayer(layer)) return;\n          layer.isClosed = value;\n\n          const decodedPoints = layer.points.map((point) =>\n            decodeCurvePoint(point, layer.frame),\n          );\n\n          layer.frame = {\n            ...layer.frame,\n            ...computeNewBoundingRect(CanvasKit, decodedPoints, layer),\n          };\n\n          // Transform back to the range [0, 1], using the new bounds\n          layer.points = decodedPoints.map((decodedCurvePoint) =>\n            encodeCurvePoint(decodedCurvePoint, layer.frame),\n          );\n        });\n      });\n    }\n    case 'setIsFlippedVertical': {\n      const [, value] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          layer.isFlippedVertical = value;\n        });\n      });\n    }\n    case 'setIsFlippedHorizontal': {\n      const [, value] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          layer.isFlippedHorizontal = value;\n        });\n      });\n    }\n    case 'setHasClippingMask': {\n      const [, value] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          layer.hasClippingMask = value;\n        });\n      });\n    }\n    case 'setShouldBreakMaskChain': {\n      const [, value] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          layer.shouldBreakMaskChain = value;\n        });\n      });\n    }\n    case 'setMaskMode': {\n      const [, value] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          layer.clippingMaskMode = value === 'alpha' ? 1 : 0;\n        });\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { AffineTransform, createBounds, transformRect } from 'noya-geometry';\nimport { sum } from 'noya-utils';\nimport { IndexPath } from 'tree-visit';\nimport * as Layers from '../layers';\nimport {\n  getCurrentPage,\n  getCurrentPageIndex,\n  getLayerTransformAtIndexPath,\n  getSelectedLayerIndexPaths,\n  getSelectedRect,\n} from '../selectors/selectors';\nimport { Bounds } from '../types';\nimport { accessPageLayers, ApplicationState } from './applicationReducer';\n\nexport type AlignmentAction =\n  | [type: 'distributeLayers', placement: 'horizontal' | 'vertical']\n  | [\n      type: 'alignLayers',\n      placement:\n        | 'left'\n        | 'centerHorizontal'\n        | 'right'\n        | 'top'\n        | 'centerVertical'\n        | 'bottom',\n    ];\n\nexport function alignmentReducer(\n  state: ApplicationState,\n  action: AlignmentAction,\n): ApplicationState {\n  switch (action[0]) {\n    case 'distributeLayers': {\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n      const selectedRect = getSelectedRect(state);\n      const [, axis] = action;\n\n      return produce(state, (draft) => {\n        const layers = accessPageLayers(draft, pageIndex, layerIndexPaths);\n        const combinedWidths = sum(layers.map((layer) => layer.frame.width));\n        const combinedHeights = sum(layers.map((layer) => layer.frame.height));\n        const differenceWidth = selectedRect.width - combinedWidths;\n        const differenceHeight = selectedRect.height - combinedHeights;\n        const gapX = differenceWidth / (layers.length - 1);\n        const gapY = differenceHeight / (layers.length - 1);\n        const sortBy = axis === 'horizontal' ? 'midX' : 'midY';\n\n        // Bounds are all transformed to the page's coordinate system\n        function getNormalizedBounds(\n          page: Sketch.Page,\n          layerIndexPath: IndexPath,\n        ): Bounds {\n          const layer = Layers.access(page, layerIndexPath);\n          const transform = getLayerTransformAtIndexPath(\n            page,\n            layerIndexPath,\n            AffineTransform.identity,\n          );\n          return createBounds(transformRect(layer.frame, transform));\n        }\n\n        const sortedLayerIndexPaths = layerIndexPaths.sort(\n          (a, b) =>\n            getNormalizedBounds(page, a)[sortBy] -\n            getNormalizedBounds(page, b)[sortBy],\n        );\n\n        let currentX = 0;\n        let currentY = 0;\n\n        sortedLayerIndexPaths.forEach((layerIndexPath) => {\n          const transform = getLayerTransformAtIndexPath(\n            page,\n            layerIndexPath,\n            AffineTransform.identity,\n          ).invert();\n          const layer = Layers.access(\n            draft.sketch.pages[pageIndex], // access page again since we need to write to it\n            layerIndexPath,\n          );\n\n          switch (axis) {\n            case 'horizontal': {\n              const newOrigin = transform.applyTo({\n                x: selectedRect.x + currentX,\n                y: 0,\n              });\n              currentX += layer.frame.width + gapX;\n              layer.frame.x = newOrigin.x;\n              break;\n            }\n            case 'vertical': {\n              const newOrigin = transform.applyTo({\n                x: 0,\n                y: selectedRect.y + currentY,\n              });\n              currentY += layer.frame.height + gapY;\n              layer.frame.y = newOrigin.y;\n              break;\n            }\n          }\n        });\n      });\n    }\n    case 'alignLayers': {\n      const page = getCurrentPage(state);\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n      const selectedRect = getSelectedRect(state);\n      const [, placement] = action;\n\n      return produce(state, (draft) => {\n        const selectedBounds = createBounds(selectedRect);\n        const midX = selectedRect.x + selectedRect.width / 2;\n        const midY = selectedRect.y + selectedRect.height / 2;\n\n        layerIndexPaths.forEach((layerIndexPath) => {\n          const transform = getLayerTransformAtIndexPath(\n            page,\n            layerIndexPath,\n            AffineTransform.identity,\n          ).invert();\n          const layer = Layers.access(\n            draft.sketch.pages[pageIndex], // access page again since we need to write to it\n            layerIndexPath,\n          );\n\n          switch (placement) {\n            case 'left': {\n              const newOrigin = transform.applyTo({\n                x: selectedBounds.minX,\n                y: 0,\n              });\n              layer.frame.x = newOrigin.x;\n              break;\n            }\n            case 'centerHorizontal': {\n              const newOrigin = transform.applyTo({\n                x: midX - layer.frame.width / 2,\n                y: 0,\n              });\n              layer.frame.x = newOrigin.x;\n              break;\n            }\n            case 'right': {\n              const newOrigin = transform.applyTo({\n                x: selectedBounds.maxX - layer.frame.width,\n                y: 0,\n              });\n              layer.frame.x = newOrigin.x;\n              break;\n            }\n            case 'top': {\n              const newOrigin = transform.applyTo({\n                x: 0,\n                y: selectedBounds.minY,\n              });\n              layer.frame.y = newOrigin.y;\n              break;\n            }\n            case 'centerVertical': {\n              const newOrigin = transform.applyTo({\n                x: 0,\n                y: midY - layer.frame.height / 2,\n              });\n              layer.frame.y = newOrigin.y;\n              break;\n            }\n            case 'bottom': {\n              const newOrigin = transform.applyTo({\n                x: 0,\n                y: selectedBounds.maxY - layer.frame.height,\n              });\n              layer.frame.y = newOrigin.y;\n              break;\n            }\n          }\n        });\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { SimpleTextDecoration } from 'noya-state';\nimport { uuid } from 'noya-utils';\nimport * as Layers from '../layers';\nimport {\n  getCurrentTab,\n  getCurrentPageIndex,\n  getSelectedLayerIndexPaths,\n  findPageLayerIndexPaths,\n} from '../selectors/selectors';\nimport { accessPageLayers, ApplicationState } from './applicationReducer';\nimport {\n  StringAttributeAction,\n  stringAttributeReducer,\n} from './stringAttributeReducer';\n\nexport type TextStyleAction =\n  | StringAttributeAction\n  | [type: 'setTextAlignment', value: number]\n  | [type: 'setTextDecoration', value: SimpleTextDecoration]\n  | [type: 'setTextTransform', value: number];\n\nexport function textStyleReducer(\n  state: ApplicationState,\n  action: TextStyleAction,\n): ApplicationState {\n  switch (action[0]) {\n    case 'setTextColor':\n    case 'setTextFontName':\n    case 'setTextFontSize':\n    case 'setTextLineSpacing':\n    case 'setTextLetterSpacing':\n    case 'setTextParagraphSpacing':\n    case 'setTextHorizontalAlignment':\n    case 'setTextVerticalAlignment': {\n      if (getCurrentTab(state) === 'canvas') {\n        const pageIndex = getCurrentPageIndex(state);\n        const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n        return produce(state, (draft) => {\n          accessPageLayers(draft, pageIndex, layerIndexPaths).forEach(\n            (layer) => {\n              if (!Layers.isTextLayer(layer) || !Layers.hasTextStyle(layer))\n                return;\n\n              switch (action[0]) {\n                case 'setTextVerticalAlignment': {\n                  layer.style.textStyle.verticalAlignment = action[1];\n                  break;\n                }\n              }\n\n              layer.style.textStyle.encodedAttributes = stringAttributeReducer(\n                layer.style.textStyle.encodedAttributes,\n                action,\n              );\n\n              layer.attributedString.attributes.forEach((attribute) => {\n                attribute.attributes = stringAttributeReducer(\n                  attribute.attributes,\n                  action,\n                );\n              });\n            },\n          );\n        });\n      } else {\n        const ids = state.selectedThemeTab.textStyles.ids;\n\n        const layerIndexPathsWithSharedStyle = findPageLayerIndexPaths(\n          state,\n          (layer) =>\n            layer.sharedStyleID !== undefined &&\n            ids.includes(layer.sharedStyleID),\n        );\n\n        return produce(state, (draft) => {\n          const layerTextStyles =\n            draft.sketch.document.layerTextStyles?.objects ?? [];\n\n          layerTextStyles.forEach((sharedTextStyle: Sketch.SharedStyle) => {\n            if (\n              !ids.includes(sharedTextStyle.do_objectID) ||\n              sharedTextStyle.value.textStyle === undefined\n            )\n              return;\n\n            sharedTextStyle.value.textStyle.encodedAttributes = stringAttributeReducer(\n              sharedTextStyle.value.textStyle.encodedAttributes,\n              action,\n            );\n\n            layerIndexPathsWithSharedStyle.forEach((layerPath) =>\n              accessPageLayers(\n                draft,\n                layerPath.pageIndex,\n                layerPath.indexPaths,\n              ).forEach((layer) => {\n                layer.style = produce(\n                  sharedTextStyle.value,\n                  (sharedTextStyle) => {\n                    sharedTextStyle.do_objectID = uuid();\n                    return sharedTextStyle;\n                  },\n                );\n              }),\n            );\n          });\n        });\n      }\n    }\n    case 'setTextAlignment': {\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          if (!Layers.isTextLayer(layer) || !Layers.hasTextStyle(layer)) return;\n\n          layer.textBehaviour = action[1];\n        });\n      });\n    }\n    case 'setTextDecoration':\n      if (getCurrentTab(state) === 'canvas') {\n        const pageIndex = getCurrentPageIndex(state);\n        const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n        return produce(state, (draft) => {\n          accessPageLayers(draft, pageIndex, layerIndexPaths).forEach(\n            (layer) => {\n              if (!Layers.isTextLayer(layer) || !Layers.hasTextStyle(layer))\n                return;\n\n              const attributes = layer.style.textStyle.encodedAttributes;\n\n              attributes.underlineStyle = action[1] === 'underline' ? 1 : 0;\n              attributes.strikethroughStyle =\n                action[1] === 'strikethrough' ? 1 : 0;\n            },\n          );\n        });\n      } else {\n        return produce(state, (draft) => {\n          const ids = state.selectedThemeTab.textStyles.ids;\n\n          const layerTextStyles =\n            draft.sketch.document.layerTextStyles?.objects ?? [];\n\n          layerTextStyles.forEach((sharedTextStyle: Sketch.SharedStyle) => {\n            if (\n              !ids.includes(sharedTextStyle.do_objectID) ||\n              sharedTextStyle.value.textStyle === undefined\n            )\n              return;\n\n            const attributes =\n              sharedTextStyle.value.textStyle.encodedAttributes;\n\n            attributes.underlineStyle = action[1] === 'underline' ? 1 : 0;\n            attributes.strikethroughStyle =\n              action[1] === 'strikethrough' ? 1 : 0;\n          });\n        });\n      }\n    case 'setTextTransform': {\n      if (getCurrentTab(state) === 'canvas') {\n        const pageIndex = getCurrentPageIndex(state);\n        const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n        return produce(state, (draft) => {\n          accessPageLayers(draft, pageIndex, layerIndexPaths).forEach(\n            (layer) => {\n              if (!Layers.isTextLayer(layer) || !Layers.hasTextStyle(layer))\n                return;\n\n              const attributes = layer.style.textStyle.encodedAttributes;\n\n              attributes.MSAttributedStringTextTransformAttribute = action[1];\n            },\n          );\n        });\n      } else {\n        return produce(state, (draft) => {\n          const ids = state.selectedThemeTab.textStyles.ids;\n\n          const layerTextStyles =\n            draft.sketch.document.layerTextStyles?.objects ?? [];\n\n          layerTextStyles.forEach((sharedTextStyle: Sketch.SharedStyle) => {\n            if (\n              !ids.includes(sharedTextStyle.do_objectID) ||\n              sharedTextStyle.value.textStyle === undefined\n            )\n              return;\n\n            const attributes =\n              sharedTextStyle.value.textStyle.encodedAttributes;\n\n            attributes.MSAttributedStringTextTransformAttribute = action[1];\n          });\n        });\n      }\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { GroupLayouts, Layers, SetNumberMode } from '..';\nimport { getSelectedLayers } from '../selectors/layerSelectors';\nimport { getSelectedSymbols, getSymbols } from '../selectors/themeSelectors';\nimport { ApplicationState } from './applicationReducer';\n\nexport type SymbolsAction =\n  | [type: 'setAdjustContentOnResize', value: boolean]\n  | [type: 'setHasBackgroundColor', value: boolean]\n  | [type: 'setBackgroundColor', value: Sketch.Color]\n  | [type: 'setIncludeBackgroundColorInExport', value: boolean]\n  | [type: 'setIncludeBackgroundColorInInstance', value: boolean]\n  | [type: 'setLayoutAxis', value: Sketch.InferredLayoutAxis | undefined]\n  | [type: 'setLayoutAnchor', value: Sketch.InferredLayoutAnchor]\n  | [type: 'setLayoutAnchor', value: Sketch.InferredLayoutAnchor]\n  | [type: 'setMinWidth', amount: number, type: SetNumberMode]\n  | [type: 'setAllowsOverrides', value: boolean]\n  | [type: 'onSetOverrideProperty', overrideName: string, value: boolean]\n  | [type: 'setInstanceSymbolSource', symbolId: string]\n  | [type: 'goToSymbolSource', overrideName: string]\n  | [type: 'setOverrideValue', overrideName?: string, value?: string];\n\nexport function symbolsReducer(\n  state: ApplicationState,\n  action: SymbolsAction,\n): ApplicationState {\n  switch (action[0]) {\n    case 'setAdjustContentOnResize': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.resizesContent = value;\n        });\n      });\n    }\n    case 'setHasBackgroundColor': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.hasBackgroundColor = value;\n        });\n      });\n    }\n    case 'setBackgroundColor': {\n      const [, value] = action;\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.backgroundColor = value;\n        });\n      });\n    }\n    case 'setIncludeBackgroundColorInExport': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.includeBackgroundColorInExport = value;\n        });\n      });\n    }\n    case 'setIncludeBackgroundColorInInstance': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.includeBackgroundColorInInstance = value;\n        });\n      });\n    }\n    case 'setLayoutAxis': {\n      const [, value] = action;\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.groupLayout =\n            value === undefined\n              ? { _class: 'MSImmutableFreeformGroupLayout' }\n              : {\n                  _class: 'MSImmutableInferredGroupLayout',\n                  axis: value,\n                  layoutAnchor:\n                    symbol.groupLayout &&\n                    GroupLayouts.isInferredLayout(symbol.groupLayout)\n                      ? symbol.groupLayout.layoutAnchor\n                      : Sketch.InferredLayoutAnchor.Min,\n                };\n        });\n      });\n    }\n    case 'setLayoutAnchor': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          if (\n            !symbol.groupLayout ||\n            !GroupLayouts.isInferredLayout(symbol.groupLayout)\n          )\n            return;\n\n          symbol.groupLayout.layoutAnchor = value;\n        });\n      });\n    }\n    case 'setMinWidth': {\n      const [, amount, type = 'replace'] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          if (\n            !symbol.groupLayout ||\n            !GroupLayouts.isInferredLayout(symbol.groupLayout)\n          )\n            return;\n\n          const value = symbol.groupLayout.minSize || 0;\n          symbol.groupLayout.minSize =\n            type === 'replace' ? amount : value + amount;\n        });\n      });\n    }\n    case 'setAllowsOverrides': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          symbol.allowsOverrides = value;\n        });\n      });\n    }\n    case 'onSetOverrideProperty': {\n      const [, name, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedSymbols(draft);\n\n        symbols.forEach((symbol) => {\n          const override = symbol.overrideProperties.find(\n            (property) => property.overrideName === name,\n          );\n\n          if (!override) {\n            symbol.overrideProperties.push({\n              _class: 'MSImmutableOverrideProperty',\n              overrideName: name,\n              canOverride: value,\n            });\n            return;\n          }\n          override.canOverride = value;\n        });\n      });\n    }\n    case 'setInstanceSymbolSource': {\n      const [, symbolId] = action;\n\n      const symbolMaster = getSymbols(state).find(\n        (symbol) => symbol.symbolID === symbolId,\n      );\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedLayers(draft).filter(\n          Layers.isSymbolInstance,\n        );\n\n        if (!symbolMaster) return;\n        symbols.forEach((symbol) => {\n          symbol.frame = {\n            ...symbol.frame,\n            width: symbolMaster.frame.width,\n            height: symbolMaster.frame.height,\n          };\n          symbol.symbolID = symbolId;\n        });\n      });\n    }\n    case 'goToSymbolSource': {\n      const [, symbolId] = action;\n\n      const symbolMaster = getSymbols(state).find(\n        (symbol) => symbol.symbolID === symbolId,\n      );\n\n      return produce(state, (draft) => {\n        if (!symbolMaster) return;\n\n        const page = draft.sketch.pages.find((p) =>\n          p.layers.some((l) => l.do_objectID === symbolMaster.do_objectID),\n        );\n        if (!page) return;\n\n        draft.selectedPage = page.do_objectID;\n        draft.selectedObjects = [symbolMaster.do_objectID];\n      });\n    }\n    case 'setOverrideValue': {\n      const [, name, value] = action;\n\n      return produce(state, (draft) => {\n        const symbols = getSelectedLayers(draft).filter(\n          Layers.isSymbolInstance,\n        );\n\n        symbols.forEach((symbol) => {\n          if (!name) {\n            symbol.overrideValues = [];\n            return;\n          }\n\n          const overrideValueIndex = symbol.overrideValues.findIndex(\n            (property) => property.overrideName === name,\n          );\n\n          if (overrideValueIndex !== -1) {\n            if (value === undefined) {\n              symbol.overrideValues.splice(overrideValueIndex, 1);\n            } else {\n              symbol.overrideValues[overrideValueIndex].value = value;\n            }\n          } else if (value !== undefined) {\n            symbol.overrideValues.push({\n              _class: 'overrideValue',\n              overrideName: name,\n              value: value,\n            });\n          }\n        });\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { ExportOptions } from '../index';\n\nexport type ExportAction =\n  | [type: 'setExportScale', index: number, value: ExportOptions.ExportSize]\n  | [type: 'setExportName', index: number, value: string]\n  | [type: 'setExportFileFormat', index: number, value: Sketch.ExportFileFormat]\n  | [\n      type: 'setExportNamingScheme',\n      index: number,\n      value: Sketch.ExportFormatNamingScheme,\n    ]\n  | [type: 'addExportFormat']\n  | [type: 'deleteExportFormat', index: number];\n\nexport function exportReducer(\n  state: Sketch.ExportOptions,\n  action: ExportAction,\n  frame: Sketch.Rect,\n): Sketch.ExportOptions {\n  switch (action[0]) {\n    case 'setExportScale': {\n      const [, index, value] = action;\n\n      return produce(state, (draft) => {\n        const { size, visibleScaleType } = value;\n\n        draft.exportFormats[index].scale =\n          visibleScaleType === Sketch.VisibleScaleType.Scale\n            ? size\n            : size /\n              (visibleScaleType === Sketch.VisibleScaleType.Width\n                ? frame.width\n                : frame.height);\n\n        draft.exportFormats[index].absoluteSize =\n          visibleScaleType === Sketch.VisibleScaleType.Scale ? 0 : size;\n        draft.exportFormats[index].visibleScaleType = visibleScaleType;\n      });\n    }\n    case 'addExportFormat': {\n      return produce(state, (draft) => {\n        draft.exportFormats.push({\n          _class: 'exportFormat',\n          name: '',\n          absoluteSize: 0,\n          fileFormat: Sketch.ExportFileFormat.PNG,\n          visibleScaleType: Sketch.VisibleScaleType.Scale,\n          scale: 1,\n        });\n      });\n    }\n    case 'deleteExportFormat': {\n      const [, index] = action;\n\n      return produce(state, (draft) => {\n        draft.exportFormats.splice(index, 1);\n      });\n    }\n    case 'setExportName': {\n      const [, index, value] = action;\n\n      return produce(state, (draft) => {\n        draft.exportFormats[index].name = value;\n      });\n    }\n    case 'setExportFileFormat': {\n      const [, index, value] = action;\n\n      return produce(state, (draft) => {\n        draft.exportFormats[index].fileFormat = value;\n      });\n    }\n    case 'setExportNamingScheme': {\n      const [, index, value] = action;\n\n      return produce(state, (draft) => {\n        draft.exportFormats[index].namingScheme = value;\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { SketchModel } from 'noya-sketch-model';\nimport { delimitedPath, getIncrementedName, uuid } from 'noya-utils';\nimport * as Layers from '../layers';\nimport {\n  findPageLayerIndexPaths,\n  getCurrentPageIndex,\n  getSelectedLayerIndexPaths,\n  getSymbols,\n  groupThemeComponents,\n  setComponentName,\n  visitLayerColors,\n  visitStyleColors,\n} from '../selectors/selectors';\nimport { SelectionType, updateSelection } from '../utils/selection';\nimport {\n  accessPageLayers,\n  ApplicationState,\n  SetNumberMode,\n  ThemeTab,\n} from './applicationReducer';\n\nexport type ComponentsElements = 'Swatch' | 'TextStyle' | 'ThemeStyle';\n\nexport type ComponentsTypes =\n  | Sketch.Swatch\n  | Sketch.SharedStyle\n  | Sketch.SymbolMaster;\n\nexport type ThemeAction =\n  | [type: 'setThemeTab', value: ThemeTab]\n  | [\n      type: `select${ComponentsElements | 'Symbol'}`,\n      id: string | string[] | undefined,\n      selectionType?: SelectionType,\n    ]\n  | [\n      type: 'setSwatchOpacity',\n      swatchId: string | string[],\n      alpha: number,\n      mode?: SetNumberMode,\n    ]\n  | [type: `addSwatch`, name?: string, color?: Sketch.Color, id?: string]\n  | [type: `addGradientAsset`, name: string, value: Sketch.Gradient]\n  | [\n      type: `add${Exclude<ComponentsElements, 'Swatch'>}`,\n      name?: string,\n      style?: Sketch.Style,\n    ]\n  | [\n      type: 'updateThemeStyle',\n      sharedStyleId: string,\n      style: Sketch.Style | undefined,\n    ]\n  | [\n      type: 'updateTextStyle',\n      sharedStyleId: string,\n      style: Sketch.Style | undefined,\n    ]\n  | [type: `duplicate${ComponentsElements}`, id: string[]]\n  | [\n      type: `set${ComponentsElements | 'Symbol' | 'GradientAsset'}Name`,\n      id: string | string[],\n      name: string,\n    ]\n  | [type: `remove${ComponentsElements}`]\n  | [type: `removeGradientAsset`, id: string | string[]]\n  | [type: `setSelected${ComponentsElements | 'Symbol'}Group`, groupId: string]\n  | [\n      type: `group${ComponentsElements | 'Symbol'}`,\n      id: string | string[],\n      name: string | undefined,\n    ]\n  | [type: 'setThemeStyle', sharedStyleId?: string]\n  | [type: 'setTextStyle', sharedStyleId?: string]\n  | [type: 'setSwatchColor', swatchId: string | string[], color: Sketch.Color]\n  | [type: 'addImage', image: ArrayBuffer, _ref: string];\n\nexport function themeReducer(\n  state: ApplicationState,\n  action: ThemeAction,\n): ApplicationState {\n  switch (action[0]) {\n    case 'setThemeTab': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.currentThemeTab = value;\n      });\n    }\n    case 'addSwatch': {\n      const [, name, color, id] = action;\n      const currentTab = state.currentTab;\n\n      return produce(state, (draft) => {\n        const sharedSwatches = draft.sketch.document.sharedSwatches ?? {\n          _class: 'swatchContainer',\n          do_objectID: uuid(),\n          objects: [],\n        };\n\n        const swatches = draft.selectedThemeTab.swatches;\n        const swatchColor: Sketch.Color = color\n          ? color\n          : {\n              _class: 'color',\n              alpha: 1,\n              red: 0,\n              green: 0,\n              blue: 0,\n            };\n\n        const swatch: Sketch.Swatch = {\n          _class: 'swatch',\n          do_objectID: id ?? uuid(),\n          name: delimitedPath.join([\n            swatches.groupName,\n            name || 'New Theme Color',\n          ]),\n          value: swatchColor,\n        };\n\n        sharedSwatches.objects.push(swatch);\n        draft.sketch.document.sharedSwatches = sharedSwatches;\n\n        if (currentTab === 'theme') {\n          swatches.ids = [swatch.do_objectID];\n        }\n      });\n    }\n    case 'addTextStyle': {\n      const [, name, style] = action;\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n      const currentTab = state.currentTab;\n\n      return produce(state, (draft) => {\n        const textStyles = draft.sketch.document.layerTextStyles ?? {\n          _class: 'sharedTextStyleContainer',\n          do_objectID: uuid(),\n          objects: [],\n        };\n\n        const draftTextStyles = draft.selectedThemeTab.textStyles;\n        const sharedStyle: Sketch.SharedStyle = {\n          _class: 'sharedStyle',\n          do_objectID: uuid(),\n          name: delimitedPath.join([\n            draftTextStyles.groupName,\n            name || 'New Text Style',\n          ]),\n\n          value: produce(\n            style ||\n              SketchModel.style({\n                textStyle: SketchModel.textStyle(),\n              }),\n            (style) => {\n              style.do_objectID = uuid();\n              return style;\n            },\n          ),\n        };\n\n        textStyles.objects.push(sharedStyle);\n        draft.sketch.document.layerTextStyles = textStyles;\n\n        if (currentTab === 'theme') {\n          draftTextStyles.ids = [sharedStyle.do_objectID];\n        } else {\n          accessPageLayers(draft, pageIndex, layerIndexPaths).forEach(\n            (layer) => {\n              layer.sharedStyleID = sharedStyle.do_objectID;\n            },\n          );\n        }\n      });\n    }\n    case 'addThemeStyle': {\n      const [, name, style] = action;\n\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      const currentTab = state.currentTab;\n      return produce(state, (draft) => {\n        const layerStyles = draft.sketch.document.layerStyles ?? {\n          _class: 'sharedStyleContainer',\n          do_objectID: uuid(),\n          objects: [],\n        };\n\n        const draftLayerStyles = draft.selectedThemeTab.layerStyles;\n\n        const sharedStyle: Sketch.SharedStyle = {\n          _class: 'sharedStyle',\n          do_objectID: uuid(),\n          name: delimitedPath.join([\n            draftLayerStyles.groupName,\n            name || 'New Layer Style',\n          ]),\n          value: style\n            ? produce(style, (style) => {\n                style.do_objectID = uuid();\n                return style;\n              })\n            : SketchModel.style(),\n        };\n\n        layerStyles.objects.push(sharedStyle);\n        draft.sketch.document.layerStyles = layerStyles;\n\n        if (currentTab === 'theme') {\n          draftLayerStyles.ids = [sharedStyle.do_objectID];\n        } else {\n          accessPageLayers(draft, pageIndex, layerIndexPaths).forEach(\n            (layer) => {\n              layer.sharedStyleID = sharedStyle.do_objectID;\n            },\n          );\n        }\n      });\n    }\n    case 'duplicateSwatch': {\n      const [, id] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const sharedSwatches = draft.sketch.document.sharedSwatches ?? {\n          _class: 'swatchContainer',\n          do_objectID: uuid(),\n          objects: [],\n        };\n\n        sharedSwatches.objects.forEach((swatch: Sketch.Swatch) => {\n          if (!ids.includes(swatch.do_objectID)) return;\n          const swatchColor = swatch.value;\n\n          const newSwatch: Sketch.Swatch = {\n            _class: 'swatch',\n            do_objectID: uuid(),\n            name: getIncrementedName(\n              swatch.name,\n              sharedSwatches.objects.map((s) => s.name),\n            ),\n            value: swatchColor,\n          };\n\n          sharedSwatches.objects.push(newSwatch);\n        });\n        draft.sketch.document.sharedSwatches = sharedSwatches;\n      });\n    }\n    case 'duplicateThemeStyle': {\n      const [, id] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const layerStyles = draft.sketch.document.layerStyles ?? {\n          _class: 'sharedStyleContainer',\n          do_objectID: uuid(),\n          objects: [],\n        };\n\n        layerStyles.objects.forEach((sharedStyle: Sketch.SharedStyle) => {\n          if (!ids.includes(sharedStyle.do_objectID)) return;\n\n          const newSharedStyle: Sketch.SharedStyle = {\n            _class: 'sharedStyle',\n            do_objectID: uuid(),\n            name: getIncrementedName(\n              sharedStyle.name,\n              layerStyles.objects.map((s) => s.name),\n            ),\n            value: produce(sharedStyle.value, (style) => {\n              style.do_objectID = uuid();\n              return style;\n            }),\n          };\n\n          layerStyles.objects.push(newSharedStyle);\n        });\n\n        draft.sketch.document.layerStyles = layerStyles;\n      });\n    }\n    case 'duplicateTextStyle': {\n      const [, id] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const textStyles = draft.sketch.document.layerTextStyles ?? {\n          _class: 'sharedTextStyleContainer',\n          do_objectID: uuid(),\n          objects: [],\n        };\n\n        textStyles.objects.forEach((sharedStyle: Sketch.SharedStyle) => {\n          if (!ids.includes(sharedStyle.do_objectID)) return;\n\n          const newSharedStyle: Sketch.SharedStyle = {\n            _class: 'sharedStyle',\n            do_objectID: uuid(),\n            name: getIncrementedName(\n              sharedStyle.name,\n              textStyles.objects.map((s) => s.name),\n            ),\n            value: produce(sharedStyle.value, (style) => {\n              style.do_objectID = uuid();\n              return style;\n            }),\n          };\n\n          textStyles.objects.push(newSharedStyle);\n        });\n\n        draft.sketch.document.layerTextStyles = textStyles;\n      });\n    }\n    case 'selectSwatch':\n    case 'selectThemeStyle':\n    case 'selectTextStyle':\n    case 'selectSymbol': {\n      const [, id, selectionType = 'replace'] = action;\n\n      const currentThemeTab = state.currentThemeTab;\n      return produce(state, (draft) => {\n        updateSelection(\n          draft.selectedThemeTab[currentThemeTab].ids,\n          id,\n          selectionType,\n        );\n      });\n    }\n    case 'setSwatchColor': {\n      const [, id, color] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const sharedSwatches =\n          draft.sketch.document.sharedSwatches?.objects ?? [];\n\n        const sharedStyles = draft.sketch.document.layerStyles.objects;\n\n        sharedSwatches.forEach((swatch: Sketch.Swatch) => {\n          if (!ids.includes(swatch.do_objectID)) return;\n\n          swatch.value = color;\n\n          const changeColor = (c: Sketch.Color) => {\n            if (c.swatchID !== swatch.do_objectID) return;\n\n            c.alpha = color.alpha;\n            c.red = color.red;\n            c.blue = color.blue;\n            c.green = color.green;\n          };\n\n          draft.sketch.pages.forEach((page) => {\n            Layers.visit(page, (layer) => {\n              visitLayerColors(layer, changeColor);\n            });\n          });\n\n          sharedStyles.forEach((sharedStyle) => {\n            if (!sharedStyle.value) return;\n            visitStyleColors(sharedStyle.value, changeColor);\n          });\n        });\n      });\n    }\n    case 'setSwatchOpacity': {\n      const [, id, alpha, mode = 'replace'] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const sharedSwatches =\n          draft.sketch.document.sharedSwatches?.objects ?? [];\n\n        sharedSwatches.forEach((swatch: Sketch.Swatch) => {\n          if (!ids.includes(swatch.do_objectID)) return;\n\n          const newValue =\n            mode === 'replace' ? alpha : swatch.value.alpha + alpha;\n\n          swatch.value.alpha = Math.min(Math.max(0, newValue), 1);\n        });\n      });\n    }\n    case 'setThemeStyleName': {\n      const [, id, name] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        setComponentName(\n          ids,\n          name,\n          draft.sketch.document.layerStyles?.objects ?? [],\n        );\n      });\n    }\n    case 'setTextStyleName': {\n      const [, id, name] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        setComponentName(\n          ids,\n          name,\n          draft.sketch.document.layerTextStyles?.objects,\n        );\n      });\n    }\n    case 'setSwatchName': {\n      const [, id, name] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        setComponentName(\n          ids,\n          name,\n          draft.sketch.document.sharedSwatches?.objects ?? [],\n        );\n      });\n    }\n    case 'setSymbolName': {\n      const [, id, name] = action;\n\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        setComponentName(ids, name, getSymbols(draft));\n      });\n    }\n    case 'setThemeStyle':\n    case 'setTextStyle': {\n      const pageIndex = getCurrentPageIndex(state);\n      const layerIndexPaths = getSelectedLayerIndexPaths(state);\n\n      const [, id] = action;\n\n      return produce(state, (draft) => {\n        accessPageLayers(draft, pageIndex, layerIndexPaths).forEach((layer) => {\n          const style =\n            action[0] === 'setThemeStyle'\n              ? draft.sketch.document.layerStyles?.objects.find(\n                  (s) => s.do_objectID === id,\n                )\n              : draft.sketch.document.layerTextStyles?.objects.find(\n                  (s) => s.do_objectID === id,\n                );\n\n          if (style) {\n            layer.sharedStyleID = id;\n            layer.style = produce(style.value, (style) => {\n              style.do_objectID = uuid();\n              return style;\n            });\n          } else {\n            delete layer.sharedStyleID;\n          }\n        });\n      });\n    }\n    case 'updateThemeStyle':\n    case 'updateTextStyle': {\n      const [, id, style] = action;\n      const layerIndexPathsWithSharedStyle = findPageLayerIndexPaths(\n        state,\n        (layer) =>\n          layer.sharedStyleID !== undefined && id === layer.sharedStyleID,\n      );\n      return produce(state, (draft) => {\n        if (!style) return;\n\n        const sharedStyles =\n          action[0] === 'updateThemeStyle'\n            ? draft.sketch.document.layerStyles.objects\n            : draft.sketch.document.layerTextStyles?.objects;\n        sharedStyles.forEach((sharedStyle: Sketch.SharedStyle) => {\n          if (id !== sharedStyle.do_objectID) return;\n\n          sharedStyle.value = produce(style, (style) => {\n            style.do_objectID = uuid();\n            return style;\n          });\n\n          layerIndexPathsWithSharedStyle.forEach((layerPath) =>\n            accessPageLayers(\n              draft,\n              layerPath.pageIndex,\n              layerPath.indexPaths,\n            ).forEach((layer) => {\n              layer.style = produce(style, (style) => {\n                style.do_objectID = uuid();\n                return style;\n              });\n            }),\n          );\n        });\n      });\n    }\n    case 'removeSwatch': {\n      const ids = state.selectedThemeTab.swatches.ids;\n\n      const layerIndexPathsWithSwatchId = findPageLayerIndexPaths(\n        state,\n        (layer) =>\n          layer.style !== undefined &&\n          layer.style.fills !== undefined &&\n          layer.style.fills.some(\n            (f) => f.color.swatchID && ids.includes(f.color.swatchID),\n          ),\n      );\n\n      return produce(state, (draft) => {\n        const sharedSwatches = draft.sketch.document.sharedSwatches;\n\n        if (!sharedSwatches) return;\n\n        const filterSwatches = sharedSwatches.objects.filter(\n          (object: Sketch.Swatch) => !ids.includes(object.do_objectID),\n        );\n        sharedSwatches.objects = filterSwatches;\n\n        draft.sketch.document.sharedSwatches = sharedSwatches;\n\n        layerIndexPathsWithSwatchId.forEach((layerPath) =>\n          accessPageLayers(\n            draft,\n            layerPath.pageIndex,\n            layerPath.indexPaths,\n          ).forEach((layer) => {\n            layer.style?.fills?.forEach((f) => {\n              if (f.color.swatchID && ids.includes(f.color.swatchID))\n                delete f.color.swatchID;\n            });\n          }),\n        );\n      });\n    }\n    case 'removeTextStyle': {\n      const ids = state.selectedThemeTab.textStyles.ids;\n\n      return produce(state, (draft) => {\n        const layerStyles = draft.sketch.document.layerTextStyles;\n\n        if (!layerStyles) return;\n\n        const filterLayer = layerStyles.objects.filter(\n          (object: Sketch.SharedStyle) => !ids.includes(object.do_objectID),\n        );\n\n        layerStyles.objects = filterLayer;\n        draft.sketch.document.layerTextStyles = layerStyles;\n      });\n    }\n    case 'removeThemeStyle': {\n      const ids = state.selectedThemeTab.layerStyles.ids;\n\n      const layerIndexPathsWithSharedStyle = findPageLayerIndexPaths(\n        state,\n        (layer) =>\n          layer.sharedStyleID !== undefined &&\n          ids.includes(layer.sharedStyleID),\n      );\n\n      return produce(state, (draft) => {\n        const layerStyles = draft.sketch.document.layerStyles;\n\n        if (!layerStyles) return;\n\n        const filterLayer = layerStyles.objects.filter(\n          (object: Sketch.SharedStyle) => !ids.includes(object.do_objectID),\n        );\n\n        layerStyles.objects = filterLayer;\n        draft.sketch.document.layerStyles = layerStyles;\n\n        layerIndexPathsWithSharedStyle.forEach((layerPath) =>\n          accessPageLayers(\n            draft,\n            layerPath.pageIndex,\n            layerPath.indexPaths,\n          ).forEach((layer) => {\n            delete layer.sharedStyleID;\n          }),\n        );\n      });\n    }\n    case 'setSelectedSwatchGroup':\n    case 'setSelectedThemeStyleGroup':\n    case 'setSelectedTextStyleGroup':\n    case 'setSelectedSymbolGroup': {\n      const [, id] = action;\n      const currentThemeTab = state.currentThemeTab;\n\n      return produce(state, (draft) => {\n        draft.selectedThemeTab[currentThemeTab].groupName = id;\n      });\n    }\n    case 'groupSwatch': {\n      const [, id, value] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        groupThemeComponents(\n          ids,\n          value,\n          draft.sketch.document.sharedSwatches?.objects ?? [],\n        );\n        draft.selectedThemeTab.swatches.groupName = '';\n      });\n    }\n    case 'groupTextStyle': {\n      const [, id, value] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        groupThemeComponents(\n          ids,\n          value,\n          draft.sketch.document.layerTextStyles.objects ?? [],\n        );\n\n        draft.selectedThemeTab.textStyles.groupName = '';\n      });\n    }\n    case 'groupThemeStyle': {\n      const [, id, value] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        groupThemeComponents(\n          ids,\n          value,\n          draft.sketch.document.layerStyles?.objects ?? [],\n        );\n        draft.selectedThemeTab.layerStyles.groupName = '';\n      });\n    }\n    case 'groupSymbol': {\n      const [, id, value] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        groupThemeComponents(ids, value, getSymbols(draft));\n        draft.selectedThemeTab.symbols.groupName = '';\n      });\n    }\n    case 'addGradientAsset': {\n      const [, name, value] = action;\n\n      return produce(state, (draft) => {\n        const assets = draft.sketch.document.assets;\n\n        const newAsset: Sketch.GradientAsset = {\n          _class: 'MSImmutableGradientAsset',\n          do_objectID: uuid(),\n          name: name,\n          gradient: value,\n        };\n\n        assets.gradientAssets.push(newAsset);\n        assets.gradients.push(value);\n      });\n    }\n    case 'removeGradientAsset': {\n      const [, id] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const assets = draft.sketch.document.assets;\n\n        const indexes = assets.gradientAssets.flatMap((g, index) =>\n          ids.includes(g.do_objectID) ? [index] : [],\n        );\n\n        indexes.reverse().forEach((index) => {\n          assets.gradients.splice(index, 1);\n          assets.gradientAssets.splice(index, 1);\n        });\n      });\n    }\n    case 'setGradientAssetName': {\n      const [, id, name] = action;\n      const ids = typeof id === 'string' ? [id] : id;\n\n      return produce(state, (draft) => {\n        const gradientAssets = draft.sketch.document.assets.gradientAssets;\n\n        gradientAssets.forEach((g) => {\n          if (ids.includes(g.do_objectID)) g.name = name;\n        });\n      });\n    }\n    case 'addImage': {\n      const [, file, _ref] = action;\n\n      return produce(state, (draft) => {\n        draft.sketch.images[_ref] = file;\n        draft.sketch.document.assets.images.push({\n          _class: 'MSJSONFileReference',\n          _ref: _ref,\n          _ref_class: 'MSImageData',\n        });\n      });\n    }\n    default:\n      return state;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { CanvasKit } from 'canvaskit';\nimport { Draft } from 'immer';\nimport { distance, Point, Rect } from 'noya-geometry';\nimport { PointString } from 'noya-sketch-model';\nimport {\n  decodeCurvePoint,\n  DecodedCurvePoint,\n  encodeCurvePoint,\n  parsePoint,\n  stringifyPoint,\n  path,\n} from 'noya-state';\nimport { IndexPath } from 'tree-visit';\nimport {\n  ApplicationState,\n  InteractionState,\n  Layers,\n  SelectedPointLists,\n} from '../index';\nimport { PointsLayer, visit } from '../layers';\nimport { SelectedControlPoint } from '../reducers/applicationReducer';\nimport { SetNumberMode } from '../reducers/styleReducer';\nimport { getCurrentPage } from './pageSelectors';\nimport { getBoundingRectMap } from './selectors';\n\nexport const POINT_RADIUS = 4;\n\nexport const isPointInRange = (point: Point, rawPoint: Point): boolean => {\n  return distance(point, rawPoint) < POINT_RADIUS;\n};\n\nexport function isLine(points: Sketch.CurvePoint[]) {\n  return (\n    points.length === 2 &&\n    points.every((point) => point.curveMode === Sketch.CurveMode.Straight)\n  );\n}\n\nexport const computeNewBoundingRect = (\n  CanvasKit: CanvasKit,\n  decodedPoints: DecodedCurvePoint[],\n  layer: PointsLayer,\n) => {\n  const [minX, minY, maxX, maxY] = path(\n    CanvasKit,\n    decodedPoints.map((decodedCurvePoint) =>\n      encodeCurvePoint(decodedCurvePoint, layer.frame),\n    ),\n    layer.frame,\n    layer.isClosed,\n  ).computeTightBounds();\n\n  const newRect: Rect = {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n\n  return newRect;\n};\n\nconst getSelectedPointsFromPointLists = (\n  state: ApplicationState,\n  pointLists: Record<string, number[]>,\n): DecodedCurvePoint[] => {\n  const page = getCurrentPage(state);\n  const boundingRects = getBoundingRectMap(\n    getCurrentPage(state),\n    Object.keys(pointLists),\n    {\n      clickThroughGroups: true,\n      includeArtboardLayers: false,\n      includeHiddenLayers: false,\n    },\n  );\n\n  const points: DecodedCurvePoint[] = [];\n\n  visit(page, (layer) => {\n    const boundingRect = boundingRects[layer.do_objectID];\n    const pointList = pointLists[layer.do_objectID];\n\n    if (\n      !boundingRect ||\n      !pointList ||\n      pointList.length === 0 ||\n      !Layers.isPointsLayer(layer)\n    )\n      return;\n\n    const selectedPoints = layer.points.filter((_, index) =>\n      pointList.includes(index),\n    );\n\n    if (selectedPoints.length === 0) return;\n\n    const decodedPoints = selectedPoints.map((point) =>\n      decodeCurvePoint(point, boundingRect),\n    );\n\n    points.push(...decodedPoints);\n  });\n\n  return points;\n};\n\nexport const getSelectedPoints = (\n  state: ApplicationState,\n): DecodedCurvePoint[] => {\n  const selectedPoints = getSelectedPointsFromPointLists(\n    state,\n    state.selectedPointLists,\n  );\n  return selectedPoints;\n};\n\nexport const getCurvePointForSelectedControlPoint = (\n  state: ApplicationState,\n): DecodedCurvePoint | undefined => {\n  if (!state.selectedControlPoint) {\n    return undefined;\n  }\n\n  const controlPoints = getSelectedPointsFromPointLists(state, {\n    [state.selectedControlPoint.layerId]: [\n      state.selectedControlPoint.pointIndex,\n    ],\n  });\n\n  return controlPoints.length > 0 ? controlPoints[0] : undefined;\n};\n\ntype PointIndexPath = {\n  indexPath: IndexPath;\n  pointIndex: number;\n};\n\nexport function getIndexPathOfOpenShapeLayer(\n  state: ApplicationState,\n): PointIndexPath | undefined {\n  // If multiple points are selected, we don't allow adding points to the path\n  if (\n    Object.values(state.selectedPointLists).flat().length !== 1 &&\n    !state.selectedControlPoint\n  )\n    return;\n\n  const [layerId, pointIndex] = (() => {\n    if (state.selectedControlPoint) {\n      return [\n        state.selectedControlPoint.layerId,\n        state.selectedControlPoint.pointIndex,\n      ] as const;\n    }\n\n    // Find the selected [layerId, [pointIndex]] pair\n    const selectedPairs = Object.entries(state.selectedPointLists).filter(\n      ([_, value]) => value.length > 0,\n    );\n\n    const [[layerId, [pointIndex]]] = selectedPairs;\n    return [layerId, pointIndex] as const;\n  })();\n\n  const page = getCurrentPage(state);\n\n  const indexPath = Layers.findIndexPath(\n    page,\n    (layer) => layer.do_objectID === layerId,\n  );\n\n  if (!indexPath) return;\n\n  const layer = Layers.access(page, indexPath);\n\n  if (\n    !!layer &&\n    Layers.isPointsLayer(layer) &&\n    !layer.isClosed &&\n    // We can only add points if the first or last point is seleted\n    (pointIndex === 0 || pointIndex === layer.points.length - 1)\n  ) {\n    return { indexPath, pointIndex };\n  }\n}\n\nexport const getIsEditingPath = (type: InteractionState['type']): boolean => {\n  return (\n    type === 'editPath' ||\n    type === 'maybeMovePoint' ||\n    type === 'movingPoint' ||\n    type === 'maybeMoveControlPoint' ||\n    type === 'movingControlPoint' ||\n    type === 'maybeConvertCurveMode'\n  );\n};\n\nfunction getNewValue(value: number, mode: SetNumberMode, delta?: number) {\n  return delta === undefined\n    ? value\n    : mode === 'replace'\n    ? delta\n    : value + delta;\n}\n\nexport const moveSelectedPoints = (\n  selectedPointLists: SelectedPointLists,\n  layerIndexPaths: IndexPath[],\n  delta: Partial<Point>,\n  mode: SetNumberMode,\n  draftPage: Draft<Sketch.Page>,\n  pageSnapshot: Sketch.Page,\n  CanvasKit: CanvasKit,\n) => {\n  const boundingRects = getBoundingRectMap(\n    pageSnapshot,\n    Object.keys(selectedPointLists),\n    {\n      clickThroughGroups: true,\n      includeArtboardLayers: false,\n      includeHiddenLayers: false,\n    },\n  );\n\n  layerIndexPaths.forEach((indexPath) => {\n    const layer = Layers.access(pageSnapshot, indexPath);\n\n    if (!Layers.isPointsLayer(layer)) return;\n\n    // We handle dragging a single point by adjusting the layer's frame directly.\n    // The position of points within the layer's frame isn't meaningful when there's\n    // only one point, so we don't need to change the point itself.\n    if (layer.points.length === 1) {\n      const draftLayer = Layers.access(draftPage, indexPath) as PointsLayer;\n\n      draftLayer.frame = {\n        ...layer.frame,\n        x: getNewValue(layer.frame.x, mode, delta.x),\n        y: getNewValue(layer.frame.y, mode, delta.y),\n      };\n\n      return;\n    }\n\n    const pointList = selectedPointLists[layer.do_objectID];\n    const boundingRect = boundingRects[layer.do_objectID];\n\n    if (!boundingRect) return;\n\n    // Update all points by first transforming to the canvas's coordinate system\n    const decodedPoints = layer.points\n      .map((curvePoint) => decodeCurvePoint(curvePoint, boundingRect))\n      .map((decodedPoint, index) => {\n        if (!pointList.includes(index)) return decodedPoint;\n\n        (['point', 'curveFrom', 'curveTo'] as const).forEach((key) => {\n          decodedPoint[key] = {\n            x: getNewValue(decodedPoint[key].x, mode, delta.x),\n            y: getNewValue(decodedPoint[key].y, mode, delta.y),\n          };\n        });\n\n        return decodedPoint;\n      });\n\n    const draftLayer = Layers.access(draftPage, indexPath) as PointsLayer;\n\n    draftLayer.frame = {\n      ...layer.frame,\n      ...computeNewBoundingRect(CanvasKit, decodedPoints, layer),\n    };\n\n    fixZeroLayerDimensions(draftLayer);\n\n    // Transform back to the range [0, 1], using the new bounds\n    draftLayer.points = decodedPoints.map((decodedCurvePoint) =>\n      encodeCurvePoint(decodedCurvePoint, draftLayer.frame),\n    );\n  });\n};\n\nexport const fixZeroLayerDimensions = (layer: PointsLayer) => {\n  if (layer.frame.height === 0) {\n    layer.frame.height = 1;\n    layer.points.forEach((point) => {\n      (['point', 'curveFrom', 'curveTo'] as const).forEach((key) => {\n        point[key] = PointString.encode({\n          x: PointString.decode(point[key]).x,\n          y: 0.5,\n        });\n      });\n    });\n    layer.frame.y -= 0.5;\n  }\n\n  if (layer.frame.width === 0) {\n    layer.frame.width = 1;\n    layer.points.forEach((point) => {\n      (['point', 'curveFrom', 'curveTo'] as const).forEach((key) => {\n        point[key] = PointString.encode({\n          x: 0.5,\n          y: PointString.decode(point[key]).y,\n        });\n      });\n    });\n    layer.frame.x -= 0.5;\n  }\n};\n\nexport const moveControlPoints = (\n  selectedPointLists: SelectedControlPoint,\n  layerIndexPaths: IndexPath[],\n  delta: Partial<Point>,\n  mode: SetNumberMode,\n  draftPage: Draft<Sketch.Page>,\n  pageSnapshot: Sketch.Page,\n  CanvasKit: CanvasKit,\n) => {\n  const { layerId, pointIndex, controlPointType } = selectedPointLists;\n\n  const boundingRects = getBoundingRectMap(pageSnapshot, [layerId], {\n    clickThroughGroups: true,\n    includeArtboardLayers: false,\n    includeHiddenLayers: false,\n  });\n\n  layerIndexPaths.forEach((indexPath) => {\n    const layer = Layers.access(pageSnapshot, indexPath);\n\n    if (!Layers.isPointsLayer(layer)) return;\n\n    const boundingRect = boundingRects[layer.do_objectID];\n\n    if (!boundingRect) return;\n\n    // We handle a single point specially\n    if (layer.points.length === 1) {\n      const draftLayer = Layers.access(draftPage, indexPath) as PointsLayer;\n\n      const curveFrom = parsePoint(layer.points[0].curveFrom);\n      const curveTo = parsePoint(layer.points[0].curveTo);\n\n      const inverseDelta = {\n        x: delta.x !== undefined ? delta.x * -1 : undefined,\n        y: delta.y !== undefined ? delta.y * -1 : undefined,\n      };\n\n      draftLayer.points[0].curveTo = stringifyPoint({\n        x: getNewValue(curveTo.x, mode, delta.x),\n        y: getNewValue(curveTo.y, mode, delta.y),\n      });\n\n      draftLayer.points[0].curveFrom = stringifyPoint({\n        x: getNewValue(curveFrom.x, mode, inverseDelta.x),\n        y: getNewValue(curveFrom.y, mode, inverseDelta.y),\n      });\n\n      return;\n    }\n\n    const curveMode = layer.points[pointIndex].curveMode;\n\n    // Update all points by first transforming to the canvas's coordinate system\n    const decodedPoints = layer.points.map((curvePoint) =>\n      decodeCurvePoint(curvePoint, boundingRect),\n    );\n\n    const decodedPoint = decodedPoints[pointIndex];\n\n    const oppositeControlPointType =\n      controlPointType === 'curveFrom' ? 'curveTo' : 'curveFrom';\n\n    const controlPoint = decodedPoint[controlPointType];\n    const oppositeControlPoint = decodedPoint[oppositeControlPointType];\n\n    const selectedControlPointValueX = delta.x\n      ? controlPoint.x + delta.x\n      : controlPoint.x;\n    const selectedControlPointValueY = delta.y\n      ? controlPoint.y + delta.y\n      : controlPoint.y;\n\n    const deltaX = controlPoint.x - selectedControlPointValueX;\n    const deltaY = controlPoint.y - selectedControlPointValueY;\n\n    const oppositeControlPointDistance = distance(\n      decodedPoint.point,\n      oppositeControlPoint,\n    );\n\n    switch (curveMode) {\n      case Sketch.CurveMode.Mirrored:\n        controlPoint.x = selectedControlPointValueX;\n        controlPoint.y = selectedControlPointValueY;\n\n        oppositeControlPoint.x += deltaX;\n        oppositeControlPoint.y += deltaY;\n        break;\n      case Sketch.CurveMode.Asymmetric:\n        controlPoint.x = selectedControlPointValueX;\n        controlPoint.y = selectedControlPointValueY;\n\n        let theta =\n          Math.atan2(\n            controlPoint.y - decodedPoint.point.y,\n            controlPoint.x - decodedPoint.point.x,\n          ) + Math.PI;\n\n        const oppositeControlPointValue = {\n          x:\n            oppositeControlPointDistance * Math.cos(theta) +\n            decodedPoint.point.x,\n          y:\n            oppositeControlPointDistance * Math.sin(theta) +\n            decodedPoint.point.y,\n        };\n\n        decodedPoint[oppositeControlPointType] = oppositeControlPointValue;\n        break;\n      default:\n        controlPoint.x = selectedControlPointValueX;\n        controlPoint.y = selectedControlPointValueY;\n    }\n\n    const draftLayer = Layers.access(draftPage, indexPath) as PointsLayer;\n\n    draftLayer.frame = {\n      ...layer.frame,\n      ...computeNewBoundingRect(CanvasKit, decodedPoints, layer),\n    };\n\n    // Transform back to the range [0, 1], using the new bounds\n    draftLayer.points = decodedPoints.map((decodedCurvePoint) =>\n      encodeCurvePoint(decodedCurvePoint, draftLayer.frame),\n    );\n  });\n};\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport type {\n  CanvasKit,\n  Paint,\n  Path,\n  Shader,\n  TextAlign,\n  TextStyle,\n} from 'canvaskit';\nimport {\n  AffineTransform,\n  createBounds,\n  distance,\n  resize,\n  Point,\n  Rect,\n} from 'noya-geometry';\nimport { CompassDirection, getCardinalDirections } from 'noya-state';\nimport * as PathUtils from './primitives/path';\n\nexport * from './primitives/path';\n\n/**\n * Resize a rect in a compass direction\n */\nexport function resizeRect(\n  rect: Rect,\n  offset: Point,\n  direction: CompassDirection,\n): Rect {\n  const newRect = { ...rect };\n\n  getCardinalDirections(direction).forEach((cardinalDirection) => {\n    switch (cardinalDirection) {\n      case 'e':\n        newRect.width += offset.x;\n        break;\n      case 'w':\n        newRect.width -= offset.x;\n        newRect.x += offset.x;\n        break;\n      case 's':\n        newRect.height += offset.y;\n        break;\n      case 'n':\n        newRect.height -= offset.y;\n        newRect.y += offset.y;\n        break;\n    }\n  });\n\n  return newRect;\n}\n\nexport function point(point: Point): number[] {\n  return [point.x, point.y];\n}\n\nexport function color(CanvasKit: CanvasKit, color: Sketch.Color) {\n  return CanvasKit.Color4f(color.red, color.green, color.blue, color.alpha);\n}\n\nexport function rect<T extends Rect>(CanvasKit: CanvasKit, rect: T) {\n  return CanvasKit.XYWHRect(rect.x, rect.y, rect.width, rect.height);\n}\n\nexport function clearColor(CanvasKit: CanvasKit) {\n  return CanvasKit.Color4f(0, 0, 0, 0);\n}\n\nexport function shader(\n  CanvasKit: CanvasKit,\n  fill: Sketch.Fill,\n  layerFrame: Rect,\n  image?: ArrayBuffer,\n): Shader | undefined {\n  switch (fill.fillType) {\n    case Sketch.FillType.Color:\n      const fillColor = fill.color\n        ? color(CanvasKit, fill.color)\n        : clearColor(CanvasKit);\n      return CanvasKit.Shader.MakeColor(fillColor, CanvasKit.ColorSpace.SRGB);\n    case Sketch.FillType.Gradient: {\n      let colors: Float32Array[] = [];\n      let positions: number[] = [];\n\n      [...fill.gradient.stops]\n        .sort((a, b) => a.position - b.position)\n        .forEach((stop) => {\n          colors.push(color(CanvasKit, stop.color));\n          positions.push(stop.position);\n        });\n\n      const fromPoint = parsePoint(fill.gradient.from);\n      const toPoint = parsePoint(fill.gradient.to);\n\n      // CanvasKit draws gradients in absolute coordinates, while Sketch draws them\n      // relative to the layer's frame. This function returns a matrix that converts\n      // absolute coordinates into the range (0, 1).\n      const unitTransform = AffineTransform.multiply(\n        AffineTransform.translation(layerFrame.x, layerFrame.y),\n        AffineTransform.scale(layerFrame.width, layerFrame.height),\n      );\n\n      switch (fill.gradient.gradientType) {\n        case Sketch.GradientType.Linear: {\n          return CanvasKit.Shader.MakeLinearGradient(\n            point(fromPoint),\n            point(toPoint),\n            colors,\n            positions,\n            CanvasKit.TileMode.Clamp,\n            unitTransform.float32Array,\n          );\n        }\n        case Sketch.GradientType.Radial: {\n          return CanvasKit.Shader.MakeRadialGradient(\n            point(fromPoint),\n            distance(toPoint, fromPoint),\n            colors,\n            positions,\n            CanvasKit.TileMode.Clamp,\n            unitTransform.float32Array,\n          );\n        }\n        case Sketch.GradientType.Angular: {\n          const hasStartPosition = positions[0] === 0;\n          const hasEndPosition = positions[positions.length - 1] === 1;\n          let rotationRadians = 0;\n\n          // If the gradient has no start or end, we shift all the colors stops\n          // to the beginning, and then rotate the gradient.\n          //\n          // We can't use the positions + angle parameters of MakeSweepGradient,\n          // since these are clamped (and TileMode doesn't seem to affect this)\n          if (!hasStartPosition && !hasEndPosition) {\n            const startPosition = positions[0];\n            positions = positions.map((p) => p - startPosition);\n            colors.push(colors[0]);\n            positions.push(1);\n\n            rotationRadians = startPosition * 2 * Math.PI;\n          } else if (hasEndPosition && !hasStartPosition) {\n            colors.unshift(colors[colors.length - 1]);\n            positions.unshift(0);\n          } else if (hasStartPosition && !hasEndPosition) {\n            colors.push(colors[0]);\n            positions.push(1);\n          }\n\n          const matrix =\n            rotationRadians > 0\n              ? AffineTransform.multiply(\n                  unitTransform,\n                  AffineTransform.rotation(rotationRadians, 0.5, 0.5),\n                )\n              : unitTransform;\n\n          return CanvasKit.Shader.MakeSweepGradient(\n            0.5,\n            0.5,\n            colors,\n            positions,\n            CanvasKit.TileMode.Clamp,\n            matrix.float32Array,\n          );\n        }\n        default:\n          return;\n      }\n    }\n    case Sketch.FillType.Pattern: {\n      if (!image) return;\n\n      const canvasImage = CanvasKit.MakeImageFromEncoded(image);\n\n      if (!canvasImage) return;\n\n      switch (fill.patternFillType) {\n        case Sketch.PatternFillType.Tile: {\n          return canvasImage.makeShaderCubic(\n            CanvasKit.TileMode.Repeat,\n            CanvasKit.TileMode.Repeat,\n            0,\n            0,\n            CanvasKit.Matrix.multiply(\n              CanvasKit.Matrix.translated(layerFrame.x, layerFrame.y),\n              CanvasKit.Matrix.scaled(\n                fill.patternTileScale,\n                fill.patternTileScale,\n              ),\n            ),\n          );\n        }\n        case Sketch.PatternFillType.Stretch:\n        case Sketch.PatternFillType.Fit:\n        case Sketch.PatternFillType.Fill: {\n          const bounds = createBounds(layerFrame);\n          const scaledRect = resize(\n            {\n              ...layerFrame,\n              width: canvasImage.width(),\n              height: canvasImage.height(),\n            },\n            layerFrame,\n            fill.patternFillType === Sketch.PatternFillType.Stretch\n              ? 'scaleToFill'\n              : fill.patternFillType === Sketch.PatternFillType.Fit\n              ? 'scaleAspectFit'\n              : 'scaleAspectFill',\n          );\n\n          return canvasImage.makeShaderCubic(\n            CanvasKit.TileMode.Decal,\n            CanvasKit.TileMode.Decal,\n            0,\n            0,\n            CanvasKit.Matrix.multiply(\n              CanvasKit.Matrix.translated(\n                bounds.midX - scaledRect.width / 2,\n                bounds.midY - scaledRect.height / 2,\n              ),\n              CanvasKit.Matrix.scaled(\n                scaledRect.width / canvasImage.width(),\n                scaledRect.height / canvasImage.height(),\n              ),\n            ),\n          );\n        }\n      }\n    }\n  }\n}\n\nexport function fill(\n  CanvasKit: CanvasKit,\n  fill: Sketch.Fill,\n  layerFrame: Rect,\n  image?: ArrayBuffer,\n): Paint {\n  const paint = new CanvasKit.Paint();\n\n  switch (fill.fillType) {\n    case Sketch.FillType.Color:\n      paint.setColor(\n        fill.color ? color(CanvasKit, fill.color) : clearColor(CanvasKit),\n      );\n      break;\n    case Sketch.FillType.Gradient:\n    case Sketch.FillType.Pattern: {\n      const fillShader = shader(CanvasKit, fill, layerFrame, image);\n\n      if (!fillShader) {\n        paint.setColor(clearColor(CanvasKit));\n        break;\n      }\n\n      paint.setShader(fillShader);\n      paint.setAlphaf(fill.contextSettings.opacity);\n      break;\n    }\n  }\n\n  paint.setStyle(CanvasKit.PaintStyle.Fill);\n  paint.setAntiAlias(true);\n\n  return paint;\n}\n\nexport function border(CanvasKit: CanvasKit, border: Sketch.Border): Paint {\n  const paint = new CanvasKit.Paint();\n\n  paint.setColor(\n    border.color ? color(CanvasKit, border.color) : clearColor(CanvasKit),\n  );\n  paint.setStrokeWidth(border.thickness);\n  paint.setStyle(CanvasKit.PaintStyle.Stroke);\n  paint.setAntiAlias(true);\n\n  return paint;\n}\n\nexport function parsePoint(pointString: string): Point {\n  const [x, y] = pointString.slice(1, -1).split(',');\n\n  return {\n    x: parseFloat(x),\n    y: parseFloat(y),\n  };\n}\n\nexport function stringifyPoint({ x, y }: Point): string {\n  return `{${x.toString()},${y.toString()}}`;\n}\n\nexport function path(\n  CanvasKit: CanvasKit,\n  points: Sketch.CurvePoint[],\n  frame: Rect,\n  isClosed: boolean,\n): Path {\n  return PathUtils.path(CanvasKit, points, frame, isClosed);\n}\n\nexport function textHorizontalAlignment(\n  CanvasKit: CanvasKit,\n  alignment: Sketch.TextHorizontalAlignment,\n): TextAlign {\n  switch (alignment) {\n    case Sketch.TextHorizontalAlignment.Left:\n      return CanvasKit.TextAlign.Left;\n    case Sketch.TextHorizontalAlignment.Centered:\n      return CanvasKit.TextAlign.Center;\n    case Sketch.TextHorizontalAlignment.Right:\n      return CanvasKit.TextAlign.Right;\n    case Sketch.TextHorizontalAlignment.Justified:\n      return CanvasKit.TextAlign.Justify;\n    case Sketch.TextHorizontalAlignment.Natural: // What is this?\n      return CanvasKit.TextAlign.Start;\n  }\n}\n\nexport type SimpleTextDecoration = 'none' | 'underline' | 'strikethrough';\n\nexport function stringAttribute(\n  CanvasKit: CanvasKit,\n  attribute: Sketch.StringAttribute,\n  decoration: SimpleTextDecoration,\n): TextStyle {\n  const textColor = attribute.attributes.MSAttributedStringColorAttribute;\n  const font = attribute.attributes.MSAttributedStringFontAttribute;\n\n  return new CanvasKit.TextStyle({\n    ...(textColor && { color: color(CanvasKit, textColor) }),\n    // fontFamilies: ['Roboto'], // TODO: Font family\n    fontSize: font.attributes.size,\n    letterSpacing: attribute.attributes.kerning,\n    ...(decoration === 'none'\n      ? {}\n      : {\n          decoration:\n            decoration === 'underline'\n              ? CanvasKit.UnderlineDecoration\n              : CanvasKit.LineThroughDecoration,\n          // There's currently a typo in the TypeScript types, \"decration\"\n          ['decorationStyle' as any]: CanvasKit.DecorationStyle.Solid,\n        }),\n  });\n}\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport type { CanvasKit } from 'canvaskit';\nimport {\n  AffineTransform,\n  createRectFromBounds,\n  getRectCornerPoints,\n  rectContainsPoint,\n  rectsIntersect,\n  rotatedRectContainsPoint,\n  transformRect,\n} from 'noya-geometry';\nimport * as Primitives from 'noya-state';\nimport { getRectDragHandles } from 'noya-state';\nimport { EnterReturnValue, SKIP, STOP } from 'tree-visit';\nimport { ApplicationState, Layers, PageLayer } from '../index';\nimport { visitReversed } from '../layers';\nimport { CompassDirection } from '../reducers/interactionReducer';\nimport { CanvasInsets } from '../reducers/workspaceReducer';\nimport type { Point, Rect } from '../types';\nimport { getSelectedLayerIndexPaths } from './indexPathSelectors';\nimport { getCurrentPage } from './pageSelectors';\nimport {\n  getCanvasTransform,\n  getLayerRotationTransform,\n  getLayerTransformAtIndexPathReversed,\n  getScreenTransform,\n} from './transformSelectors';\n\nexport type LayerTraversalOptions = {\n  includeHiddenLayers: boolean;\n  clickThroughGroups: boolean;\n  includeArtboardLayers: boolean;\n};\n\nfunction shouldClickThrough(\n  layer: Sketch.AnyLayer,\n  options: LayerTraversalOptions,\n) {\n  return (\n    layer._class === 'symbolMaster' ||\n    (layer._class === 'artboard' && !options.includeArtboardLayers) ||\n    (layer._class === 'group' &&\n      (layer.hasClickThrough || options.clickThroughGroups))\n  );\n}\n\nfunction visitLayersReversed(\n  rootLayer: Sketch.AnyLayer,\n  ctm: AffineTransform,\n  options: LayerTraversalOptions,\n  onEnter: (layer: Sketch.AnyLayer, ctm: AffineTransform) => EnterReturnValue,\n) {\n  visitReversed(rootLayer, {\n    onEnter: (layer, indexPath) => {\n      if (Layers.isPageLayer(layer)) return;\n\n      if (!layer.isVisible && !options.includeHiddenLayers) return SKIP;\n\n      const transform = getLayerTransformAtIndexPathReversed(\n        rootLayer,\n        indexPath,\n        ctm,\n      );\n\n      const result = onEnter(layer, transform);\n\n      if (result === STOP) return result;\n\n      if (!shouldClickThrough(layer, options)) return SKIP;\n\n      return result;\n    },\n  });\n}\n\nexport function getLayersInRect(\n  state: ApplicationState,\n  insets: CanvasInsets,\n  rect: Rect,\n  traversalOptions?: LayerTraversalOptions,\n): PageLayer[] {\n  const options = traversalOptions ?? {\n    clickThroughGroups: false,\n    includeHiddenLayers: false,\n    includeArtboardLayers: false,\n  };\n\n  const page = getCurrentPage(state);\n\n  let found: Sketch.AnyLayer[] = [];\n\n  const screenTransform = getScreenTransform(insets);\n  const screenRect = transformRect(rect, screenTransform);\n\n  visitLayersReversed(\n    page,\n    getCanvasTransform(state, insets),\n    options,\n    (layer, ctm) => {\n      // TODO: Handle rotated rectangle collision\n      const hasIntersect = rectsIntersect(\n        transformRect(layer.frame, ctm),\n        screenRect,\n      );\n\n      if (!hasIntersect) return SKIP;\n\n      // Artboards can't be selected themselves\n      if (shouldClickThrough(layer, options)) return;\n\n      found.push(layer);\n    },\n  );\n\n  return found as PageLayer[];\n}\n\nexport function getLayerAtPoint(\n  CanvasKit: CanvasKit,\n  state: ApplicationState,\n  insets: CanvasInsets,\n  point: Point,\n  traversalOptions?: LayerTraversalOptions,\n): PageLayer | undefined {\n  const page = getCurrentPage(state);\n  const canvasTransform = getCanvasTransform(state, insets);\n  const screenTransform = getScreenTransform(insets);\n\n  const options = traversalOptions ?? {\n    clickThroughGroups: false,\n    includeHiddenLayers: false,\n    includeArtboardLayers: false,\n  };\n\n  // TODO: check if we're clicking the title of an artboard\n\n  let found: Sketch.AnyLayer | undefined;\n\n  const screenPoint = screenTransform.applyTo(point);\n\n  visitLayersReversed(page, canvasTransform, options, (layer, ctm) => {\n    const transform = AffineTransform.multiply(\n      ctm,\n      getLayerRotationTransform(layer),\n    );\n\n    const framePoints = getRectCornerPoints(layer.frame);\n    const localPoints = framePoints.map((point) => transform.applyTo(point));\n\n    const containsPoint = rotatedRectContainsPoint(localPoints, screenPoint);\n\n    if (!containsPoint) return SKIP;\n\n    // Artboards can't be selected themselves, and instead only update the ctm\n    if (shouldClickThrough(layer, options)) return;\n\n    switch (layer._class) {\n      case 'rectangle':\n      case 'oval': {\n        const pathPoint = transform.invert().applyTo(screenPoint);\n\n        const path = Primitives.path(\n          CanvasKit,\n          layer.points,\n          layer.frame,\n          layer.isClosed,\n        );\n\n        if (!path.contains(pathPoint.x, pathPoint.y)) return;\n\n        break;\n      }\n      default:\n        break;\n    }\n\n    found = layer;\n\n    return STOP;\n  });\n\n  return found as PageLayer;\n}\n\n/**\n * Returns an axis-aligned Rect that contains all layers passed via `layerIds`,\n * or undefined if no layers were passed.\n */\nexport function getBoundingRect(\n  rootLayer: Sketch.AnyLayer,\n  ctm: AffineTransform,\n  layerIds: string[],\n  options?: LayerTraversalOptions,\n): Rect | undefined {\n  options = options ?? {\n    clickThroughGroups: false,\n    includeHiddenLayers: false,\n    includeArtboardLayers: false,\n  };\n\n  let bounds = {\n    minX: Infinity,\n    minY: Infinity,\n    maxX: -Infinity,\n    maxY: -Infinity,\n  };\n\n  visitLayersReversed(rootLayer, ctm, options, (layer, ctm) => {\n    if (!layerIds.includes(layer.do_objectID)) return;\n\n    const transform = AffineTransform.multiply(\n      ctm,\n      getLayerRotationTransform(layer),\n    );\n\n    const framePoints = getRectCornerPoints(layer.frame);\n    const localPoints = framePoints.map((point) => transform.applyTo(point));\n\n    const xs = localPoints.map((point) => point.x);\n    const ys = localPoints.map((point) => point.y);\n\n    bounds.minX = Math.min(bounds.minX, ...xs);\n    bounds.minY = Math.min(bounds.minY, ...ys);\n    bounds.maxX = Math.max(bounds.maxX, ...xs);\n    bounds.maxY = Math.max(bounds.maxY, ...ys);\n  });\n\n  // Check that at least one layer had a non-zero size\n  if (!Object.values(bounds).every(isFinite)) return undefined;\n\n  return createRectFromBounds(bounds);\n}\n\nexport function getBoundingPoints(\n  rootLayer: Sketch.AnyLayer,\n  ctm: AffineTransform,\n  layerId: string,\n  options?: LayerTraversalOptions,\n): Point[] {\n  options = options ?? {\n    clickThroughGroups: false,\n    includeHiddenLayers: false,\n    includeArtboardLayers: false,\n  };\n\n  let points: Point[] = [];\n\n  visitLayersReversed(rootLayer, ctm, options, (layer, ctm) => {\n    if (layerId !== layer.do_objectID) return;\n\n    const transform = AffineTransform.multiply(\n      ctm,\n      getLayerRotationTransform(layer),\n    );\n\n    const framePoints = getRectCornerPoints(layer.frame);\n    points = framePoints.map((point) => transform.applyTo(point));\n\n    return STOP;\n  });\n\n  return points;\n}\n\nexport function getScaleDirectionAtPoint(\n  state: ApplicationState,\n  point: Point,\n): CompassDirection | undefined {\n  const page = getCurrentPage(state);\n  const boundingRect = getBoundingRect(\n    page,\n    AffineTransform.identity,\n    state.selectedObjects,\n  );\n\n  if (!boundingRect) return;\n\n  const handles = getRectDragHandles(boundingRect);\n\n  const handle = handles.find((handle) =>\n    rectContainsPoint(handle.rect, point),\n  );\n\n  return handle?.compassDirection;\n}\n\nexport const getSelectedRect = (state: ApplicationState): Rect => {\n  const page = getCurrentPage(state);\n  const layerIndexPaths = getSelectedLayerIndexPaths(state);\n  const layerIds = layerIndexPaths.map(\n    (indexPath) => Layers.access(page, indexPath).do_objectID,\n  );\n  return getBoundingRect(page, AffineTransform.identity, layerIds)!;\n};\n\nexport function getBoundingRectMap(\n  rootLayer: Sketch.AnyLayer,\n  layerIds: string[],\n  options: LayerTraversalOptions,\n) {\n  const rectMap: Record<string, Rect> = {};\n\n  layerIds.forEach((layerId) => {\n    if (layerId in rectMap) return;\n\n    const rect = getBoundingRect(\n      rootLayer,\n      AffineTransform.identity,\n      [layerId],\n      options,\n    );\n\n    if (!rect) return;\n\n    rectMap[layerId] = rect;\n  });\n\n  return rectMap;\n}\n","import { TupleOf } from './types';\n\nexport function windowsOf<T, N extends number>(\n  array: T[],\n  size: N,\n  wrapsAround: boolean = false,\n): TupleOf<T, N>[] {\n  let arr = array;\n\n  if (arr.length < size) return [];\n\n  if (wrapsAround) {\n    arr = array.slice();\n\n    for (let i = 0; i < size - 1; i++) {\n      arr.push(array[i]);\n    }\n  }\n\n  const result: TupleOf<T, N>[] = [];\n\n  for (let i = 0; i <= arr.length - size; i++) {\n    result.push(arr.slice(i, i + size) as TupleOf<T, N>);\n  }\n\n  return result;\n}\n","// A simple, unoptimized decoder for small images\nfunction decodeBase64(string: string) {\n  return new Uint8Array(\n    atob(string)\n      .split('')\n      .map((char) => char.charCodeAt(0)),\n  );\n}\n\nconst CHECKERED_BACKGROUND = `iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAQMAAADaua+7AAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAABNJREFUCNdjYOD/TxL+/4GBFAwAvMsj3bQ3H74AAAAASUVORK5CYII=`;\n\nexport const CHECKERED_BACKGROUND_BYTES = decodeBase64(CHECKERED_BACKGROUND);\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { SketchFile } from 'noya-sketch-file';\nimport { SketchModel } from 'noya-sketch-model';\n\nexport function createSketchFile(\n  page: Sketch.Page = SketchModel.page(),\n): SketchFile {\n  return {\n    document: SketchModel.document(),\n    images: {},\n    meta: SketchModel.meta(),\n    pages: [page],\n    user: SketchModel.user({\n      [page.do_objectID]: {\n        scrollOrigin: '{0, 0}',\n        zoomValue: 1,\n      },\n    }),\n  };\n}\n","import { Color } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useMemo } from 'react';\nimport useStable4ElementArray from './useStable4ElementArray';\n\nexport type ColorParameters = Color | number[] | string;\n\nexport default function useColor(parameters: ColorParameters): Color;\nexport default function useColor(\n  parameters: ColorParameters | undefined,\n): Color | undefined;\nexport default function useColor(\n  parameters: ColorParameters | undefined,\n): Color | undefined {\n  const CanvasKit = useCanvasKit();\n\n  const color = useMemo(() => {\n    if (parameters instanceof Float32Array) return parameters;\n    if (parameters instanceof Array) return new Float32Array(parameters);\n    if (parameters === undefined) return parameters;\n    return CanvasKit.parseColorString(parameters);\n  }, [CanvasKit, parameters]);\n\n  return useStable4ElementArray(color);\n}\n","import { CanvasKit, Path } from 'canvaskit';\nimport { Point } from 'noya-state';\n\nexport default function makePath(CanvasKit: CanvasKit, points: Point[]): Path {\n  const path = new CanvasKit.Path();\n\n  const [first, ...rest] = points;\n\n  if (!first) return path;\n\n  path.moveTo(first.x, first.y);\n\n  rest.forEach((point) => {\n    path.lineTo(point.x, point.y);\n  });\n\n  path.close();\n\n  return path;\n}\n","import { ForwardedRef, forwardRef, memo, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { Tooltip } from '..';\n\ntype ButtonVariant = 'normal' | 'thin';\n\n/* ----------------------------------------------------------------------------\n * Element\n * ------------------------------------------------------------------------- */\n\nconst ButtonElement = styled.button<{\n  active: boolean;\n  variant: ButtonVariant;\n}>(({ theme, active, disabled, variant }) => ({\n  ...theme.textStyles.small,\n  flex: '0 0 auto',\n  position: 'relative',\n  border: '0',\n  outline: 'none',\n  minWidth: variant === 'thin' ? undefined : '31px',\n  textAlign: 'left',\n  borderRadius: '4px',\n  paddingTop: '4px',\n  paddingRight: variant === 'thin' ? '1px' : '6px',\n  paddingBottom: variant === 'thin' ? '0px' : '4px',\n  paddingLeft: variant === 'thin' ? '1px' : '6px',\n  background: active ? theme.colors.primary : theme.colors.inputBackground,\n  color: active ? 'white' : theme.colors.text,\n  opacity: disabled ? 0.25 : 1,\n  '&:focus': {\n    boxShadow: `0 0 0 1px ${theme.colors.sidebar.background}, 0 0 0 3px ${theme.colors.primary}`,\n  },\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n\n  '& *': {\n    pointerEvents: 'none',\n  },\n}));\n\n/* ----------------------------------------------------------------------------\n * Content\n * ------------------------------------------------------------------------- */\n\nconst ButtonContent = styled.span(({ theme }) => ({\n  // Line height of small text - maybe figure out better way to ensure\n  // icons don't have a smaller height\n  minHeight: '19px',\n  display: 'flex',\n  alignItems: 'center',\n}));\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\ninterface ButtonRootProps {\n  id: string;\n  children: ReactNode;\n  active?: boolean;\n  disabled?: boolean;\n  variant?: ButtonVariant;\n  tooltip?: ReactNode;\n  onClick?: () => void;\n}\n\nconst Button = forwardRef(function Button(\n  {\n    id,\n    tooltip,\n    active = false,\n    disabled = false,\n    variant = 'normal',\n    onClick,\n    children,\n  }: ButtonRootProps,\n  forwardedRef: ForwardedRef<HTMLButtonElement>,\n) {\n  const buttonElement = (\n    <ButtonElement\n      id={id}\n      ref={forwardedRef}\n      active={active}\n      disabled={disabled}\n      variant={variant}\n      onClick={onClick}\n    >\n      <ButtonContent>{children}</ButtonContent>\n    </ButtonElement>\n  );\n\n  return tooltip ? (\n    <Tooltip content={tooltip}>{buttonElement}</Tooltip>\n  ) : (\n    buttonElement\n  );\n});\n\nexport default memo(Button);\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { sketchColorToRgbaString } from '..';\n\nconst getRGBAColor = (value: Sketch.GradientStop[], num: 100 | 360) =>\n  [...value]\n    .sort((a, b) => a.position - b.position)\n    .map(\n      (g) =>\n        `${sketchColorToRgbaString(g.color)} ${g.position * num}${\n          num === 100 ? '%' : 'deg'\n        }`,\n    )\n    .join(', \\n');\n\nexport function getGradientBackground(\n  value: Sketch.GradientStop[],\n  type: Sketch.GradientType,\n  direction?: number,\n) {\n  if (type === Sketch.GradientType.Angular) {\n    return `conic-gradient(${getRGBAColor(value, 360)})`;\n  }\n\n  const color = getRGBAColor(value, 100);\n  const position =\n    type === Sketch.GradientType.Radial\n      ? 'radial-gradient(circle'\n      : `linear-gradient(${\n          typeof direction !== undefined ? direction : 180\n        }deg`;\n\n  return `${position}, ${color})`;\n}\n","import { hexToRgba } from \"./convert\";\nimport { ObjectColor } from \"../types\";\n\nexport const equalColorObjects = (first: ObjectColor, second: ObjectColor): boolean => {\n  if (first === second) return true;\n\n  for (const prop in first) {\n    // The following allows for a type-safe calling of this function (first & second have to be HSL, HSV, or RGB)\n    // with type-unsafe iterating over object keys. TS does not allow this without an index (`[key: string]: number`)\n    // on an object to define how iteration is normally done. To ensure extra keys are not allowed on our types,\n    // we must cast our object to unknown (as RGB demands `r` be a key, while `Record<string, x>` does not care if\n    // there is or not), and then as a type TS can iterate over.\n    if (\n      ((first as unknown) as Record<string, number>)[prop] !==\n      ((second as unknown) as Record<string, number>)[prop]\n    )\n      return false;\n  }\n\n  return true;\n};\n\nexport const equalColorString = (first: string, second: string): boolean => {\n  return first.replace(/\\s/g, \"\") === second.replace(/\\s/g, \"\");\n};\n\nexport const equalHex = (first: string, second: string): boolean => {\n  if (first.toLowerCase() === second.toLowerCase()) return true;\n\n  // To compare colors like `#FFF` and `ffffff` we convert them into RGB objects\n  return equalColorObjects(hexToRgba(first), hexToRgba(second));\n};\n","import styled from 'styled-components';\nimport * as RadixScrollArea from '@radix-ui/react-scroll-area';\nimport { ReactNode } from 'react';\n\nconst SCROLLBAR_SIZE = 10;\n\nconst StyledScrollArea = styled(RadixScrollArea.Root)({\n  width: '100%',\n  height: '100%',\n});\n\nconst StyledViewport = styled(RadixScrollArea.Viewport)({\n  width: '100%',\n  height: '100%',\n  // Override the `display: table` in the child, since this allows\n  // elements to expand beyond the width of the viewport.\n  '& > div': {\n    display: 'block !important',\n  },\n});\n\nconst StyledScrollbar = styled(RadixScrollArea.Scrollbar)({\n  display: 'flex',\n  padding: '3px',\n  '&[data-orientation=\"vertical\"]': {\n    width: SCROLLBAR_SIZE,\n  },\n});\n\nconst StyledThumb = styled(RadixScrollArea.Thumb)(({ theme }) => ({\n  flex: 1,\n  borderRadius: SCROLLBAR_SIZE,\n  backgroundColor: theme.colors.scrollbar,\n}));\n\nconst Container = styled.div({\n  flex: '1 1 0px',\n  minHeight: 0,\n});\n\ninterface Props {\n  children?: ReactNode;\n}\n\nexport default function ScrollArea({ children }: Props) {\n  return (\n    <Container>\n      <StyledScrollArea>\n        <StyledViewport>{children}</StyledViewport>\n        <StyledScrollbar orientation=\"vertical\">\n          <StyledThumb />\n        </StyledScrollbar>\n      </StyledScrollArea>\n    </Container>\n  );\n}\n","// From: https://github.com/radix-ui/primitives/blob/main/packages/react/scroll-area/src/useHover.ts\n// MIT License\n\n// This code is a fork of `react-aria`'s `useHover` hook. The code in this file are based on code\n// from both `react-aria` and `react-interactions`. Original licensing for each project can be found\n// in the the root directories of each respective repository.\n//\n// @see https://github.com/adobe/react-spectrum/tree/452d1cb6a49f9f493757737edaf2b64014108de6/packages/%40react-aria\n// @see https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\n\nimport * as React from 'react';\n\nexport interface HoverEvent {\n  /** The type of hover event being fired. */\n  type: 'hoverstart' | 'hoverend';\n  /** The pointer type that triggered the hover event. */\n  pointerType: 'mouse' | 'pen';\n  /** The target element of the hover event. */\n  target: HTMLElement;\n}\n\nexport interface HoverEvents {\n  /** Handler that is called when a hover interaction starts. */\n  onHoverStart?(e: HoverEvent): void;\n  /** Handler that is called when a hover interaction ends. */\n  onHoverEnd?(e: HoverEvent): void;\n  /** Handler that is called when the hover state changes. */\n  onHoverChange?(isHovering: boolean): void;\n}\n\nexport interface HoverProps extends HoverEvents {\n  /** Whether the hover events should be disabled. */\n  isDisabled?: boolean;\n}\n\ninterface HoverResult {\n  /** Props to spread on the target element. */\n  hoverProps: React.HTMLAttributes<HTMLElement>;\n  isHovered: boolean;\n}\n\n// iOS fires onPointerEnter twice: once with pointerType=\"touch\" and again with pointerType=\"mouse\".\n// We want to ignore these emulated events so they do not trigger hover behavior.\n// See https://bugs.webkit.org/show_bug.cgi?id=214609.\nlet globalIgnoreEmulatedMouseEvents = false;\nlet hoverCount = 0;\n\nfunction setGlobalIgnoreEmulatedMouseEvents() {\n  globalIgnoreEmulatedMouseEvents = true;\n\n  // Clear globalIgnoreEmulatedMouseEvents after a short timeout. iOS fires onPointerEnter with\n  // pointerType=\"mouse\" immediately after onPointerUp and before onFocus. On other devices that\n  // don't have this quirk, we don't want to ignore a mouse hover sometime in the distant future\n  // because a user previously touched the element.\n  setTimeout(function clearGlobalIgnoreEmulatedMouseEvents() {\n    globalIgnoreEmulatedMouseEvents = false;\n  }, 50);\n}\n\nfunction handleGlobalPointerEvent(event: PointerEvent) {\n  if (event.pointerType === 'touch') {\n    setGlobalIgnoreEmulatedMouseEvents();\n  }\n}\n\nfunction setupGlobalTouchEvents() {\n  if (typeof document === 'undefined') {\n    return;\n  }\n\n  document.addEventListener('pointerup', handleGlobalPointerEvent);\n\n  hoverCount++;\n  return function teardownGlobalTouchEvents() {\n    hoverCount--;\n    if (hoverCount > 0) {\n      return;\n    }\n    document.removeEventListener('pointerup', handleGlobalPointerEvent);\n  };\n}\n\n/**\n * Handles pointer hover interactions for an element. Normalizes behavior\n * across browsers and platforms, and ignores emulated mouse events on touch devices.\n */\nexport function useHover(props: HoverProps = {}): HoverResult {\n  const { onHoverStart, onHoverChange, onHoverEnd, isDisabled } = props;\n\n  const [isHovered, setHovered] = React.useState(false);\n  const state = React.useRef({\n    isHovered: false,\n    ignoreEmulatedMouseEvents: false,\n  }).current;\n\n  React.useEffect(setupGlobalTouchEvents, []);\n\n  const hoverProps = React.useMemo(\n    function getHoverProps() {\n      function triggerHoverStart(\n        event: PointerEvent | React.PointerEvent | MouseEvent | React.MouseEvent,\n        pointerType: 'mouse' | 'pen' | 'touch'\n      ) {\n        if (isDisabled || pointerType === 'touch' || state.isHovered) {\n          return;\n        }\n\n        state.isHovered = true;\n        const target = event.target as HTMLElement;\n\n        if (onHoverStart) {\n          onHoverStart({\n            type: 'hoverstart',\n            target,\n            pointerType,\n          });\n        }\n\n        if (onHoverChange) {\n          onHoverChange(true);\n        }\n\n        setHovered(true);\n      }\n\n      function triggerHoverEnd(\n        event: PointerEvent | React.PointerEvent | MouseEvent | React.MouseEvent,\n        pointerType: 'mouse' | 'pen' | 'touch'\n      ) {\n        if (isDisabled || pointerType === 'touch' || !state.isHovered) {\n          return;\n        }\n\n        state.isHovered = false;\n        const target = event.target as HTMLElement;\n\n        if (onHoverEnd) {\n          onHoverEnd({\n            type: 'hoverend',\n            target,\n            pointerType,\n          });\n        }\n\n        if (onHoverChange) {\n          onHoverChange(false);\n        }\n\n        setHovered(false);\n      }\n\n      const hoverProps: React.HTMLAttributes<HTMLElement> = {\n        onPointerEnter(event: React.PointerEvent<HTMLElement>) {\n          if (globalIgnoreEmulatedMouseEvents && event.pointerType === 'mouse') {\n            return;\n          }\n          triggerHoverStart(event, event.pointerType);\n        },\n        onPointerLeave(event: React.PointerEvent<HTMLElement>) {\n          triggerHoverEnd(event, event.pointerType);\n        },\n      };\n\n      return hoverProps;\n    },\n    [isDisabled, state, onHoverStart, onHoverChange, onHoverEnd]\n  );\n\n  return {\n    hoverProps,\n    isHovered,\n  };\n}","import styled from 'styled-components';\nimport * as RadixContextMenu from '@radix-ui/react-context-menu';\nimport { memo, ReactNode } from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport {\n  SEPARATOR_ITEM,\n  MenuItem,\n  styles,\n  CHECKBOX_WIDTH,\n  CHECKBOX_RIGHT_INSET,\n} from './internal/Menu';\nimport { CheckIcon } from '@radix-ui/react-icons';\nimport { Spacer } from '..';\n\n/* ----------------------------------------------------------------------------\n * Separator\n * ------------------------------------------------------------------------- */\n\nconst SeparatorElement = styled(RadixContextMenu.Separator)(\n  styles.separatorStyle,\n);\n\n/* ----------------------------------------------------------------------------\n * Item\n * ------------------------------------------------------------------------- */\n\nconst ItemElement = styled(RadixContextMenu.Item)(styles.itemStyle);\n\nconst CheckboxItemElement = styled(RadixContextMenu.CheckboxItem)(\n  styles.itemStyle,\n);\n\ninterface ContextMenuItemProps {\n  children: ReactNode;\n  onSelect: () => void;\n  checked: boolean;\n  indented: boolean;\n}\n\nconst StyledItemIndicator = styled(RadixContextMenu.ItemIndicator)(\n  styles.itemIndicatorStyle,\n);\n\nconst ContextMenuItem = memo(function ContextMenuItem({\n  indented,\n  checked,\n  children,\n  onSelect,\n}: ContextMenuItemProps) {\n  if (checked) {\n    return (\n      <CheckboxItemElement checked={checked} onSelect={onSelect}>\n        <StyledItemIndicator>\n          <CheckIcon />\n        </StyledItemIndicator>\n        {children}\n      </CheckboxItemElement>\n    );\n  } else {\n    return (\n      <ItemElement onSelect={onSelect}>\n        {indented && (\n          <Spacer.Horizontal size={CHECKBOX_WIDTH - CHECKBOX_RIGHT_INSET} />\n        )}\n        {children}\n      </ItemElement>\n    );\n  }\n});\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst RootElement = styled(RadixContextMenu.Content)(styles.contentStyle);\n\ninterface Props<T extends string> {\n  children: ReactNode;\n  items: MenuItem<T>[];\n  onSelect?: (value: T) => void;\n}\n\nfunction ContextMenuRoot<T extends string>({\n  items,\n  children,\n  onSelect,\n}: Props<T>) {\n  const hasCheckedItem = items.some(\n    (item) => item !== SEPARATOR_ITEM && item.checked,\n  );\n\n  return (\n    <RadixContextMenu.Root>\n      <RadixContextMenu.Trigger as={Slot}>{children}</RadixContextMenu.Trigger>\n      <RootElement>\n        {items.map((item, index) =>\n          item === SEPARATOR_ITEM ? (\n            <SeparatorElement key={index} />\n          ) : (\n            <ContextMenuItem\n              key={item.value}\n              indented={hasCheckedItem}\n              checked={item.checked ?? false}\n              onSelect={() => onSelect?.(item.value)}\n            >\n              {item.title}\n            </ContextMenuItem>\n          ),\n        )}\n      </RootElement>\n    </RadixContextMenu.Root>\n  );\n}\n\nexport default memo(ContextMenuRoot);\n","import { Children, cloneElement, isValidElement, ReactNode } from 'react';\n\nfunction createKey(key: string | number) {\n  return `s-${key}`;\n}\n\nexport default function withSeparatorElements(\n  elements: ReactNode,\n  separator: ReactNode | (() => ReactNode),\n) {\n  const childrenArray = Children.toArray(elements);\n\n  for (let i = childrenArray.length - 1; i > 0; i--) {\n    let sep =\n      typeof separator === 'function'\n        ? separator()\n        : isValidElement(separator)\n        ? cloneElement(separator, { key: createKey(i) })\n        : separator;\n\n    if (isValidElement(sep) && sep.key == null) {\n      sep = cloneElement(sep, { key: createKey(i) });\n    }\n\n    childrenArray.splice(i, 0, sep);\n  }\n\n  return childrenArray;\n}\n","import { createContext, useContext, useEffect } from 'react';\n\nexport type GlobalInputBlurContextValue = {\n  addListener: (f: () => void) => void;\n  removeListener: (f: () => void) => void;\n  trigger: () => void;\n};\n\nconst defaultValue = (() => {\n  const listeners: (() => void)[] = [];\n\n  const value: GlobalInputBlurContextValue = {\n    addListener(f) {\n      listeners.push(f);\n    },\n    removeListener(f) {\n      const index = listeners.indexOf(f);\n      if (index === -1) return;\n      listeners.splice(index, 1);\n    },\n    trigger() {\n      listeners.forEach((f) => {\n        f();\n      });\n    },\n  };\n\n  return value;\n})();\n\nconst GlobalInputBlurContext = createContext<GlobalInputBlurContextValue>(\n  defaultValue,\n);\n\nexport const GlobalInputBlurProvider = GlobalInputBlurContext.Provider;\n\n/**\n * Some components store their editable state internally.\n * We trigger this event before selection changes so that they can commit their\n * edits before they unmount. This is more manual but simpler than doing so during\n * the unmount phase (e.g. the return function of `useEffect`), since handlers are\n * guaranteed to be called with the current data.\n */\nexport const useGlobalInputBlur = (): GlobalInputBlurContextValue => {\n  return useContext(GlobalInputBlurContext);\n};\n\nexport function useGlobalInputBlurListener(f: () => void) {\n  const context = useGlobalInputBlur();\n\n  useEffect(() => {\n    context.addListener(f);\n\n    return () => {\n      context.removeListener(f);\n    };\n  }, [context, f]);\n}\n\nexport function useGlobalInputBlurTrigger() {\n  return useGlobalInputBlur().trigger;\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { memo, useMemo } from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport { useObjectURL } from '../hooks/useObjectURL';\nimport { useSketchImage } from 'noya-renderer';\nimport { getGradientBackground } from '../utils/getGradientBackground';\nimport { sketchColorToRgbaString } from '../utils/sketchColor';\nimport { SketchPattern } from '../utils/sketchPattern';\n\nconst dotsHorizontalSvg = (fillColor: string) => `\n  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15' fill='${fillColor}'>\n    <path d='M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z'></path>\n  </svg>\n`;\n\nconst Background = styled.span<{ background: string }>(({ background }) => ({\n  background,\n  position: 'absolute',\n  inset: 0,\n}));\n\nconst HorizontalDotsBackground = memo(function HorizontalDotsBackground() {\n  const { inputBackground, placeholderDots } = useTheme().colors;\n\n  const background = useMemo(\n    () =>\n      [\n        `center url(\"data:image/svg+xml;utf8,${dotsHorizontalSvg(\n          placeholderDots,\n        )}\") no-repeat`,\n        inputBackground,\n      ].join(','),\n    [inputBackground, placeholderDots],\n  );\n\n  return <Background background={background} />;\n});\n\nfunction getPatternSizeAndPosition(\n  fillType: Sketch.PatternFillType,\n  tileScale: number,\n) {\n  switch (fillType) {\n    case Sketch.PatternFillType.Fit:\n      return 'center / contain';\n    case Sketch.PatternFillType.Tile:\n      return `top left / ${tileScale * 100}%`;\n    case Sketch.PatternFillType.Fill:\n      return 'center / cover';\n    case Sketch.PatternFillType.Stretch:\n      return 'center / 100% 100%';\n  }\n}\n\nexport const PatternPreviewBackground = memo(function PatternPreviewBackground({\n  fillType,\n  tileScale,\n  imageRef,\n}: {\n  fillType: Sketch.PatternFillType;\n  tileScale: number;\n  imageRef: Sketch.FileRef | Sketch.DataRef;\n}) {\n  const image = useSketchImage(imageRef);\n\n  const url = useObjectURL(image);\n\n  const size = getPatternSizeAndPosition(fillType, tileScale);\n\n  const background = useMemo(\n    () =>\n      [\n        size,\n        `url(${url})`,\n        fillType === Sketch.PatternFillType.Tile ? 'repeat' : 'no-repeat',\n      ].join(' '),\n    [fillType, size, url],\n  );\n\n  return <Background background={background} />;\n});\n\nconst ColorPreviewBackground = memo(function ColorPreviewBackground({\n  color,\n}: {\n  color: Sketch.Color;\n}) {\n  const background = useMemo(() => sketchColorToRgbaString(color), [color]);\n\n  return <Background background={background} />;\n});\n\nconst GradientPreviewBackground = memo(function GradientPreviewBackground({\n  gradient,\n}: {\n  gradient: Sketch.Gradient;\n}) {\n  const background = useMemo(\n    () => getGradientBackground(gradient.stops, gradient.gradientType, 180),\n    [gradient.gradientType, gradient.stops],\n  );\n\n  return <Background background={background} />;\n});\n\ninterface Props {\n  value?: Sketch.Color | Sketch.Gradient | SketchPattern;\n}\n\nexport const FillPreviewBackground = memo(function FillPreviewBackground({\n  value,\n}: Props) {\n  if (!value) return <HorizontalDotsBackground />;\n\n  switch (value._class) {\n    case 'color':\n      return <ColorPreviewBackground color={value} />;\n    case 'gradient':\n      return <GradientPreviewBackground gradient={value} />;\n    case 'pattern':\n      if (!value.image) return null;\n\n      return (\n        <PatternPreviewBackground\n          fillType={value.patternFillType}\n          tileScale={value.patternTileScale}\n          imageRef={value.image}\n        />\n      );\n  }\n});\n","import { useLayoutEffect, useMemo } from 'react';\n\nexport function useObjectURL(object?: ArrayBuffer | Uint8Array | Blob) {\n  const objectURL = useMemo(() => {\n    if (object instanceof Blob) return URL.createObjectURL(object);\n\n    const bytes =\n      object instanceof Uint8Array\n        ? object\n        : object !== undefined\n        ? new Uint8Array(object)\n        : new Uint8Array();\n\n    return URL.createObjectURL(new Blob([bytes]));\n  }, [object]);\n\n  useLayoutEffect(() => {\n    return () => URL.revokeObjectURL(objectURL);\n  }, [objectURL]);\n\n  return objectURL;\n}\n","import { Paint, Path } from 'canvaskit';\nimport { createElement, memo, useMemo } from 'react';\nimport usePaint from '../hooks/usePaint';\nimport { PathComponentProps } from '../types';\n\ninterface PathProps {\n  path: Path;\n  paint: Paint;\n}\n\nexport default memo(function Path(props: PathProps) {\n  const paint = usePaint(props.paint);\n\n  const elementProps: PathComponentProps = useMemo(\n    () => ({\n      paint,\n      path: props.path,\n    }),\n    [paint, props.path],\n  );\n\n  return createElement('Path', elementProps);\n});\n","// Some snippets adapted from udevbe/react-canvaskit (MIT License)\n// https://github.com/udevbe/react-canvaskit/blob/459c6d804e18b4e6603acc370c961c77244b552f/react-canvaskit/src/ReactCanvasKit.tsx\n\nimport { Canvas, CanvasKit, Surface } from 'canvaskit';\nimport type { ReactNode } from 'react';\nimport type { HostConfig } from 'react-reconciler';\nimport ReactReconciler from 'react-reconciler';\nimport {\n  AnyElementInstance,\n  AnyElementProps,\n  ElementInstance,\n  ElementType,\n  ElementTypeMap,\n} from './types';\n\ndeclare module 'canvaskit' {\n  interface Surface {\n    flush(): void;\n    _id: number;\n  }\n}\n\nexport type PublicInstance = AnyElementInstance;\n\ntype ChildSet = AnyElementInstance[];\n\nfunction isContainerElement(\n  element: AnyElementInstance,\n): element is ElementInstance<'Group'> {\n  return element.type === 'Group';\n}\n\nfunction createElementInstance<K extends keyof ElementTypeMap>(\n  type: K,\n  props: ElementTypeMap[K]['props'],\n): ElementTypeMap[K] {\n  const instance = ({ type, props } as unknown) as ElementTypeMap[K];\n\n  if (isContainerElement(instance)) {\n    instance._elements = [];\n  }\n\n  return instance;\n}\n\ninterface ReactCanvasKitContext {\n  CanvasKit: CanvasKit;\n  canvas: Canvas;\n}\n\ninterface RootComponent {\n  context: ReactCanvasKitContext;\n  surface: Surface;\n  children: ElementInstance<ElementType>[];\n}\n\ninterface ReactCanvasKitHostConfig\n  extends HostConfig<\n    ElementType, // Type\n    AnyElementProps, // Props\n    RootComponent, // Container\n    AnyElementInstance, // Instance\n    ElementInstance<'Text'>, // TextInstance\n    any, // SuspenseInstance\n    any, // HydratableInstance\n    PublicInstance, // PublicInstance\n    ReactCanvasKitContext, // HostContext\n    any, // UpdatePayload\n    ChildSet, // _ChildSet\n    any, // TimeoutHandle\n    any // NoTimeout\n  > {}\n\n// https://github.com/facebook/react/blob/master/packages/react-reconciler/README.md\nconst hostConfig: ReactCanvasKitHostConfig = {\n  scheduleTimeout: setTimeout,\n  cancelTimeout: clearTimeout,\n  noTimeout: -1,\n  queueMicrotask:\n    typeof queueMicrotask !== 'undefined' ? queueMicrotask : setTimeout,\n  now: (typeof performance !== 'undefined' ? performance : Date).now,\n  supportsMutation: false,\n  supportsPersistence: true,\n  supportsHydration: false,\n  isPrimaryRenderer: false,\n\n  preparePortalMount: () => {},\n\n  createContainerChildSet(\n    _container: RootComponent,\n  ): ElementInstance<ElementType>[] {\n    return [];\n  },\n\n  appendChildToContainerChildSet(\n    childSet: ChildSet,\n    child: ElementInstance<ElementType>,\n  ) {\n    childSet.push(child);\n  },\n\n  replaceContainerChildren(container: RootComponent, newChildren: ChildSet) {\n    container.children = newChildren;\n  },\n\n  getRootHostContext(\n    rootContainerInstance: RootComponent,\n  ): ReactCanvasKitContext {\n    return rootContainerInstance.context;\n  },\n\n  /**\n   * This function provides a way to access context from the parent and also a way to pass some context to the immediate\n   * children of the current node. Context is basically a regular object containing some information.\n   *\n   * @param parentHostContext Context from parent. Example: This will contain rootContext for the immediate child of\n   * roothost.\n   * @param type This contains the type of fiber i.e, div, span, p, input etc.\n   * @param rootContainerInstance rootInstance is basically the root dom node you specify while calling render. This is\n   * most commonly <div id=\"root\"></div>\n   * @return A context object that you wish to pass to immediate child.\n   */\n  getChildHostContext(\n    parentHostContext,\n    type,\n    rootContainerInstance,\n  ): ReactCanvasKitContext {\n    return parentHostContext;\n  },\n\n  /**\n   * If the function returns true, the text would be created inside the host element and no new text element would be\n   * created separately.\n   *\n   * If this returned true, the next call would be to createInstance for the current element and traversal would stop at\n   * this node (children of this element wont be traversed).\n   *\n   * If it returns false, getChildHostContext and shouldSetTextContent will be called on the child elements and it will\n   * continue till shouldSetTextContent returns true or if the recursion reaches the last tree endpoint which usually is\n   * a text node. When it reaches the last leaf text node it will call createTextInstance\n   *\n   * @param type This contains the type of fiber i.e, div, span, p, input etc.\n   * @param props Contains the props passed to the host react element.\n   * @return This should be a boolean value.\n   */\n  shouldSetTextContent(type, props): boolean {\n    return type === 'Text';\n  },\n\n  /**\n   * Here we specify how should renderer handle the text content\n   *\n   * @param text contains the text string that needs to be rendered.\n   * @param rootContainerInstance root dom node you specify while calling render. This is most commonly\n   * <div id=\"root\"></div>\n   * @param hostContext contains the context from the host node enclosing this text node. For example, in the case of\n   * <p>Hello</p>: currentHostContext for Hello text node will be host context of p.\n   * @param internalInstanceHandle The fiber node for the text instance. This manages work for this instance.\n   * @return This should be an actual text view element. In case of dom it would be a textNode.\n   */\n  createTextInstance(\n    text,\n    rootContainerInstance,\n    hostContext,\n    internalInstanceHandle,\n  ): ElementInstance<'Text'> {\n    throw new Error(`Using plain strings as elements isn't supported yet`);\n  },\n\n  /**\n   * Create instance is called on all host nodes except the leaf text nodes. So we should return the correct view\n   * element for each host type here. We are also supposed to take care of the props sent to the host element. For\n   * example: setting up onClickListeners or setting up styling etc.\n   *\n   * @param type This contains the type of fiber i.e, div, span, p, input etc.\n   * @param props  Contains the props passed to the host react element.\n   * @param rootContainerInstance Root dom node you specify while calling render. This is most commonly <div id=\"root\"></div>\n   * @param hostContext contains the context from the parent node enclosing this node. This is the return value from getChildHostContext of the parent node.\n   * @param internalInstanceHandle The fiber node for the text instance. This manages work for this instance.\n   */\n  createInstance(\n    type,\n    props,\n    rootContainerInstance,\n    hostContext,\n    internalInstanceHandle,\n  ) {\n    return createElementInstance(type, props);\n  },\n\n  /**\n   * Here we will attach the child dom node to the parent on the initial render phase. This method will be called for\n   * each child of the current node.\n   *\n   * @param parentInstance The current node in the traversal\n   * @param child The child dom node of the current node.\n   */\n  appendInitialChild(parentInstance, child) {\n    if (isContainerElement(parentInstance)) {\n      parentInstance._elements.push(child);\n      // console.log('parent', parentInstance, child);\n      // parentInstance.children.push(child);\n    } else {\n      throw new Error(\n        `Bug? Trying to append a child to a parent that is not a container. ${child.type}`,\n      );\n    }\n  },\n\n  /**\n   * In case of react native renderer, this function does nothing but return false.\n   *\n   * In case of react-dom, this adds default dom properties such as event listeners, etc.\n   * For implementing auto focus for certain input elements (autofocus can happen only\n   * after render is done), react-dom sends return type as true. This results in commitMount\n   * method for this element to be called. The commitMount will be called only if an element\n   * returns true in finalizeInitialChildren and after the all elements of the tree has been\n   * rendered (even after resetAfterCommit).\n   *\n   * @param parentInstance The instance is the dom element after appendInitialChild.\n   * @param type This contains the type of fiber i.e, div, span, p, input etc.\n   * @param props Contains the props passed to the host react element.\n   * @param rootContainerInstance root dom node you specify while calling render. This is most commonly <div id=\"root\"></div>\n   * @param hostContext contains the context from the parent node enclosing this node. This is the return value from getChildHostContext of the parent node.\n   */\n  finalizeInitialChildren(\n    parentInstance,\n    type,\n    props,\n    rootContainerInstance,\n    hostContext,\n  ) {\n    return false;\n  },\n\n  finalizeContainerChildren(container: RootComponent, newChildren: ChildSet) {},\n\n  /**\n   * This function is called when we have made a in-memory render tree of all the views (Remember we are yet to attach\n   * it the the actual root dom node). Here we can do any preparation that needs to be done on the rootContainer before\n   * attaching the in memory render tree. For example: In the case of react-dom, it keeps track of all the currently\n   * focused elements, disabled events temporarily, etc.\n   *\n   * @param containerInfo root dom node you specify while calling render. This is most commonly <div id=\"root\"></div>\n   */\n  prepareForCommit(containerInfo: RootComponent) {\n    return null;\n  },\n\n  /**\n   * This function gets executed after the inmemory tree has been attached to the root dom element. Here we can do any\n   * post attach operations that needs to be done. For example: react-dom re-enabled events which were temporarily\n   * disabled in prepareForCommit and refocuses elements, etc.\n   *\n   * @param containerInfo root dom node you specify while calling render. This is most commonly <div id=\"root\"></div>\n   */\n  resetAfterCommit(containerInfo) {\n    try {\n      const {\n        context: { CanvasKit, canvas },\n      } = containerInfo;\n\n      const draw = (element: AnyElementInstance) => {\n        switch (element.type) {\n          case 'Rect': {\n            const { rect, cornerRadius, paint } = element.props;\n\n            if (cornerRadius) {\n              const roundedRect = new Float32Array(12);\n              roundedRect.set(rect);\n              roundedRect.fill(cornerRadius, 4);\n              canvas.drawRRect(roundedRect, paint);\n            } else {\n              canvas.drawRect(rect, paint);\n            }\n\n            break;\n          }\n          case 'Path': {\n            const { path, paint } = element.props;\n            canvas.drawPath(path, paint);\n            break;\n          }\n          case 'Image': {\n            const { rect, image, paint } = element.props;\n            canvas.drawImageRectCubic(\n              image,\n              CanvasKit.XYWHRect(0, 0, image.width(), image.height()),\n              rect,\n              0,\n              0,\n              paint,\n            );\n            break;\n          }\n          case 'Text':\n            const { rect, paragraph } = element.props;\n\n            canvas.drawParagraph(paragraph, rect[0], rect[1]);\n\n            break;\n          case 'Group': {\n            const {\n              transform,\n              opacity,\n              clip,\n              colorFilter,\n              imageFilter,\n            } = element.props;\n\n            const saveCount = canvas.getSaveCount();\n\n            canvas.save();\n\n            if (clip) {\n              if (clip.path instanceof Float32Array) {\n                canvas.clipRect(clip.path, clip.op, clip.antiAlias ?? true);\n              } else {\n                canvas.clipPath(clip.path, clip.op, clip.antiAlias ?? true);\n              }\n            }\n\n            if (transform) {\n              canvas.concat(transform);\n            }\n\n            // If we need to apply effects to the group as a whole, we need\n            // to draw the elements on a separate bitmap using `saveLayer`\n            const needsLayer = opacity < 1 || colorFilter || imageFilter;\n\n            if (needsLayer) {\n              const layerPaint = new CanvasKit.Paint();\n\n              if (opacity < 1) {\n                layerPaint.setAlphaf(opacity);\n              }\n\n              if (colorFilter) {\n                layerPaint.setColorFilter(colorFilter);\n              }\n\n              if (imageFilter) {\n                layerPaint.setImageFilter(imageFilter);\n              }\n\n              canvas.saveLayer(layerPaint);\n            }\n\n            element._elements.forEach(draw);\n\n            canvas.restoreToCount(saveCount);\n            break;\n          }\n          // default:\n          //   throw new Error(`Draw not handled for '${element.type}'`);\n        }\n      };\n\n      containerInfo.children.forEach(draw);\n\n      if (!containerInfo.surface.isDeleted()) {\n        containerInfo.surface.flush();\n      }\n    } catch (e) {\n      console.warn('noya-react-canvaskit error!', e);\n    }\n  },\n\n  getPublicInstance(instance: AnyElementInstance): PublicInstance {\n    return instance;\n  },\n\n  prepareUpdate(\n    instance,\n    type,\n    oldProps,\n    newProps,\n    rootContainerInstance,\n    hostContext,\n  ) {},\n\n  cloneInstance(\n    instance: AnyElementInstance,\n    updatePayload: any,\n    type: ElementType,\n    oldProps: AnyElementProps,\n    newProps: AnyElementProps,\n    internalInstanceHandle: unknown,\n    keepChildren: boolean,\n    recyclableInstance: AnyElementInstance,\n  ): AnyElementInstance {\n    const element = createElementInstance(type, newProps);\n\n    if (\n      keepChildren &&\n      isContainerElement(element) &&\n      isContainerElement(instance)\n    ) {\n      element._elements = instance._elements;\n    }\n\n    return element;\n  },\n};\n\nconst canvaskitReconciler = ReactReconciler(hostConfig);\n\ncanvaskitReconciler.injectIntoDevTools({\n  bundleType: 1, // 0 for PROD, 1 for DEV\n  version: '0.0.1', // version for your renderer\n  rendererPackageName: 'react-canvaskit', // package name\n});\n\ntype ExtendedSurface = Surface & { _container: any };\n\nfunction getContainerForSurface(\n  surface: Surface,\n  context: ReactCanvasKitContext,\n) {\n  let extendedSurface = surface as ExtendedSurface;\n\n  if (!extendedSurface._container) {\n    const root: RootComponent = { surface, context, children: [] };\n    const container = canvaskitReconciler.createContainer(root, 2, false, null);\n\n    extendedSurface._container = container;\n  }\n\n  return extendedSurface._container;\n}\n\nexport function render(\n  element: ReactNode,\n  surface: Surface,\n  CanvasKit: CanvasKit,\n  callback?: () => void,\n) {\n  const context = {\n    CanvasKit,\n    canvas: surface.getCanvas(),\n  };\n\n  const container = getContainerForSurface(surface, context);\n\n  canvaskitReconciler.updateContainer(element, container, null, () => {\n    callback?.();\n  });\n}\n\nexport function unmount(surface: Surface, callback?: () => void) {\n  const container = (surface as ExtendedSurface)._container;\n\n  canvaskitReconciler.updateContainer(null, container, null, () => {\n    callback?.();\n  });\n}\n","/**\n * This fixes a bundling issue where `exports` isn't defined in the production\n * build, and as a result the required module doesn't load correctly.\n *\n * Since the module also looks for an amd `define` function, we can get access\n * to the exports that way in a production build.\n */\nexport function emscriptenRequireInterop<T>(requireFunction: () => T) {\n  return new Promise<T>((resolve) => {\n    function amdDefine(_deps: unknown[], thunk: () => T) {\n      resolve(thunk());\n    }\n\n    amdDefine['amd'] = true;\n\n    (window as any).define = amdDefine;\n\n    const result = requireFunction();\n\n    // If the result is a function, call it.\n    // Otherwise, we wait for the amdDefine to resolve.\n    if (typeof result === 'function') {\n      resolve(result);\n    }\n  });\n}\n","import { emscriptenRequireInterop } from './emscriptenRequireInterop';\n\n// Minimum TypeScript Version: 3.7\nexport async function CanvasKitInit(\n  opts: CanvasKitInitOptions,\n): Promise<CanvasKit> {\n  const init = await emscriptenRequireInterop<typeof CanvasKitInit>(() =>\n    require('./canvaskit.js'),\n  );\n\n  return init(opts);\n}\n\nexport interface CanvasKitInitOptions {\n    /**\n     * This callback will be invoked when the CanvasKit loader needs to fetch a file (e.g.\n     * the blob of WASM code). The correct url prefix should be applied.\n     * @param file - the name of the file that is about to be loaded.\n     */\n    locateFile(file: string): string;\n}\n\nexport interface CanvasKit {\n    // Helpers\n    /**\n     * Constructs a Color with the same API as CSS's rgba(), that is\n     * Internally, Colors are four unpremultiplied 32-bit floats: r, g, b, a.\n     * In order to construct one with more precision or in a wider gamut,\n     * use CanvasKit.Color4f().\n     *\n     * @param r - red value, clamped to [0, 255].\n     * @param g - green value, clamped to [0, 255].\n     * @param b - blue value, clamped to [0, 255].\n     * @param a - alpha value, from 0 to 1.0. By default is 1.0 (opaque).\n     */\n    Color(r: number, g: number, b: number, a?: number): Color;\n\n    /**\n     * Construct a 4-float color. Float values are typically between 0.0 and 1.0.\n     * @param r - red value.\n     * @param g - green value.\n     * @param b - blue value.\n     * @param a - alpha value. By default is 1.0 (opaque).\n     */\n    Color4f(r: number, g: number, b: number, a?: number): Color;\n\n    /**\n     * Constructs a Color as a 32 bit unsigned integer, with 8 bits assigned to each channel.\n     * Channels are expected to be between 0 and 255 and will be clamped as such.\n     * If a is omitted, it will be 255 (opaque).\n     *\n     * This is not the preferred way to use colors in Skia APIs, use Color or Color4f.\n     * @param r - red value, clamped to [0, 255].\n     * @param g - green value, clamped to [0, 255].\n     * @param b - blue value, clamped to [0, 255].\n     * @param a - alpha value, from 0 to 1.0. By default is 1.0 (opaque).\n     */\n    ColorAsInt(r: number, g: number, b: number, a?: number): ColorInt;\n\n    /**\n     * Returns a css style [r, g, b, a] where r, g, b are returned as\n     * ints in the range [0, 255] and where a is scaled between 0 and 1.0.\n     * [Deprecated] - this is trivial now that Color is 4 floats.\n     */\n    getColorComponents(c: Color): number[];\n\n    /**\n     * Takes in a CSS color value and returns a CanvasKit.Color\n     * (which is an array of 4 floats in RGBA order). An optional colorMap\n     * may be provided which maps custom strings to values.\n     * In the CanvasKit canvas2d shim layer, we provide this map for processing\n     * canvas2d calls, but not here for code size reasons.\n     */\n    parseColorString(color: string, colorMap?: object): Color;\n\n    /**\n     * Returns a copy of the passed in color with a new alpha value applied.\n     * [Deprecated] - this is trivial now that Color is 4 floats.\n     */\n    multiplyByAlpha(c: Color, alpha: number): Color;\n\n    /**\n     * Computes color values for one-pass tonal alpha.\n     * Note, if malloced colors are passed in, the memory pointed at by the MallocObj\n     * will be overwritten with the computed tonal colors (and thus the return val can be\n     * ignored).\n     * @param colors\n     */\n    computeTonalColors(colors: TonalColorsInput): TonalColorsOutput;\n\n    /**\n     * Returns a rectangle with the given paramaters. See Rect.h for more.\n     * @param left - The x coordinate of the upper-left corner.\n     * @param top  - The y coordinate of the upper-left corner.\n     * @param right - The x coordinate of the lower-right corner.\n     * @param bottom - The y coordinate of the lower-right corner.\n     */\n    LTRBRect(left: number, top: number, right: number, bottom: number): Rect;\n\n    /**\n     * Returns a rectangle with the given paramaters. See Rect.h for more.\n     * @param x - The x coordinate of the upper-left corner.\n     * @param y  - The y coordinate of the upper-left corner.\n     * @param width - The width of the rectangle.\n     * @param height - The height of the rectangle.\n     */\n    XYWHRect(x: number, y: number, width: number, height: number): Rect;\n\n    /**\n     * Returns a rectangle with the given integer paramaters. See Rect.h for more.\n     * @param left - The x coordinate of the upper-left corner.\n     * @param top  - The y coordinate of the upper-left corner.\n     * @param right - The x coordinate of the lower-right corner.\n     * @param bottom - The y coordinate of the lower-right corner.\n     */\n    LTRBiRect(left: number, top: number, right: number, bottom: number): IRect;\n\n    /**\n     * Returns a rectangle with the given paramaters. See Rect.h for more.\n     * @param x - The x coordinate of the upper-left corner.\n     * @param y  - The y coordinate of the upper-left corner.\n     * @param width - The width of the rectangle.\n     * @param height - The height of the rectangle.\n     */\n    XYWHiRect(x: number, y: number, width: number, height: number): IRect;\n\n    /**\n     * Returns a rectangle with rounded corners consisting of the given rectangle and\n     * the same radiusX and radiusY for all four corners.\n     * @param rect - The base rectangle.\n     * @param rx - The radius of the corners in the x direction.\n     * @param ry - The radius of the corners in the y direction.\n     */\n    RRectXY(rect: InputRect, rx: number, ry: number): RRect;\n\n    /**\n     * Generate bounding box for shadows relative to path. Includes both the ambient and spot\n     * shadow bounds. This pairs with Canvas.drawShadow().\n     * See SkShadowUtils.h for more details.\n     * @param ctm - Current transformation matrix to device space.\n     * @param path - The occluder used to generate the shadows.\n     * @param zPlaneParams - Values for the plane function which returns the Z offset of the\n     *                       occluder from the canvas based on local x and y values (the current\n     *                       matrix is not applied).\n     * @param lightPos - The 3D position of the light relative to the canvas plane. This is\n     *                   independent of the canvas's current matrix.\n     * @param lightRadius - The radius of the disc light.\n     * @param flags - See SkShadowFlags.h; 0 means use default options.\n     * @param dstRect - if provided, the bounds will be copied into this rect instead of allocating\n     *                  a new one.\n     * @returns The bounding rectangle or null if it could not be computed.\n     */\n    getShadowLocalBounds(ctm: InputMatrix, path: Path, zPlaneParams: InputVector3,\n                         lightPos: InputVector3, lightRadius: number, flags: number,\n                         dstRect?: Rect): Rect | null;\n\n    /**\n     * Malloc returns a TypedArray backed by the C++ memory of the\n     * given length. It should only be used by advanced users who\n     * can manage memory and initialize values properly. When used\n     * correctly, it can save copying of data between JS and C++.\n     * When used incorrectly, it can lead to memory leaks.\n     * Any memory allocated by CanvasKit.Malloc needs to be released with CanvasKit.Free.\n     *\n     * const mObj = CanvasKit.Malloc(Float32Array, 20);\n     * Get a TypedArray view around the malloc'd memory (this does not copy anything).\n     * const ta = mObj.toTypedArray();\n     * // store data into ta\n     * const cf = CanvasKit.ColorFilter.MakeMatrix(ta); // mObj could also be used.\n     *\n     * // eventually...\n     * CanvasKit.Free(mObj);\n     *\n     * @param typedArray - constructor for the typedArray.\n     * @param len - number of *elements* to store.\n     */\n    Malloc(typedArray: TypedArrayConstructor, len: number): MallocObj;\n\n    /**\n     * As Malloc but for GlyphIDs. This helper exists to make sure the JS side and the C++ side\n     * stay in agreement with how wide GlyphIDs are.\n     * @param len - number of GlyphIDs to make space for.\n     */\n    MallocGlyphIDs(len: number): MallocObj;\n\n    /**\n     * Free frees the memory returned by Malloc.\n     * Any memory allocated by CanvasKit.Malloc needs to be released with CanvasKit.Free.\n     */\n    Free(m: MallocObj): void;\n\n    // Surface related functions\n    /**\n     * Creates a Surface on a given canvas. If both GPU and CPU modes have been compiled in, this\n     * will first try to create a GPU surface and then fallback to a CPU one if that fails. If just\n     * the CPU mode has been compiled in, a CPU surface will be created.\n     * @param canvas - either the canvas element itself or a string with the DOM id of it.\n     */\n    MakeCanvasSurface(canvas: HTMLCanvasElement | string): Surface | null;\n\n    /**\n     * Creates a Raster (CPU) Surface that will draw into the provided Malloc'd buffer. This allows\n     * clients to efficiently be able to read the current pixels w/o having to copy.\n     * The length of pixels must be at least height * bytesPerRow bytes big.\n     * @param ii\n     * @param pixels\n     * @param bytesPerRow - How many bytes are per row. This is at least width * bytesPerColorType. For example,\n     *                      an 8888 ColorType has 4 bytes per pixel, so a 5 pixel wide 8888 surface needs at least\n     *                      5 * 4 = 20 bytesPerRow. Some clients may have more than the usual to make the data line\n     *                      up with a particular multiple.\n     */\n    MakeRasterDirectSurface(ii: ImageInfo, pixels: MallocObj, bytesPerRow: number): Surface | null;\n\n    /**\n     * Creates a CPU backed (aka raster) surface.\n     * @param canvas - either the canvas element itself or a string with the DOM id of it.\n     */\n    MakeSWCanvasSurface(canvas: HTMLCanvasElement | string): Surface | null;\n\n    /**\n     * A helper for creating a WebGL backed (aka GPU) surface and falling back to a CPU surface if\n     * the GPU one cannot be created. This works for both WebGL 1 and WebGL 2.\n     * @param canvas - Either the canvas element itself or a string with the DOM id of it.\n     * @param colorSpace - One of the supported color spaces. Default is SRGB.\n     * @param opts - Options that will get passed to the creation of the WebGL context.\n     */\n    MakeWebGLCanvasSurface(canvas: HTMLCanvasElement | string, colorSpace?: ColorSpace,\n                           opts?: WebGLOptions): Surface | null;\n\n    /**\n     * Returns a CPU backed surface with the given dimensions, an SRGB colorspace, Unpremul\n     * alphaType and 8888 color type. The pixels belonging to this surface  will be in memory and\n     * not visible.\n     * @param width - number of pixels of the width of the drawable area.\n     * @param height - number of pixels of the height of the drawable area.\n     */\n    MakeSurface(width: number, height: number): Surface | null;\n\n    /**\n     * Creates a WebGL Context from the given canvas with the given options. If options are omitted,\n     * sensible defaults will be used.\n     * @param canvas\n     * @param opts\n     */\n    GetWebGLContext(canvas: HTMLCanvasElement, opts?: WebGLOptions): WebGLContextHandle;\n\n    /**\n     * Creates a GrDirectContext from the given WebGL Context.\n     * @param ctx\n     */\n    MakeGrContext(ctx: WebGLContextHandle): GrDirectContext;\n\n    /**\n     * Creates a Surface that will be drawn to the given GrDirectContext (and show up on screen).\n     * @param ctx\n     * @param width - number of pixels of the width of the visible area.\n     * @param height - number of pixels of the height of the visible area.\n     * @param colorSpace\n     */\n    MakeOnScreenGLSurface(ctx: GrDirectContext, width: number, height: number,\n                          colorSpace: ColorSpace): Surface | null;\n\n    /**\n     * Returns a (non-visible) Surface on the GPU. It has the given dimensions and uses 8888\n     * color depth and premultiplied alpha. See Surface.h for more details.\n     * @param ctx\n     * @param width\n     * @param height\n     */\n    MakeRenderTarget(ctx: GrDirectContext, width: number, height: number): Surface | null;\n\n    /**\n     * Returns a (non-visible) Surface on the GPU. It has the settings provided by image info.\n     * See Surface.h for more details.\n     * @param ctx\n     * @param info\n     */\n    MakeRenderTarget(ctx: GrDirectContext, info: ImageInfo): Surface | null;\n\n    /**\n     * Returns the current WebGLContext that the wasm code is configured to draw to. It is\n     * recommended to capture this value after creating a new WebGL surface if there are multiple\n     * surfaces on the screen.\n     */\n    currentContext(): WebGLContextHandle;\n\n    /**\n     * Sets the WebGLContext that the wasm code will draw to.\n     *\n     * When a WebGL call is made on the C++ side, it is routed to the JS side to target a specific\n     * WebGL context. WebGL calls are methods on a WebGL context, so CanvasKit needs to know which\n     * context to send the calls to.\n     * @param ctx\n     */\n    setCurrentContext(ctx: WebGLContextHandle): void;\n\n    /**\n     * Deletes the associated WebGLContext. Function not available on the CPU version.\n     * @param ctx\n     */\n    deleteContext(ctx: WebGLContextHandle): void;\n\n    /**\n     * Returns the max size of the global cache for bitmaps used by CanvasKit.\n     */\n    getDecodeCacheLimitBytes(): number;\n    /**\n     * Returns the current size of the global cache for bitmaps used by CanvasKit.\n     */\n    getDecodeCacheUsedBytes(): number;\n\n    /**\n     * Sets the max size of the global cache for bitmaps used by CanvasKit.\n     * @param size - number of bytes that can be used to cache bitmaps.\n     */\n    setDecodeCacheLimitBytes(size: number): void;\n\n    /**\n     * Decodes the given bytes into an animated image. Returns null if the bytes were invalid.\n     * The passed in bytes will be copied into the WASM heap, so the caller can dispose of them.\n     * @param bytes\n     */\n    MakeAnimatedImageFromEncoded(bytes: Uint8Array | ArrayBuffer): AnimatedImage | null;\n\n    /**\n     * Returns an emulated Canvas2D of the given size.\n     * @param width\n     * @param height\n     */\n    MakeCanvas(width: number, height: number): EmulatedCanvas2D;\n\n    /**\n     * Returns an image with the given pixel data and format.\n     * Note that we will always make a copy of the pixel data, because of inconsistencies in\n     * behavior between GPU and CPU (i.e. the pixel data will be turned into a GPU texture and\n     * not modifiable after creation).\n     *\n     * @param info\n     * @param bytes - bytes representing the pixel data.\n     * @param bytesPerRow\n     */\n    MakeImage(info: ImageInfo, bytes: number[] | Uint8Array | Uint8ClampedArray,\n              bytesPerRow: number): Image | null;\n\n    /**\n     * Return an Image backed by the encoded data, but attempt to defer decoding until the image\n     * is actually used/drawn. This deferral allows the system to cache the result, either on the\n     * CPU or on the GPU, depending on where the image is drawn.\n     * This decoding uses the codecs that have been compiled into CanvasKit. If the bytes are\n     * invalid (or an unrecognized codec), null will be returned. See Image.h for more details.\n     * @param bytes\n     */\n    MakeImageFromEncoded(bytes: Uint8Array | ArrayBuffer): Image | null;\n\n    /**\n     * Returns an Image with the data from the provided CanvasImageSource (e.g. <img>). This will\n     * use the browser's built in codecs, in that src will be drawn to a canvas and then readback\n     * and placed into an Image.\n     * @param src\n     */\n    MakeImageFromCanvasImageSource(src: CanvasImageSource): Image;\n\n    /**\n     * Returns an SkPicture which has been serialized previously to the given bytes.\n     * @param bytes\n     */\n    MakePicture(bytes: Uint8Array | ArrayBuffer): SkPicture | null;\n\n    /**\n     * Returns an Vertices based on the given positions and optional parameters.\n     * See SkVertices.h (especially the Builder) for more details.\n     * @param mode\n     * @param positions\n     * @param textureCoordinates\n     * @param colors - either a list of int colors or a flattened color array.\n     * @param indices\n     * @param isVolatile\n     */\n    MakeVertices(mode: VertexMode, positions: InputFlattenedPointArray,\n                 textureCoordinates?: InputFlattenedPointArray | null,\n                 colors?: Float32Array | ColorIntArray | null, indices?: number[] | null,\n                 isVolatile?: boolean): Vertices;\n\n    /**\n     * Returns a Skottie animation built from the provided json string.\n     * Requires that Skottie be compiled into CanvasKit.\n     * @param json\n     */\n    MakeAnimation(json: string): SkottieAnimation;\n\n    /**\n     * Returns a managed Skottie animation built from the provided json string and assets.\n     * Requires that Skottie be compiled into CanvasKit.\n     * @param json\n     * @param assets - a dictionary of named blobs: { key: ArrayBuffer, ... }\n     * @param filterPrefix - an optional string acting as a name filter for selecting \"interesting\"\n     *                       Lottie properties (surfaced in the embedded player controls)\n     * @param soundMap - an optional mapping of sound identifiers (strings) to AudioPlayers.\n     *                   Only needed if the animation supports sound.\n     */\n    MakeManagedAnimation(json: string, assets?: Record<string, ArrayBuffer>,\n                         filterPrefix?: string, soundMap?: SoundMap): ManagedSkottieAnimation;\n\n    /**\n     * Returns a Particles effect built from the provided json string and assets.\n     * Requires that Particles be compiled into CanvasKit\n     * @param json\n     * @param assets\n     */\n    MakeParticles(json: string, assets?: Record<string, ArrayBuffer>): Particles;\n\n    // Constructors, i.e. things made with `new CanvasKit.Foo()`;\n    readonly ImageData: ImageDataConstructor;\n    readonly ParagraphStyle: ParagraphStyleConstructor;\n    readonly ContourMeasureIter: ContourMeasureIterConstructor;\n    readonly Font: FontConstructor;\n    readonly Paint: DefaultConstructor<Paint>;\n    readonly Path: PathConstructorAndFactory;\n    readonly PictureRecorder: DefaultConstructor<PictureRecorder>;\n    readonly TextStyle: TextStyleConstructor;\n\n    // Factories, i.e. things made with CanvasKit.Foo.MakeTurboEncapsulator()\n    readonly ParagraphBuilder: ParagraphBuilderFactory;\n    readonly ColorFilter: ColorFilterFactory;\n    readonly FontMgr: FontMgrFactory;\n    readonly ImageFilter: ImageFilterFactory;\n    readonly MaskFilter: MaskFilterFactory;\n    readonly PathEffect: PathEffectFactory;\n    readonly RuntimeEffect: RuntimeEffectFactory;\n    readonly Shader: ShaderFactory;\n    readonly TextBlob: TextBlobFactory;\n    readonly TypefaceFontProvider: TypefaceFontProviderFactory;\n\n    // Misc\n    readonly ColorMatrix: ColorMatrixHelpers;\n    readonly Matrix: Matrix3x3Helpers;\n    readonly M44: Matrix4x4Helpers;\n    readonly Vector: VectorHelpers;\n\n    // Core Enums\n    readonly AlphaType: AlphaTypeEnumValues;\n    readonly BlendMode: BlendModeEnumValues;\n    readonly BlurStyle: BlurStyleEnumValues;\n    readonly ClipOp: ClipOpEnumValues;\n    readonly ColorType: ColorTypeEnumValues;\n    readonly FillType: FillTypeEnumValues;\n    readonly FilterMode: FilterModeEnumValues;\n    readonly FilterQuality: FilterQualityEnumValues;\n    readonly FontEdging: FontEdgingEnumValues;\n    readonly FontHinting: FontHintingEnumValues;\n    readonly GlyphRunFlags: GlyphRunFlagValues;\n    readonly ImageFormat: ImageFormatEnumValues;\n    readonly MipmapMode: MipmapModeEnumValues;\n    readonly PaintStyle: PaintStyleEnumValues;\n    readonly PathOp: PathOpEnumValues;\n    readonly PointMode: PointModeEnumValues;\n    readonly ColorSpace: ColorSpaceEnumValues;\n    readonly StrokeCap: StrokeCapEnumValues;\n    readonly StrokeJoin: StrokeJoinEnumValues;\n    readonly TileMode: TileModeEnumValues;\n    readonly VertexMode: VertexModeEnumValues;\n\n    // Core Constants\n    readonly TRANSPARENT: Color;\n    readonly BLACK: Color;\n    readonly WHITE: Color;\n    readonly RED: Color;\n    readonly GREEN: Color;\n    readonly BLUE: Color;\n    readonly YELLOW: Color;\n    readonly CYAN: Color;\n    readonly MAGENTA: Color;\n\n    readonly MOVE_VERB: number;\n    readonly LINE_VERB: number;\n    readonly QUAD_VERB: number;\n    readonly CONIC_VERB: number;\n    readonly CUBIC_VERB: number;\n    readonly CLOSE_VERB: number;\n\n    readonly SaveLayerInitWithPrevious: SaveLayerFlag;\n    readonly SaveLayerF16ColorType: SaveLayerFlag;\n\n    /**\n     * Use this shadow flag to indicate the occluding object is not opaque. Knowing that the\n     * occluder is opaque allows us to cull shadow geometry behind it and improve performance.\n     */\n    readonly ShadowTransparentOccluder: number;\n    /**\n     * Use this shadow flag to not use analytic shadows.\n     */\n    readonly ShadowGeometricOnly: number;\n    /**\n     * Use this shadow flag to indicate the light position represents a direction and light radius\n     * is blur radius at elevation 1.\n     */\n    readonly ShadowDirectionalLight: number;\n\n    readonly gpu?: boolean; // true if GPU code was compiled in\n    readonly managed_skottie?: boolean; // true if advanced (managed) Skottie code was compiled in\n    readonly particles?: boolean; // true if Particles code was compiled in\n    readonly rt_effect?: boolean; // true if RuntimeEffect was compiled in\n    readonly skottie?: boolean; // true if base Skottie code was compiled in\n\n    // Paragraph Enums\n    readonly Affinity: AffinityEnumValues;\n    readonly DecorationStyle: DecorationStyleEnumValues;\n    readonly FontSlant: FontSlantEnumValues;\n    readonly FontWeight: FontWeightEnumValues;\n    readonly FontWidth: FontWidthEnumValues;\n    readonly PlaceholderAlignment: PlaceholderAlignmentEnumValues;\n    readonly RectHeightStyle: RectHeightStyleEnumValues;\n    readonly RectWidthStyle: RectWidthStyleEnumValues;\n    readonly TextAlign: TextAlignEnumValues;\n    readonly TextBaseline: TextBaselineEnumValues;\n    readonly TextDirection: TextDirectionEnumValues;\n    readonly TextHeightBehavior: TextHeightBehaviorEnumValues;\n\n    // Paragraph Constants\n    readonly NoDecoration: number;\n    readonly UnderlineDecoration: number;\n    readonly OverlineDecoration: number;\n    readonly LineThroughDecoration: number;\n}\n\nexport interface Camera {\n    /** a 3d point locating the camera. */\n    eye: Vector3;\n    /** center of attention - the 3d point the camera is looking at. */\n    coa: Vector3;\n    /**\n     * A unit vector pointing the cameras up direction. Note that using only eye and coa\n     * would leave the roll of the camera unspecified.\n     */\n    up: Vector3;\n    /** near clipping plane distance */\n    near: number;\n    /** far clipping plane distance */\n    far: number;\n    /** field of view in radians */\n    angle: AngleInRadians;\n}\n\n/**\n * CanvasKit is built with Emscripten and Embind. Embind adds the following methods to all objects\n * that are exposed with it.\n */\nexport interface EmbindObject<T extends EmbindObject<T>> {\n    clone(): T;\n    delete(): void;\n    deleteAfter(): void;\n    isAliasOf(other: any): boolean;\n    isDeleted(): boolean;\n}\n\n/**\n * Represents the set of enum values.\n */\nexport interface EmbindEnum {\n    readonly values: number[];\n}\n\n/**\n * Represents a single member of an enum.\n */\nexport interface EmbindEnumEntity {\n    readonly value: number;\n}\n\nexport interface EmulatedCanvas2D {\n    /**\n     * Cleans up all resources associated with this emulated canvas.\n     */\n    dispose(): void;\n    /**\n     * Decodes an image with the given bytes.\n     * @param bytes\n     */\n    decodeImage(bytes: ArrayBuffer | Uint8Array): Image;\n\n    /**\n     * Returns an emulated canvas2d context if type == '2d', null otherwise.\n     * @param type\n     */\n    getContext(type: string): EmulatedCanvas2DContext | null;\n\n    /**\n     * Loads the given font with the given descriptors. Emulates new FontFace().\n     * @param bytes\n     * @param descriptors\n     */\n    loadFont(bytes: ArrayBuffer | Uint8Array, descriptors: object): void;\n\n    /**\n     * Returns an new emulated Path2D object.\n     * @param str - an SVG string representing a path.\n     */\n    makePath2D(str?: string): EmulatedPath2D;\n\n    /**\n     * Returns the current canvas as a base64 encoded image string.\n     * @param codec - image/png by default; image/jpeg also supported.\n     * @param quality\n     */\n    toDataURL(codec?: string, quality?: number): string;\n}\n\n/** Part of the Canvas2D emulation code */\nexport type EmulatedCanvas2DContext = CanvasRenderingContext2D;\nexport type EmulatedImageData = ImageData;\nexport type EmulatedPath2D = Path2D;\n\nexport interface FontStyle {\n    weight?: FontWeight;\n    width?: FontWidth;\n    slant?: FontSlant;\n}\n\n/**\n * See GrDirectContext.h for more on this class.\n */\nexport interface GrDirectContext extends EmbindObject<GrDirectContext> {\n    getResourceCacheLimitBytes(): number;\n    getResourceCacheUsageBytes(): number;\n    releaseResourcesAndAbandonContext(): void;\n    setResourceCacheLimitBytes(bytes: number): void;\n}\n\n/**\n * See Metrics.h for more on this struct.\n */\nexport interface LineMetrics {\n    /** The index in the text buffer the line begins. */\n    startIndex: number;\n    /** The index in the text buffer the line ends. */\n    endIndex: number;\n    endExcludingWhitespaces: number;\n    endIncludingNewline: number;\n    /** True if the line ends in a hard break (e.g. newline) */\n    isHardBreak: boolean;\n    /**\n     * The final computed ascent for the line. This can be impacted by\n     * the strut, height, scaling, as well as outlying runs that are very tall.\n     */\n    ascent: number;\n    /**\n     * The final computed descent for the line. This can be impacted by\n     * the strut, height, scaling, as well as outlying runs that are very tall.\n     */\n    descent: number;\n    /** round(ascent + descent) */\n    height: number;\n    /** width of the line */\n    width: number;\n    /** The left edge of the line. The right edge can be obtained with `left + width` */\n    left: number;\n    /** The y position of the baseline for this line from the top of the paragraph. */\n    baseline: number;\n    /** Zero indexed line number. */\n    lineNumber: number;\n}\n\nexport interface Range {\n    first: number;\n    last: number;\n}\n\n/**\n * Information for a run of shaped text. See Paragraph.getShapedLines()\n *\n * Notes:\n * positions is documented as Float32, but it holds twice as many as you expect, and they\n * are treated logically as pairs of floats: {x0, y0}, {x1, y1}, ... for each glyph.\n *\n * positions and offsets arrays have 1 extra slot (actually 2 for positions)\n * to describe the location \"after\" the last glyph in the glyphs array.\n */\nexport interface GlyphRun {\n    typeface: Typeface;     // currently set to null (temporary)\n    size: number;\n    fakeBold: boolean;\n    fakeItalic: boolean;\n\n    glyphs: Uint16Array;\n    positions: Float32Array;    // alternating x0, y0, x1, y1, ...\n    offsets: Uint32Array;\n    flags: number;              // see GlyphRunFlags\n}\n\n/**\n * Information for a paragraph of text. See Paragraph.getShapedLines()\n */\n export interface ShapedLine {\n    textRange: Range;   // first and last character offsets for the line (derived from runs[])\n    top: number;        // top y-coordinate for the line\n    bottom: number;     // bottom y-coordinate for the line\n    baseline: number;   // baseline y-coordinate for the line\n    runs: GlyphRun[];   // array of GlyphRun objects for the line\n}\n\n/**\n * Input to ShapeText(..., FontBlock[], ...);\n */\nexport interface FontBlock {\n    length: number;     // number of text codepoints this block is applied to\n\n    typeface: Typeface;\n    size: number;\n    fakeBold: boolean;\n    fakeItalic: boolean;\n}\n\n/**\n * This object is a wrapper around a pointer to some memory on the WASM heap. The type of the\n * pointer was determined at creation time.\n */\nexport interface MallocObj {\n    /**\n     * The number of objects this pointer refers to.\n     */\n    readonly length: number;\n    /**\n     * The \"pointer\" into the WASM memory. Should be fixed over the lifetime of the object.\n     */\n    readonly byteOffset: number;\n    /**\n     * Return a read/write view into a subset of the memory. Do not cache the TypedArray this\n     * returns, it may be invalidated if the WASM heap is resized. This is the same as calling\n     * .toTypedArray().subarray() except the returned TypedArray can also be passed into an API\n     * and not cause an additional copy.\n     */\n    subarray(start: number, end: number): TypedArray;\n    /**\n     * Return a read/write view of the memory. Do not cache the TypedArray this returns, it may be\n     * invalidated if the WASM heap is resized. If this TypedArray is passed into a CanvasKit API,\n     * it will not be copied again, only the pointer will be re-used.\n     */\n    toTypedArray(): TypedArray;\n}\n\n/**\n * This object maintains a single audio layer during skottie playback\n */\nexport interface AudioPlayer {\n    /**\n     * Playback control callback, emitted for each corresponding Animation::seek().\n     *\n     * Will seek to time t (seconds) relative to the layer's timeline origin.\n     * Negative t values are used to signal off state (stop playback outside layer span).\n     */\n    seek(t: number): void;\n}\n\n/**\n * Mapping of sound names (strings) to AudioPlayers\n */\nexport interface SoundMap {\n    /**\n     * Returns AudioPlayer for a certain audio layer\n     * @param key string identifier, name of audio file the desired AudioPlayer manages\n     */\n    getPlayer(key: string): AudioPlayer;\n}\n\n/**\n * Named color property.\n */\nexport interface ColorProperty {\n    /**\n     * Property identifier, usually the node name.\n     */\n    key: string;\n    /**\n     * Property value (RGBA, 255-based).\n     */\n    value: ColorInt;\n}\n\n/**\n * Named opacity property.\n */\nexport interface OpacityProperty {\n    /**\n     * Property identifier, usually the node name.\n     */\n    key: string;\n    /**\n     * Property value (0..100).\n     */\n    value: number;\n}\n\n/**\n * Text property value.\n */\nexport interface TextValue {\n    /**\n     * The text string payload.\n     */\n    text: string;\n    /**\n     * Font size.\n     */\n    size: number;\n}\n\n/**\n * Named text property.\n */\nexport interface TextProperty {\n    /**\n     * Property identifier, usually the node name.\n     */\n    key: string;\n    /**\n     * Property value.\n     */\n    value: TextValue;\n}\n\nexport interface ManagedSkottieAnimation extends SkottieAnimation {\n    setColor(key: string, color: InputColor): boolean;\n    setOpacity(key: string, opacity: number): boolean;\n    setText(key: string, text: string, size: number): boolean;\n    getMarkers(): object[];\n    getColorProps(): ColorProperty[];\n    getOpacityProps(): OpacityProperty[];\n    getTextProps(): TextProperty[];\n}\n\n/**\n * See Paragraph.h for more information on this class. This is only available if Paragraph has\n * been compiled in.\n */\nexport interface Paragraph extends EmbindObject<Paragraph> {\n    didExceedMaxLines(): boolean;\n    getAlphabeticBaseline(): number;\n\n    /**\n     * Returns the index of the glyph that corresponds to the provided coordinate,\n     * with the top left corner as the origin, and +y direction as down.\n     */\n    getGlyphPositionAtCoordinate(dx: number, dy: number): PositionWithAffinity;\n\n    getHeight(): number;\n    getIdeographicBaseline(): number;\n    getLineMetrics(): LineMetrics[];\n    getLongestLine(): number;\n    getMaxIntrinsicWidth(): number;\n    getMaxWidth(): number;\n    getMinIntrinsicWidth(): number;\n    getRectsForPlaceholders(): FlattenedRectangleArray;\n\n    /**\n     * Returns bounding boxes that enclose all text in the range of glpyh indexes [start, end).\n     * @param start\n     * @param end\n     * @param hStyle\n     * @param wStyle\n     */\n    getRectsForRange(start: number, end: number, hStyle: RectHeightStyle,\n                     wStyle: RectWidthStyle): FlattenedRectangleArray;\n\n    /**\n     * Finds the first and last glyphs that define a word containing the glyph at index offset.\n     * @param offset\n     */\n    getWordBoundary(offset: number): URange;\n\n    /**\n     * Returns an array of ShapedLine objects, describing the paragraph.\n     */\n    getShapedLines(): ShapedLine[];\n\n    /**\n     * Lays out the text in the paragraph so it is wrapped to the given width.\n     * @param width\n     */\n    layout(width: number): void;\n}\n\nexport interface ParagraphBuilder extends EmbindObject<ParagraphBuilder> {\n    /**\n     * Pushes the information required to leave an open space.\n     * @param width\n     * @param height\n     * @param alignment\n     * @param baseline\n     * @param offset\n     */\n    addPlaceholder(width?: number, height?: number, alignment?: PlaceholderAlignment,\n                   baseline?: TextBaseline, offset?: number): void;\n\n    /**\n     * Adds text to the builder. Forms the proper runs to use the upper-most style\n     * on the style_stack.\n     * @param str\n     */\n    addText(str: string): void;\n\n    /**\n     * Returns a Paragraph object that can be used to be layout and paint the text to an\n     * Canvas.\n     */\n    build(): Paragraph;\n\n    /**\n     * Remove a style from the stack. Useful to apply different styles to chunks\n     * of text such as bolding.\n     */\n    pop(): void;\n\n    /**\n     * Push a style to the stack. The corresponding text added with addText will\n     * use the top-most style.\n     * @param text\n     */\n    pushStyle(text: TextStyle): void;\n\n    /**\n     * Pushes a TextStyle using paints instead of colors for foreground and background.\n     * @param textStyle\n     * @param fg\n     * @param bg\n     */\n    pushPaintStyle(textStyle: TextStyle, fg: Paint, bg: Paint): void;\n}\n\nexport interface ParagraphStyle {\n    disableHinting?: boolean;\n    ellipsis?: string;\n    heightMultiplier?: number;\n    maxLines?: number;\n    strutStyle?: StrutStyle;\n    textAlign?: TextAlign;\n    textDirection?: TextDirection;\n    textHeightBehavior?: TextHeightBehavior;\n    textStyle?: TextStyle;\n}\n\nexport interface PositionWithAffinity {\n    pos: number;\n    affinity: Affinity;\n}\n\n/**\n * See SkParticleEffect.h for more details.\n */\nexport interface Particles extends EmbindObject<Particles> {\n    /**\n     * Draws the current state of the particles on the given canvas.\n     * @param canvas\n     */\n    draw(canvas: Canvas): void;\n\n    /**\n     * Returns a Float32Array bound to the WASM memory of these uniforms. Changing these\n     * floats will change the corresponding uniforms instantly.\n     */\n    uniforms(): Float32Array;\n\n    /**\n     * Returns the nth uniform from the effect.\n     * @param index\n     */\n    getUniform(index: number): SkSLUniform;\n\n    /**\n     * Returns the number of uniforms on the effect.\n     */\n    getUniformCount(): number;\n\n    /**\n     * Returns the total number of floats across all uniforms on the effect. This is the length\n     * of the array returned by `uniforms()`. For example, an effect with a single float3 uniform,\n     * would return 1 from `getUniformCount()`, but 3 from `getUniformFloatCount()`.\n     */\n    getUniformFloatCount(): number;\n\n    /**\n     * Returns the name of the nth effect uniform.\n     * @param index\n     */\n    getUniformName(index: number): string;\n\n    /**\n     * Sets the base position of the effect.\n     * @param point\n     */\n    setPosition(point: InputPoint): void;\n\n    /**\n     * Sets the base rate of the effect.\n     * @param rate\n     */\n    setRate(rate: number): void;\n\n    /**\n     * Starts playing the effect.\n     * @param now\n     * @param looping\n     */\n    start(now: number, looping: boolean): void;\n\n    /**\n     * Updates the effect using the new time.\n     * @param now\n     */\n    update(now: number): void;\n}\n\nexport interface SkSLUniform {\n    columns: number;\n    rows: number;\n    /** The index into the uniforms array that this uniform begins. */\n    slot: number;\n}\n\n/**\n * See SkAnimatedImage.h for more information on this class.\n */\nexport interface AnimatedImage extends EmbindObject<AnimatedImage> {\n    /**\n     * Decodes the next frame. Returns -1 when the animation is on the last frame.\n     */\n    decodeNextFrame(): number;\n\n    /**\n     * Return the total number of frames in the animation.\n     */\n    getFrameCount(): number;\n\n    /**\n     * Return the repetition count for this animation.\n     */\n    getRepetitionCount(): number;\n\n    /**\n     * Returns the possibly scaled height of the image.\n     */\n    height(): number;\n\n    /**\n     * Returns a still image of the current frame or null if there is no current frame.\n     */\n    makeImageAtCurrentFrame(): Image | null;\n\n    /**\n     * Reset the animation to the beginning.\n     */\n    reset(): void;\n\n    /**\n     * Returns the possibly scaled width of the image.\n     */\n    width(): number;\n}\n\n/**\n * See SkCanvas.h for more information on this class.\n */\nexport interface Canvas extends EmbindObject<Canvas> {\n    /**\n     * Fills the current clip with the given color using Src BlendMode.\n     * This has the effect of replacing all pixels contained by clip with color.\n     * @param color\n     */\n    clear(color: InputColor): void;\n\n    /**\n     * Replaces clip with the intersection or difference of the current clip and path,\n     * with an aliased or anti-aliased clip edge.\n     * @param path\n     * @param op\n     * @param doAntiAlias\n     */\n    clipPath(path: Path, op: ClipOp, doAntiAlias: boolean): void;\n\n    /**\n     * Replaces clip with the intersection or difference of the current clip and rect,\n     * with an aliased or anti-aliased clip edge.\n     * @param rect\n     * @param op\n     * @param doAntiAlias\n     */\n    clipRect(rect: InputRect, op: ClipOp, doAntiAlias: boolean): void;\n\n    /**\n     * Replaces clip with the intersection or difference of the current clip and rrect,\n     * with an aliased or anti-aliased clip edge.\n     * @param rrect\n     * @param op\n     * @param doAntiAlias\n     */\n    clipRRect(rrect: InputRRect, op: ClipOp, doAntiAlias: boolean): void;\n\n    /**\n     * Replaces current matrix with m premultiplied with the existing matrix.\n     * @param m\n     */\n    concat(m: InputMatrix): void;\n\n    /**\n     * Draws arc using clip, Matrix, and Paint paint.\n     *\n     * Arc is part of oval bounded by oval, sweeping from startAngle to startAngle plus\n     * sweepAngle. startAngle and sweepAngle are in degrees.\n     * @param oval - bounds of oval containing arc to draw\n     * @param startAngle - angle in degrees where arc begins\n     * @param sweepAngle - sweep angle in degrees; positive is clockwise\n     * @param useCenter - if true, include the center of the oval\n     * @param paint\n     */\n    drawArc(oval: InputRect, startAngle: AngleInDegrees, sweepAngle: AngleInDegrees,\n            useCenter: boolean, paint: Paint): void;\n\n    /**\n     * Draws a set of sprites from atlas, using clip, Matrix, and optional Paint paint.\n     * @param atlas - Image containing sprites\n     * @param srcRects - Rect locations of sprites in atlas\n     * @param dstXforms - RSXform mappings for sprites in atlas\n     * @param paint\n     * @param blendMode - BlendMode combining colors and sprites\n     * @param colors - If provided, will be blended with sprite using blendMode.\n     * @param sampling - Specifies sampling options. If null, bilinear is used.\n     */\n    drawAtlas(atlas: Image, srcRects: InputFlattenedRectangleArray,\n              dstXforms: InputFlattenedRSXFormArray, paint: Paint,\n              blendMode?: BlendMode | null, colors?: ColorIntArray | null,\n              sampling?: CubicResampler | FilterOptions): void;\n\n    /**\n     * Draws a circle at (cx, cy) with the given radius.\n     * @param cx\n     * @param cy\n     * @param radius\n     * @param paint\n     */\n    drawCircle(cx: number, cy: number, radius: number, paint: Paint): void;\n\n    /**\n     * Fills clip with the given color.\n     * @param color\n     * @param blendMode - defaults to SrcOver.\n     */\n    drawColor(color: InputColor, blendMode?: BlendMode): void;\n\n    /**\n     * Fills clip with the given color.\n     * @param r - red value (typically from 0 to 1.0).\n     * @param g - green value (typically from 0 to 1.0).\n     * @param b - blue value (typically from 0 to 1.0).\n     * @param a - alpha value, range 0 to 1.0 (1.0 is opaque).\n     * @param blendMode - defaults to SrcOver.\n     */\n    drawColorComponents(r: number, g: number, b: number, a: number, blendMode?: BlendMode): void;\n\n    /**\n     * Fills clip with the given color.\n     * @param color\n     * @param blendMode - defaults to SrcOver.\n     */\n    drawColorInt(color: ColorInt, blendMode?: BlendMode): void;\n\n    /**\n     * Draws RRect outer and inner using clip, Matrix, and Paint paint.\n     * outer must contain inner or the drawing is undefined.\n     * @param outer\n     * @param inner\n     * @param paint\n     */\n    drawDRRect(outer: InputRRect, inner: InputRRect, paint: Paint): void;\n\n    /**\n     * Draws a run of glyphs, at corresponding positions, in a given font.\n     * @param glyphs the array of glyph IDs (Uint16TypedArray)\n     * @param positions the array of x,y floats to position each glyph\n     * @param x x-coordinate of the origin of the entire run\n     * @param y y-coordinate of the origin of the entire run\n     * @param font the font that contains the glyphs\n     * @param paint\n     */\n    drawGlyphs(glyphs: InputGlyphIDArray,\n               positions: InputFlattenedPointArray,\n               x: number, y: number,\n               font: Font, paint: Paint): void;\n\n    /**\n     * Draws the given image with its top-left corner at (left, top) using the current clip,\n     * the current matrix, and optionally-provided paint.\n     * @param img\n     * @param left\n     * @param top\n     * @param paint\n     */\n    drawImage(img: Image, left: number, top: number, paint?: Paint): void;\n\n    /**\n     * Draws the given image with its top-left corner at (left, top) using the current clip,\n     * the current matrix. It will use the cubic sampling options B and C if necessary.\n     * @param img\n     * @param left\n     * @param top\n     * @param B - See CubicResampler in SkSamplingOptions.h for more information\n     * @param C - See CubicResampler in SkSamplingOptions.h for more information\n     * @param paint\n     */\n    drawImageCubic(img: Image, left: number, top: number, B: number, C: number,\n                   paint: Paint | null): void;\n\n    /**\n     * Draws the given image with its top-left corner at (left, top) using the current clip,\n     * the current matrix. It will use the provided sampling options if necessary.\n     * @param img\n     * @param left\n     * @param top\n     * @param fm - The filter mode.\n     * @param mm - The mipmap mode. Note: for settings other than None, the image must have mipmaps\n     *             calculated with makeCopyWithDefaultMipmaps;\n     * @param paint\n     */\n    drawImageOptions(img: Image, left: number, top: number, fm: FilterMode,\n                     mm: MipmapMode, paint: Paint | null): void;\n\n    /**\n     * Draws the current frame of the given animated image with its top-left corner at\n     * (left, top) using the current clip, the current matrix, and optionally-provided paint.\n     * @param aImg\n     * @param left\n     * @param top\n     * @param paint\n     */\n    drawImageAtCurrentFrame(aImg: AnimatedImage, left: number, top: number,\n                            paint?: Paint): void;\n\n    /**\n     *  Draws the provided image stretched proportionally to fit into dst rectangle.\n     *  The center rectangle divides the image into nine sections: four sides, four corners, and\n     *  the center.\n     * @param img\n     * @param center\n     * @param dest\n     * @param filter - what technique to use when sampling the image\n     * @param paint\n     */\n    drawImageNine(img: Image, center: InputIRect, dest: InputRect, filter: FilterMode,\n                  paint?: Paint): void;\n\n    /**\n     * Draws sub-rectangle src from provided image, scaled and translated to fill dst rectangle.\n     * @param img\n     * @param src\n     * @param dest\n     * @param paint\n     * @param fastSample - if false, will filter strictly within src.\n     */\n    drawImageRect(img: Image, src: InputRect, dest: InputRect, paint: Paint,\n                  fastSample?: boolean): void;\n\n    /**\n     * Draws sub-rectangle src from provided image, scaled and translated to fill dst rectangle.\n     * It will use the cubic sampling options B and C if necessary.\n     * @param img\n     * @param src\n     * @param dest\n     * @param B - See CubicResampler in SkSamplingOptions.h for more information\n     * @param C - See CubicResampler in SkSamplingOptions.h for more information\n     * @param paint\n     */\n    drawImageRectCubic(img: Image, src: InputRect, dest: InputRect,\n                       B: number, C: number, paint?: Paint): void;\n\n    /**\n     * Draws sub-rectangle src from provided image, scaled and translated to fill dst rectangle.\n     * It will use the provided sampling options if necessary.\n     * @param img\n     * @param src\n     * @param dest\n     * @param fm - The filter mode.\n     * @param mm - The mipmap mode. Note: for settings other than None, the image must have mipmaps\n     *             calculated with makeCopyWithDefaultMipmaps;\n     * @param paint\n     */\n    drawImageRectOptions(img: Image, src: InputRect, dest: InputRect, fm: FilterMode,\n                         mm: MipmapMode, paint?: Paint): void;\n\n    /**\n     * Draws line segment from (x0, y0) to (x1, y1) using the current clip, current matrix,\n     * and the provided paint.\n     * @param x0\n     * @param y0\n     * @param x1\n     * @param y1\n     * @param paint\n     */\n    drawLine(x0: number, y0: number, x1: number, y1: number, paint: Paint): void;\n\n    /**\n     * Draws an oval bounded by the given rectangle using the current clip, current matrix,\n     * and the provided paint.\n     * @param oval\n     * @param paint\n     */\n    drawOval(oval: InputRect, paint: Paint): void;\n\n    /**\n     * Fills clip with the given paint.\n     * @param paint\n     */\n    drawPaint(paint: Paint): void;\n\n    /**\n     * Draws the given Paragraph at the provided coordinates.\n     * Requires the Paragraph code to be compiled in.\n     * @param p\n     * @param x\n     * @param y\n     */\n    drawParagraph(p: Paragraph, x: number, y: number): void;\n\n    /**\n     * Draws the given path using the current clip, current matrix, and the provided paint.\n     * @param path\n     * @param paint\n     */\n    drawPath(path: Path, paint: Paint): void;\n\n    /**\n     * Draws a cubic patch defined by 12 control points [top, right, bottom, left] with optional\n     * colors and shader-coordinates [4] specifed for each corner [top-left, top-right, bottom-right, bottom-left]\n     * @param cubics 12 points : 4 connected cubics specifying the boundary of the patch\n     * @param colors optional colors interpolated across the patch\n     * @param texs optional shader coordinates interpolated across the patch\n     * @param mode Specifies how shader and colors blend (if both are specified)\n     * @param paint\n     */\n    drawPatch(cubics: InputFlattenedPointArray,\n              colors?: ColorIntArray | Color[] | null,\n              texs?: InputFlattenedPointArray | null,\n              mode?: BlendMode | null,\n              paint?: Paint): void;\n\n    /**\n     * Draws the given picture using the current clip, current matrix, and the provided paint.\n     * @param skp\n     */\n    drawPicture(skp: SkPicture): void;\n\n    /**\n     * Draws the given points using the current clip, current matrix, and the provided paint.\n     *\n     * See Canvas.h for more on the mode and its interaction with paint.\n     * @param mode\n     * @param points\n     * @param paint\n     */\n    drawPoints(mode: PointMode, points: InputFlattenedPointArray, paint: Paint): void;\n\n    /**\n     * Draws the given rectangle using the current clip, current matrix, and the provided paint.\n     * @param rect\n     * @param paint\n     */\n    drawRect(rect: InputRect, paint: Paint): void;\n\n    /**\n     * Draws the given rectangle using the current clip, current matrix, and the provided paint.\n     * @param left\n     * @param top\n     * @param right\n     * @param bottom\n     * @param paint\n     */\n    drawRect4f(left: number, top: number, right: number, bottom: number, paint: Paint): void;\n\n    /**\n     * Draws the given rectangle with rounded corners using the current clip, current matrix,\n     * and the provided paint.\n     * @param rrect\n     * @param paint\n     */\n    drawRRect(rrect: InputRRect, paint: Paint): void;\n\n    /**\n     * Draw an offset spot shadow and outlining ambient shadow for the given path using a disc\n     * light. See SkShadowUtils.h for more details\n     * @param path - The occluder used to generate the shadows.\n     * @param zPlaneParams - Values for the plane function which returns the Z offset of the\n     *                       occluder from the canvas based on local x and y values (the current\n     *                       matrix is not applied).\n     * @param lightPos - The 3D position of the light relative to the canvas plane. This is\n     *                   independent of the canvas's current matrix.\n     * @param lightRadius - The radius of the disc light.\n     * @param ambientColor - The color of the ambient shadow.\n     * @param spotColor -  The color of the spot shadow.\n     * @param flags - See SkShadowFlags.h; 0 means use default options.\n     */\n    drawShadow(path: Path, zPlaneParams: InputVector3, lightPos: InputVector3, lightRadius: number,\n               ambientColor: InputColor, spotColor: InputColor, flags: number): void;\n\n    /**\n     * Draw the given text at the location (x, y) using the provided paint and font. The text will\n     * be drawn as is; no shaping, left-to-right, etc.\n     * @param str\n     * @param x\n     * @param y\n     * @param paint\n     * @param font\n     */\n    drawText(str: string, x: number, y: number, paint: Paint, font: Font): void;\n\n    /**\n     * Draws the given TextBlob at (x, y) using the current clip, current matrix, and the\n     * provided paint. Reminder that the fonts used to draw TextBlob are part of the blob.\n     * @param blob\n     * @param x\n     * @param y\n     * @param paint\n     */\n    drawTextBlob(blob: TextBlob, x: number, y: number, paint: Paint): void;\n\n    /**\n     * Draws the given vertices (a triangle mesh) using the current clip, current matrix, and the\n     * provided paint.\n     *  If paint contains an Shader and vertices does not contain texCoords, the shader\n     *  is mapped using the vertices' positions.\n     *  If vertices colors are defined in vertices, and Paint paint contains Shader,\n     *  BlendMode mode combines vertices colors with Shader.\n     * @param verts\n     * @param mode\n     * @param paint\n     */\n    drawVertices(verts: Vertices, mode: BlendMode, paint: Paint): void;\n\n    /**\n     * Returns the 4x4 matrix matching the given marker or null if there was none.\n     * See also markCTM.\n     * @param marker\n     */\n    findMarkedCTM(marker: string): Matrix4x4 | null;\n\n    /**\n     * Returns the current transform from local coordinates to the 'device', which for most\n     * purposes means pixels.\n     */\n    getLocalToDevice(): Matrix4x4;\n\n    /**\n     * Returns the number of saved states, each containing: Matrix and clip.\n     * Equals the number of save() calls less the number of restore() calls plus one.\n     * The save count of a new canvas is one.\n     */\n    getSaveCount(): number;\n\n    /**\n     * Legacy version of getLocalToDevice(), which strips away any Z information, and\n     * just returns a 3x3 version.\n     */\n    getTotalMatrix(): number[];\n\n    /**\n     * Creates Surface matching info and props, and associates it with Canvas.\n     * Returns null if no match found.\n     * @param info\n     */\n    makeSurface(info: ImageInfo): Surface | null;\n\n    /**\n     * Record a marker (provided by caller) for the current CTM. This does not change anything\n     * about the ctm or clip, but does \"name\" this matrix value, so it can be referenced by\n     * custom effects (who access it by specifying the same name).\n     * See also findMarkedCTM.\n     * @param marker\n     */\n    markCTM(marker: string): void;\n\n    /**\n     * Returns a TypedArray containing the pixels reading starting at (srcX, srcY) and does not\n     * exceed the size indicated by imageInfo. See SkCanvas.h for more on the caveats.\n     *\n     * If dest is not provided, we allocate memory equal to the provided height * the provided\n     * bytesPerRow to fill the data with.\n     *\n     * This is generally a very expensive call for the GPU backend.\n     *\n     * @param srcX\n     * @param srcY\n     * @param imageInfo - describes the destination format of the pixels.\n     * @param dest - If provided, the pixels will be copied into the allocated buffer allowing\n     *        access to the pixels without allocating a new TypedArray.\n     * @param bytesPerRow - number of bytes per row. Must be provided if dest is set. This\n     *        depends on destination ColorType. For example, it must be at least 4 * width for\n     *        the 8888 color type.\n     * @returns a TypedArray appropriate for the specified ColorType. Note that 16 bit floats are\n     *          not supported in JS, so that colorType corresponds to raw bytes Uint8Array.\n     */\n    readPixels(srcX: number, srcY: number, imageInfo: ImageInfo, dest?: MallocObj,\n               bytesPerRow?: number): Uint8Array | Float32Array | null;\n\n    /**\n     * Removes changes to the current matrix and clip since Canvas state was\n     * last saved. The state is removed from the stack.\n     * Does nothing if the stack is empty.\n     */\n    restore(): void;\n\n    /**\n     * Restores state to a previous stack value.\n     * @param saveCount\n     */\n    restoreToCount(saveCount: number): void;\n\n    /**\n     * Rotates the current matrix by the number of degrees.\n     * @param rot - angle of rotation in degrees.\n     * @param rx\n     * @param ry\n     */\n    rotate(rot: AngleInDegrees, rx: number, ry: number): void;\n\n    /**\n     * Saves the current matrix and clip and returns current height of the stack.\n     */\n    save(): number;\n\n    /**\n     * Saves Matrix and clip, and allocates a SkBitmap for subsequent drawing.\n     * Calling restore() discards changes to Matrix and clip, and draws the SkBitmap.\n     * It returns the height of the stack.\n     * See Canvas.h for more.\n     * @param paint\n     * @param bounds\n     * @param backdrop\n     * @param flags\n     */\n    saveLayer(paint?: Paint, bounds?: InputRect | null, backdrop?: ImageFilter | null,\n              flags?: SaveLayerFlag): number;\n\n    /**\n     * Scales the current matrix by sx on the x-axis and sy on the y-axis.\n     * @param sx\n     * @param sy\n     */\n    scale(sx: number, sy: number): void;\n\n    /**\n     *  Skews Matrix by sx on the x-axis and sy on the y-axis. A positive value of sx\n     *  skews the drawing right as y-axis values increase; a positive value of sy skews\n     *  the drawing down as x-axis values increase.\n     * @param sx\n     * @param sy\n     */\n    skew(sx: number, sy: number): void;\n\n    /**\n     * Translates Matrix by dx along the x-axis and dy along the y-axis.\n     * @param dx\n     * @param dy\n     */\n    translate(dx: number, dy: number): void;\n\n    /**\n     * Writes the given rectangle of pixels to the provided coordinates. The source pixels\n     * will be converted to the canvas's alphaType and colorType if they do not match.\n     * @param pixels\n     * @param srcWidth\n     * @param srcHeight\n     * @param destX\n     * @param destY\n     * @param alphaType - defaults to Unpremul\n     * @param colorType - defaults to RGBA_8888\n     * @param colorSpace - defaults to SRGB\n     */\n    writePixels(pixels: Uint8Array | number[], srcWidth: number, srcHeight: number,\n                destX: number, destY: number, alphaType?: AlphaType, colorType?: ColorType,\n                colorSpace?: ColorSpace): boolean;\n}\n\n/**\n * See SkColorFilter.h for more on this class. The objects are opaque.\n */\nexport type ColorFilter = EmbindObject<ColorFilter>;\n\nexport interface ContourMeasureIter extends EmbindObject<ContourMeasureIter> {\n    /**\n     *  Iterates through contours in path, returning a contour-measure object for each contour\n     *  in the path. Returns null when it is done.\n     *\n     *  See SkContourMeasure.h for more details.\n     */\n    next(): ContourMeasure | null;\n}\n\nexport interface ContourMeasure extends EmbindObject<ContourMeasure> {\n    /**\n     * Returns the given position and tangent line for the distance on the given contour.\n     * The return value is 4 floats in this order: posX, posY, vecX, vecY.\n     * @param distance - will be pinned between 0 and length().\n     * @param output - if provided, the four floats of the PosTan will be copied into this array\n     *                 instead of allocating a new one.\n     */\n    getPosTan(distance: number, output?: PosTan): PosTan;\n\n    /**\n     * Returns an Path representing the segement of this contour.\n     * @param startD - will be pinned between 0 and length()\n     * @param stopD - will be pinned between 0 and length()\n     * @param startWithMoveTo\n     */\n    getSegment(startD: number, stopD: number, startWithMoveTo: boolean): Path;\n\n    /**\n     * Returns true if the contour is closed.\n     */\n    isClosed(): boolean;\n\n    /**\n     * Returns the length of this contour.\n     */\n    length(): number;\n}\n\nexport interface FontMetrics {\n    ascent: number;     // suggested space above the baseline. < 0\n    descent: number;    // suggested space below the baseline. > 0\n    leading: number;    // suggested spacing between descent of previous line and ascent of next line.\n    bounds?: Rect;      // smallest rect containing all glyphs (relative to 0,0)\n}\n\n/**\n * See SkFont.h for more on this class.\n */\nexport interface Font extends EmbindObject<Font> {\n    /**\n     * Returns the FontMetrics for this font.\n     */\n    getMetrics(): FontMetrics;\n\n    /**\n     * Retrieves the bounds for each glyph in glyphs.\n     * If paint is not null, its stroking, PathEffect, and MaskFilter fields are respected.\n     * These are returned as flattened rectangles.  For each glyph, there will be 4 floats for\n     * left, top, right, bottom (relative to 0, 0) for that glyph.\n     * @param glyphs\n     * @param paint\n     * @param output - if provided, the results will be copied into this array.\n     */\n    getGlyphBounds(glyphs: InputGlyphIDArray, paint?: Paint | null,\n                   output?: Float32Array): Float32Array;\n\n    /**\n     * Retrieves the glyph ids for each code point in the provided string. Note that glyph IDs\n     * are font-dependent; different fonts may have different ids for the same code point.\n     * @param str\n     * @param numCodePoints - the number of code points in the string. Defaults to str.length.\n     * @param output - if provided, the results will be copied into this array.\n     */\n    getGlyphIDs(str: string, numCodePoints?: number,\n                output?: TypedArray): GlyphIDArray;\n\n    /**\n     * Retrieves the advanceX measurements for each glyph.\n     * If paint is not null, its stroking, PathEffect, and MaskFilter fields are respected.\n     * One width per glyph is returned in the returned array.\n     * @param glyphs\n     * @param paint\n     * @param output - if provided, the results will be copied into this array.\n     */\n    getGlyphWidths(glyphs: InputGlyphIDArray, paint?: Paint | null,\n                   output?: Float32Array): Float32Array;\n\n    /**\n     * Computes any intersections of a thick \"line\" and a run of positionsed glyphs.\n     * The thick line is represented as a top and bottom coordinate (positive for\n     * below the baseline, negative for above). If there are no intersections\n     * (e.g. if this is intended as an underline, and there are no \"collisions\")\n     * then the returned array will be empty. If there are intersections, the array\n     * will contain pairs of X coordinates [start, end] for each segment that\n     * intersected with a glyph.\n     *\n     * @param glyphs        the glyphs to intersect with\n     * @param positions     x,y coordinates (2 per glyph) for each glyph\n     * @param top           top of the thick \"line\" to use for intersection testing\n     * @param bottom        bottom of the thick \"line\" to use for intersection testing\n     * @return              array of [start, end] x-coordinate pairs. Maybe be empty.\n     */\n    getGlyphIntercepts(glyphs: InputGlyphIDArray, positions: Float32Array | number[],\n                       top: number, bottom: number): Float32Array;\n\n    /**\n     * Returns text scale on x-axis. Default value is 1.\n     */\n    getScaleX(): number;\n\n    /**\n     * Returns text size in points.\n     */\n    getSize(): number;\n\n    /**\n     * Returns text skew on x-axis. Default value is zero.\n     */\n    getSkewX(): number;\n\n    /**\n     * Returns embolden effect for this font. Default value is false.\n     */\n    isEmbolden(): boolean;\n\n    /**\n     * Returns the Typeface set for this font.\n     */\n    getTypeface(): Typeface | null;\n\n    /**\n     * Requests, but does not require, that edge pixels draw opaque or with partial transparency.\n     * @param edging\n     */\n    setEdging(edging: FontEdging): void;\n\n    /**\n     * Requests, but does not require, to use bitmaps in fonts instead of outlines.\n     * @param embeddedBitmaps\n     */\n    setEmbeddedBitmaps(embeddedBitmaps: boolean): void;\n\n    /**\n     * Sets level of glyph outline adjustment.\n     * @param hinting\n     */\n    setHinting(hinting: FontHinting): void;\n\n    /**\n     * Requests, but does not require, linearly scalable font and glyph metrics.\n     *\n     * For outline fonts 'true' means font and glyph metrics should ignore hinting and rounding.\n     * Note that some bitmap formats may not be able to scale linearly and will ignore this flag.\n     * @param linearMetrics\n     */\n    setLinearMetrics(linearMetrics: boolean): void;\n\n    /**\n     * Sets the text scale on the x-axis.\n     * @param sx\n     */\n    setScaleX(sx: number): void;\n\n    /**\n     * Sets the text size in points on this font.\n     * @param points\n     */\n    setSize(points: number): void;\n\n    /**\n     * Sets the text-skew on the x axis for this font.\n     * @param sx\n     */\n    setSkewX(sx: number): void;\n\n    /**\n     * Set embolden effect for this font.\n     * @param embolden\n     */\n    setEmbolden(embolden: boolean): void;\n\n    /**\n     * Requests, but does not require, that glyphs respect sub-pixel positioning.\n     * @param subpixel\n     */\n    setSubpixel(subpixel: boolean): void;\n\n    /**\n     * Sets the typeface to use with this font. null means to clear the typeface and use the\n     * default one.\n     * @param face\n     */\n    setTypeface(face: Typeface | null): void;\n}\n\n/**\n * See SkFontMgr.h for more details\n */\nexport interface FontMgr extends EmbindObject<FontMgr> {\n    /**\n     * Return the number of font families loaded in this manager. Useful for debugging.\n     */\n    countFamilies(): number;\n\n    /**\n     * Return the nth family name. Useful for debugging.\n     * @param index\n     */\n    getFamilyName(index: number): string;\n\n    /**\n     * Create a typeface for the specified bytes and return it.\n     * @param fontData\n     */\n    makeTypefaceFromData(fontData: ArrayBuffer): Typeface;\n}\n\n/**\n * See SkImage.h for more information on this class.\n */\nexport interface Image extends EmbindObject<Image> {\n    /**\n     * Encodes this image's pixels to the specified format and returns them. Must be built with\n     * the specified codec. If the options are unspecified, sensible defaults will be\n     * chosen.\n     * @param fmt - PNG is the default value.\n     * @param quality - a value from 0 to 100; 100 is the least lossy. May be ignored.\n     */\n    encodeToBytes(fmt?: EncodedImageFormat, quality?: number): Uint8Array | null;\n\n    /**\n     * Returns the color space associated with this object.\n     * It is the user's responsibility to call delete() on this after it has been used.\n     */\n    getColorSpace(): ColorSpace;\n\n    /**\n     * Returns the width, height, colorType and alphaType associated with this image.\n     * Colorspace is separate so as to not accidentally leak that memory.\n     */\n    getImageInfo(): PartialImageInfo;\n\n    /**\n     * Return the height in pixels of the image.\n     */\n    height(): number;\n\n    /**\n     * Returns an Image with the same \"base\" pixels as the this image, but with mipmap levels\n     * automatically generated and attached.\n     */\n    makeCopyWithDefaultMipmaps(): Image;\n\n    /**\n     * Returns this image as a shader with the specified tiling. It will use cubic sampling.\n     * @param tx - tile mode in the x direction.\n     * @param ty - tile mode in the y direction.\n     * @param B - See CubicResampler in SkSamplingOptions.h for more information\n     * @param C - See CubicResampler in SkSamplingOptions.h for more information\n     * @param localMatrix\n     */\n    makeShaderCubic(tx: TileMode, ty: TileMode, B: number, C: number,\n                    localMatrix?: InputMatrix): Shader;\n\n    /**\n     * Returns this image as a shader with the specified tiling. It will use cubic sampling.\n     * @param tx - tile mode in the x direction.\n     * @param ty - tile mode in the y direction.\n     * @param fm - The filter mode.\n     * @param mm - The mipmap mode. Note: for settings other than None, the image must have mipmaps\n     *             calculated with makeCopyWithDefaultMipmaps;\n     * @param localMatrix\n     */\n    makeShaderOptions(tx: TileMode, ty: TileMode, fm: FilterMode, mm: MipmapMode,\n                    localMatrix?: InputMatrix): Shader;\n\n    /**\n     * Returns a TypedArray containing the pixels reading starting at (srcX, srcY) and does not\n     * exceed the size indicated by imageInfo. See SkImage.h for more on the caveats.\n     *\n     * If dest is not provided, we allocate memory equal to the provided height * the provided\n     * bytesPerRow to fill the data with.\n     *\n     * @param srcX\n     * @param srcY\n     * @param imageInfo - describes the destination format of the pixels.\n     * @param dest - If provided, the pixels will be copied into the allocated buffer allowing\n     *        access to the pixels without allocating a new TypedArray.\n     * @param bytesPerRow - number of bytes per row. Must be provided if dest is set. This\n     *        depends on destination ColorType. For example, it must be at least 4 * width for\n     *        the 8888 color type.\n     * @returns a TypedArray appropriate for the specified ColorType. Note that 16 bit floats are\n     *          not supported in JS, so that colorType corresponds to raw bytes Uint8Array.\n     */\n    readPixels(srcX: number, srcY: number, imageInfo: ImageInfo, dest?: MallocObj,\n               bytesPerRow?: number): Uint8Array | Float32Array | null;\n\n    /**\n     * Return the width in pixels of the image.\n     */\n    width(): number;\n}\n\n/**\n * See ImageFilter.h for more on this class. The objects are opaque.\n */\nexport type ImageFilter = EmbindObject<ImageFilter>;\n\nexport interface ImageInfo {\n    alphaType: AlphaType;\n    colorSpace: ColorSpace;\n    colorType: ColorType;\n    height: number;\n    width: number;\n}\n\nexport interface PartialImageInfo {\n    alphaType: AlphaType;\n    colorType: ColorType;\n    height: number;\n    width: number;\n}\n\n/*\n *  Specifies sampling with bicubic coefficients\n */\nexport interface CubicResampler {\n    B: number;  // 0..1\n    C: number;  // 0..1\n}\n\n/**\n * Specifies sampling using filter and mipmap options\n */\nexport interface FilterOptions {\n    filter: FilterMode;\n    mipmap?: MipmapMode;    // defaults to None if not specified\n}\n\n/**\n * See SkMaskFilter.h for more on this class. The objects are opaque.\n */\nexport type MaskFilter = EmbindObject<MaskFilter>;\n\n/**\n * See SkPaint.h for more information on this class.\n */\nexport interface Paint extends EmbindObject<Paint> {\n    /**\n     * Returns a copy of this paint.\n     */\n    copy(): Paint;\n\n    /**\n     * Returns the blend mode, that is, the mode used to combine source color\n     * with destination color.\n     */\n    getBlendMode(): BlendMode;\n\n    /**\n     * Retrieves the alpha and RGB unpremultiplied. RGB are extended sRGB values\n     * (sRGB gamut, and encoded with the sRGB transfer function).\n     */\n    getColor(): Color;\n\n    /**\n     * Returns the geometry drawn at the beginning and end of strokes.\n     */\n    getStrokeCap(): StrokeCap;\n\n    /**\n     * Returns the geometry drawn at the corners of strokes.\n     */\n    getStrokeJoin(): StrokeJoin;\n\n    /**\n     *  Returns the limit at which a sharp corner is drawn beveled.\n     */\n    getStrokeMiter(): number;\n\n    /**\n     * Returns the thickness of the pen used to outline the shape.\n     */\n    getStrokeWidth(): number;\n\n    /**\n     * Replaces alpha, leaving RGBA unchanged. 0 means fully transparent, 1.0 means opaque.\n     * @param alpha\n     */\n    setAlphaf(alpha: number): void;\n\n    /**\n     * Requests, but does not require, that edge pixels draw opaque or with\n     * partial transparency.\n     * @param aa\n     */\n    setAntiAlias(aa: boolean): void;\n\n    /**\n     * Sets the blend mode that is, the mode used to combine source color\n     * with destination color.\n     * @param mode\n     */\n    setBlendMode(mode: BlendMode): void;\n\n    /**\n     * Sets alpha and RGB used when stroking and filling. The color is four floating\n     * point values, unpremultiplied. The color values are interpreted as being in\n     * the provided colorSpace.\n     * @param color\n     * @param colorSpace - defaults to sRGB\n     */\n    setColor(color: InputColor, colorSpace?: ColorSpace): void;\n\n    /**\n     * Sets alpha and RGB used when stroking and filling. The color is four floating\n     * point values, unpremultiplied. The color values are interpreted as being in\n     * the provided colorSpace.\n     * @param r\n     * @param g\n     * @param b\n     * @param a\n     * @param colorSpace - defaults to sRGB\n     */\n    setColorComponents(r: number, g: number, b: number, a: number, colorSpace?: ColorSpace): void;\n\n    /**\n     * Sets the current color filter, replacing the existing one if there was one.\n     * @param filter\n     */\n    setColorFilter(filter: ColorFilter): void;\n\n    /**\n     * Sets the color used when stroking and filling. The color values are interpreted as being in\n     * the provided colorSpace.\n     * @param color\n     * @param colorSpace - defaults to sRGB.\n     */\n    setColorInt(color: ColorInt, colorSpace?: ColorSpace): void;\n\n    /**\n     * Sets the current image filter, replacing the existing one if there was one.\n     * @param filter\n     */\n    setImageFilter(filter: ImageFilter): void;\n\n    /**\n     * Sets the current mask filter, replacing the existing one if there was one.\n     * @param filter\n     */\n    setMaskFilter(filter: MaskFilter): void;\n\n    /**\n     * Sets the current path effect, replacing the existing one if there was one.\n     * @param effect\n     */\n    setPathEffect(effect: PathEffect): void;\n\n    /**\n     * Sets the current shader, replacing the existing one if there was one.\n     * @param shader\n     */\n    setShader(shader: Shader): void;\n\n    /**\n     * Sets the geometry drawn at the beginning and end of strokes.\n     * @param cap\n     */\n    setStrokeCap(cap: StrokeCap): void;\n\n    /**\n     * Sets the geometry drawn at the corners of strokes.\n     * @param join\n     */\n    setStrokeJoin(join: StrokeJoin): void;\n\n    /**\n     * Sets the limit at which a sharp corner is drawn beveled.\n     * @param limit\n     */\n    setStrokeMiter(limit: number): void;\n\n    /**\n     * Sets the thickness of the pen used to outline the shape.\n     * @param width\n     */\n    setStrokeWidth(width: number): void;\n\n    /**\n     * Sets whether the geometry is filled or stroked.\n     * @param style\n     */\n    setStyle(style: PaintStyle): void;\n}\n\n/**\n * See SkPath.h for more information on this class.\n */\nexport interface Path extends EmbindObject<Path> {\n    /**\n     * Appends arc to Path, as the start of new contour. Arc added is part of ellipse\n     * bounded by oval, from startAngle through sweepAngle. Both startAngle and\n     * sweepAngle are measured in degrees, where zero degrees is aligned with the\n     * positive x-axis, and positive sweeps extends arc clockwise.\n     * Returns the modified path for easier chaining.\n     * @param oval\n     * @param startAngle\n     * @param sweepAngle\n     */\n    addArc(oval: InputRect, startAngle: AngleInDegrees, sweepAngle: AngleInDegrees): Path;\n\n    /**\n     * Adds oval to Path, appending kMove_Verb, four kConic_Verb, and kClose_Verb.\n     * Oval is upright ellipse bounded by Rect oval with radii equal to half oval width\n     * and half oval height. Oval begins at start and continues clockwise by default.\n     * Returns the modified path for easier chaining.\n     * @param oval\n     * @param isCCW - if the path should be drawn counter-clockwise or not\n     * @param startIndex - index of initial point of ellipse\n     */\n    addOval(oval: InputRect, isCCW?: boolean, startIndex?: number): Path;\n\n    /**\n     * Takes 1, 2, 7, or 10 required args, where the first arg is always the path.\n     * The last arg is an optional boolean and chooses between add or extend mode.\n     * The options for the remaining args are:\n     *   - an array of 6 or 9 parameters (perspective is optional)\n     *   - the 9 parameters of a full matrix or\n     *     the 6 non-perspective params of a matrix.\n     * Returns the modified path for easier chaining (or null if params were incorrect).\n     * @param args\n     */\n    addPath(...args: any[]): Path | null;\n\n    /**\n     * Adds contour created from array of n points, adding (count - 1) line segments.\n     * Contour added starts at pts[0], then adds a line for every additional point\n     * in pts array. If close is true, appends kClose_Verb to Path, connecting\n     * pts[count - 1] and pts[0].\n     * Returns the modified path for easier chaining.\n     * @param points\n     * @param close - if true, will add a line connecting last point to the first point.\n     */\n    addPoly(points: InputFlattenedPointArray, close: boolean): Path;\n\n    /**\n     * Adds Rect to Path, appending kMove_Verb, three kLine_Verb, and kClose_Verb,\n     * starting with top-left corner of Rect; followed by top-right, bottom-right,\n     * and bottom-left if isCCW is false; or followed by bottom-left,\n     * bottom-right, and top-right if isCCW is true.\n     * Returns the modified path for easier chaining.\n     * @param rect\n     * @param isCCW\n     */\n    addRect(rect: InputRect, isCCW?: boolean): Path;\n\n    /**\n     * Adds rrect to Path, creating a new closed contour.\n     * Returns the modified path for easier chaining.\n     * @param rrect\n     * @param isCCW\n     */\n    addRRect(rrect: InputRRect, isCCW?: boolean): Path;\n\n    /**\n     * Adds the given verbs and associated points/weights to the path. The process\n     * reads the first verb from verbs and then the appropriate number of points from the\n     * FlattenedPointArray (e.g. 2 points for moveTo, 4 points for quadTo, etc). If the verb is\n     * a conic, a weight will be read from the WeightList.\n     * Returns the modified path for easier chaining\n     * @param verbs - the verbs that create this path, in the order of being drawn.\n     * @param points - represents n points with 2n floats.\n     * @param weights - used if any of the verbs are conics, can be omitted otherwise.\n     */\n    addVerbsPointsWeights(verbs: VerbList, points: InputFlattenedPointArray,\n                          weights?: WeightList): Path;\n\n    /**\n     * Adds an arc to this path, emulating the Canvas2D behavior.\n     * Returns the modified path for easier chaining.\n     * @param x\n     * @param y\n     * @param radius\n     * @param startAngle\n     * @param endAngle\n     * @param isCCW\n     */\n    arc(x: number, y: number, radius: number, startAngle: AngleInRadians, endAngle: AngleInRadians,\n        isCCW?: boolean): Path;\n\n    /**\n     * Appends arc to Path. Arc added is part of ellipse\n     * bounded by oval, from startAngle through sweepAngle. Both startAngle and\n     * sweepAngle are measured in degrees, where zero degrees is aligned with the\n     * positive x-axis, and positive sweeps extends arc clockwise.\n     * Returns the modified path for easier chaining.\n     * @param oval\n     * @param startAngle\n     * @param endAngle\n     * @param forceMoveTo\n     */\n    arcToOval(oval: InputRect, startAngle: AngleInDegrees, endAngle: AngleInDegrees,\n              forceMoveTo: boolean): Path;\n\n    /**\n     * Appends arc to Path. Arc is implemented by one or more conics weighted to\n     * describe part of oval with radii (rx, ry) rotated by xAxisRotate degrees. Arc\n     * curves from last Path Point to (x, y), choosing one of four possible routes:\n     * clockwise or counterclockwise, and smaller or larger. See SkPath.h for more details.\n     * Returns the modified path for easier chaining.\n     * @param rx\n     * @param ry\n     * @param xAxisRotate\n     * @param useSmallArc\n     * @param isCCW\n     * @param x\n     * @param y\n     */\n    arcToRotated(rx: number, ry: number, xAxisRotate: AngleInDegrees, useSmallArc: boolean,\n                 isCCW: boolean, x: number, y: number): Path;\n\n    /**\n     * Appends arc to Path, after appending line if needed. Arc is implemented by conic\n     * weighted to describe part of circle. Arc is contained by tangent from\n     * last Path point to (x1, y1), and tangent from (x1, y1) to (x2, y2). Arc\n     * is part of circle sized to radius, positioned so it touches both tangent lines.\n     * Returns the modified path for easier chaining.\n     * @param x1\n     * @param y1\n     * @param x2\n     * @param y2\n     * @param radius\n     */\n    arcToTangent(x1: number, y1: number, x2: number, y2: number, radius: number): Path;\n\n    /**\n     * Appends CLOSE_VERB to Path. A closed contour connects the first and last point\n     * with a line, forming a continuous loop.\n     * Returns the modified path for easier chaining.\n     */\n    close(): Path;\n\n    /**\n     * Returns minimum and maximum axes values of the lines and curves in Path.\n     * Returns (0, 0, 0, 0) if Path contains no points.\n     * Returned bounds width and height may be larger or smaller than area affected\n     * when Path is drawn.\n     *\n     * Behaves identically to getBounds() when Path contains\n     * only lines. If Path contains curves, computed bounds includes\n     * the maximum extent of the quad, conic, or cubic; is slower than getBounds();\n     * and unlike getBounds(), does not cache the result.\n     * @param outputArray - if provided, the bounding box will be copied into this array instead of\n     *                      allocating a new one.\n     */\n    computeTightBounds(outputArray?: Rect): Rect;\n\n    /**\n     * Adds conic from last point towards (x1, y1), to (x2, y2), weighted by w.\n     * If Path is empty, or path is closed, the last point is set to (0, 0)\n     * before adding conic.\n     * Returns the modified path for easier chaining.\n     * @param x1\n     * @param y1\n     * @param x2\n     * @param y2\n     * @param w\n     */\n    conicTo(x1: number, y1: number, x2: number, y2: number, w: number): Path;\n\n    /**\n     * Returns true if the point (x, y) is contained by Path, taking into\n     * account FillType.\n     * @param x\n     * @param y\n     */\n    contains(x: number, y: number): boolean;\n\n    /**\n     * Returns a copy of this Path.\n     */\n    copy(): Path;\n\n    /**\n     * Returns the number of points in this path. Initially zero.\n     */\n    countPoints(): number;\n\n    /**\n     *  Adds cubic from last point towards (x1, y1), then towards (x2, y2), ending at\n     * (x3, y3). If Path is empty, or path is closed, the last point is set to\n     * (0, 0) before adding cubic.\n     * @param cpx1\n     * @param cpy1\n     * @param cpx2\n     * @param cpy2\n     * @param x\n     * @param y\n     */\n    cubicTo(cpx1: number, cpy1: number, cpx2: number, cpy2: number, x: number, y: number): Path;\n\n    /**\n     * Changes this path to be the dashed version of itself. This is the same effect as creating\n     * a DashPathEffect and calling filterPath on this path.\n     * @param on\n     * @param off\n     * @param phase\n     */\n    dash(on: number, off: number, phase: number): boolean;\n\n    /**\n     * Returns true if other path is equal to this path.\n     * @param other\n     */\n    equals(other: Path): boolean;\n\n    /**\n     * Returns minimum and maximum axes values of Point array.\n     * Returns (0, 0, 0, 0) if Path contains no points. Returned bounds width and height may\n     * be larger or smaller than area affected when Path is drawn.\n     * @param outputArray - if provided, the bounding box will be copied into this array instead of\n     *                      allocating a new one.\n     */\n    getBounds(outputArray?: Rect): Rect;\n\n    /**\n     * Return the FillType for this path.\n     */\n    getFillType(): FillType;\n\n    /**\n     * Returns the Point at index in Point array. Valid range for index is\n     * 0 to countPoints() - 1.\n     * @param index\n     * @param outputArray - if provided, the point will be copied into this array instead of\n     *                      allocating a new one.\n     */\n    getPoint(index: number, outputArray?: Point): Point;\n\n    /**\n     * Returns true if there are no verbs in the path.\n     */\n    isEmpty(): boolean;\n\n    /**\n     * Returns true if the path is volatile; it will not be altered or discarded\n     * by the caller after it is drawn. Path by default have volatile set false, allowing\n     * Surface to attach a cache of data which speeds repeated drawing. If true, Surface\n     * may not speed repeated drawing.\n     */\n    isVolatile(): boolean;\n\n    /**\n     * Adds line from last point to (x, y). If Path is empty, or last path is closed,\n     * last point is set to (0, 0) before adding line.\n     * Returns the modified path for easier chaining.\n     * @param x\n     * @param y\n     */\n    lineTo(x: number, y: number): Path;\n\n    /**\n     * Adds begininning of contour at the given point.\n     * Returns the modified path for easier chaining.\n     * @param x\n     * @param y\n     */\n    moveTo(x: number, y: number): Path;\n\n    /**\n     * Translates all the points in the path by dx, dy.\n     * Returns the modified path for easier chaining.\n     * @param dx\n     * @param dy\n     */\n    offset(dx: number, dy: number): Path;\n\n    /**\n     * Combines this path with the other path using the given PathOp. Returns false if the operation\n     * fails.\n     * @param other\n     * @param op\n     */\n    op(other: Path, op: PathOp): boolean;\n\n    /**\n     * Adds quad from last point towards (x1, y1), to (x2, y2).\n     * If Path is empty, or path is closed, last point is set to (0, 0) before adding quad.\n     * Returns the modified path for easier chaining.\n     * @param x1\n     * @param y1\n     * @param x2\n     * @param y2\n     */\n    quadTo(x1: number, y1: number, x2: number, y2: number): Path;\n\n    /**\n     * Relative version of arcToRotated.\n     * @param rx\n     * @param ry\n     * @param xAxisRotate\n     * @param useSmallArc\n     * @param isCCW\n     * @param dx\n     * @param dy\n     */\n    rArcTo(rx: number, ry: number, xAxisRotate: AngleInDegrees, useSmallArc: boolean,\n           isCCW: boolean, dx: number, dy: number): Path;\n\n    /**\n     * Relative version of conicTo.\n     * @param dx1\n     * @param dy1\n     * @param dx2\n     * @param dy2\n     * @param w\n     */\n    rConicTo(dx1: number, dy1: number, dx2: number, dy2: number, w: number): Path;\n\n    /**\n     * Relative version of cubicTo.\n     * @param cpx1\n     * @param cpy1\n     * @param cpx2\n     * @param cpy2\n     * @param x\n     * @param y\n     */\n    rCubicTo(cpx1: number, cpy1: number, cpx2: number, cpy2: number, x: number, y: number): Path;\n\n    /**\n     * Sets Path to its initial state.\n     * Removes verb array, point array, and weights, and sets FillType to Winding.\n     * Internal storage associated with Path is released\n     */\n    reset(): void;\n\n    /**\n     * Sets Path to its initial state.\n     * Removes verb array, point array, and weights, and sets FillType to Winding.\n     * Internal storage associated with Path is *not* released.\n     * Use rewind() instead of reset() if Path storage will be reused and performance\n     * is critical.\n     */\n    rewind(): void;\n\n    /**\n     * Relative version of lineTo.\n     * @param x\n     * @param y\n     */\n    rLineTo(x: number, y: number): Path;\n\n    /**\n     * Relative version of moveTo.\n     * @param x\n     * @param y\n     */\n    rMoveTo(x: number, y: number): Path;\n\n    /**\n     * Relative version of quadTo.\n     * @param x1\n     * @param y1\n     * @param x2\n     * @param y2\n     */\n    rQuadTo(x1: number, y1: number, x2: number, y2: number): Path;\n\n    /**\n     * Sets FillType, the rule used to fill Path.\n     * @param fill\n     */\n    setFillType(fill: FillType): void;\n\n    /**\n     * Specifies whether Path is volatile; whether it will be altered or discarded\n     * by the caller after it is drawn. Path by default have volatile set false.\n     *\n     * Mark animating or temporary paths as volatile to improve performance.\n     * Mark unchanging Path non-volatile to improve repeated rendering.\n     * @param volatile\n     */\n    setIsVolatile(volatile: boolean): void;\n\n    /**\n     * Set this path to a set of non-overlapping contours that describe the\n     * same area as the original path.\n     * The curve order is reduced where possible so that cubics may\n     * be turned into quadratics, and quadratics maybe turned into lines.\n     *\n     * Returns true if operation was able to produce a result.\n     */\n    simplify(): boolean;\n\n    /**\n     * Turns this path into the filled equivalent of the stroked path. Returns null if the operation\n     * fails (e.g. the path is a hairline).\n     * @param opts - describe how stroked path should look.\n     */\n    stroke(opts?: StrokeOpts): Path | null;\n\n    /**\n     * Serializes the contents of this path as a series of commands.\n     */\n    toCmds(): PathCommand[];\n\n    /**\n     * Returns this path as an SVG string.\n     */\n    toSVGString(): string;\n\n    /**\n     * Takes a 3x3 matrix as either an array or as 9 individual params.\n     * @param args\n     */\n    transform(...args: any[]): Path;\n\n    /**\n     * Take start and stop \"t\" values (values between 0...1), and modify this path such that\n     * it is a subset of the original path.\n     * The trim values apply to the entire path, so if it contains several contours, all of them\n     * are including in the calculation.\n     * Null is returned if either input value is NaN.\n     * @param startT - a value in the range [0.0, 1.0]. 0.0 is the beginning of the path.\n     * @param stopT  - a value in the range [0.0, 1.0]. 1.0 is the end of the path.\n     * @param isComplement\n     */\n    trim(startT: number, stopT: number, isComplement: boolean): Path | null;\n}\n\n/**\n * See SkPathEffect.h for more on this class. The objects are opaque.\n */\nexport type PathEffect = EmbindObject<PathEffect>;\n\n/**\n * See SkPicture.h for more information on this class.\n *\n * Of note, SkPicture is *not* what is colloquially thought of as a \"picture\" (what we\n * call a bitmap). An SkPicture is a series of draw commands.\n */\nexport interface SkPicture extends EmbindObject<SkPicture> {\n    /**\n     * Returns the serialized format of this SkPicture. The format may change at anytime and\n     * no promises are made for backwards or forward compatibility.\n     */\n    serialize(): Uint8Array | null;\n}\n\nexport interface PictureRecorder extends EmbindObject<PictureRecorder> {\n    /**\n     * Returns a canvas on which to draw. When done drawing, call finishRecordingAsPicture()\n     *\n     * @param bounds - a rect to cull the results.\n     */\n    beginRecording(bounds: InputRect): Canvas;\n\n    /**\n     * Returns the captured draw commands as a picture and invalidates the canvas returned earlier.\n     */\n    finishRecordingAsPicture(): SkPicture;\n}\n\n/**\n * See SkRuntimeEffect.h for more details.\n */\nexport interface RuntimeEffect extends EmbindObject<RuntimeEffect> {\n    /**\n     * Returns a shader executed using the given uniform data.\n     * @param uniforms\n     * @param isOpaque\n     * @param localMatrix\n     */\n    makeShader(uniforms: Float32Array | number[], isOpaque?: boolean,\n               localMatrix?: InputMatrix): Shader;\n\n    /**\n     * Returns a shader executed using the given uniform data and the children as inputs.\n     * @param uniforms\n     * @param isOpaque\n     * @param children\n     * @param localMatrix\n     */\n    makeShaderWithChildren(uniforms: Float32Array | number[], isOpaque?: boolean,\n                           children?: Shader[], localMatrix?: InputMatrix): Shader;\n\n    /**\n     * Returns the nth uniform from the effect.\n     * @param index\n     */\n    getUniform(index: number): SkSLUniform;\n\n    /**\n     * Returns the number of uniforms on the effect.\n     */\n    getUniformCount(): number;\n\n    /**\n     * Returns the total number of floats across all uniforms on the effect. This is the length\n     * of the uniforms array expected by makeShader. For example, an effect with a single float3\n     * uniform, would return 1 from `getUniformCount()`, but 3 from `getUniformFloatCount()`.\n     */\n    getUniformFloatCount(): number;\n\n    /**\n     * Returns the name of the nth effect uniform.\n     * @param index\n     */\n    getUniformName(index: number): string;\n}\n\n/**\n * See SkShader.h for more on this class. The objects are opaque.\n */\nexport type Shader = EmbindObject<Shader>;\n\nexport interface Surface extends EmbindObject<Surface> {\n    /**\n     * Clean up the surface and any extra memory.\n     * [Deprecated]: In the future, calls to delete() will be sufficient to clean up the memory.\n     */\n    dispose(): void;\n\n    /**\n     * Make sure any queued draws are sent to the screen or the GPU.\n     */\n    flush(): void;\n\n    /**\n     * Return a canvas that is backed by this surface. Any draws to the canvas will (eventually)\n     * show up on the surface. The returned canvas is owned by the surface and does NOT need to\n     * be cleaned up by the client.\n     */\n    getCanvas(): Canvas;\n\n    /**\n     * Returns the height of this surface in pixels.\n     */\n    height(): number;\n\n    /**\n     * Returns the ImageInfo associated with this surface.\n     */\n    imageInfo(): ImageInfo;\n\n    /**\n     * Returns current contents of the surface as an Image. This image will be optimized to be\n     * drawn to another surface of the same type. For example, if this surface is backed by the\n     * GPU, the returned Image will be backed by a GPU texture.\n     */\n    makeImageSnapshot(bounds?: InputIRect): Image;\n\n    /**\n     * Returns a compatible Surface, haring the same raster or GPU properties of the original.\n     * The pixels are not shared.\n     * @param info - width, height, etc of the Surface.\n     */\n    makeSurface(info: ImageInfo): Surface;\n\n    /**\n     * Returns if this Surface is a GPU-backed surface or not.\n     */\n    reportBackendTypeIsGPU(): boolean;\n\n    /**\n     * If this surface is GPU-backed, return the sample count of the surface.\n     */\n    sampleCnt(): number;\n\n    /**\n     * Returns the width of this surface in pixels.\n     */\n    width(): number;\n}\n\n/**\n * See SkTextBlob.h for more on this class. The objects are opaque.\n */\nexport type TextBlob = EmbindObject<TextBlob>;\n\n/**\n * See SkTypeface.h for more on this class. The objects are opaque.\n */\nexport type Typeface = EmbindObject<Typeface>;\n\n/**\n * See SkVertices.h for more on this class.\n */\nexport interface Vertices extends EmbindObject<Vertices> {\n    /**\n     * Return the bounding area for the vertices.\n     * @param outputArray - if provided, the bounding box will be copied into this array instead of\n     *                      allocating a new one.\n     */\n    bounds(outputArray?: Rect): Rect;\n\n    /**\n     * Return a unique ID for this vertices object.\n     */\n    uniqueID(): number;\n}\n\nexport interface SkottieAnimation extends EmbindObject<SkottieAnimation> {\n    /**\n     * Returns the animation duration in seconds.\n     */\n    duration(): number;\n    /**\n     * Returns the animation frame rate (frames / second).\n     */\n    fps(): number;\n\n    /**\n     * Draws current animation frame. Must call seek or seekFrame first.\n     * @param canvas\n     * @param dstRect\n     */\n    render(canvas: Canvas, dstRect?: InputRect): void;\n\n    /**\n     * [deprecated] - use seekFrame\n     * @param t - value from [0.0, 1.0]; 0 is first frame, 1 is final frame.\n     * @param damageRect - will copy damage frame into this if provided.\n     */\n    seek(t: number, damageRect?: Rect): Rect;\n\n    /**\n     * Update the animation state to match |t|, specified as a frame index\n     * i.e. relative to duration() * fps().\n     *\n     * Returns the rectangle that was affected by this animation.\n     *\n     * @param frame - Fractional values are allowed and meaningful - e.g.\n     *                0.0 -> first frame\n     *                1.0 -> second frame\n     *                0.5 -> halfway between first and second frame\n     * @param damageRect - will copy damage frame into this if provided.\n     */\n    seekFrame(frame: number, damageRect?: Rect): Rect;\n\n    /**\n     * Return the size of this animation.\n     * @param outputSize - If provided, the size will be copied into here as width, height.\n     */\n    size(outputSize?: Point): Point;\n    version(): string;\n}\n\n/**\n * Options used for Path.stroke(). If an option is omitted, a sensible default will be used.\n */\nexport interface StrokeOpts {\n    /** The width of the stroked lines. */\n    width?: number;\n    miter_limit?: number;\n    /**\n     * if > 1, increase precision, else if (0 < resScale < 1) reduce precision to\n     * favor speed and size\n     */\n    precision?: number;\n    join?: StrokeJoin;\n    cap?: StrokeCap;\n}\n\nexport interface StrutStyle {\n    strutEnabled?: boolean;\n    fontFamilies?: string[];\n    fontStyle?: FontStyle;\n    fontSize?: number;\n    heightMultiplier?: number;\n    halfLeading?: boolean;\n    leading?: number;\n    forceStrutHeight?: boolean;\n}\n\nexport interface TextFontFeatures {\n    name: string;\n    value: number;\n}\n\nexport interface TextShadow {\n    color?: InputColor;\n    /**\n     * 2d array for x and y offset. Defaults to [0, 0]\n     */\n    offset?: number[];\n    blurRadius?: number;\n}\n\nexport interface TextStyle {\n    backgroundColor?: InputColor;\n    color?: InputColor;\n    decoration?: number;\n    decorationColor?: InputColor;\n    decorationThickness?: number;\n    decrationStyle?: DecorationStyle;\n    fontFamilies?: string[];\n    fontFeatures?: TextFontFeatures[];\n    fontSize?: number;\n    fontStyle?: FontStyle;\n    foregroundColor?: InputColor;\n    heightMultiplier?: number;\n    halfLeading?: boolean;\n    letterSpacing?: number;\n    locale?: string;\n    shadows?: TextShadow[];\n    textBaseline?: TextBaseline;\n    wordSpacing?: number;\n}\n\nexport interface TonalColorsInput {\n    ambient: InputColor;\n    spot: InputColor;\n}\n\nexport interface TonalColorsOutput {\n    ambient: Color;\n    spot: Color;\n}\n\nexport interface TypefaceFontProvider extends EmbindObject<TypefaceFontProvider> {\n    /**\n     * Registers a given typeface with the given family name (ignoring whatever name the\n     * typface has for itself).\n     * @param bytes - the raw bytes for a typeface.\n     * @param family\n     */\n    registerFont(bytes: ArrayBuffer | Uint8Array, family: string): void;\n}\n\nexport interface URange {\n    start: number;\n    end: number;\n}\n\n/**\n * Options for configuring a WebGL context. If an option is omitted, a sensible default will\n * be used. These are defined by the WebGL standards.\n */\nexport interface WebGLOptions {\n    alpha?: number;\n    antialias?: number;\n    depth?: number;\n    enableExtensionsByDefault?: number;\n    explicitSwapControl?: number;\n    failIfMajorPerformanceCaveat?: number;\n    majorVersion?: number;\n    minorVersion?: number;\n    preferLowPowerToHighPerformance?: number;\n    premultipliedAlpha?: number;\n    preserveDrawingBuffer?: number;\n    renderViaOffscreenBackBuffer?: number;\n    stencil?: number;\n}\n\nexport interface DefaultConstructor<T> {\n    new (): T;\n}\n\nexport interface ColorMatrixHelpers {\n    /**\n     * Returns a new ColorMatrix that is the result of multiplying outer*inner\n     * @param outer\n     * @param inner\n     */\n    concat(outer: ColorMatrix, inner: ColorMatrix): ColorMatrix;\n\n    /**\n     * Returns an identity ColorMatrix.\n     */\n    identity(): ColorMatrix;\n\n    /**\n     * Sets the 4 \"special\" params that will translate the colors after they are multiplied\n     * by the 4x4 matrix.\n     * @param m\n     * @param dr - delta red\n     * @param dg - delta green\n     * @param db - delta blue\n     * @param da - delta alpha\n     */\n    postTranslate(m: ColorMatrix, dr: number, dg: number, db: number, da: number): ColorMatrix;\n\n    /**\n     * Returns a new ColorMatrix that is rotated around a given axis.\n     * @param axis - 0 for red, 1 for green, 2 for blue\n     * @param sine - sin(angle)\n     * @param cosine - cos(angle)\n     */\n    rotated(axis: number, sine: number, cosine: number): ColorMatrix;\n\n    /**\n     * Returns a new ColorMatrix that scales the colors as specified.\n     * @param redScale\n     * @param greenScale\n     * @param blueScale\n     * @param alphaScale\n     */\n    scaled(redScale: number, greenScale: number, blueScale: number,\n           alphaScale: number): ColorMatrix;\n}\n\n/**\n * A constructor for making an ImageData that is compatible with the Canvas2D emulation code.\n */\nexport interface ImageDataConstructor {\n    new (width: number, height: number): EmulatedImageData;\n    new (pixels: Uint8ClampedArray, width: number, height: number): EmulatedImageData;\n}\n\n/**\n * TODO(kjlubick) Make this API return Float32Arrays\n */\nexport interface Matrix3x3Helpers {\n    /**\n     * Returns a new identity 3x3 matrix.\n     */\n    identity(): number[];\n\n    /**\n     * Returns the inverse of the given 3x3 matrix or null if it is not invertible.\n     * @param m\n     */\n    invert(m: Matrix3x3 | number[]): number[] | null;\n\n    /**\n     * Maps the given 2d points according to the given 3x3 matrix.\n     * @param m\n     * @param points - the flattened points to map; the results are computed in place on this array.\n     */\n    mapPoints(m: Matrix3x3 | number[], points: number[]): number[];\n\n    /**\n     * Multiplies the provided 3x3 matrices together from left to right.\n     * @param matrices\n     */\n    multiply(...matrices: Array<(Matrix3x3 | number[])>): number[];\n\n    /**\n     * Returns a new 3x3 matrix representing a rotation by n radians.\n     * @param radians\n     * @param px - the X value to rotate around, defaults to 0.\n     * @param py - the Y value to rotate around, defaults to 0.\n     */\n    rotated(radians: AngleInRadians, px?: number, py?: number): number[];\n\n    /**\n     * Returns a new 3x3 matrix representing a scale in the x and y directions.\n     * @param sx - the scale in the X direction.\n     * @param sy - the scale in the Y direction.\n     * @param px - the X value to scale from, defaults to 0.\n     * @param py - the Y value to scale from, defaults to 0.\n     */\n    scaled(sx: number, sy: number, px?: number, py?: number): number[];\n\n    /**\n     * Returns a new 3x3 matrix representing a scale in the x and y directions.\n     * @param kx - the kurtosis in the X direction.\n     * @param ky - the kurtosis in the Y direction.\n     * @param px - the X value to skew from, defaults to 0.\n     * @param py - the Y value to skew from, defaults to 0.\n     */\n    skewed(kx: number, ky: number, px?: number, py?: number): number[];\n\n    /**\n     * Returns a new 3x3 matrix representing a translation in the x and y directions.\n     * @param dx\n     * @param dy\n     */\n    translated(dx: number, dy: number): number[];\n}\n\n/**\n * See SkM44.h for more details.\n */\nexport interface Matrix4x4Helpers {\n    /**\n     * Returns a new identity 4x4 matrix.\n     */\n    identity(): number[];\n\n    /**\n     * Returns the inverse of the given 4x4 matrix or null if it is not invertible.\n     * @param matrix\n     */\n    invert(matrix: Matrix4x4 | number[]): number[] | null;\n\n    /**\n     * Return a new 4x4 matrix representing a camera at eyeVec, pointed at centerVec.\n     * @param eyeVec\n     * @param centerVec\n     * @param upVec\n     */\n    lookat(eyeVec: Vector3, centerVec: Vector3, upVec: Vector3): number[];\n\n    /**\n     * Multiplies the provided 4x4 matrices together from left to right.\n     * @param matrices\n     */\n    multiply(...matrices: Array<(Matrix4x4 | number[])>): number[];\n\n    /**\n     * Returns the inverse of the given 4x4 matrix or throws if it is not invertible.\n     * @param matrix\n     */\n    mustInvert(matrix: Matrix4x4 | number[]): number[];\n\n    /**\n     * Returns a new 4x4 matrix representing a perspective.\n     * @param near\n     * @param far\n     * @param radians\n     */\n    perspective(near: number, far: number, radians: AngleInRadians): number[];\n\n    /**\n     * Returns the value at the specified row and column of the given 4x4 matrix.\n     * @param matrix\n     * @param row\n     * @param col\n     */\n    rc(matrix: Matrix4x4 | number[], row: number, col: number): number;\n\n    /**\n     * Returns a new 4x4 matrix representing a rotation around the provided vector.\n     * @param axis\n     * @param radians\n     */\n    rotated(axis: Vector3, radians: AngleInRadians): number[];\n\n    /**\n     * Returns a new 4x4 matrix representing a rotation around the provided vector.\n     * Rotation is provided redundantly as both sin and cos values.\n     * This rotate can be used when you already have the cosAngle and sinAngle values\n     * so you don't have to atan(cos/sin) to call roatated() which expects an angle in radians.\n     * This does no checking! Behavior for invalid sin or cos values or non-normalized axis vectors\n     * is incorrect. Prefer rotated().\n     * @param axis\n     * @param sinAngle\n     * @param cosAngle\n     */\n    rotatedUnitSinCos(axis: Vector3, sinAngle: number, cosAngle: number): number[];\n\n    /**\n     * Returns a new 4x4 matrix representing a scale by the provided vector.\n     * @param vec\n     */\n    scaled(vec: Vector3): number[];\n\n    /**\n     * Returns a new 4x4 matrix that sets up a 3D perspective view from a given camera.\n     * @param area - describes the viewport. (0, 0, canvas_width, canvas_height) suggested.\n     * @param zScale - describes the scale of the z axis. min(width, height)/2 suggested\n     * @param cam\n     */\n    setupCamera(area: InputRect, zScale: number, cam: Camera): number[];\n\n    /**\n     * Returns a new 4x4 matrix representing a translation by the provided vector.\n     * @param vec\n     */\n    translated(vec: Vector3): number[];\n\n    /**\n     * Returns a new 4x4 matrix that is the transpose of this 4x4 matrix.\n     * @param matrix\n     */\n    transpose(matrix: Matrix4x4 | number[]): number[];\n}\n\nexport interface ParagraphBuilderFactory {\n    /**\n     * Creates a ParagraphBuilder using the fonts available from the given font manager.\n     * @param style\n     * @param fontManager\n     */\n    Make(style: ParagraphStyle, fontManager: FontMgr): ParagraphBuilder;\n\n    /**\n     * Creates a ParagraphBuilder using the fonts available from the given font provider.\n     * @param style\n     * @param fontSrc\n     */\n    MakeFromFontProvider(style: ParagraphStyle, fontSrc: TypefaceFontProvider): ParagraphBuilder;\n\n    /**\n     * Return a shaped array of lines\n     */\n    ShapeText(text: string, runs: FontBlock[], width?: number): ShapedLine[];\n}\n\nexport interface ParagraphStyleConstructor {\n    /**\n     * Fills out all optional fields with defaults. The emscripten bindings complain if there\n     * is a field undefined and it was expecting a float (for example).\n     * @param ps\n     */\n    new(ps: ParagraphStyle): ParagraphStyle;\n}\n\n/**\n * See SkColorFilter.h for more.\n */\nexport interface ColorFilterFactory {\n    /**\n     * Makes a color filter with the given color and blend mode.\n     * @param color\n     * @param mode\n     */\n    MakeBlend(color: InputColor, mode: BlendMode): ColorFilter;\n\n    /**\n     * Makes a color filter composing two color filters.\n     * @param outer\n     * @param inner\n     */\n    MakeCompose(outer: ColorFilter, inner: ColorFilter): ColorFilter;\n\n    /**\n     * Makes a color filter that is linearly interpolated between two other color filters.\n     * @param t - a float in the range of 0.0 to 1.0.\n     * @param dst\n     * @param src\n     */\n    MakeLerp(t: number, dst: ColorFilter, src: ColorFilter): ColorFilter;\n\n    /**\n     * Makes a color filter that converts between linear colors and sRGB colors.\n     */\n    MakeLinearToSRGBGamma(): ColorFilter;\n\n    /**\n     * Creates a color filter using the provided color matrix.\n     * @param cMatrix\n     */\n    MakeMatrix(cMatrix: InputColorMatrix): ColorFilter;\n\n    /**\n     * Makes a color filter that converts between sRGB colors and linear colors.\n     */\n    MakeSRGBToLinearGamma(): ColorFilter;\n}\n\nexport interface ContourMeasureIterConstructor {\n    /**\n     * Creates an ContourMeasureIter with the given path.\n     * @param path\n     * @param forceClosed - if path should be forced close before measuring it.\n     * @param resScale - controls the precision of the measure. values > 1 increase the\n     *                   precision (and possibly slow down the computation).\n     */\n    new (path: Path, forceClosed: boolean, resScale: number): ContourMeasureIter;\n}\n\n/**\n * See SkFont.h for more.\n */\nexport interface FontConstructor extends DefaultConstructor<Font> {\n    /**\n     * Constructs Font with default values with Typeface.\n     * @param face\n     * @param size - font size in points. If not specified, uses a default value.\n     */\n    new (face: Typeface | null, size?: number): Font;\n\n    /**\n     * Constructs Font with default values with Typeface and size in points,\n     * horizontal scale, and horizontal skew. Horizontal scale emulates condensed\n     * and expanded fonts. Horizontal skew emulates oblique fonts.\n     * @param face\n     * @param size\n     * @param scaleX\n     * @param skewX\n     */\n    new (face: Typeface | null, size: number, scaleX: number, skewX: number): Font;\n}\n\nexport interface FontMgrFactory {\n    /**\n     * Create an FontMgr with the created font data. Returns null if buffers was empty.\n     * @param buffers\n     */\n    FromData(...buffers: ArrayBuffer[]): FontMgr | null;\n\n    /**\n     * Return the default FontMgr. This will generally have 0 or 1 fonts in it, depending on if\n     * the demo monospace font was compiled in.\n     */\n    RefDefault(): FontMgr;\n}\n\n/**\n * See effects/ImageFilters.h for more.\n */\nexport interface ImageFilterFactory {\n    /**\n     *  Create a filter from a shader.\n     *  @param shader       The input shader.\n     */\n    MakeShader(shader: Shader): ImageFilter;\n\n    /**\n     *  Create a blend of two image filters.\n     *  @param blendMode - BlendMode combining the two filters\n     *  @param background - Background filter (dst)\n     *  @param foreground - Foreground filter (src)\n     */\n    MakeBlend(blendMode: BlendMode, background: ImageFilter, foreground: ImageFilter): ImageFilter;\n\n    /**\n     *  Create a filter that draws a drop shadow under the input content. This filter produces an\n     *  image that includes the inputs' content.\n     *  @param dx       The X offset of the shadow.\n     *  @param dy       The Y offset of the shadow.\n     *  @param sigmaX   The blur radius for the shadow, along the X axis.\n     *  @param sigmaY   The blur radius for the shadow, along the Y axis.\n     *  @param color    The color of the drop shadow.\n     *  @param input    The input filter, or will use the source bitmap if this is null.\n     */\n    MakeDropShadow(dx: number, dy: number, sigmaX: number, sigmaY: number, \n                   color: InputColor, input: ImageFilter | null): ImageFilter;\n\n    /**\n     *  Create a filter that renders a drop shadow, in exactly the same manner as MakeDropShadow,\n     *  except that the resulting image does not include the input content. This allows the shadow\n     *  and input to be composed by a filter DAG in a more flexible manner.\n     *  @param dx       The X offset of the shadow.\n     *  @param dy       The Y offset of the shadow.\n     *  @param sigmaX   The blur radius for the shadow, along the X axis.\n     *  @param sigmaY   The blur radius for the shadow, along the Y axis.\n     *  @param color    The color of the drop shadow.\n     *  @param input    The input filter, or will use the source bitmap if this is null.\n     *  @param cropRect Optional rectangle that crops the input and output.\n     */\n     MakeDropShadowOnly(dx: number, dy: number, sigmaX: number, sigmaY: number, \n                    color: InputColor, input: ImageFilter | null): ImageFilter;\n\n    /**\n     * Create a filter that blurs its input by the separate X and Y sigmas. The provided tile mode\n     * is used when the blur kernel goes outside the input image.\n     *\n     * @param sigmaX - The Gaussian sigma value for blurring along the X axis.\n     * @param sigmaY - The Gaussian sigma value for blurring along the Y axis.\n     * @param mode\n     * @param input - if null, it will use the dynamic source image (e.g. a saved layer)\n     */\n    MakeBlur(sigmaX: number, sigmaY: number, mode: TileMode,\n             input: ImageFilter | null): ImageFilter;\n\n    /**\n     * Create a filter that applies the color filter to the input filter results.\n     * @param cf\n     * @param input - if null, it will use the dynamic source image (e.g. a saved layer)\n     */\n    MakeColorFilter(cf: ColorFilter, input: ImageFilter | null): ImageFilter;\n\n    /**\n     * Create a filter that composes 'inner' with 'outer', such that the results of 'inner' are\n     * treated as the source bitmap passed to 'outer'.\n     * If either param is null, the other param will be returned.\n     * @param outer\n     * @param inner - if null, it will use the dynamic source image (e.g. a saved layer)\n     */\n    MakeCompose(outer: ImageFilter | null, inner: ImageFilter | null): ImageFilter;\n\n    /**\n     * Create a filter that transforms the input image by 'matrix'. This matrix transforms the\n     * local space, which means it effectively happens prior to any transformation coming from the\n     * Canvas initiating the filtering.\n     * @param matr\n     * @param fq\n     * @param input - if null, it will use the dynamic source image (e.g. a saved layer)\n     */\n    MakeMatrixTransform(matr: InputMatrix, fq: FilterQuality,\n                        input: ImageFilter | null): ImageFilter;\n}\n\n/**\n * See SkMaskFilter.h for more details.\n */\nexport interface MaskFilterFactory {\n    /**\n     * Create a blur maskfilter\n     * @param style\n     * @param sigma - Standard deviation of the Gaussian blur to apply. Must be > 0.\n     * @param respectCTM - if true the blur's sigma is modified by the CTM.\n     */\n    MakeBlur(style: BlurStyle, sigma: number, respectCTM: boolean): MaskFilter;\n}\n\n/**\n * Contains the ways to create an Path.\n */\nexport interface PathConstructorAndFactory extends DefaultConstructor<Path> {\n    /**\n     * Creates a new path from the given list of path commands. If this fails, null will be\n     * returned instead.\n     * @param cmds\n     */\n    MakeFromCmds(cmds: PathCommand[]): Path | null;\n\n    /**\n     * Creates a new path by combining the given paths according to op. If this fails, null will\n     * be returned instead.\n     * @param one\n     * @param two\n     * @param op\n     */\n    MakeFromOp(one: Path, two: Path, op: PathOp): Path | null;\n\n    /**\n     * Creates a new path from the provided SVG string. If this fails, null will be\n     * returned instead.\n     * @param str\n     */\n    MakeFromSVGString(str: string): Path | null;\n\n    /**\n     * Creates a new path using the provided verbs and associated points and weights. The process\n     * reads the first verb from verbs and then the appropriate number of points from the\n     * FlattenedPointArray (e.g. 2 points for moveTo, 4 points for quadTo, etc). If the verb is\n     * a conic, a weight will be read from the WeightList.\n     * If the data is malformed (e.g. not enough points), the resulting path will be incomplete.\n     * @param verbs - the verbs that create this path, in the order of being drawn.\n     * @param points - represents n points with 2n floats.\n     * @param weights - used if any of the verbs are conics, can be omitted otherwise.\n     */\n    MakeFromVerbsPointsWeights(verbs: VerbList, points: InputFlattenedPointArray,\n                               weights?: WeightList): Path;\n}\n\n/**\n * See SkPathEffect.h for more details.\n */\nexport interface PathEffectFactory {\n    /**\n     * Returns a PathEffect that can turn sharp corners into rounded corners.\n     * @param radius - if <=0, returns null\n     */\n    MakeCorner(radius: number): PathEffect | null;\n\n    /**\n     * Returns a PathEffect that add dashes to the path.\n     *\n     * See SkDashPathEffect.h for more details.\n     *\n     * @param intervals - even number of entries with even indicies specifying the length of\n     *                    the \"on\" intervals, and the odd indices specifying the length of \"off\".\n     * @param phase - offset length into the intervals array. Defaults to 0.\n     */\n    MakeDash(intervals: number[], phase?: number): PathEffect;\n\n    /**\n     * Returns a PathEffect that breaks path into segments of segLength length, and randomly move\n     * the endpoints away from the original path by a maximum of deviation.\n     * @param segLength - length of the subsegments.\n     * @param dev - limit of the movement of the endpoints.\n     * @param seedAssist - modifies the randomness. See SkDiscretePathEffect.h for more.\n     */\n    MakeDiscrete(segLength: number, dev: number, seedAssist: number): PathEffect;\n}\n\n/**\n * See RuntimeEffect.h for more details.\n */\nexport interface RuntimeEffectFactory {\n    /**\n     * Compiles a RuntimeEffect from the given shader code.\n     * @param sksl - Source code for a shader written in SkSL\n     * @param callback - will be called with any compilation error. If not provided, errors will\n     *                   be printed to console.log().\n     */\n    Make(sksl: string, callback?: (err: string) => void): RuntimeEffect | null;\n}\n\n/**\n * For more information, see SkShaders.h.\n */\nexport interface ShaderFactory {\n    /**\n     * Returns a shader that combines the given shaders with a BlendMode.\n     * @param mode\n     * @param one\n     * @param two\n     */\n    MakeBlend(mode: BlendMode, one: Shader, two: Shader): Shader;\n\n    /**\n     * Returns a shader with a given color and colorspace.\n     * @param color\n     * @param space\n     */\n    MakeColor(color: InputColor, space: ColorSpace): Shader;\n\n    /**\n     * Returns a shader with Perlin Fractal Noise.\n     * See SkPerlinNoiseShader.h for more details\n     * @param baseFreqX - base frequency in the X direction; range [0.0, 1.0]\n     * @param baseFreqY - base frequency in the Y direction; range [0.0, 1.0]\n     * @param octaves\n     * @param seed\n     * @param tileW - if this and tileH are non-zero, the frequencies will be modified so that the\n     *                noise will be tileable for the given size.\n     * @param tileH - if this and tileW are non-zero, the frequencies will be modified so that the\n     *                noise will be tileable for the given size.\n     */\n    MakeFractalNoise(baseFreqX: number, baseFreqY: number, octaves: number, seed: number,\n                     tileW: number, tileH: number): Shader;\n\n    /**\n     * Returns a shader is a linear interpolation combines the given shaders with a BlendMode.\n     * @param t - range of [0.0, 1.0], indicating how far we should be between one and two.\n     * @param one\n     * @param two\n     */\n    MakeLerp(t: number, one: Shader, two: Shader): Shader;\n\n    /**\n     * Returns a shader that generates a linear gradient between the two specified points.\n     * See SkGradientShader.h for more.\n     * @param start\n     * @param end\n     * @param colors - colors to be distributed between start and end.\n     * @param pos - May be null. The relative positions of colors. If supplied must be same length\n     *              as colors.\n     * @param mode\n     * @param localMatrix\n     * @param flags - By default gradients will interpolate their colors in unpremul space\n     *                and then premultiply each of the results. By setting this to 1, the\n     *                gradients will premultiply their colors first, and then interpolate\n     *                between them.\n     * @param colorSpace\n     */\n    MakeLinearGradient(start: InputPoint, end: InputPoint, colors: InputFlexibleColorArray,\n                       pos: number[] | null, mode: TileMode, localMatrix?: InputMatrix,\n                       flags?: number, colorSpace?: ColorSpace): Shader;\n\n    /**\n     * Returns a shader that generates a radial gradient given the center and radius.\n     * See SkGradientShader.h for more.\n     * @param center\n     * @param radius\n     * @param colors - colors to be distributed between the center and edge.\n     * @param pos - May be null. The relative positions of colors. If supplied must be same length\n     *              as colors. Range [0.0, 1.0]\n     * @param mode\n     * @param localMatrix\n     * @param flags - 0 to interpolate colors in unpremul, 1 to interpolate colors in premul.\n     * @param colorSpace\n     */\n    MakeRadialGradient(center: InputPoint, radius: number, colors: InputFlexibleColorArray,\n                       pos: number[] | null, mode: TileMode, localMatrix?: InputMatrix,\n                       flags?: number, colorSpace?: ColorSpace): Shader;\n\n    /**\n     * Returns a shader that generates a sweep gradient given a center.\n     * See SkGradientShader.h for more.\n     * @param cx\n     * @param cy\n     * @param colors - colors to be distributed around the center, within the provided angles.\n     * @param pos - May be null. The relative positions of colors. If supplied must be same length\n     *              as colors. Range [0.0, 1.0]\n     * @param mode\n     * @param localMatrix\n     * @param flags - 0 to interpolate colors in unpremul, 1 to interpolate colors in premul.\n     * @param startAngle - angle corresponding to 0.0. Defaults to 0 degrees.\n     * @param endAngle - angle corresponding to 1.0. Defaults to 360 degrees.\n     * @param colorSpace\n     */\n    MakeSweepGradient(cx: number, cy: number, colors: InputFlexibleColorArray,\n                      pos: number[] | null, mode: TileMode, localMatrix?: InputMatrix | null,\n                      flags?: number, startAngle?: AngleInDegrees, endAngle?: AngleInDegrees,\n                      colorSpace?: ColorSpace): Shader;\n\n    /**\n     * Returns a shader with Perlin Turbulence.\n     * See SkPerlinNoiseShader.h for more details\n     * @param baseFreqX - base frequency in the X direction; range [0.0, 1.0]\n     * @param baseFreqY - base frequency in the Y direction; range [0.0, 1.0]\n     * @param octaves\n     * @param seed\n     * @param tileW - if this and tileH are non-zero, the frequencies will be modified so that the\n     *                noise will be tileable for the given size.\n     * @param tileH - if this and tileW are non-zero, the frequencies will be modified so that the\n     *                noise will be tileable for the given size.\n     */\n    MakeTurbulence(baseFreqX: number, baseFreqY: number, octaves: number, seed: number,\n                   tileW: number, tileH: number): Shader;\n\n    /**\n     * Returns a shader that generates a conical gradient given two circles.\n     * See SkGradientShader.h for more.\n     * @param start\n     * @param startRadius\n     * @param end\n     * @param endRadius\n     * @param colors\n     * @param pos\n     * @param mode\n     * @param localMatrix\n     * @param flags\n     * @param colorSpace\n     */\n    MakeTwoPointConicalGradient(start: InputPoint, startRadius: number, end: InputPoint,\n                                endRadius: number, colors: InputFlexibleColorArray,\n                                pos: number[] | null, mode: TileMode, localMatrix?: InputMatrix,\n                                flags?: number, colorSpace?: ColorSpace): Shader;\n}\n\n/**\n * See SkTextBlob.h for more details.\n */\nexport interface TextBlobFactory {\n    /**\n     * Return a TextBlob with a single run of text.\n     *\n     * It does not perform typeface fallback for characters not found in the Typeface.\n     * It does not perform kerning or other complex shaping; glyphs are positioned based on their\n     * default advances.\n     * @param glyphs - if using Malloc'd array, be sure to use CanvasKit.MallocGlyphIDs().\n     * @param font\n     */\n    MakeFromGlyphs(glyphs: InputGlyphIDArray, font: Font): TextBlob;\n\n    /**\n     * Returns a TextBlob built from a single run of text with rotation, scale, and translations.\n     *\n     * It uses the default character-to-glyph mapping from the typeface in the font.\n     * @param str\n     * @param rsxforms\n     * @param font\n     */\n    MakeFromRSXform(str: string, rsxforms: InputFlattenedRSXFormArray, font: Font): TextBlob;\n\n    /**\n     * Returns a TextBlob built from a single run of text with rotation, scale, and translations.\n     *\n     * @param glyphs - if using Malloc'd array, be sure to use CanvasKit.MallocGlyphIDs().\n     * @param rsxforms\n     * @param font\n     */\n    MakeFromRSXformGlyphs(glyphs: InputGlyphIDArray, rsxforms: InputFlattenedRSXFormArray,\n                          font: Font): TextBlob;\n\n    /**\n     * Return a TextBlob with a single run of text.\n     *\n     * It uses the default character-to-glyph mapping from the typeface in the font.\n     * It does not perform typeface fallback for characters not found in the Typeface.\n     * It does not perform kerning or other complex shaping; glyphs are positioned based on their\n     * default advances.\n     * @param str\n     * @param font\n     */\n    MakeFromText(str: string, font: Font): TextBlob;\n\n    /**\n     * Returns a TextBlob that has the glyphs following the contours of the given path.\n     *\n     * It is a convenience wrapper around MakeFromRSXform and ContourMeasureIter.\n     * @param str\n     * @param path\n     * @param font\n     * @param initialOffset - the length in pixels to start along the path.\n     */\n    MakeOnPath(str: string, path: Path, font: Font, initialOffset?: number): TextBlob;\n}\n\nexport interface TextStyleConstructor {\n    /**\n     * Fills out all optional fields with defaults. The emscripten bindings complain if there\n     * is a field undefined and it was expecting a float (for example).\n     * @param ts\n     */\n    new(ts: TextStyle): TextStyle;\n}\n\nexport interface TypefaceFontProviderFactory {\n    /**\n     * Return an empty TypefaceFontProvider\n     */\n    Make(): TypefaceFontProvider;\n}\n\n/**\n * Functions for manipulating vectors. It is Loosely based off of SkV3 in SkM44.h but Skia\n * also has SkVec2 and Skv4. This combines them and works on vectors of any length.\n */\nexport interface VectorHelpers {\n    /**\n     * Adds 2 vectors together, term by term, returning a new Vector.\n     * @param a\n     * @param b\n     */\n    add(a: VectorN, b: VectorN): VectorN;\n\n    /**\n     * Returns the cross product of the two vectors. Only works for length 3.\n     * @param a\n     * @param b\n     */\n    cross(a: Vector3, b: Vector3): Vector3;\n\n    /**\n     * Returns the length(sub(a, b))\n     * @param a\n     * @param b\n     */\n    dist(a: VectorN, b: VectorN): number;\n\n    /**\n     * Returns the dot product of the two vectors.\n     * @param a\n     * @param b\n     */\n    dot(a: VectorN, b: VectorN): number;\n\n    /**\n     * Returns the length of this vector, which is always positive.\n     * @param v\n     */\n    length(v: VectorN): number;\n\n    /**\n     * Returns the length squared of this vector.\n     * @param v\n     */\n    lengthSquared(v: VectorN): number;\n\n    /**\n     * Returns a new vector which is v multiplied by the scalar s.\n     * @param v\n     * @param s\n     */\n    mulScalar(v: VectorN, s: number): VectorN;\n\n    /**\n     * Returns a normalized vector.\n     * @param v\n     */\n    normalize(v: VectorN): VectorN;\n\n    /**\n     * Subtracts vector b from vector a (termwise).\n     * @param a\n     * @param b\n     */\n    sub(a: VectorN, b: VectorN): VectorN;\n}\n\n/**\n * A PosTan is a Float32Array of length 4, representing a position and a tangent vector. In order,\n * the values are [px, py, tx, ty].\n */\nexport type PosTan = Float32Array;\n/**\n * An Color is represented by 4 floats, typically with values between 0 and 1.0. In order,\n * the floats correspond to red, green, blue, alpha.\n */\nexport type Color = Float32Array;\nexport type ColorInt = number; // deprecated, prefer Color\n/**\n * An ColorMatrix is a 4x4 color matrix that transforms the 4 color channels\n * with a 1x4 matrix that post-translates those 4 channels.\n * For example, the following is the layout with the scale (S) and post-transform\n * (PT) items indicated.\n * RS,  0,  0,  0 | RPT\n *  0, GS,  0,  0 | GPT\n *  0,  0, BS,  0 | BPT\n *  0,  0,  0, AS | APT\n */\nexport type ColorMatrix = Float32Array;\n/**\n * An IRect is represented by 4 ints. In order, the ints correspond to left, top,\n * right, bottom. See Rect.h for more\n */\nexport type IRect = Int32Array;\n/**\n * An Point is represented by 2 floats: (x, y).\n */\nexport type Point = Float32Array;\n/**\n * An Rect is represented by 4 floats. In order, the floats correspond to left, top,\n * right, bottom. See Rect.h for more\n */\nexport type Rect = Float32Array;\n/**\n * An RRect (rectangle with rounded corners) is represented by 12 floats. In order, the floats\n * correspond to left, top, right, bottom and then in pairs, the radiusX, radiusY for upper-left,\n * upper-right, lower-right, lower-left. See RRect.h for more.\n */\nexport type RRect = Float32Array;\n\nexport type WebGLContextHandle = number;\nexport type AngleInDegrees = number;\nexport type AngleInRadians = number;\nexport type SaveLayerFlag = number;\n\nexport type TypedArrayConstructor = Float32ArrayConstructor | Int32ArrayConstructor |\n    Int16ArrayConstructor | Int8ArrayConstructor | Uint32ArrayConstructor |\n    Uint16ArrayConstructor | Uint8ArrayConstructor;\nexport type TypedArray = Float32Array | Int32Array | Int16Array | Int8Array | Uint32Array |\n    Uint16Array | Uint8Array;\n\nexport type ColorIntArray = MallocObj | Uint32Array | number[];\n/**\n * FlattenedPointArray represents n points by 2*n float values. In order, the values should\n * be the x, y for each point.\n */\nexport type FlattenedPointArray = Float32Array;\n/**\n * FlattenedRectangleArray represents n rectangles by 4*n float values. In order, the values should\n * be the top, left, right, bottom point for each rectangle.\n */\nexport type FlattenedRectangleArray = Float32Array;\n\nexport type GlyphIDArray = Uint16Array;\n/**\n * PathCommand contains a verb and then any arguments needed to fulfill that path verb.\n * Examples:\n *   [CanvasKit.MOVE_VERB, 0, 10]\n *   [CanvasKit.LINE_VERB, 30, 40]\n * TODO(kjlubick) Make this not be a 2-d array and support typed arrays.\n */\nexport type PathCommand = number[];\n/**\n * VerbList holds verb constants like CanvasKit.MOVE_VERB, CanvasKit.CUBIC_VERB.\n */\nexport type VerbList = MallocObj | Uint8Array | number[];\n/**\n * WeightList holds weights for conics when making paths.\n */\nexport type WeightList = MallocObj | Float32Array | number[];\n\nexport type Matrix4x4 = Float32Array;\nexport type Matrix3x3 = Float32Array;\nexport type Matrix3x2 = Float32Array;\n/**\n * Vector3 represents an x, y, z coordinate or vector. It has length 3.\n */\nexport type Vector3 = number[];\n\n/**\n * VectorN represents a vector of length n.\n */\nexport type VectorN = number[];\n\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as colors.\n * Length 4.\n */\nexport type InputColor = MallocObj | Color | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as color matrices.\n * Length 20.\n */\nexport type InputColorMatrix = MallocObj | ColorMatrix | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as glyph IDs.\n * Length n for n glyph IDs.\n */\nexport type InputGlyphIDArray = MallocObj | GlyphIDArray | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as flattened points.\n * Length 2 * n for n points.\n */\nexport type InputFlattenedPointArray = MallocObj | FlattenedPointArray | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as flattened rectangles.\n * Length 4 * n for n rectangles.\n */\nexport type InputFlattenedRectangleArray = MallocObj | FlattenedRectangleArray | number[];\n/**\n * Some APIs accept a flattened array of colors in one of two ways - groups of 4 float values for\n * r, g, b, a or just integers that have 8 bits for each these. CanvasKit will detect which one\n * it is and act accordingly. Additionally, this can be an array of Float32Arrays of length 4\n * (e.g. Color). This is convenient for things like gradients when matching up colors to stops.\n */\nexport type InputFlexibleColorArray = Float32Array | Uint32Array | Float32Array[];\n/**\n * CanvasKit APIs accept a Float32Array or a normal array (of length 2) as a Point.\n */\nexport type InputPoint = Point | number[];\n/**\n * CanvasKit APIs accept all of these matrix types. Under the hood, we generally use 4x4 matrices.\n */\nexport type InputMatrix = MallocObj | Matrix4x4 | Matrix3x3 | Matrix3x2 | DOMMatrix | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as rectangles.\n * Length 4.\n */\nexport type InputRect = MallocObj | Rect | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as (int) rectangles.\n * Length 4.\n */\nexport type InputIRect = MallocObj | IRect | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as rectangles with\n * rounded corners. Length 12.\n */\nexport type InputRRect = MallocObj | RRect | number[];\n/**\n * This represents n RSXforms by 4*n float values. In order, the values should\n * be scos, ssin, tx, ty for each RSXForm. See RSXForm.h for more details.\n */\nexport type InputFlattenedRSXFormArray = MallocObj | Float32Array | number[];\n/**\n * CanvasKit APIs accept normal arrays, typed arrays, or Malloc'd memory as a vector of 3 floats.\n * For example, this is the x, y, z coordinates.\n */\nexport type InputVector3 = MallocObj | Vector3 | Float32Array;\n\nexport type AlphaType = EmbindEnumEntity;\nexport type BlendMode = EmbindEnumEntity;\nexport type BlurStyle = EmbindEnumEntity;\nexport type ClipOp = EmbindEnumEntity;\nexport type ColorSpace = EmbindObject<ColorSpace>;\nexport type ColorType = EmbindEnumEntity;\nexport type EncodedImageFormat = EmbindEnumEntity;\nexport type FillType = EmbindEnumEntity;\nexport type FilterMode = EmbindEnumEntity;\nexport type FilterQuality = EmbindEnumEntity;\nexport type FontEdging = EmbindEnumEntity;\nexport type FontHinting = EmbindEnumEntity;\nexport type MipmapMode = EmbindEnumEntity;\nexport type PaintStyle = EmbindEnumEntity;\nexport type PathOp = EmbindEnumEntity;\nexport type PointMode = EmbindEnumEntity;\nexport type StrokeCap = EmbindEnumEntity;\nexport type StrokeJoin = EmbindEnumEntity;\nexport type TileMode = EmbindEnumEntity;\nexport type VertexMode = EmbindEnumEntity;\n\nexport type Affinity = EmbindEnumEntity;\nexport type DecorationStyle = EmbindEnumEntity;\nexport type FontSlant = EmbindEnumEntity;\nexport type FontWeight = EmbindEnumEntity;\nexport type FontWidth = EmbindEnumEntity;\nexport type PlaceholderAlignment = EmbindEnumEntity;\nexport type RectHeightStyle = EmbindEnumEntity;\nexport type RectWidthStyle = EmbindEnumEntity;\nexport type TextAlign = EmbindEnumEntity;\nexport type TextBaseline = EmbindEnumEntity;\nexport type TextDirection = EmbindEnumEntity;\nexport type TextHeightBehavior = EmbindEnumEntity;\n\nexport interface AffinityEnumValues extends EmbindEnum {\n    Upstream: Affinity;\n    Downstream: Affinity;\n}\n\nexport interface AlphaTypeEnumValues extends EmbindEnum {\n    Opaque: AlphaType;\n    Premul: AlphaType;\n    Unpremul: AlphaType;\n}\n\nexport interface BlendModeEnumValues extends EmbindEnum {\n    Clear: BlendMode;\n    Src: BlendMode;\n    Dst: BlendMode;\n    SrcOver: BlendMode;\n    DstOver: BlendMode;\n    SrcIn: BlendMode;\n    DstIn: BlendMode;\n    SrcOut: BlendMode;\n    DstOut: BlendMode;\n    SrcATop: BlendMode;\n    DstATop: BlendMode;\n    Xor: BlendMode;\n    Plus: BlendMode;\n    Modulate: BlendMode;\n    Screen: BlendMode;\n    Overlay: BlendMode;\n    Darken: BlendMode;\n    Lighten: BlendMode;\n    ColorDodge: BlendMode;\n    ColorBurn: BlendMode;\n    HardLight: BlendMode;\n    SoftLight: BlendMode;\n    Difference: BlendMode;\n    Exclusion: BlendMode;\n    Multiply: BlendMode;\n    Hue: BlendMode;\n    Saturation: BlendMode;\n    Color: BlendMode;\n    Luminosity: BlendMode;\n}\n\nexport interface BlurStyleEnumValues extends EmbindEnum {\n    Normal: BlurStyle;\n    Solid: BlurStyle;\n    Outer: BlurStyle;\n    Inner: BlurStyle;\n}\n\nexport interface ClipOpEnumValues extends EmbindEnum {\n    Difference: ClipOp;\n    Intersect: ClipOp;\n}\n\n/**\n * The currently supported color spaces. These are all singleton values.\n */\nexport interface ColorSpaceEnumValues { // not a typical enum, but effectively like one.\n    // These are all singleton values - don't call delete on them.\n    readonly SRGB: ColorSpace;\n    readonly DISPLAY_P3: ColorSpace;\n    readonly ADOBE_RGB: ColorSpace;\n\n    /**\n     * Returns true if the two color spaces are equal.\n     * @param a\n     * @param b\n     */\n    Equals(a: ColorSpace, b: ColorSpace): boolean;\n}\n\nexport interface ColorTypeEnumValues extends EmbindEnum {\n    Alpha_8: ColorType;\n    RGB_565: ColorType;\n    RGBA_8888: ColorType;\n    BGRA_8888: ColorType;\n    RGBA_1010102: ColorType;\n    RGB_101010x: ColorType;\n    Gray_8: ColorType;\n    RGBA_F16: ColorType;\n    RGBA_F32: ColorType;\n}\n\nexport interface DecorationStyleEnumValues extends EmbindEnum {\n    Solid: DecorationStyle;\n    Double: DecorationStyle;\n    Dotted: DecorationStyle;\n    Dashed: DecorationStyle;\n    Wavy: DecorationStyle;\n}\n\nexport interface FillTypeEnumValues extends EmbindEnum {\n    Winding: FillType;\n    EvenOdd: FillType;\n}\n\nexport interface FilterModeEnumValues extends EmbindEnum {\n    Linear: FilterMode;\n    Nearest: FilterMode;\n}\n\nexport interface FilterQualityEnumValues extends EmbindEnum {\n    None: FilterQuality;\n    Low: FilterQuality;\n    Medium: FilterQuality;\n    High: FilterQuality;\n}\n\nexport interface FontEdgingEnumValues extends EmbindEnum {\n    Alias: FontEdging;\n    AntiAlias: FontEdging;\n    SubpixelAntiAlias: FontEdging;\n}\n\nexport interface FontHintingEnumValues extends EmbindEnum {\n    None: FontHinting;\n    Slight: FontHinting;\n    Normal: FontHinting;\n    Full: FontHinting;\n}\n\nexport interface FontSlantEnumValues extends EmbindEnum {\n    Upright: FontSlant;\n    Italic: FontSlant;\n    Oblique: FontSlant;\n}\n\nexport interface FontWeightEnumValues extends EmbindEnum {\n    Invisible: FontWeight;\n    Thin: FontWeight;\n    ExtraLight: FontWeight;\n    Light: FontWeight;\n    Normal: FontWeight;\n    Medium: FontWeight;\n    SemiBold: FontWeight;\n    Bold: FontWeight;\n    ExtraBold: FontWeight;\n    Black: FontWeight;\n    ExtraBlack: FontWeight;\n}\n\nexport interface FontWidthEnumValues extends EmbindEnum {\n    UltraCondensed: FontWidth;\n    ExtraCondensed: FontWidth;\n    Condensed: FontWidth;\n    SemiCondensed: FontWidth;\n    Normal: FontWidth;\n    SemiExpanded: FontWidth;\n    Expanded: FontWidth;\n    ExtraExpanded: FontWidth;\n    UltraExpanded: FontWidth;\n}\n\n/*\n *  These values can be OR'd together\n */\nexport interface GlyphRunFlagValues {\n    IsWhiteSpace: number;\n}\n\nexport interface ImageFormatEnumValues extends EmbindEnum {\n    // TODO(kjlubick) When these are compiled in depending on the availability of the codecs,\n    //   be sure to make these nullable.\n    PNG: EncodedImageFormat;\n    JPEG: EncodedImageFormat;\n    WEBP: EncodedImageFormat;\n}\n\nexport interface MipmapModeEnumValues extends EmbindEnum {\n    None: MipmapMode;\n    Nearest: MipmapMode;\n    Linear: MipmapMode;\n}\n\nexport interface PaintStyleEnumValues extends EmbindEnum {\n    Fill: PaintStyle;\n    Stroke: PaintStyle;\n}\n\nexport interface PathOpEnumValues extends EmbindEnum {\n    Difference: PathOp;\n    Intersect: PathOp;\n    Union: PathOp;\n    XOR: PathOp;\n    ReverseDifference: PathOp;\n}\n\nexport interface PlaceholderAlignmentEnumValues extends EmbindEnum {\n    Baseline: PlaceholderAlignment;\n    AboveBaseline: PlaceholderAlignment;\n    BelowBaseline: PlaceholderAlignment;\n    Top: PlaceholderAlignment;\n    Bottom: PlaceholderAlignment;\n    Middle: PlaceholderAlignment;\n}\n\nexport interface PointModeEnumValues extends EmbindEnum {\n    Points: PointMode;\n    Lines: PointMode;\n    Polygon: PointMode;\n}\n\nexport interface RectHeightStyleEnumValues extends EmbindEnum {\n    Tight: RectHeightStyle;\n    Max: RectHeightStyle;\n    IncludeLineSpacingMiddle: RectHeightStyle;\n    IncludeLineSpacingTop: RectHeightStyle;\n    IncludeLineSpacingBottom: RectHeightStyle;\n    Strut: RectHeightStyle;\n}\n\nexport interface RectWidthStyleEnumValues extends EmbindEnum {\n    Tight: RectWidthStyle;\n    Max: RectWidthStyle;\n}\n\nexport interface StrokeCapEnumValues extends EmbindEnum {\n    Butt: StrokeCap;\n    Round: StrokeCap;\n    Square: StrokeCap;\n}\n\nexport interface StrokeJoinEnumValues extends EmbindEnum {\n    Bevel: StrokeJoin;\n    Miter: StrokeJoin;\n    Round: StrokeJoin;\n}\n\nexport interface TextAlignEnumValues extends EmbindEnum {\n    Left: TextAlign;\n    Right: TextAlign;\n    Center: TextAlign;\n    Justify: TextAlign;\n    Start: TextAlign;\n    End: TextAlign;\n}\n\nexport interface TextBaselineEnumValues extends EmbindEnum {\n    Alphabetic: TextBaseline;\n    Ideographic: TextBaseline;\n}\n\nexport interface TextDirectionEnumValues extends EmbindEnum {\n    LTR: TextDirection;\n    RTL: TextDirection;\n}\n\nexport interface TextHeightBehaviorEnumValues extends EmbindEnum {\n    All: TextHeightBehavior;\n    DisableFirstAscent: TextHeightBehavior;\n    DisableLastDescent: TextHeightBehavior;\n    DisableAll: TextHeightBehavior;\n}\n\nexport interface TileModeEnumValues extends EmbindEnum {\n    Clamp: TileMode;\n    Decal: TileMode;\n    Mirror: TileMode;\n    Repeat: TileMode;\n}\n\nexport interface VertexModeEnumValues extends EmbindEnum {\n    Triangles: VertexMode;\n    TrianglesStrip: VertexMode;\n    TriangleFan: VertexMode;\n}\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Layers } from '.';\nimport { PageLayer } from './types';\n\n// Names are encoded as, e.g. \"id1/id2/id3_stringValue\"\nexport function decodeName(overrideName: string) {\n  const [layerIdPathString, propertyType] = overrideName.split('_') as [\n    string,\n    PropertyType,\n  ];\n\n  return { layerIdPath: layerIdPathString.split('/'), propertyType };\n}\n\nexport function encodeName(layerIdPath: string[], propertyType: PropertyType) {\n  return [layerIdPath.join('/'), propertyType].join('_');\n}\n\ntype PropertyValue = Sketch.OverrideValue['value'];\ntype ImagePropertyValue = Sketch.FileRef | Sketch.DataRef;\n\nexport type PropertyTypeMap = {\n  stringValue: string;\n  symbolID: string;\n  textStyle: string;\n  layerStyle: string;\n  image: ImagePropertyValue;\n};\n\nexport type PropertyType = keyof PropertyTypeMap;\n\nexport function isValidProperty<T extends PropertyType>(\n  propertyType: T,\n  value: PropertyValue,\n): value is PropertyTypeMap[T] {\n  switch (propertyType) {\n    case 'stringValue':\n    case 'symbolID':\n    case 'layerStyle':\n    case 'textStyle': {\n      return typeof value === 'string';\n    }\n    case 'image': {\n      return typeof value !== 'string';\n    }\n    default:\n      // This should never happen\n      return false;\n  }\n}\n\nexport function getLayerOverride(\n  layer: PageLayer,\n  propertyType: PropertyType,\n  value: PropertyValue,\n) {\n  switch (propertyType) {\n    case 'stringValue': {\n      if (!Layers.isTextLayer(layer) || !isValidProperty(propertyType, value))\n        return;\n\n      return { type: propertyType, value, layer } as const;\n    }\n    case 'symbolID': {\n      if (\n        !Layers.isSymbolInstance(layer) ||\n        !isValidProperty(propertyType, value)\n      )\n        return;\n\n      return { type: propertyType, value, layer } as const;\n    }\n    case 'image': {\n      if (!Layers.isBitmapLayer(layer) || !isValidProperty(propertyType, value))\n        return;\n\n      return { type: propertyType, value, layer } as const;\n    }\n    case 'textStyle': {\n      if (!Layers.isTextLayer(layer) || !isValidProperty(propertyType, value))\n        return;\n\n      return { type: propertyType, value, layer } as const;\n    }\n    case 'layerStyle': {\n      if (!isValidProperty(propertyType, value)) return;\n\n      return { type: propertyType, value, layer } as const;\n    }\n  }\n}\n\nexport function canOverrideProperty(\n  overrideProperties: Sketch.OverrideProperty[],\n  propertyType: PropertyType,\n  key: string,\n) {\n  return (\n    overrideProperties.find(({ overrideName }) => {\n      const [idPathString, type] = overrideName.split('_');\n      return idPathString === key && type === propertyType;\n    })?.canOverride ?? true\n  );\n}\n\nexport function getOverrideValue<T extends PropertyType>(\n  overrideValues: Sketch.OverrideValue[],\n  propertyType: T,\n  key: string,\n) {\n  const value = overrideValues.find(({ overrideName }) => {\n    const [idPathString, type] = overrideName.split('_');\n    return idPathString === key && type === propertyType;\n  })?.value;\n\n  return value !== undefined && isValidProperty(propertyType, value)\n    ? value\n    : undefined;\n}\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\n\nexport const isInferredLayout = (\n  groupLayout: Sketch.FreeformGroupLayout | Sketch.InferredGroupLayout,\n): groupLayout is Sketch.InferredGroupLayout => {\n  return groupLayout._class === 'MSImmutableInferredGroupLayout';\n};\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\n\nexport type ExportScale = {\n  scale: number;\n  absoluteSize: number;\n  visibleScaleType: Sketch.VisibleScaleType;\n};\n\nexport type ExportSize = {\n  size: number;\n  visibleScaleType: Sketch.VisibleScaleType;\n};\n\nfunction parseFloatWithSuffix(value: string): number | undefined {\n  let parsed = parseFloat(value);\n\n  if (!isNaN(parsed)) return parsed;\n\n  // Remove the single-character suffix\n  parsed = parseFloat(value.slice(0, -1));\n\n  return isNaN(parsed) ? undefined : parsed;\n}\n\nexport function parseScale(scaleText: string): ExportSize | undefined {\n  const size = parseFloatWithSuffix(scaleText);\n\n  if (size === undefined || size <= 0) return undefined;\n\n  const visibleScaleType =\n    scaleText[scaleText.length - 1] === 'w'\n      ? Sketch.VisibleScaleType.Width\n      : scaleText[scaleText.length - 1] === 'h'\n      ? Sketch.VisibleScaleType.Height\n      : Sketch.VisibleScaleType.Scale;\n\n  return { size, visibleScaleType };\n}\n\nexport function getScaleUnits(visibleScaleType: Sketch.VisibleScaleType) {\n  switch (visibleScaleType) {\n    case Sketch.VisibleScaleType.Scale:\n      return 'x';\n    case Sketch.VisibleScaleType.Height:\n      return 'h';\n    case Sketch.VisibleScaleType.Width:\n      return 'w';\n  }\n}\n","export function toRadians(degrees: number) {\n  return (degrees * Math.PI) / 180;\n}\n\nexport function toDegrees(radians: number) {\n  return (radians * 180) / Math.PI;\n}\n","import { Point } from './types';\n\nexport function distance(\n  { x: x1, y: y1 }: Point,\n  { x: x2, y: y2 }: Point,\n): number {\n  const a = x2 - x1;\n  const b = y2 - y1;\n\n  return Math.sqrt(a * a + b * b);\n}\n\nexport function pointSum(\n  { x: x1, y: y1 }: Point,\n  { x: x2, y: y2 }: Point,\n): Point {\n  return {\n    x: x1 + x2,\n    y: y1 + y2,\n  };\n}\n","import { AffineTransform } from 'noya-geometry';\nimport { isNumberEqual } from 'noya-utils';\nimport { Bounds, Point, Rect } from './types';\n\nexport function transformRect(rect: Rect, transform: AffineTransform): Rect {\n  const bounds = createBounds(rect);\n  const p1 = transform.applyTo({\n    x: bounds.minX,\n    y: bounds.minY,\n  });\n  const p2 = transform.applyTo({\n    x: bounds.maxX,\n    y: bounds.maxY,\n  });\n  return createRect(p1, p2);\n}\n\n/**\n * Create a rectangle with a non-negative width and height\n */\nexport function createRect(initialPoint: Point, finalPoint: Point): Rect {\n  return {\n    width: Math.abs(finalPoint.x - initialPoint.x),\n    height: Math.abs(finalPoint.y - initialPoint.y),\n    x: Math.min(finalPoint.x, initialPoint.x),\n    y: Math.min(finalPoint.y, initialPoint.y),\n  };\n}\n\nexport function createRectFromBounds(\n  bounds: Omit<Bounds, 'midX' | 'midY'>,\n): Rect {\n  return {\n    x: bounds.minX,\n    y: bounds.minY,\n    width: bounds.maxX - bounds.minX,\n    height: bounds.maxY - bounds.minY,\n  };\n}\n\nexport function getRectCornerPoints(rect: Rect): [Point, Point, Point, Point] {\n  return [\n    { x: rect.x, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y + rect.height },\n    { x: rect.x, y: rect.y + rect.height },\n  ];\n}\n\nexport function getRectEdgeMidPoints(rect: Rect): [Point, Point, Point, Point] {\n  const { minX, minY, midX, midY, maxX, maxY } = createBounds(rect);\n\n  return [\n    { x: midX, y: minY },\n    { x: maxX, y: midY },\n    { x: midX, y: maxY },\n    { x: minX, y: midY },\n  ];\n}\n\nfunction areaOfTriangle(p1: Point, p2: Point, p3: Point): number {\n  const { x: x1, y: y1 } = p1;\n  const { x: x2, y: y2 } = p2;\n  const { x: x3, y: y3 } = p3;\n\n  return (\n    Math.abs(x1 * y2 + x2 * y3 + x3 * y1 - y1 * x2 - y2 * x3 - y3 * x1) / 2\n  );\n}\n\n// https://stackoverflow.com/a/17146376\nexport function rotatedRectContainsPoint(points: Point[], p: Point): boolean {\n  const [a, b, c, d] = points;\n\n  // Calculate the sum of areas of APD, DPC, CPB, BPA.\n  const triangleArea =\n    areaOfTriangle(a, p, d) +\n    areaOfTriangle(d, p, c) +\n    areaOfTriangle(c, p, b) +\n    areaOfTriangle(b, p, a);\n\n  const rectangleArea = areaOfTriangle(a, b, c) + areaOfTriangle(a, c, d);\n\n  if (isNumberEqual(triangleArea, rectangleArea)) return true;\n\n  // If this sum is greater than the area of the rectangle:\n  // Then point P(x,y) is outside the rectangle.\n  // Else it is in or on the rectangle.\n  return !(triangleArea > rectangleArea);\n}\n\nexport function createBounds(rect: Rect): Bounds {\n  const minX = Math.min(rect.x, rect.x + rect.width);\n  const minY = Math.min(rect.y, rect.y + rect.height);\n  const maxX = Math.max(rect.x, rect.x + rect.width);\n  const maxY = Math.max(rect.y, rect.y + rect.height);\n\n  const midX = (maxX + minX) / 2;\n  const midY = (maxY + minY) / 2;\n\n  return {\n    minX,\n    midX,\n    maxX,\n    minY,\n    midY,\n    maxY,\n  };\n}\n\nexport function rectContainsPoint(rect: Rect, point: Point): boolean {\n  return (\n    rect.x <= point.x &&\n    point.x <= rect.x + rect.width &&\n    rect.y <= point.y &&\n    point.y <= rect.y + rect.height\n  );\n}\n\n// https://searchfox.org/mozilla-beta/source/toolkit/modules/Geometry.jsm\nexport function rectsIntersect(a: Rect, b: Rect): boolean {\n  const x1 = Math.max(a.x, b.x);\n  const x2 = Math.min(a.x + a.width, b.x + b.width);\n  const y1 = Math.max(a.y, b.y);\n  const y2 = Math.min(a.y + a.height, b.y + b.height);\n\n  return x1 < x2 && y1 < y2;\n}\n\n/**\n * Ensure a rect has a non-negative width and height\n */\nexport function normalizeRect(rect: Rect): Rect {\n  return {\n    x: Math.min(rect.x + rect.width, rect.x),\n    y: Math.min(rect.y + rect.height, rect.y),\n    width: Math.abs(rect.width),\n    height: Math.abs(rect.height),\n  };\n}\n\nexport function insetRect(rect: Rect, dx: number, dy: number): Rect {\n  return {\n    x: rect.x + dx,\n    y: rect.y + dy,\n    width: rect.width - dx * 2,\n    height: rect.height - dy * 2,\n  };\n}\n\nexport function unionRects(...rects: Rect[]): Rect {\n  function union(a: Rect, b: Rect) {\n    const minX = Math.min(a.x, b.x);\n    const minY = Math.min(a.y, b.y);\n    const maxX = Math.max(a.x + a.width, b.x + b.width);\n    const maxY = Math.max(a.y + a.height, b.y + b.height);\n\n    return createRectFromBounds({ minX, minY, maxX, maxY });\n  }\n\n  if (rects.length === 0) {\n    console.error('No rects to union');\n    return { x: 0, y: 0, width: 0, height: 0 };\n  }\n\n  return rects.reduce((acc, rect) => union(acc, rect), rects[0]);\n}\n\nexport function computeBoundsFromPoints(points: Point[]): Rect {\n  const x = Math.min(...points.map((point) => point.x));\n  const y = Math.min(...points.map((point) => point.y));\n  const width = Math.max(...points.map((point) => point.x)) - x;\n  const height = Math.max(...points.map((point) => point.y)) - y;\n\n  return { x, y, width, height };\n}\n","import { isEqual } from './internal/isEqual';\n\nexport function isShallowEqual<T>(a: T, b: T): boolean {\n  return isEqual(a, b, false);\n}\n","import { isEqual } from './internal/isEqual';\n\nexport function isDeepEqual<T>(a: T, b: T): boolean {\n  return isEqual(a, b, true);\n}\n","// The built-in Number.EPSILON is too small for some of our calculations.\n// Possibly this is due to conversion to/from sketch files or wasm, or\n// because we multiply/divide which compounds this error\nexport function isNumberEqual(a: number, b: number): boolean {\n  return Math.abs(a - b) < 1e-6;\n}\n","export function zip<A, B>(...arrays: [A[], B[]]): [A, B][];\nexport function zip<A, B, C>(...arrays: [A[], B[], C[]]): [A, B, C][];\nexport function zip<A, B, C, D>(\n  ...arrays: [A[], B[], C[], D[]]\n): [A, B, C, D][];\nexport function zip<A, B, C, D, E>(\n  ...arrays: [A[], B[], C[], D[], E[]]\n): [A, B, C, D, E][];\nexport function zip<T>(...arrays: T[][]): T[][];\n\n/**\n * Make an array of tuples containing the nth element of each array.\n *\n * If input arrays are different lengths, the resulting array of tuples will\n * have the same length as the shortest input array.\n */\nexport function zip(...arrays: unknown[][]): unknown[][] {\n  const length = Math.min(...arrays.map((array) => array.length));\n\n  const result: unknown[][] = [];\n\n  for (let i = 0; i < length; i++) {\n    result[i] = [];\n\n    for (let j = 0; j < arrays.length; j++) {\n      result[i][j] = arrays[j][i];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Make an array of tuples containing the nth element of each array.\n *\n * If input arrays are different lengths, the resulting array of tuples will\n * have the same length as the longest input array, and any holes will\n * be filled with `fillValue`.\n */\nexport function zipLongest<T>(fillValue: T, ...arrays: T[][]): T[][] {\n  const length = Math.max(...arrays.map((array) => array.length));\n\n  // Fill each array with `fillValue` up to the length of the largest array\n  const filledArrays = arrays.map((array) => {\n    const copy = [...array];\n    copy.length = length;\n    copy.fill(fillValue, array.length);\n    return copy;\n  });\n\n  return zip(...filledArrays);\n}\n","export const clamp = (number: number, min = 0, max = 1): number => {\n  return number > max ? max : number < min ? min : number;\n};\n","export function sum(values: number[]) {\n  let value = 0;\n\n  for (let i = 0; i < values.length; i++) {\n    value += values[i];\n  }\n\n  return value;\n}\n","/**\n * Round to precision, if necessary.\n *\n * Examples:\n * - round(1.111, 2) => 1.11\n * - round(1.115, 2) => 1.12\n * - round(1, 2) => 1\n *\n * https://stackoverflow.com/a/11832950\n */\nexport function round(number: number, precision: number = 0) {\n  const base = Math.pow(10, precision);\n  return Math.round((number + Number.EPSILON) * base) / base;\n}\n","export function sortBy<\n  K extends PropertyKey,\n  Item extends { [key in K]: string }\n>(array: Item[], key: K) {\n  return [...array].sort((a, b) => {\n    const aName = a[key].toUpperCase();\n    const bName = b[key].toUpperCase();\n\n    return aName > bName ? 1 : aName < bName ? -1 : 0;\n  });\n}\n","// Loosely based on:\n// https://github.com/apple/swift-algorithms/blob/0e2941ef50e7ebdf165150e3959453330946fd7d/Sources/Algorithms/Chunked.swift#L236\nexport function chunkBy<T>(\n  values: T[],\n  belongInSameGroup: (a: T, b: T) => boolean,\n): T[][] {\n  if (values.length === 0) return [];\n\n  const result: T[][] = [];\n\n  let start = 0;\n  const end = values.length;\n\n  for (let i = start + 1; i < end; i++) {\n    const prev = values[i - 1];\n    const next = values[i];\n\n    if (!belongInSameGroup(prev, next)) {\n      result.push(values.slice(start, i));\n      start = i;\n    }\n  }\n\n  result.push(values.slice(start, end));\n\n  return result;\n}\n","export function groupBy<T, U extends PropertyKey>(\n  values: T[],\n  projection: (value: T) => U,\n) {\n  const result: { [key in PropertyKey]: T[] } = {};\n\n  values.forEach((value) => {\n    const key = projection(value);\n\n    if (key in result) {\n      result[key].push(value);\n    } else {\n      result[key] = [value];\n    }\n  });\n\n  return result;\n}\n","const numberSuffixRegExp = /(.*?)(\\s\\d+)?$/;\n\nexport function getIncrementedName(\n  originalName: string,\n  names: string[],\n): string {\n  const [, prefix] = originalName.match(numberSuffixRegExp) || [];\n\n  const numbers = [originalName, ...names]\n    .filter((name) => name.startsWith(prefix))\n    .map((name) => {\n      const [, , number] = name.match(numberSuffixRegExp) || [];\n      return number ? parseInt(number) : 1;\n    })\n    .sort();\n\n  const maxNumber = numbers[numbers.length - 1];\n\n  return `${prefix} ${maxNumber + 1}`;\n}\n","import { windowsOf } from './windowsOf';\n\nfunction isIncreasing(values: number[]) {\n  return windowsOf(values, 2).every(([a, b]) => a <= b);\n}\n\nfunction lerp(a: number, b: number, t: number) {\n  return a * (1 - t) + b * t;\n}\n\nfunction findLastIndex<T>(\n  array: Array<T>,\n  predicate: (value: T, index: number, obj: T[]) => boolean,\n): number {\n  for (let i = array.length - 1; i >= 0; i--) {\n    if (predicate(array[i], i, array)) return i;\n  }\n\n  return -1;\n}\n\nexport type InterpolateOptions = {\n  inputRange: number[];\n  outputRange: number[];\n};\n\nexport function interpolate(\n  value: number,\n  { inputRange, outputRange }: InterpolateOptions,\n): number {\n  if (inputRange.length !== outputRange.length) {\n    throw new Error(\n      'interpolate(): `inputRange` and `outputRange` must have the same length',\n    );\n  }\n\n  if (inputRange.length === 0 || outputRange.length === 0) {\n    throw new Error(\n      'interpolate(): `inputRange` and `outputRange` must not be empty',\n    );\n  }\n\n  if (inputRange.some(isNaN) || outputRange.some(isNaN)) {\n    throw new Error(\n      'interpolate(): `inputRange` and `outputRange` must not contain NaN',\n    );\n  }\n\n  if (!isIncreasing(inputRange)) {\n    throw new Error(\n      'interpolate(): `inputRange` must be an array of increasing numbers',\n    );\n  }\n\n  const index = findLastIndex(inputRange, (number) => value > number);\n\n  if (index === -1) {\n    return outputRange[0];\n  } else if (index === inputRange.length - 1) {\n    return outputRange[index];\n  } else {\n    const t =\n      (value - inputRange[index]) / (inputRange[index + 1] - inputRange[index]);\n\n    return lerp(outputRange[index], outputRange[index + 1], t);\n  }\n}\n","/**\n * Rotates the elements within the given array so that the element at\n * the index specified by `toStartAt` becomes the start of the array.\n */\nexport function rotate<T>(array: T[], toStartAt: number): T[] {\n  let start = toStartAt % array.length;\n\n  if (start < 0) {\n    start += array.length;\n  }\n\n  if (array.length < 2 || start === 0) return array;\n\n  return [...array.slice(start), ...array.slice(0, start)];\n}\n","export type Invert<T extends Record<PropertyKey, PropertyKey>> = {\n  [K in keyof T as T[K]]: K;\n};\n\nexport function invert<T extends Record<PropertyKey, PropertyKey>>(\n  record: T,\n): Invert<T> {\n  return Object.fromEntries(\n    Object.entries(record).map(([type, extension]) => [extension, type]),\n  ) as Invert<typeof record>;\n}\n","// A simple, unoptimized decoder for small images\nfunction decode(string: string) {\n  return new Uint8Array(\n    atob(string)\n      .split('')\n      .map((char) => char.charCodeAt(0)),\n  );\n}\n\nfunction encode(buffer: ArrayBuffer): string {\n  const bytes = new Uint8Array(buffer);\n\n  let binary = '';\n  const length = bytes.byteLength;\n\n  for (let i = 0; i < length; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return window.btoa(binary);\n}\n\nexport const Base64 = {\n  encode,\n  decode,\n};\n","function toUTF8(string: string) {\n  const encoder = new TextEncoder();\n  return encoder.encode(string);\n}\n\nexport const UTF16 = {\n  toUTF8,\n};\n","import { invert } from '.';\nimport { isEqualArray } from './internal/isEqual';\n\nconst FILE_TYPE_TO_EXTENSION = {\n  'image/png': 'png',\n  'image/jpeg': 'jpg',\n  'image/webp': 'webp',\n  'image/svg+xml': 'svg',\n  'application/pdf': 'pdf',\n  'application/zip': 'zip',\n} as const;\n\nconst FILE_EXTENSION_TO_TYPE = invert(FILE_TYPE_TO_EXTENSION);\n\nexport type FileType = keyof typeof FILE_TYPE_TO_EXTENSION;\nexport type FileExtension = typeof FILE_TYPE_TO_EXTENSION[FileType];\n\nexport function getFileExtensionForType(type: FileType) {\n  return FILE_TYPE_TO_EXTENSION[type];\n}\n\nexport function getFileTypeForExtension(type: FileExtension) {\n  return FILE_EXTENSION_TO_TYPE[type];\n}\n\nfunction startsWith(\n  arrayBuffer: ArrayBuffer,\n  prefix: number[],\n  offset: number = 0,\n) {\n  return isEqualArray(\n    [...new Uint8Array(arrayBuffer).slice(offset, offset + prefix.length)],\n    prefix,\n    false,\n  );\n}\n\nfunction isPNG(arrayBuffer: ArrayBuffer) {\n  return startsWith(arrayBuffer, [\n    0x89,\n    0x50,\n    0x4e,\n    0x47,\n    0x0d,\n    0x0a,\n    0x1a,\n    0x0a,\n  ]);\n}\n\nfunction isJPG(arrayBuffer: ArrayBuffer) {\n  return startsWith(arrayBuffer, [0xff, 0xd8, 0xff]);\n}\n\nfunction isWEBP(arrayBuffer: ArrayBuffer) {\n  return startsWith(arrayBuffer, [87, 69, 66, 80], 8);\n}\n\nfunction isPDF(arrayBuffer: ArrayBuffer) {\n  return startsWith(arrayBuffer, [37, 80, 68, 70]);\n}\n\nexport function detectFileType(\n  arrayBuffer: ArrayBuffer,\n): keyof typeof FILE_TYPE_TO_EXTENSION | undefined {\n  if (isPNG(arrayBuffer)) {\n    return 'image/png';\n  } else if (isJPG(arrayBuffer)) {\n    return 'image/jpeg';\n  } else if (isWEBP(arrayBuffer)) {\n    return 'image/webp';\n  } else if (isPDF(arrayBuffer)) {\n    return 'application/pdf';\n  }\n}\n","// TODO: Review this. Is it a good approach for Noya?\nexport function memoize<I extends unknown[], O>(\n  f: (...values: I) => O,\n): (...values: I) => O {\n  const intermediateCache = new Map<I[number], string>();\n  const cache: Map<string, O> = new Map();\n  let intermediateCacheIndex = 0;\n\n  return (...values: I): O => {\n    let key = '';\n\n    for (let value of values) {\n      if (!intermediateCache.has(value)) {\n        intermediateCache.set(value, `${intermediateCacheIndex++}`);\n      }\n      key += intermediateCache.get(value)! + ':';\n    }\n\n    if (!cache.has(key)) {\n      cache.set(key, f(...values));\n    }\n    return cache.get(key)!;\n  };\n}\n","export const sep = '/';\n\nexport function basename(filename: string) {\n  return filename.slice(filename.lastIndexOf(sep) + 1);\n}\n\nexport function dirname(filename: string) {\n  const base = basename(filename);\n  return filename.slice(0, -(base.length + 1));\n}\n\nexport function join(components: (string | null | undefined)[]) {\n  return components.filter((component) => !!component).join(sep);\n}\n","import { PromiseState } from './PromiseState';\n\nexport class SuspendedValue<T> {\n  private suspendedPromise: Promise<void>;\n  private promiseState: PromiseState<T> = { type: 'pending' };\n\n  constructor(promise: Promise<T>) {\n    this.suspendedPromise = promise\n      .then((value) => {\n        this.promiseState = { type: 'success', value };\n      })\n      .catch((value) => {\n        this.promiseState = { type: 'failure', value };\n      });\n  }\n\n  getValueOrThrow(): T {\n    switch (this.promiseState.type) {\n      case 'pending':\n        throw this.suspendedPromise;\n      case 'failure':\n        throw this.promiseState.value;\n      case 'success':\n        return this.promiseState.value;\n    }\n  }\n}\n","import { Rect, Size } from './types';\n\nexport function center(source: Size, destination: Size): Rect {\n  return {\n    x: (destination.width - source.width) / 2,\n    y: (destination.height - source.height) / 2,\n    width: source.width,\n    height: source.height,\n  };\n}\n\nexport type ResizingMode = 'scaleToFill' | 'scaleAspectFill' | 'scaleAspectFit';\n\n// https://github.com/Lona/studio/blob/f7160eba6aefbe8fc72267478d9d702bd8d73b8d/compiler/core/src/static/swift/CGSize%2BResizing.appkit.swift\nexport function resize(\n  source: Size,\n  destination: Size,\n  resizingMode: ResizingMode = 'scaleAspectFit',\n): Rect {\n  const newSize = { ...destination };\n\n  const sourceAspectRatio = source.height / source.width;\n  const destinationAspectRatio = destination.height / destination.width;\n\n  const sourceIsWiderThanDestination =\n    sourceAspectRatio < destinationAspectRatio;\n\n  switch (resizingMode) {\n    case 'scaleAspectFit':\n      if (sourceIsWiderThanDestination) {\n        newSize.height = destination.width * sourceAspectRatio;\n      } else {\n        newSize.width = destination.height / sourceAspectRatio;\n      }\n      break;\n    case 'scaleAspectFill':\n      if (sourceIsWiderThanDestination) {\n        newSize.width = destination.height / sourceAspectRatio;\n      } else {\n        newSize.height = destination.width * sourceAspectRatio;\n      }\n      break;\n    case 'scaleToFill':\n      break;\n  }\n\n  return center(newSize, destination);\n}\n\nexport function resizeIfLarger(source: Size, destination: Size) {\n  if (\n    source.width <= destination.width &&\n    source.height <= destination.height\n  ) {\n    return center(source, destination);\n  }\n\n  return resize(source, destination, 'scaleAspectFit');\n}\n","import { Point } from './types';\n\nexport interface Transformable {\n  transform(affineTransform: AffineTransform): this;\n}\n\n/**\n * For more details:\n *\n * https://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations\n * https://people.cs.clemson.edu/~dhouse/courses/401/notes/affines-matrices.pdf\n */\nexport class AffineTransform implements Transformable {\n  m00: number;\n  m01: number;\n  m02: number;\n  m10: number;\n  m11: number;\n  m12: number;\n\n  constructor(\n    [m00, m01, m02, m10, m11, m12]: Iterable<number> = [0, 0, 0, 0, 0, 0],\n  ) {\n    this.m00 = m00;\n    this.m01 = m01;\n    this.m02 = m02;\n    this.m10 = m10;\n    this.m11 = m11;\n    this.m12 = m12;\n  }\n\n  // [ x']   [  m00  m01  m02  ] [ x ]   [ m00x + m01y + m02 ]\n  // [ y'] = [  m10  m11  m12  ] [ y ] = [ m10x + m11y + m12 ]\n  // [ 1 ]   [   0    0    1   ] [ 1 ]   [         1         ]\n  applyTo(point: Point): Point {\n    const { x, y } = point;\n    const { m00, m01, m02, m10, m11, m12 } = this;\n\n    return {\n      x: m00 * x + m01 * y + m02,\n      y: m10 * x + m11 * y + m12,\n    };\n  }\n\n  transform(other: AffineTransform): this {\n    return new AffineTransform([\n      this.m00 * other.m00 + this.m01 * other.m10, // m00\n      this.m00 * other.m01 + this.m01 * other.m11, // m01\n      this.m00 * other.m02 + this.m01 * other.m12 + this.m02, // m02\n      this.m10 * other.m00 + this.m11 * other.m10, // m10\n      this.m10 * other.m01 + this.m11 * other.m11, // m11\n      this.m10 * other.m02 + this.m11 * other.m12 + this.m12, // m12\n    ]) as this;\n  }\n\n  get determinant() {\n    return this.m00 * this.m11 - this.m01 * this.m10;\n  }\n\n  get isInvertible() {\n    const det = this.determinant;\n\n    return (\n      isFinite(det) && isFinite(this.m02) && isFinite(this.m12) && det !== 0\n    );\n  }\n\n  invert() {\n    const det = this.determinant;\n\n    return new AffineTransform([\n      this.m11 / det, // m00\n      -this.m01 / det, // m01\n      (this.m01 * this.m12 - this.m11 * this.m02) / det, // m02\n      -this.m10 / det, // m10\n      this.m00 / det, // m11\n      (this.m10 * this.m02 - this.m00 * this.m12) / det, // m12\n    ]);\n  }\n\n  get array(): number[] {\n    return [\n      this.m00,\n      this.m01,\n      this.m02,\n      this.m10,\n      this.m11,\n      this.m12,\n      0,\n      0,\n      1,\n    ];\n  }\n\n  get float32Array(): Float32Array {\n    return new Float32Array(this.array);\n  }\n\n  // Static\n\n  static get identity(): AffineTransform {\n    return new AffineTransform([1, 0, 0, 0, 1, 0]);\n  }\n\n  static rotation(\n    theta: number,\n    rx: number = 0,\n    ry: number = 0,\n  ): AffineTransform {\n    const rotation = new AffineTransform([\n      Math.cos(theta),\n      -Math.sin(theta),\n      0,\n      Math.sin(theta),\n      Math.cos(theta),\n      0,\n    ]);\n\n    if (rx !== 0 || ry !== 0) {\n      return AffineTransform.multiply(\n        AffineTransform.translation(rx, ry),\n        rotation,\n        AffineTransform.translation(-rx, -ry),\n      );\n    }\n\n    return rotation;\n  }\n\n  rotation: typeof AffineTransform['rotation'] = (...args) => {\n    return this.transform(AffineTransform.rotation(...args));\n  };\n\n  static scale(sx: number, sy: number = sx): AffineTransform {\n    return new AffineTransform([sx, 0, 0, 0, sy, 0]);\n  }\n\n  scale: typeof AffineTransform['scale'] = (...args) => {\n    return this.transform(AffineTransform.scale(...args));\n  };\n\n  static translation(tx: number, ty: number): AffineTransform {\n    return new AffineTransform([1, 0, tx, 0, 1, ty]);\n  }\n\n  translate: typeof AffineTransform['translation'] = (...args) => {\n    return this.transform(AffineTransform.translation(...args));\n  };\n\n  /**\n   * Multiply the matrices together from left to right.\n   */\n  static multiply(...[first, ...rest]: AffineTransform[]): AffineTransform {\n    if (!first) return AffineTransform.identity;\n\n    return rest.reduce((result, item) => result.transform(item), first);\n  }\n}\n","import type { FileSystemHandle } from 'browser-fs-access';\nimport { CanvasKit } from 'canvaskit';\nimport produce from 'immer';\nimport { SketchFile } from 'noya-sketch-file';\nimport { createSketchFile } from '../sketchFile';\nimport {\n  createInitialHistoryState,\n  HistoryAction,\n  historyReducer,\n  HistoryState,\n} from './historyReducer';\n\nexport type LayerHighlightPrecedence = 'aboveSelection' | 'belowSelection';\n\nexport type LayerHighlight = {\n  id: string;\n  precedence: LayerHighlightPrecedence;\n  isMeasured: boolean;\n};\n\nexport type CanvasInsets = { left: number; right: number };\n\n/**\n * This object contains state that shouldn't be part of `history`.\n * For example, we store user `preferences` here, since we would never\n * want an \"undo\" action to change the user's preferences.\n */\nexport type WorkspaceState = {\n  fileHandle?: FileSystemHandle;\n  history: HistoryState;\n  highlightedLayer?: LayerHighlight;\n  canvasSize: { width: number; height: number };\n  canvasInsets: CanvasInsets;\n  preferences: {\n    showRulers: boolean;\n  };\n};\n\nexport type WorkspaceAction =\n  | [type: 'newFile']\n  | [type: 'setFile', value: SketchFile, fileHandle?: FileSystemHandle]\n  | [type: 'setFileHandle', value?: FileSystemHandle]\n  | [\n      type: 'setCanvasSize',\n      size: { width: number; height: number },\n      insets: { left: number; right: number },\n    ]\n  | [type: 'setShowRulers', value: boolean]\n  | [type: 'highlightLayer', highlight: LayerHighlight | undefined]\n  | HistoryAction;\n\nexport function workspaceReducer(\n  state: WorkspaceState,\n  action: WorkspaceAction,\n  CanvasKit: CanvasKit,\n): WorkspaceState {\n  switch (action[0]) {\n    case 'newFile': {\n      return produce(state, (draft) => {\n        draft.fileHandle = undefined;\n        draft.history = createInitialHistoryState(createSketchFile());\n      });\n    }\n    case 'setFile': {\n      const [, sketchFile, fileHandle] = action;\n\n      return produce(state, (draft) => {\n        draft.fileHandle = fileHandle;\n        draft.history = createInitialHistoryState(sketchFile);\n      });\n    }\n    case 'setFileHandle': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.fileHandle = value;\n      });\n    }\n    case 'setCanvasSize': {\n      const [, size, insets] = action;\n\n      if (\n        size.width === state.canvasSize.width &&\n        size.height === state.canvasSize.height &&\n        insets.left === state.canvasInsets.left &&\n        insets.right === state.canvasInsets.right\n      ) {\n        return state;\n      }\n\n      return produce(state, (draft) => {\n        draft.canvasSize = size;\n        draft.canvasInsets = insets;\n      });\n    }\n    case 'setShowRulers': {\n      const [, value] = action;\n\n      return produce(state, (draft) => {\n        draft.preferences.showRulers = value;\n      });\n    }\n    case 'highlightLayer': {\n      const [, highlight] = action;\n\n      return produce(state, (draft) => {\n        draft.highlightedLayer = highlight ? { ...highlight } : undefined;\n      });\n    }\n    default: {\n      return produce(state, (draft) => {\n        draft.history = historyReducer(state.history, action, CanvasKit);\n      });\n    }\n  }\n}\n\nexport function createInitialWorkspaceState(\n  sketch: SketchFile,\n): WorkspaceState {\n  return {\n    history: createInitialHistoryState(sketch),\n    highlightedLayer: undefined,\n    canvasSize: { width: 0, height: 0 },\n    canvasInsets: { left: 0, right: 0 },\n    preferences: {\n      showRulers: false,\n    },\n  };\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  CompassDirection,\n  compassDirections,\n  decodeCurvePoint,\n  DragHandle,\n  Point,\n  Rect,\n  Selectors,\n} from 'noya-state';\n\nexport const compassDirectionMap: Record<CompassDirection, Point> = {\n  n: { x: 0.5, y: 0 },\n  ne: { x: 1, y: 0 },\n  e: { x: 1, y: 0.5 },\n  se: { x: 1, y: 1 },\n  s: { x: 0.5, y: 1 },\n  sw: { x: 0, y: 1 },\n  w: { x: 0, y: 0.5 },\n  nw: { x: 0, y: 0 },\n};\nexport const dragHandleSize: number = 7;\n\nexport function getRectDragHandles(\n  boundingRect: Rect,\n  handleSize: number = dragHandleSize,\n): DragHandle[] {\n  return compassDirections.map((compassDirection) => {\n    const translationPercent = compassDirectionMap[compassDirection];\n\n    return {\n      rect: {\n        x:\n          boundingRect.x +\n          boundingRect.width * translationPercent.x -\n          handleSize / 2,\n        y:\n          boundingRect.y +\n          boundingRect.height * translationPercent.y -\n          handleSize / 2,\n        width: handleSize,\n        height: handleSize,\n      },\n      compassDirection,\n    };\n  });\n}\n\nexport function getLineDragHandles(\n  boundingRect: Rect,\n  points: Sketch.CurvePoint[],\n  layer: Sketch.AnyLayer,\n  handleSize: number = dragHandleSize,\n): DragHandle[] {\n  const transform = Selectors.getLayerFlipTransform(layer);\n\n  return points\n    .map((point) => decodeCurvePoint(point, boundingRect))\n    .map((decodedPoint) => {\n      const transformedPoint = transform.applyTo(decodedPoint.point);\n\n      return {\n        rect: {\n          x: transformedPoint.x - handleSize / 2,\n          y: transformedPoint.y - handleSize / 2,\n          width: handleSize,\n          height: handleSize,\n        },\n        compassDirection: 'n',\n      };\n    });\n}\n","import { BlurStyle, MaskFilter } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useMemo } from 'react';\nimport useDeletable from './useDeletable';\n\nexport type BlurMaskFilterParameters = {\n  style: BlurStyle;\n  sigma: number;\n  respectCTM: boolean;\n};\n\nexport default function useBlurMaskFilter(\n  parameters: BlurMaskFilterParameters,\n): MaskFilter {\n  const CanvasKit = useCanvasKit();\n\n  const maskFilter = useMemo(\n    () =>\n      CanvasKit.MaskFilter.MakeBlur(\n        parameters.style,\n        parameters.sigma,\n        parameters.respectCTM,\n      ),\n    [\n      CanvasKit.MaskFilter,\n      parameters.respectCTM,\n      parameters.sigma,\n      parameters.style,\n    ],\n  );\n\n  return useDeletable(maskFilter);\n}\n","import { Paint } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useMemo } from 'react';\nimport { ColorParameters } from './useColor';\nimport usePaint, { PaintParameters } from './usePaint';\n\nexport function useFill(parameters: Omit<PaintParameters, 'style'>): Paint {\n  const CanvasKit = useCanvasKit();\n\n  const parametersWithStyle = useMemo(\n    () => ({\n      ...parameters,\n      style: CanvasKit.PaintStyle.Fill,\n    }),\n    [CanvasKit.PaintStyle.Fill, parameters],\n  );\n\n  return usePaint(parametersWithStyle);\n}\n\nexport function useColorFill(color: ColorParameters): Paint {\n  const CanvasKit = useCanvasKit();\n\n  const parametersWithStyle = useMemo(\n    () => ({\n      color,\n      style: CanvasKit.PaintStyle.Fill,\n    }),\n    [CanvasKit.PaintStyle.Fill, color],\n  );\n\n  return usePaint(parametersWithStyle);\n}\n","import { Paint } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useMemo } from 'react';\nimport usePaint, { PaintParameters } from './usePaint';\n\nexport function useStroke(parameters: Omit<PaintParameters, 'style'>): Paint {\n  const CanvasKit = useCanvasKit();\n\n  const parametersWithStyle = useMemo(\n    () => ({\n      ...parameters,\n      style: CanvasKit.PaintStyle.Stroke,\n    }),\n    [CanvasKit.PaintStyle.Stroke, parameters],\n  );\n\n  return usePaint(parametersWithStyle);\n}\n","import produce from 'immer';\nimport * as lightTheme from './light';\n\nexport const colors = produce(lightTheme.colors, (colors) => {\n  colors.text = 'rgb(248,248,250)';\n  colors.textMuted = 'rgb(180,180,180)';\n  colors.textDisabled = 'rgb(100,100,100)';\n  colors.inputBackground = 'rgb(50,50,52)';\n  colors.divider = 'rgba(255,255,255,0.1)';\n  colors.dividerStrong = 'rgba(0,0,0,1)';\n  colors.canvas.background = 'rgb(19,20,21)';\n  colors.sidebar.background = 'rgba(40,40,40,0.85)';\n  colors.popover.background = 'rgb(40,40,40)';\n  colors.listView.raisedBackground = 'rgba(255,255,255,0.1)';\n  colors.slider.background = '#BBB';\n  colors.mask = 'rgb(102,187,106)';\n  colors.transparentChecker = 'rgba(255,255,255,0.3)';\n  colors.scrollbar = 'rgba(199,199,199,0.2)';\n  colors.placeholderDots = 'rgba(255,255,255,0.3)';\n  colors.dragOutline = 'white';\n});\nexport const textStyles = lightTheme.textStyles;\nexport const fonts = lightTheme.fonts;\nexport const sizes = lightTheme.sizes;\n","import { memo, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport * as Spacer from '../components/Spacer';\n\n/* ----------------------------------------------------------------------------\n * Label\n * ------------------------------------------------------------------------- */\n\nconst LabelLabel = styled.label(({ theme }) => ({\n  ...theme.textStyles.small,\n  color: theme.colors.textMuted,\n  fontSize: '11px',\n  flex: '0 0 auto',\n  minWidth: '0',\n  letterSpacing: '0.4px',\n  whiteSpace: 'pre', // prevent breaking - may need to make this an option\n}));\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst LabelContainer = styled.span(({ theme }) => ({\n  flex: '0 0 auto',\n  position: 'relative',\n  border: '0',\n  outline: 'none',\n  minWidth: '0',\n  textAlign: 'left',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n}));\n\ninterface LabelRootProps {\n  label: ReactNode;\n  children: ReactNode;\n}\n\nfunction LabelRoot({ label, children }: LabelRootProps) {\n  return (\n    <LabelContainer>\n      {children}\n      {label && (\n        <>\n          <Spacer.Vertical size={2} />\n          <LabelLabel>{label}</LabelLabel>\n        </>\n      )}\n    </LabelContainer>\n  );\n}\n\nexport const Label = memo(LabelLabel);\nexport const Root = memo(LabelRoot);\n","import React, { memo, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\n\nconst CHEVRON_SVG = `\n  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15' fill='white'>\n    <path d='M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z'></path>\n  </svg>\n`;\n\nconst SelectElement = styled.select(({ theme }) => ({\n  appearance: 'none',\n  ...theme.textStyles.small,\n  color: theme.colors.text,\n  width: '0px', // Reset intrinsic width\n  flex: '1 1 0px',\n  position: 'relative',\n  border: '0',\n  outline: 'none',\n  minWidth: '0',\n  textAlign: 'left',\n  alignSelf: 'stretch',\n  borderRadius: '4px',\n  paddingTop: '4px',\n  paddingBottom: '4px',\n  paddingLeft: '8px',\n  paddingRight: '23px',\n  background: [\n    `calc(100% - 6px) / 15px url(\"data:image/svg+xml;utf8,${CHEVRON_SVG}\") no-repeat`,\n    theme.colors.inputBackground,\n  ].join(','),\n  '&:focus': {\n    boxShadow: `0 0 0 2px ${theme.colors.primary}`,\n  },\n}));\n\ninterface Props<T extends string> {\n  id: string;\n  value: T;\n  onChange: (value: T) => void;\n  getTitle?: (option: T) => string;\n  options: T[];\n}\n\nfunction Select<T extends string>({\n  id,\n  value,\n  onChange,\n  options,\n  getTitle,\n}: Props<T>) {\n  const optionElements = useMemo(\n    () =>\n      options.map((option) => (\n        <option key={option} value={option}>\n          {getTitle?.(option) ?? option}\n        </option>\n      )),\n    [options, getTitle],\n  );\n\n  return (\n    <SelectElement\n      id={id}\n      value={value}\n      onChange={useCallback(\n        (event) => {\n          const newValue = event.target.value as T;\n          onChange(newValue);\n        },\n        [onChange],\n      )}\n    >\n      {optionElements}\n    </SelectElement>\n  );\n}\n\nexport default memo(Select);\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { ForwardedRef, forwardRef, memo } from 'react';\nimport styled from 'styled-components';\nimport { SketchPattern } from '../utils/sketchPattern';\nimport { FillPreviewBackground } from './FillPreviewBackground';\n\nconst Container = styled.button(({ theme }) => ({\n  outline: 'none',\n  padding: 0,\n  width: '40px',\n  height: '27px',\n  borderRadius: '4px',\n  overflow: 'hidden',\n  border: 'none',\n  boxShadow: `0 0 0 1px ${theme.colors.divider} inset`,\n  background: 'transparent',\n  '&:focus': {\n    boxShadow: `0 0 0 1px ${theme.colors.sidebar.background}, 0 0 0 3px ${theme.colors.primary}`,\n  },\n  position: 'relative',\n}));\n\ninterface Props {\n  id?: string;\n  value?: Sketch.Color | Sketch.Gradient | SketchPattern;\n}\n\nexport default memo(\n  forwardRef(function FillInputField(\n    { id, value, ...rest }: Props,\n    ref: ForwardedRef<HTMLButtonElement>,\n  ) {\n    return (\n      <Container ref={ref} id={id} {...rest}>\n        <FillPreviewBackground value={value} />\n      </Container>\n    );\n  }),\n);\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { useColorPicker } from '../contexts/ColorPickerContext';\nimport { clamp } from '../utils/clamp';\nimport { hsvaToHslaString } from '../utils/convert';\nimport { round } from '../utils/round';\nimport { Interaction, Interactive } from './Interactive';\nimport Pointer from './Pointer';\n\nconst Container = styled.div<{ colorFrom: string; colorTo: string }>(\n  ({ colorFrom, colorTo }) => ({\n    position: 'relative',\n    height: '8px',\n    borderRadius: '8px',\n    boxShadow: '0 0 0 1px rgba(0,0,0,0.2) inset',\n    backgroundColor: '#fff',\n    backgroundImage: [\n      `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"8\" height=\"8\" fill-opacity=\".05\"><rect x=\"4\" width=\"4\" height=\"4\"/><rect y=\"4\" width=\"4\" height=\"4\"/></svg>')`,\n      `linear-gradient(90deg, ${colorFrom}, ${colorTo})`,\n    ].join(', '),\n    zIndex: 2,\n  }),\n);\n\nexport default memo(function Alpha(): JSX.Element {\n  const [hsva, onChange] = useColorPicker();\n\n  const handleMove = (interaction: Interaction) => {\n    onChange({ a: interaction.left });\n  };\n\n  const handleKey = (offset?: Interaction) => {\n    // Alpha always fit into [0, 1] range\n    if (!offset) return;\n    onChange({ a: clamp(hsva.a + offset.left) });\n  };\n\n  // We use `Object.assign` instead of the spread operator\n  // to prevent adding the polyfill (about 150 bytes gzipped)\n  const colorFrom = hsvaToHslaString(Object.assign({}, hsva, { a: 0 }));\n  const colorTo = hsvaToHslaString(Object.assign({}, hsva, { a: 1 }));\n\n  return (\n    <Container colorFrom={colorFrom} colorTo={colorTo}>\n      <Interactive\n        onMove={handleMove}\n        onKey={handleKey}\n        aria-label=\"Alpha\"\n        aria-valuetext={`${round(hsva.a * 100)}%`}\n      >\n        <Pointer left={hsva.a} />\n      </Interactive>\n    </Container>\n  );\n});\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { useColorPicker } from '../contexts/ColorPickerContext';\nimport { clamp } from '../utils/clamp';\nimport { round } from '../utils/round';\nimport { Interaction, Interactive } from './Interactive';\nimport Pointer from './Pointer';\n\nconst Container = styled.div(() => ({\n  position: 'relative' as any,\n  height: '8px',\n  borderRadius: '8px',\n  boxShadow: '0 0 0 1px rgba(0,0,0,0.2) inset',\n  background: `linear-gradient(\n    to right,\n    #f00 0%,\n    #ff0 17%,\n    #0f0 33%,\n    #0ff 50%,\n    #00f 67%,\n    #f0f 83%,\n    #f00 100%\n  )`,\n  zIndex: 2,\n}));\n\nexport default memo(function HueBase() {\n  const [{ h: hue }, onChange] = useColorPicker();\n\n  const handleMove = (interaction: Interaction) => {\n    onChange({ h: 360 * interaction.left });\n  };\n\n  const handleKey = (offset?: Interaction) => {\n    // Hue measured in degrees of the color circle ranging from 0 to 360\n    if (!offset) return;\n    onChange({\n      h: clamp(hue + offset.left * 360, 0, 360),\n    });\n  };\n\n  return (\n    <Container>\n      <Interactive\n        onMove={handleMove}\n        onKey={handleKey}\n        aria-label=\"Hue\"\n        aria-valuetext={round(hue)}\n      >\n        <Pointer left={hue / 360} />\n      </Interactive>\n    </Container>\n  );\n});\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { useColorPicker } from '../contexts/ColorPickerContext';\nimport { clamp } from '../utils/clamp';\nimport { hsvaToHslString } from '../utils/convert';\nimport { round } from '../utils/round';\nimport { Interaction, Interactive } from './Interactive';\nimport Pointer from './Pointer';\n\nconst Container = styled.div<{ backgroundColor: string }>(\n  ({ backgroundColor }) => ({\n    position: 'relative',\n    flexGrow: 1,\n    borderRadius: '3px',\n    backgroundColor,\n    backgroundImage: [\n      'linear-gradient(to top, #000, rgba(0, 0, 0, 0))',\n      'linear-gradient(to right, #fff, rgba(255, 255, 255, 0))',\n    ].join(', '),\n    boxShadow: '0 0 0 1px rgba(0,0,0,0.2) inset',\n    overflow: 'hidden',\n    minHeight: '150px',\n  }),\n);\n\nexport default memo(function SaturationBase() {\n  const [hsva, onChange] = useColorPicker();\n\n  const handleMove = (interaction: Interaction) => {\n    onChange({\n      s: interaction.left * 100,\n      v: 100 - interaction.top * 100,\n    });\n  };\n\n  const handleKey = (offset?: Interaction) => {\n    // Saturation and brightness always fit into [0, 100] range\n    if (!offset) return;\n    onChange({\n      s: clamp(hsva.s + offset.left * 100, 0, 100),\n      v: clamp(hsva.v - offset.top * 100, 0, 100),\n    });\n  };\n\n  return (\n    <Container\n      backgroundColor={hsvaToHslString({ h: hsva.h, s: 100, v: 100, a: 1 })}\n    >\n      <Interactive\n        onMove={handleMove}\n        onKey={handleKey}\n        aria-label=\"Color\"\n        aria-valuetext={`Saturation ${round(hsva.s)}%, Brightness ${round(\n          hsva.v,\n        )}%`}\n      >\n        <Pointer top={1 - hsva.v / 100} left={hsva.s / 100} />\n      </Interactive>\n    </Container>\n  );\n});\n","import * as kiwi from 'kiwi.js';\nimport {\n  Children,\n  createRef,\n  Fragment,\n  isValidElement,\n  memo,\n  ReactNode,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n} from 'react';\nimport styled from 'styled-components';\n\nconst Container = styled.div(({ theme }) => ({\n  display: 'flex',\n  flex: '1',\n  flexDirection: 'column',\n  position: 'relative',\n}));\n\nconst Tools = styled.div(({ theme }) => ({\n  display: 'flex',\n  flex: '1',\n  alignItems: 'center',\n}));\n\nconst Labels = styled.div(({ theme }) => ({\n  height: 'var(--height)',\n  position: 'relative',\n  overflow: 'hidden',\n  userSelect: 'none',\n}));\n\ninterface ContainerProps {\n  children: ReactNode;\n  renderLabel: (provided: { id: string; index: number }) => ReactNode;\n}\n\nexport default memo(function LabeledElementView({\n  children,\n  renderLabel,\n}: ContainerProps) {\n  const elementIds: string[] = Children.toArray(children)\n    .flatMap((child) =>\n      isValidElement(child) && child.type === Fragment\n        ? (child.props.children as ReactNode[])\n        : [child],\n    )\n    .map((child) =>\n      isValidElement(child) && 'id' in child.props ? child.props.id : null,\n    )\n    .filter((id) => !!id);\n  const serializedIds = elementIds.join(',');\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  const refs = useMemo(() => {\n    return Object.fromEntries(\n      serializedIds.split(',').map((id) => [id, createRef<HTMLSpanElement>()]),\n    );\n  }, [serializedIds]);\n\n  const labelElements = useMemo(() => {\n    return serializedIds.split(',').map((id, index) => (\n      <span\n        key={id}\n        ref={refs[id]}\n        style={{ position: 'absolute', left: `var(--x-offset)` }}\n      >\n        {renderLabel({\n          id,\n          index,\n        })}\n      </span>\n    ));\n  }, [refs, serializedIds, renderLabel]);\n\n  useLayoutEffect(() => {\n    if (!containerRef.current) return;\n\n    const containerRect = containerRef.current.getBoundingClientRect();\n\n    const solver = new kiwi.Solver();\n    const variables: kiwi.Variable[] = [];\n    const heights: number[] = [];\n\n    Object.entries(refs).forEach(([id, ref], index, list) => {\n      if (!ref.current) return;\n\n      // console.log('id', id, ref, index);\n\n      const targetElement = document.getElementById(id)!;\n      const targetRect = targetElement.getBoundingClientRect();\n      targetRect.x = targetElement.offsetLeft;\n      const labelRect = ref.current.getBoundingClientRect();\n      labelRect.x = ref.current.offsetLeft;\n\n      // console.log(id, labelRect, ref.current.offsetLeft);\n\n      heights.push(labelRect.height);\n\n      const targetMidXValue = targetRect.x + targetRect.width / 2;\n\n      const labelMidX = new kiwi.Variable();\n      solver.addEditVariable(labelMidX, kiwi.Strength.weak);\n      solver.addConstraint(\n        new kiwi.Constraint(\n          new kiwi.Expression(labelMidX),\n          kiwi.Operator.Eq,\n          new kiwi.Expression(targetMidXValue),\n          kiwi.Strength.strong,\n        ),\n      );\n\n      if (index === 0) {\n        solver.addConstraint(\n          new kiwi.Constraint(\n            new kiwi.Expression(labelMidX),\n            kiwi.Operator.Ge,\n            new kiwi.Expression(labelRect.width / 2),\n            kiwi.Strength.required,\n          ),\n        );\n      }\n\n      // if (index > 0) {\n      //   solver.addConstraint(\n      //     new kiwi.Constraint(\n      //       new kiwi.Expression(variables[index - 1]),\n      //       kiwi.Operator.Le,\n      //       new kiwi.Expression(labelRect.width / 2),\n      //       kiwi.Strength.required\n      //     )\n      //   );\n      // }\n\n      if (index === list.length - 1) {\n        // console.log(\n        //   labelMidX.value(),\n        //   containerRect.width,\n        //   containerRect.width - labelRect.width / 2,\n        // );\n        solver.addConstraint(\n          new kiwi.Constraint(\n            new kiwi.Expression(labelMidX),\n            kiwi.Operator.Le,\n            new kiwi.Expression(containerRect.width - labelRect.width / 2),\n            kiwi.Strength.required,\n          ),\n        );\n      }\n\n      solver.suggestValue(labelMidX, labelRect.x + labelRect.width / 2);\n\n      variables.push(labelMidX);\n    });\n\n    solver.updateVariables();\n\n    Object.entries(refs).forEach(([id, ref], index) => {\n      if (!ref.current) return;\n\n      // console.log(id, variables[index].value());\n\n      const labelRect = ref.current.getBoundingClientRect();\n\n      ref.current.style.setProperty(\n        '--x-offset',\n        `${variables[index].value() - labelRect.width / 2}px`,\n      );\n    });\n\n    containerRef.current.style.setProperty(\n      '--height',\n      `${Math.max(...heights)}px`,\n    );\n  }, [refs, labelElements]);\n\n  return (\n    <Container ref={containerRef}>\n      <Tools>{children}</Tools>\n      <Labels>{labelElements}</Labels>\n    </Container>\n  );\n});\n","import * as RadixSlider from '@radix-ui/react-slider';\nimport { useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\n\nconst StyledSlider = styled(RadixSlider.Root)({\n  flex: '1',\n  position: 'relative',\n  display: 'flex',\n  alignItems: 'center',\n  userSelect: 'none',\n  touchAction: 'none',\n  height: '16px',\n});\n\nconst StyledTrack = styled(RadixSlider.Track)(({ theme }) => ({\n  backgroundColor: theme.colors.divider,\n  position: 'relative',\n  flexGrow: 1,\n  height: '2px',\n}));\n\nconst StyledRange = styled(RadixSlider.Range)(({ theme }) => ({\n  position: 'absolute',\n  backgroundColor: theme.colors.primary,\n  borderRadius: '9999px',\n  height: '100%',\n}));\n\nconst StyledThumb = styled(RadixSlider.Thumb)(({ theme }) => ({\n  display: 'block',\n  width: '12px',\n  height: '12px',\n  backgroundColor: theme.colors.slider.background,\n  border: `1px solid ${theme.colors.slider.border}`,\n  borderRadius: '20px',\n  ':focus': {\n    outline: 'none',\n  },\n}));\n\ninterface Props {\n  id?: string;\n  value: number;\n  onValueChange: (value: number) => void;\n  min: number;\n  max: number;\n}\n\nexport default function Slider({ id, value, onValueChange, min, max }: Props) {\n  const arrayValue = useMemo(() => [Math.min(Math.max(value, min), max)], [\n    value,\n    min,\n    max,\n  ]);\n\n  const handleValueChange = useCallback(\n    (arrayValue: number[]) => {\n      onValueChange(arrayValue[0]);\n    },\n    [onValueChange],\n  );\n\n  return (\n    <StyledSlider\n      min={min}\n      max={max}\n      id={id}\n      value={arrayValue}\n      onValueChange={handleValueChange}\n    >\n      <StyledTrack>\n        <StyledRange />\n      </StyledTrack>\n      <StyledThumb />\n    </StyledSlider>\n  );\n}\n","import { ChevronDownIcon, ChevronRightIcon } from '@radix-ui/react-icons';\nimport {\n  ForwardedRef,\n  forwardRef,\n  memo,\n  ReactNode,\n  useCallback,\n  useContext,\n} from 'react';\nimport styled from 'styled-components';\nimport * as ListView from './ListView';\nimport { ListViewRowProps } from './ListView';\nimport * as Spacer from './Spacer';\n\n/* ----------------------------------------------------------------------------\n * Row\n * ------------------------------------------------------------------------- */\n\ntype TreeRowBaseProps = {\n  icon?: ReactNode;\n  expanded?: boolean;\n  onClickChevron?: () => void;\n};\n\nconst ChevronContainer = styled.span({\n  display: 'flex',\n  alignItems: 'center',\n});\n\nexport type TreeRowProps<\n  MenuItemType extends string\n> = ListViewRowProps<MenuItemType> & TreeRowBaseProps;\n\nconst TreeRow = forwardRef(function TreeRow<MenuItemType extends string>(\n  {\n    icon,\n    expanded,\n    onClickChevron,\n    children,\n    ...rest\n  }: TreeRowProps<MenuItemType>,\n  forwardedRef: ForwardedRef<HTMLLIElement>,\n) {\n  const { expandable } = useContext(ListView.ListRowContext);\n\n  const handleClickChevron = useCallback(\n    (event) => {\n      event.stopPropagation();\n      onClickChevron?.();\n    },\n    [onClickChevron],\n  );\n\n  return (\n    <ListView.Row ref={forwardedRef} {...rest}>\n      {expandable && (\n        <>\n          {expanded === undefined ? (\n            <Spacer.Horizontal size={15} />\n          ) : (\n            <ChevronContainer onClick={handleClickChevron}>\n              {expanded ? <ChevronDownIcon /> : <ChevronRightIcon />}\n            </ChevronContainer>\n          )}\n          <Spacer.Horizontal size={6} />\n        </>\n      )}\n      {icon && (\n        <>\n          {icon}\n          <Spacer.Horizontal size={10} />\n        </>\n      )}\n      {children}\n    </ListView.Row>\n  );\n});\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nexport const Root = ListView.Root;\nexport const RowTitle = ListView.RowTitle;\nexport const Row = memo(TreeRow);\nexport type TreeViewClickInfo = ListView.ListViewClickInfo;\n","import { memo } from 'react';\nimport styled from 'styled-components';\n\n/* ----------------------------------------------------------------------------\n * Divider\n * ------------------------------------------------------------------------- */\n\nconst DividerContainer = styled.div(({ theme }) => ({\n  height: '1px',\n  minHeight: '1px',\n  background: theme.colors.divider,\n}));\n\ninterface DividerProps {}\n\nfunction Divider(props: DividerProps) {\n  return <DividerContainer />;\n}\n\nexport default memo(Divider);\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Alpha,\n  ColorModel,\n  ColorPicker as NoyaColorPicker,\n  equalColorObjects,\n  hsvaToRgba,\n  Hue,\n  RgbaColor,\n  rgbaToHsva,\n  Saturation,\n} from 'noya-colorpicker';\nimport { memo, useCallback, useMemo } from 'react';\nimport * as Spacer from '../components/Spacer';\nimport { rgbaToSketchColor, sketchColorToRgba } from '../utils/sketchColor';\n\nconst colorModel: ColorModel<RgbaColor> = {\n  defaultColor: { r: 0, g: 0, b: 0, a: 1 },\n  toHsva: rgbaToHsva,\n  fromHsva: hsvaToRgba,\n  equal: equalColorObjects,\n};\n\ninterface Props {\n  value: Sketch.Color;\n  gradients?: Sketch.GradientStop[];\n  onChange: (color: Sketch.Color) => void;\n}\n\nexport default memo(function ColorPicker({\n  value,\n  gradients,\n  onChange,\n}: Props) {\n  const rgbaColor: RgbaColor = useMemo(() => sketchColorToRgba(value), [value]);\n\n  const handleChange = useCallback(\n    (value: RgbaColor) => {\n      onChange(rgbaToSketchColor(value));\n    },\n    [onChange],\n  );\n\n  return (\n    <NoyaColorPicker\n      colorModel={colorModel}\n      color={rgbaColor}\n      onChange={handleChange}\n    >\n      <Saturation />\n      <Spacer.Vertical size={12} />\n      <Hue />\n      <Spacer.Vertical size={5} />\n      <Alpha />\n    </NoyaColorPicker>\n  );\n});\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Alpha,\n  ColorModel,\n  ColorPicker as NoyaColorPicker,\n  equalColorObjects,\n  hsvaToRgba,\n  Hue,\n  RgbaColor,\n  rgbaToHsva,\n  Saturation,\n  Gradient,\n} from 'noya-colorpicker';\nimport { memo, useCallback } from 'react';\nimport * as Spacer from '../components/Spacer';\nimport { rgbaToSketchColor } from '../utils/sketchColor';\n\nconst colorModel: ColorModel<RgbaColor> = {\n  defaultColor: { r: 0, g: 0, b: 0, a: 1 },\n  toHsva: rgbaToHsva,\n  fromHsva: hsvaToRgba,\n  equal: equalColorObjects,\n};\n\ninterface Props {\n  value: Sketch.GradientStop[];\n  selectedStop: number;\n  onChangeColor: (color: Sketch.Color) => void;\n  onChangePosition: (position: number) => void;\n  onAdd: (color: Sketch.Color, position: number) => void;\n  onDelete: () => void;\n  onSelectStop: (index: number) => void;\n}\n\nexport default memo(function GradientPicker({\n  value,\n  selectedStop,\n  onChangeColor,\n  onChangePosition,\n  onAdd,\n  onDelete,\n  onSelectStop,\n}: Props) {\n  const handleChangeColor = useCallback(\n    (value: RgbaColor) => {\n      onChangeColor(rgbaToSketchColor(value));\n    },\n    [onChangeColor],\n  );\n\n  const handleAddGradientStop = useCallback(\n    (value: RgbaColor, position: number) => {\n      onAdd(rgbaToSketchColor(value), position);\n    },\n    [onAdd],\n  );\n\n  return (\n    <NoyaColorPicker\n      colorModel={colorModel}\n      color={colorModel.defaultColor}\n      onChange={handleChangeColor}\n    >\n      <Gradient\n        gradients={value}\n        selectedStop={selectedStop}\n        onSelectStop={onSelectStop}\n        onChangePosition={onChangePosition}\n        onAdd={handleAddGradientStop}\n        onDelete={onDelete}\n      />\n      <Spacer.Vertical size={10} />\n      <Saturation />\n      <Spacer.Vertical size={12} />\n      <Hue />\n      <Spacer.Vertical size={5} />\n      <Alpha />\n    </NoyaColorPicker>\n  );\n});\n","import React, {\n  ForwardedRef,\n  forwardRef,\n  memo,\n  ReactNode,\n  useCallback,\n} from 'react';\nimport styled from 'styled-components';\nimport { ContextMenu, Divider, MenuItem, ScrollArea, Spacer } from '..';\nimport withSeparatorElements from '../utils/withSeparatorElements';\n\nconst Grid = styled.div(({ theme }) => ({\n  color: theme.colors.text,\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fill, 250px)',\n  gridAutoRows: '170px',\n  justifyContent: 'space-between',\n  gap: '20px',\n  padding: '20px',\n}));\n\nconst Container = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nconst ItemContainer = styled.div<{ selected: boolean }>(\n  ({ theme, selected }) => ({\n    display: 'flex',\n    flex: '1',\n    backgroundColor: theme.colors.sidebar.background,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '12px',\n    cursor: 'pointer',\n    border: `2px solid ${selected ? theme.colors.primary : 'transparent'}`,\n    overflow: 'hidden',\n  }),\n);\n\nconst GridContainer = styled.div(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nconst ItemTitle = styled.span(({ theme }) => ({\n  ...theme.textStyles.small,\n  color: theme.colors.text,\n  fontWeight: 500,\n  userSelect: 'none',\n  whiteSpace: 'pre',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n}));\n\nconst ItemDescription = styled.span(({ theme }) => ({\n  ...theme.textStyles.small,\n  color: theme.colors.textMuted,\n  userSelect: 'none',\n  whiteSpace: 'pre',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n}));\n\nconst SectionTitle = styled.span<{ last?: boolean }>(\n  ({ theme, last = false }) => ({\n    ...theme.textStyles.body,\n    color: last ? theme.colors.text : theme.colors.textMuted,\n    fontWeight: 500,\n    userSelect: 'none',\n    whiteSpace: 'pre',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  }),\n);\n\nconst SectionHeaderContainer = styled.div(({ theme }) => ({\n  padding: '0 20px',\n}));\n\ninterface ItemProps<MenuItemType extends string = string> {\n  id: string;\n  title: string;\n  subtitle?: string;\n  selected: boolean;\n  onClick?: (event: React.MouseEvent) => void;\n  children?: ReactNode;\n  menuItems?: MenuItem<MenuItemType>[];\n  onSelectMenuItem?: (value: MenuItemType) => void;\n  onContextMenu?: () => void;\n}\n\nconst GridViewItem = forwardRef(function GridViewItem<\n  MenuItemType extends string\n>(\n  {\n    id,\n    title,\n    subtitle,\n    selected,\n    onClick,\n    children,\n    menuItems,\n    onSelectMenuItem,\n    onContextMenu,\n  }: ItemProps<MenuItemType>,\n  forwardedRef: ForwardedRef<HTMLDivElement>,\n) {\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      onClick?.(event);\n    },\n    [onClick],\n  );\n\n  const element = (\n    <GridContainer id={id} ref={forwardedRef}>\n      <ItemContainer\n        selected={selected}\n        onClick={handleClick}\n        onContextMenu={onContextMenu}\n      >\n        {children}\n      </ItemContainer>\n      <Spacer.Vertical size={8} />\n      <ItemTitle>{title || ' '}</ItemTitle>\n      <ItemDescription>{subtitle || ' '}</ItemDescription>\n    </GridContainer>\n  );\n\n  if (menuItems) {\n    return (\n      <ContextMenu<MenuItemType> items={menuItems} onSelect={onSelectMenuItem}>\n        {element}\n      </ContextMenu>\n    );\n  }\n\n  return element;\n});\n\ninterface GridViewRootProps {\n  children: ReactNode;\n  onClick: () => void;\n}\n\nfunction GridViewRoot({ children, onClick }: GridViewRootProps) {\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      onClick?.();\n    },\n    [onClick],\n  );\n\n  return (\n    <Container onClick={handleClick}>\n      <ScrollArea>{children}</ScrollArea>\n    </Container>\n  );\n}\n\nfunction GridViewSection({ children }: { children?: ReactNode }) {\n  return <Grid>{children}</Grid>;\n}\n\nfunction GridViewSectionHeader({ title }: { title: string }) {\n  const grouped = title.split('/');\n\n  return (\n    <SectionHeaderContainer>\n      {withSeparatorElements(\n        grouped.map((title, index) => (\n          <SectionTitle last={index === grouped.length - 1}>\n            {title}\n          </SectionTitle>\n        )),\n        <SectionTitle> / </SectionTitle>,\n      )}\n      <Spacer.Vertical size={8} />\n      <Divider />\n    </SectionHeaderContainer>\n  );\n}\n\nexport const Root = memo(GridViewRoot);\nexport const Item = memo(GridViewItem);\nexport const Section = memo(GridViewSection);\nexport const SectionHeader = memo(GridViewSectionHeader);\n","import * as RadixRadioGroup from '@radix-ui/react-radio-group';\nimport { memo, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { Tooltip } from '..';\n\nconst RadioRoot = styled(RadixRadioGroup.Root)(({ theme }) => ({\n  appearance: 'none',\n  width: '0px', // Reset intrinsic width\n  flex: '1 1 0px',\n  position: 'relative',\n  border: '0',\n  outline: 'none',\n  minWidth: '0',\n  textAlign: 'left',\n  alignSelf: 'stretch',\n  borderRadius: '4px',\n  background: theme.colors.inputBackground,\n  '&:focus': {\n    boxShadow: `0 0 0 1px ${theme.colors.sidebar.background}, 0 0 0 3px ${theme.colors.primary}`,\n  },\n  display: 'flex',\n  alignItems: 'stretch',\n  minHeight: '27px',\n}));\n\nconst StyledItem = styled(RadixRadioGroup.Item)(({ theme }) => ({\n  position: 'relative',\n  flex: '1 1 0',\n  appearance: 'none',\n  border: 'none',\n  background: 'none',\n  color: 'rgb(139, 139, 139)',\n  padding: 0,\n  margin: 0,\n  borderRadius: '4px',\n  display: 'inline-flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  verticalAlign: 'middle',\n  '&:focus': {\n    outline: 'none',\n    boxShadow: `0 0 0 1px ${theme.colors.sidebar.background}, 0 0 0 3px ${theme.colors.primary}`,\n  },\n}));\n\nconst StyledIndicator = styled(RadixRadioGroup.Indicator)(({ theme }) => ({\n  flex: 1,\n  backgroundColor: theme.colors.primary,\n  height: '100%',\n  borderRadius: '4px',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  verticalAlign: 'middle',\n  color: 'white',\n}));\n\nconst IndicatorContainer = styled.div({\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n  display: 'flex',\n  alignItems: 'stretch',\n  justifyContent: 'center',\n});\n\ninterface Props {\n  value: string;\n  tooltip?: ReactNode;\n  children: ReactNode;\n  disabled?: boolean;\n}\n\nfunction RadioItem({ value, tooltip, children, disabled = false }: Props) {\n  const itemElement = (\n    <StyledItem value={value} disabled={disabled}>\n      {children}\n      <IndicatorContainer>\n        <StyledIndicator>{children}</StyledIndicator>\n      </IndicatorContainer>\n    </StyledItem>\n  );\n\n  return tooltip ? (\n    <Tooltip content={tooltip}>{itemElement}</Tooltip>\n  ) : (\n    itemElement\n  );\n}\n\nexport const Root = RadioRoot;\nexport const Item = memo(RadioItem);\n","import styled from 'styled-components';\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\nimport { Slot } from '@radix-ui/react-slot';\nimport { memo, ReactNode } from 'react';\n\n// const Arrow = styled(TooltipPrimitive.Arrow)(({ theme }) => ({\n//   fill: theme.colors.popover.background,\n// }));\n\nconst Content = styled(TooltipPrimitive.Content)(({ theme }) => ({\n  ...theme.textStyles.small,\n  color: theme.colors.text,\n  borderRadius: 3,\n  padding: `${theme.sizes.spacing.small}px ${theme.sizes.spacing.medium}px`,\n  backgroundColor: theme.colors.popover.background,\n  boxShadow: '0 2px 4px rgba(0,0,0,0.2), 0 0 12px rgba(0,0,0,0.1)',\n  border: `1px solid ${theme.colors.dividerStrong}`,\n}));\n\ninterface Props {\n  children: ReactNode;\n  content: ReactNode;\n}\n\nexport default memo(function Tooltip({ children, content }: Props) {\n  return (\n    <TooltipPrimitive.Root>\n      <TooltipPrimitive.Trigger as={Slot}>{children}</TooltipPrimitive.Trigger>\n      <Content side=\"bottom\" align=\"center\" sideOffset={2}>\n        {content}\n        {/* <Arrow /> */}\n      </Content>\n    </TooltipPrimitive.Root>\n  );\n});\n","import { memo, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport * as RadixDropdownMenu from '@radix-ui/react-dropdown-menu';\nimport {\n  SEPARATOR_ITEM,\n  MenuItem,\n  styles,\n  CHECKBOX_WIDTH,\n  CHECKBOX_RIGHT_INSET,\n} from './internal/Menu';\nimport { CheckIcon } from '@radix-ui/react-icons';\nimport { Spacer } from '..';\n\n/* ----------------------------------------------------------------------------\n * Separator\n * ------------------------------------------------------------------------- */\n\nconst SeparatorElement = styled(RadixDropdownMenu.Separator)(\n  styles.separatorStyle,\n);\n\n/* ----------------------------------------------------------------------------\n * Item\n * ------------------------------------------------------------------------- */\n\nconst ItemElement = styled(RadixDropdownMenu.Item)(styles.itemStyle);\n\nconst CheckboxItemElement = styled(RadixDropdownMenu.CheckboxItem)(\n  styles.itemStyle,\n);\n\ninterface ContextMenuItemProps {\n  children: ReactNode;\n  onSelect: () => void;\n  checked: boolean;\n  indented: boolean;\n}\n\nconst StyledItemIndicator = styled(RadixDropdownMenu.ItemIndicator)(\n  styles.itemIndicatorStyle,\n);\n\nconst DropdownMenuItem = memo(function ContextMenuItem({\n  indented,\n  checked,\n  children,\n  onSelect,\n}: ContextMenuItemProps) {\n  if (checked) {\n    return (\n      <CheckboxItemElement checked={checked} onSelect={onSelect}>\n        <StyledItemIndicator>\n          <CheckIcon />\n        </StyledItemIndicator>\n        {children}\n      </CheckboxItemElement>\n    );\n  } else {\n    return (\n      <ItemElement onSelect={onSelect}>\n        {indented && (\n          <Spacer.Horizontal size={CHECKBOX_WIDTH - CHECKBOX_RIGHT_INSET} />\n        )}\n        {children}\n      </ItemElement>\n    );\n  }\n});\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst RootElement = styled(RadixDropdownMenu.Content)(styles.contentStyle);\n\ninterface Props<T extends string> {\n  children: ReactNode;\n  items: MenuItem<T>[];\n  onSelect?: (value: T) => void;\n}\n\n// Using a Slot for the menu currently doesn't work with custom elements,\n// so we use a span. Check for fixes in library updates in the future.\nfunction DropdownMenuRoot<T extends string>({\n  items,\n  children,\n  onSelect,\n}: Props<T>) {\n  const hasCheckedItem = items.some(\n    (item) => item !== SEPARATOR_ITEM && item.checked,\n  );\n\n  return (\n    <RadixDropdownMenu.Root>\n      <RadixDropdownMenu.Trigger as={'span'}>\n        {children}\n      </RadixDropdownMenu.Trigger>\n      <RootElement sideOffset={4}>\n        {items.map((item, index) =>\n          item === SEPARATOR_ITEM ? (\n            <SeparatorElement key={index} />\n          ) : (\n            <DropdownMenuItem\n              key={item.value}\n              indented={hasCheckedItem}\n              checked={item.checked ?? false}\n              onSelect={() => onSelect?.(item.value)}\n            >\n              {item.title}\n            </DropdownMenuItem>\n          ),\n        )}\n      </RootElement>\n    </RadixDropdownMenu.Root>\n  );\n}\n\nexport default memo(DropdownMenuRoot);\n","import { useGesture } from 'react-use-gesture';\nimport { composeEventHandlers } from '@radix-ui/primitive';\n\nfunction unique<T>(array: T[]) {\n  return [...new Set(array)];\n}\n\nfunction composeAllEventHandlers<E>(...handlers: ((e: E) => void)[]) {\n  const [first, ...rest] = handlers;\n\n  return rest.reduce(\n    (result, handler) => composeEventHandlers(result, handler),\n    first,\n  );\n}\n\ntype ReactEventHandlers = ReturnType<ReturnType<typeof useGesture>>;\ntype EventName = keyof ReactEventHandlers;\n\nexport function mergeEventHandlers(\n  ...handlerMaps: ReactEventHandlers[]\n): ReactEventHandlers {\n  const eventNames = unique(handlerMaps.map(Object.keys).flat() as EventName[]);\n\n  return Object.fromEntries(\n    eventNames.map((eventName) => {\n      const handlers = handlerMaps.flatMap((handlerMap) => {\n        const value = handlerMap[eventName];\n        return value ? [value] : [];\n      });\n\n      return [eventName, composeAllEventHandlers(...handlers)];\n    }),\n  );\n}\n","import {\n  MenuItem,\n  RegularMenuItem,\n  SEPARATOR_ITEM,\n} from '../components/internal/Menu';\n\ntype Optional<T> = T | false | null | undefined;\n\nfunction withSeparators<T>(elements: T[], separator: T) {\n  const result: T[] = [];\n\n  for (let i = 0; i < elements.length; i++) {\n    result.push(elements[i]);\n\n    if (i !== elements.length - 1) {\n      result.push(separator);\n    }\n  }\n\n  return result;\n}\n\nexport function createSectionedMenu<T extends string>(\n  ...sections: Optional<Optional<RegularMenuItem<T>>[]>[]\n): MenuItem<T>[] {\n  const nonEmptySections = sections\n    .flatMap((section) => (section ? [section] : []))\n    .map((section) => section.flatMap((item) => (item ? [item] : [])))\n    .filter((section) => section.length > 0);\n\n  return withSeparators<MenuItem<T>[]>(nonEmptySections, [\n    SEPARATOR_ITEM,\n  ]).flat();\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\n\nexport const SUPPORTED_IMAGE_UPLOAD_TYPES = [\n  'image/png' as const,\n  'image/jpeg' as const,\n  'image/webp' as const,\n  'application/pdf' as const,\n  'image/svg+xml' as const,\n];\n\nexport type SupportedImageUploadType = typeof SUPPORTED_IMAGE_UPLOAD_TYPES[number];\n\nexport type SketchPattern = {\n  _class: 'pattern';\n  image?: Sketch.FileRef | Sketch.DataRef;\n  patternFillType: Sketch.PatternFillType;\n  patternTileScale: number;\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useGlobalInputBlurListener } from '../../contexts/GlobalInputBlurContext';\n\ntype Props = {\n  id?: string;\n  style?: any;\n  className?: string;\n  disabled?: boolean;\n  value: string;\n  placeholder?: string;\n  onKeyDown?: (event: React.KeyboardEvent<HTMLInputElement>) => void;\n};\n\ntype ControlledProps = Props & {\n  onChange: (value: string) => void;\n};\n\nfunction ControlledTextInput({\n  id,\n  style,\n  className,\n  placeholder,\n  disabled,\n  onKeyDown,\n  value,\n  onChange,\n}: ControlledProps) {\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\n      onKeyDown?.(event);\n    },\n    [onKeyDown],\n  );\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      onChange(event.target.value);\n    },\n    [onChange],\n  );\n\n  return (\n    <input\n      id={id}\n      style={style}\n      className={className}\n      type=\"text\"\n      disabled={disabled ?? false}\n      value={value}\n      placeholder={placeholder}\n      onKeyDown={handleKeyDown}\n      onChange={handleChange}\n    />\n  );\n}\n\ntype SubmittableProps = Props & {\n  onSubmit: (value: string, reset: () => void) => void;\n};\n\nfunction SubmittableTextInput({\n  id,\n  style,\n  className,\n  placeholder,\n  onKeyDown,\n  value,\n  disabled,\n  onSubmit,\n}: SubmittableProps) {\n  const [internalValue, setInternalValue] = useState('');\n\n  // Only trigger a submit event on blur if the value changed\n  const [initialFocusValue, setInitialFocusValue] = useState<\n    string | undefined\n  >(undefined);\n\n  useEffect(() => {\n    setInternalValue(value);\n  }, [value]);\n\n  const handleSubmit = useCallback(() => {\n    if (initialFocusValue === internalValue) return;\n\n    let didReset = false;\n\n    onSubmit(internalValue, () => {\n      didReset = true;\n      setInternalValue(value);\n    });\n\n    if (!didReset) {\n      setInitialFocusValue(internalValue);\n    }\n  }, [onSubmit, internalValue, initialFocusValue, value]);\n\n  useGlobalInputBlurListener(handleSubmit);\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\n      if (event.key === 'Enter') {\n        handleSubmit();\n\n        event.preventDefault();\n        event.stopPropagation();\n      } else {\n        onKeyDown?.(event);\n      }\n    },\n    [onKeyDown, handleSubmit],\n  );\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      setInternalValue(event.target.value);\n    },\n    [],\n  );\n\n  const handleFocus = useCallback(() => {\n    setInitialFocusValue(internalValue);\n  }, [internalValue]);\n\n  return (\n    <input\n      id={id}\n      style={style}\n      className={className}\n      type=\"text\"\n      disabled={disabled ?? false}\n      value={internalValue}\n      placeholder={placeholder}\n      onKeyDown={handleKeyDown}\n      onChange={handleChange}\n      onBlur={handleSubmit}\n      onFocus={handleFocus}\n    />\n  );\n}\n\nexport type TextInputProps = ControlledProps | SubmittableProps;\n\n/**\n * This component shouldn't be used directly. Instead use the InputField components.\n */\nexport default function TextInput(props: TextInputProps) {\n  if ('onChange' in props) {\n    return <ControlledTextInput {...props} />;\n  } else {\n    return <SubmittableTextInput {...props} />;\n  }\n}\n","import { CaretDownIcon } from '@radix-ui/react-icons';\nimport {\n  Children,\n  createContext,\n  isValidElement,\n  memo,\n  ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport { Property } from 'csstype';\nimport styled from 'styled-components';\nimport handleNudge from '../utils/handleNudge';\nimport TextInput, { TextInputProps } from './internal/TextInput';\nimport { DropdownMenu as NoyaDropdownMenu, MenuItem } from 'noya-designsystem';\nimport Button from './Button';\n\ntype LabelPosition = 'start' | 'end';\n\nconst InputFieldContext = createContext<{\n  labelPosition: LabelPosition;\n  labelSize: number;\n  hasLabel: boolean;\n  hasDropdown: boolean;\n}>({\n  labelPosition: 'end',\n  labelSize: 6,\n  hasLabel: false,\n  hasDropdown: false,\n});\n\n/* ----------------------------------------------------------------------------\n * Label\n * ------------------------------------------------------------------------- */\n\nconst LabelContainer = styled.label<{\n  labelPosition: LabelPosition;\n  hasDropdown: boolean;\n}>(({ theme, labelPosition, hasDropdown }) => ({\n  color: theme.colors.textMuted,\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n  display: 'flex',\n  alignItems: 'center',\n  pointerEvents: 'none',\n  fontWeight: 'bold',\n  fontSize: '60%',\n  opacity: 0.5,\n  userSelect: 'none',\n  ...(labelPosition === 'start'\n    ? { justifyContent: 'flex-start', paddingLeft: '6px' }\n    : {\n        justifyContent: 'flex-end',\n        paddingRight: hasDropdown ? '16px' : '6px',\n      }),\n}));\n\ninterface InputFieldLabelProps {\n  children?: ReactNode;\n}\n\nfunction InputFieldLabel({ children = false }: InputFieldLabelProps) {\n  const { labelPosition, hasDropdown } = useContext(InputFieldContext);\n\n  return (\n    <LabelContainer labelPosition={labelPosition} hasDropdown={hasDropdown}>\n      {children}\n    </LabelContainer>\n  );\n}\n\n/* ----------------------------------------------------------------------------\n * Dropdown\n * ------------------------------------------------------------------------- */\n\nconst DropdownContainer = styled.span(({ theme }) => ({\n  position: 'absolute',\n  right: 0,\n}));\n\ninterface InputFieldDropdownProps<T extends string> {\n  items: MenuItem<T>[];\n  buttonId: string;\n  onSelect: (value: T) => void;\n}\n\nfunction InputFieldDropdownMenu<T extends string>({\n  items,\n  buttonId,\n  onSelect,\n}: InputFieldDropdownProps<T>) {\n  return (\n    <DropdownContainer>\n      <NoyaDropdownMenu<T> items={items} onSelect={onSelect}>\n        <Button id={buttonId} variant=\"thin\">\n          <CaretDownIcon />\n        </Button>\n      </NoyaDropdownMenu>\n    </DropdownContainer>\n  );\n}\n\n/* ----------------------------------------------------------------------------\n * Input\n * ------------------------------------------------------------------------- */\n\nconst InputElement = styled(TextInput)<{\n  labelPosition: LabelPosition;\n  labelSize: number;\n  hasLabel: boolean;\n  hasDropdown: boolean;\n  textAlign?: Property.TextAlign;\n  disabled?: boolean;\n}>(\n  ({\n    theme,\n    labelPosition,\n    labelSize,\n    hasDropdown,\n    textAlign,\n    disabled,\n    hasLabel,\n  }) => ({\n    ...theme.textStyles.small,\n    color: disabled ? theme.colors.textDisabled : theme.colors.text,\n    width: '0px', // Reset intrinsic width\n    flex: '1 1 0px',\n    position: 'relative',\n    border: '0',\n    outline: 'none',\n    minWidth: '0',\n    textAlign: textAlign ?? 'left',\n    alignSelf: 'stretch',\n    borderRadius: '4px',\n    paddingTop: '4px',\n    paddingBottom: '4px',\n    paddingLeft:\n      6 + (hasLabel && labelPosition === 'start' ? 6 + labelSize : 0) + 'px',\n    paddingRight:\n      6 +\n      (hasLabel && labelPosition === 'end' ? 6 + labelSize : 0) +\n      (hasDropdown ? 11 : 0) +\n      'px',\n    background: theme.colors.inputBackground,\n    '&:focus': {\n      boxShadow: `0 0 0 2px ${theme.colors.primary}`,\n    },\n  }),\n);\n\nfunction InputFieldInput(\n  props: TextInputProps & { textAlign?: Property.TextAlign },\n) {\n  const { labelPosition, labelSize, hasDropdown, hasLabel } = useContext(\n    InputFieldContext,\n  );\n\n  return (\n    <InputElement\n      labelPosition={labelPosition}\n      labelSize={labelSize}\n      hasLabel={hasLabel}\n      hasDropdown={hasDropdown}\n      disabled={props.disabled}\n      {...props}\n    />\n  );\n}\n\n/* ----------------------------------------------------------------------------\n * NumberInput\n * ------------------------------------------------------------------------- */\n\ntype InputFieldNumberInputProps = Omit<\n  TextInputProps,\n  'value' | 'onChange' | 'onKeyDown' | 'onSubmit'\n> & {\n  value: number | undefined;\n  onNudge?: (value: number) => void;\n} & (\n    | {\n        onChange: (value: number) => void;\n      }\n    | {\n        onSubmit: (value: number, reset: () => void) => void;\n      }\n  );\n\nfunction parseNumber(value: string) {\n  return value ? Number(value) : NaN;\n}\n\nfunction InputFieldNumberInput(props: InputFieldNumberInputProps) {\n  const { value, placeholder, onNudge } = props;\n  const onSubmit = 'onSubmit' in props ? props.onSubmit : undefined;\n  const onChange = 'onChange' in props ? props.onChange : undefined;\n\n  const handleSubmit = useCallback(\n    (value: string, reset: () => void) => {\n      const newValue = parseNumber(value);\n\n      if (isNaN(newValue)) {\n        reset();\n      } else {\n        onSubmit?.(newValue, reset);\n      }\n    },\n    [onSubmit],\n  );\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\n      const amount = handleNudge(event);\n\n      if (!amount) return;\n\n      onNudge?.(amount);\n\n      event.preventDefault();\n      event.stopPropagation();\n    },\n    [onNudge],\n  );\n\n  const handleChange = useCallback(\n    (value: string) => {\n      onChange?.(parseNumber(value));\n    },\n    [onChange],\n  );\n\n  return (\n    <InputFieldInput\n      {...props}\n      value={value === undefined ? '' : String(value)}\n      placeholder={placeholder}\n      onKeyDown={handleKeyDown}\n      {...('onChange' in props\n        ? { onChange: handleChange }\n        : { onSubmit: handleSubmit })}\n    />\n  );\n}\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst RootContainer = styled.div<{ size?: number }>(({ theme, size }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'row',\n  position: 'relative',\n  maxWidth: typeof size === 'number' ? `${size}px` : undefined,\n}));\n\ninterface InputFieldRootProps {\n  id?: string;\n  children?: ReactNode;\n  size?: number;\n  labelPosition?: LabelPosition;\n  labelSize?: number;\n  hasDropdown?: boolean;\n}\n\nfunction InputFieldRoot({\n  id,\n  children,\n  size,\n  labelPosition = 'end',\n  labelSize = 6,\n}: InputFieldRootProps) {\n  const childrenArray = Children.toArray(children);\n\n  const hasDropdown = childrenArray.some(\n    (child) => isValidElement(child) && child.type === DropdownMenu,\n  );\n  const hasLabel = childrenArray.some(\n    (child) => isValidElement(child) && child.type === Label,\n  );\n\n  const contextValue = useMemo(\n    () => ({ labelPosition, labelSize, hasDropdown, hasLabel }),\n    [labelPosition, labelSize, hasDropdown, hasLabel],\n  );\n\n  return (\n    <InputFieldContext.Provider value={contextValue}>\n      <RootContainer id={id} size={size}>\n        {children}\n      </RootContainer>\n    </InputFieldContext.Provider>\n  );\n}\n\nexport const Input = memo(InputFieldInput);\nexport const NumberInput = memo(InputFieldNumberInput);\nexport const Label = memo(InputFieldLabel);\nexport const DropdownMenu = memo(InputFieldDropdownMenu);\nexport const Root = memo(InputFieldRoot);\n","// Given a KeyboardEvent, returns the nudge amount\nexport default function handleNudge(e: {\n  key: string;\n  shiftKey: boolean;\n  altKey: boolean;\n}): number | undefined {\n  let handled = false;\n  let amount = 0;\n\n  switch (e.key) {\n    case 'ArrowUp':\n      amount = 1;\n      handled = true;\n      break;\n    case 'ArrowDown':\n      amount = -1;\n      handled = true;\n      break;\n  }\n\n  if (!handled) return;\n\n  if (e.shiftKey) {\n    amount *= 10;\n  } else if (e.altKey) {\n    amount *= 0.1;\n  }\n\n  return handled ? amount : undefined;\n}\n","/**\n * @deprecated\n */\nexport default function getMultiValueEvery<T>(values: T[]): boolean {\n  if (values.length === 0) return false;\n\n  const first = values[0];\n\n  return values.every((value) => value === first);\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport getMultiValueEvery from '../utils/getMultiValueEvery';\n\ntype EncodedAttribute = Sketch.TextStyle['encodedAttributes'] | undefined;\n\nfunction getTextStyleColor(encodedAttributes: EncodedAttribute) {\n  const color: Sketch.Color = {\n    _class: 'color',\n    red: 0.5,\n    blue: 0.5,\n    green: 0.5,\n    alpha: 0.5,\n  };\n\n  return encodedAttributes?.MSAttributedStringColorAttribute ?? color;\n}\n\nfunction getTextFontFamily(encodedAttributes: EncodedAttribute) {\n  return (\n    encodedAttributes?.MSAttributedStringFontAttribute.attributes.name ??\n    'Helvetica'\n  );\n}\n\nfunction getTextFontSize(\n  encodedAttributesArray: EncodedAttribute[],\n  encodedAttributes: EncodedAttribute,\n  attributes: Sketch.StringAttribute[],\n) {\n  return getMultiValueEvery<number | undefined>(\n    encodedAttributesArray.map(\n      (encodedAttribute) =>\n        encodedAttribute?.MSAttributedStringFontAttribute.attributes.size,\n    ),\n  ) &&\n    getMultiValueEvery<number | undefined>(\n      attributes.map(\n        (a) => a.attributes.MSAttributedStringFontAttribute.attributes.size,\n      ),\n    )\n    ? encodedAttributes?.MSAttributedStringFontAttribute.attributes.size\n    : undefined;\n}\n\nfunction getTextLineHeight(\n  encodedAttributesArray: EncodedAttribute[],\n  paragraphStyle: Sketch.ParagraphStyle | undefined,\n  attributes: Sketch.StringAttribute[],\n) {\n  return getMultiValueEvery<number | undefined>(\n    encodedAttributesArray.map(\n      (encodedAttribute) => encodedAttribute?.paragraphStyle?.maximumLineHeight,\n    ),\n  ) &&\n    getMultiValueEvery<number | undefined>(\n      attributes.map((a) => a.attributes.paragraphStyle?.maximumLineHeight),\n    )\n    ? paragraphStyle?.maximumLineHeight ?? 22\n    : undefined;\n}\n\nfunction getHorizontalAlignment(\n  encodedAttributesArray: EncodedAttribute[],\n  paragraphStyle: Sketch.ParagraphStyle | undefined,\n  attributes: Sketch.StringAttribute[],\n) {\n  return getMultiValueEvery<Sketch.TextHorizontalAlignment | undefined>(\n    encodedAttributesArray.map(\n      (encodedAttribute) => encodedAttribute?.paragraphStyle?.alignment,\n    ),\n  ) &&\n    getMultiValueEvery<Sketch.TextHorizontalAlignment | undefined>(\n      attributes.map((a) => a.attributes.paragraphStyle?.alignment),\n    )\n    ? paragraphStyle?.alignment ?? Sketch.TextHorizontalAlignment.Left\n    : undefined;\n}\n\nfunction getTextTransformation(\n  encodedAttributesArray: EncodedAttribute[],\n  encodedAttributes: Sketch.TextStyle['encodedAttributes'] | undefined,\n) {\n  return getMultiValueEvery<Sketch.TextTransform | undefined>(\n    encodedAttributesArray.map(\n      (encodedAttribute) =>\n        encodedAttribute?.MSAttributedStringTextTransformAttribute,\n    ),\n  )\n    ? encodedAttributes?.MSAttributedStringTextTransformAttribute ??\n        Sketch.TextTransform.None\n    : undefined;\n}\n\nfunction getTextDecoration(encodedAttributes: EncodedAttribute) {\n  return encodedAttributes?.underlineStyle\n    ? ('underline' as const)\n    : encodedAttributes?.strikethroughStyle\n    ? ('strikethrough' as const)\n    : ('none' as const);\n}\n\nfunction getTextLetterSpacing(\n  encodedAttributesArray: EncodedAttribute[],\n  encodedAttributes: EncodedAttribute,\n  attributes: Sketch.StringAttribute[],\n) {\n  return getMultiValueEvery<number | undefined>(\n    encodedAttributesArray.map((encodedAttribute) => encodedAttribute?.kerning),\n  ) &&\n    getMultiValueEvery<number | undefined>(\n      attributes.map((a) => a.attributes.kerning),\n    )\n    ? encodedAttributes?.kerning || 0\n    : undefined;\n}\n\nfunction getTextParagraphSpacing(\n  encodedAttributesArray: EncodedAttribute[],\n  paragraphStyle: Sketch.ParagraphStyle | undefined,\n  attributes: Sketch.StringAttribute[],\n) {\n  return getMultiValueEvery<number | undefined>(\n    encodedAttributesArray.map(\n      (encodedAttribute) => encodedAttribute?.paragraphStyle?.paragraphSpacing,\n    ),\n  ) &&\n    getMultiValueEvery<number | undefined>(\n      attributes.map((a) => a.attributes.paragraphStyle?.paragraphSpacing),\n    )\n    ? paragraphStyle?.paragraphSpacing || 0\n    : undefined;\n}\n\nfunction getTextVerticalAlignment(\n  encodedAttributesArray: EncodedAttribute[],\n  encodedAttributes: EncodedAttribute | undefined,\n) {\n  return getMultiValueEvery<number | undefined>(\n    encodedAttributesArray.map(\n      (encodedAttribute) => encodedAttribute?.textStyleVerticalAlignmentKey,\n    ),\n  )\n    ? encodedAttributes?.textStyleVerticalAlignmentKey ??\n        Sketch.TextVerticalAlignment.Top\n    : undefined;\n}\n\nfunction getTextAlignment(layers: Sketch.Text[]) {\n  return getMultiValueEvery<Sketch.TextBehaviour | undefined>(\n    layers.map((l: Sketch.Text) => l?.textBehaviour),\n  )\n    ? layers[0]?.textBehaviour ?? 0\n    : undefined;\n}\n\ntype TextStyles = Sketch.Text | Sketch.Style;\n\nexport const getTextStyleAttributes = (array: TextStyles[]) => {\n  const first = array[0];\n  const textStyle =\n    first._class === 'text' ? first.style?.textStyle : first.textStyle;\n  const encodedAttributes = textStyle?.encodedAttributes;\n  const paragraphStyle = encodedAttributes?.paragraphStyle;\n\n  const attributes =\n    first._class === 'text' ? first.attributedString.attributes : [];\n\n  const encodedAttributesArray = array.map((value) =>\n    value._class === 'text'\n      ? value.style?.textStyle?.encodedAttributes\n      : value.textStyle?.encodedAttributes,\n  );\n\n  return {\n    fontColor: getTextStyleColor(encodedAttributes),\n    fontFamily: getTextFontFamily(encodedAttributes),\n    fontSize: getTextFontSize(\n      encodedAttributesArray,\n      encodedAttributes,\n      attributes,\n    ),\n    lineHeight: getTextLineHeight(\n      encodedAttributesArray,\n      paragraphStyle,\n      attributes,\n    ),\n    horizontalAlignment: getHorizontalAlignment(\n      encodedAttributesArray,\n      paragraphStyle,\n      attributes,\n    ),\n    textTransform: getTextTransformation(\n      encodedAttributesArray,\n      encodedAttributes,\n    ),\n    textDecoration: getTextDecoration(encodedAttributes),\n    letterSpacing: getTextLetterSpacing(\n      encodedAttributesArray,\n      encodedAttributes,\n      attributes,\n    ),\n    paragraphSpacing: getTextParagraphSpacing(\n      encodedAttributesArray,\n      paragraphStyle,\n      attributes,\n    ),\n    verticalAlignment: getTextVerticalAlignment(\n      encodedAttributesArray,\n      encodedAttributes,\n    ),\n    fontAlignment: getTextAlignment(\n      array.flatMap((value) => (value._class === 'text' ? [value] : [])),\n    ),\n  };\n};\n","import { interpolate } from 'noya-utils';\nimport { RgbaColor } from '../types';\n\nexport interface GradientStopRgba {\n  color: RgbaColor;\n  position: number;\n}\n\nconst RGBA_COMPONENTS = ['r', 'g', 'b', 'a'] as const\n\nexport function interpolateRgba(stops: GradientStopRgba[], pos: number): RgbaColor {\n  const color: RgbaColor = { r: 0, g: 0, b: 0, a: 1 };\n\n  if (stops.length === 0) return color\n\n  const sorted = [...stops].sort((a, b) => a.position - b.position);\n\n  RGBA_COMPONENTS.forEach(component => {\n    const inputRange = sorted.map(stop => stop.position)\n    const outputRange = sorted.map(stop => stop.color[component])\n\n    color[component] = interpolate(pos, { inputRange, outputRange })\n  })\n\n  return color;\n} ","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { sketchColorToRgba, getGradientBackground } from 'noya-designsystem';\nimport React, { memo, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { RgbaColor } from '../types';\nimport { interpolateRgba } from '../utils/interpolateRgba';\nimport { Interaction, Interactive } from './Interactive';\nimport Pointer from './Pointer';\n\nconst Container = styled.div<{ background: string }>(({ background }) => ({\n  position: 'relative',\n  height: '8px',\n  borderRadius: '8px',\n  boxShadow: '0 0 0 1px rgba(0,0,0,0.2) inset',\n  background,\n  zIndex: 2,\n}));\n\nexport default memo(function Gradient({\n  gradients,\n  selectedStop,\n  onSelectStop,\n  onChangePosition,\n  onAdd,\n  onDelete,\n}: {\n  gradients: Sketch.GradientStop[];\n  selectedStop: number;\n  onSelectStop: (index: number) => void;\n  onChangePosition: (position: number) => void;\n  onAdd: (value: RgbaColor, position: number) => void;\n  onDelete: () => void;\n}) {\n  const handleMove = (interaction: Interaction) => {\n    onChangePosition(interaction.left);\n  };\n\n  const handleKey = (offset: Interaction) => {\n    if (!offset) {\n      onDelete();\n    }\n    // Hue measured in degrees of the color circle ranging from 0 to 360\n    //console.log('press');\n  };\n\n  const handleClick = (interaction: Interaction | number) => {\n    if (typeof interaction === 'number') {\n      onSelectStop(interaction);\n      return;\n    }\n\n    const gradient = gradients.map((g, index) => ({\n      color: sketchColorToRgba(g.color),\n      position: g.position,\n    }));\n\n    const color = interpolateRgba(gradient, interaction.left);\n\n    onAdd(color, interaction.left);\n  };\n\n  const background = useMemo(\n    () => getGradientBackground(gradients, Sketch.GradientType.Linear, 90),\n    [gradients],\n  );\n  return (\n    <Container background={background}>\n      <Interactive\n        onMove={handleMove}\n        onKey={handleKey}\n        onClick={handleClick}\n        onDelete={onDelete}\n        onClickPointer={onSelectStop}\n        aria-label=\"Gradient\"\n      >\n        {gradients.map((g, index) => (\n          <Pointer\n            index={index}\n            key={`gradients-point-${index}`}\n            selected={index === selectedStop}\n            left={g.position}\n          />\n        ))}\n      </Interactive>\n    </Container>\n  );\n});\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { ColorPickerProvider } from '../contexts/ColorPickerContext';\nimport { useColorManipulation } from '../hooks/useColorManipulation';\nimport { AnyColor, ColorModel, ColorPickerBaseProps } from '../types';\n\nconst Container = styled.div({\n  position: 'relative',\n  display: 'flex',\n  flexDirection: 'column',\n  userSelect: 'none',\n  cursor: 'default',\n});\n\ninterface Props<T extends AnyColor> extends Partial<ColorPickerBaseProps<T>> {\n  colorModel: ColorModel<T>;\n  children?: ReactNode;\n}\n\nexport default function ColorPicker<T extends AnyColor>({\n  colorModel,\n  color = colorModel.defaultColor,\n  onChange,\n  children,\n}: Props<T>): JSX.Element {\n  const contextValue = useColorManipulation<T>(colorModel, color, onChange);\n\n  return (\n    <ColorPickerProvider value={contextValue}>\n      <Container>{children}</Container>\n    </ColorPickerProvider>\n  );\n}","/* eslint-disable @shopify/prefer-early-return */\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { ColorModel, AnyColor, HsvaColor } from '../types';\nimport { equalColorObjects } from '../utils/compare';\nimport { useEventCallback } from './useEventCallback';\n\nexport function useColorManipulation<T extends AnyColor>(\n  colorModel: ColorModel<T>,\n  color: T,\n  onChange?: (color: T) => void,\n): [HsvaColor, (color: Partial<HsvaColor>) => void] {\n  // Save onChange callback in the ref for avoiding \"useCallback hell\"\n  const onChangeCallback = useEventCallback(onChange);\n\n  // No matter which color model is used (HEX, RGB(A) or HSL(A)),\n  // all internal calculations are based on HSVA model\n  const [hsva, updateHsva] = useState<HsvaColor>(() =>\n    colorModel.toHsva(color),\n  );\n  // By using this ref we're able to prevent extra updates\n  // and the effects recursion during the color conversion\n  const cache = useRef({ color, hsva });\n\n  // Update local HSVA-value if `color` property value is changed,\n  // but only if that's not the same color that we just sent to the parent\n  useEffect(() => {\n    if (!colorModel.equal(color, cache.current.color)) {\n      const newHsva = colorModel.toHsva(color);\n      cache.current = { hsva: newHsva, color };\n      updateHsva(newHsva);\n    }\n  }, [color, colorModel]);\n\n  // Trigger `onChange` callback only if an updated color is different from cached one;\n  // save the new color to the ref to prevent unnecessary updates\n  useEffect(() => {\n    let newColor;\n    if (\n      !equalColorObjects(hsva, cache.current.hsva) &&\n      !colorModel.equal(\n        (newColor = colorModel.fromHsva(hsva)),\n        cache.current.color,\n      )\n    ) {\n      cache.current = { hsva, color: newColor };\n      onChangeCallback(\n        newColor\n      );\n    }\n  }, [hsva, colorModel, onChangeCallback]);\n\n  // Merge the current HSVA color object with updated params.\n  // For example, when a child component sends `h` or `s` only\n  const handleChange = useCallback(\n    (params: Partial<HsvaColor>) => {\n      updateHsva((current) => Object.assign({}, current, params));\n    },\n    [],\n  );\n\n  return [hsva, handleChange];\n}\n","import { ColorFilter, ImageFilter } from 'canvaskit';\nimport { AffineTransform } from 'noya-geometry';\nimport { createElement, memo, ReactNode, useMemo } from 'react';\nimport { ClipProps, GroupComponentProps } from '../types';\n\ninterface GroupProps {\n  opacity?: number;\n  transform?: AffineTransform;\n  children?: ReactNode;\n  clip?: ClipProps;\n  colorFilter?: ColorFilter;\n  imageFilter?: ImageFilter;\n}\n\nexport default memo(function Group(props: GroupProps) {\n  const transform = useMemo(\n    () => (props.transform ? props.transform.float32Array : undefined),\n    [props.transform],\n  );\n\n  const elementProps: GroupComponentProps = useMemo(\n    () => ({\n      transform,\n      children: props.children,\n      opacity: props.opacity ?? 1,\n      clip: props.clip,\n      colorFilter: props.colorFilter,\n      imageFilter: props.imageFilter,\n    }),\n    [\n      transform,\n      props.children,\n      props.opacity,\n      props.clip,\n      props.colorFilter,\n      props.imageFilter,\n    ],\n  );\n\n  return createElement('Group', elementProps);\n});\n","import { CanvasKit, Paint } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { createElement, memo, useMemo } from 'react';\nimport { memoize } from 'noya-utils';\nimport usePaint, { PaintParameters } from '../hooks/usePaint';\nimport useRect, { RectParameters } from '../hooks/useRect';\nimport { ImageComponentProps } from '../types';\n\nconst decodeImage = memoize((CanvasKit: CanvasKit, data: ArrayBuffer) => {\n  return CanvasKit.MakeImageFromEncoded(data);\n});\n\ninterface ImageProps {\n  image: ArrayBuffer;\n  rect: RectParameters;\n  paint: Paint | PaintParameters;\n}\n\nexport default memo(function Image(props: ImageProps) {\n  const CanvasKit = useCanvasKit();\n\n  const rect = useRect(props.rect);\n  const paint = usePaint(props.paint);\n  const image = useMemo(\n    () =>\n      props.image instanceof ArrayBuffer\n        ? decodeImage(CanvasKit, props.image)\n        : props.image,\n    [CanvasKit, props.image],\n  );\n\n  const elementProps: ImageComponentProps | undefined = useMemo(\n    () =>\n      image\n        ? {\n            rect,\n            paint,\n            image,\n          }\n        : undefined,\n    [rect, paint, image],\n  );\n\n  if (!elementProps) return null;\n\n  return createElement('Image', elementProps);\n});\n","import { Paint } from 'canvaskit';\nimport { useCanvasKit } from 'noya-renderer';\nimport { Point } from 'noya-state';\nimport { memo, useMemo } from 'react';\nimport useDeletable from '../hooks/useDeletable';\nimport usePaint from '../hooks/usePaint';\nimport makePath from '../utils/makePath';\nimport RCKPath from './Path';\n\ninterface PolylineProps {\n  points: Point[];\n  paint: Paint;\n}\n\nexport default memo(function Polyline(props: PolylineProps) {\n  const CanvasKit = useCanvasKit();\n  const paint = usePaint(props.paint);\n  const path = useMemo(() => makePath(CanvasKit, props.points), [\n    CanvasKit,\n    props.points,\n  ]);\n  useDeletable(path);\n\n  return <RCKPath paint={paint} path={path} />;\n});\n","import { Paint } from 'canvaskit';\nimport { createElement, memo, useMemo } from 'react';\nimport usePaint from '../hooks/usePaint';\nimport useRect, { RectParameters } from '../hooks/useRect';\nimport { RectComponentProps } from '../types';\n\ninterface RectProps {\n  rect: RectParameters;\n  cornerRadius?: number;\n  paint: Paint;\n}\n\nexport default memo(function Rect(props: RectProps) {\n  const rect = useRect(props.rect);\n  const paint = usePaint(props.paint);\n\n  const elementProps: RectComponentProps = useMemo(\n    () => ({\n      rect,\n      paint,\n      cornerRadius: props.cornerRadius,\n    }),\n    [rect, paint, props.cornerRadius],\n  );\n\n  return createElement('Rect', elementProps);\n});\n","import { Paragraph } from 'canvaskit';\nimport { createElement, memo, useMemo } from 'react';\nimport { TextComponentProps } from '../types';\nimport useRect, { RectParameters } from '../hooks/useRect';\n\ninterface TextProps {\n  rect: RectParameters;\n  paragraph: Paragraph;\n}\n\nexport default memo(function Text(props: TextProps) {\n  const rect = useRect(props.rect);\n  const elementProps: TextComponentProps = useMemo(\n    () => ({\n      paragraph: props.paragraph,\n      rect,\n    }),\n    [props.paragraph, rect],\n  );\n\n  return createElement('Text', elementProps);\n});\n","import { useEffect, useState } from 'react';\nimport useLazyValue from './useLazyValue';\n\nconst preferDarkQuery = '(prefers-color-scheme: dark)';\n\ntype ColorScheme = 'light' | 'dark';\n\nexport default function useSystemColorScheme(glbl = global) {\n  const mediaQuery = useLazyValue(() => glbl.matchMedia(preferDarkQuery));\n\n  const [colorScheme, setColorScheme] = useState<ColorScheme>(\n    mediaQuery.matches ? 'dark' : 'light',\n  );\n\n  useEffect(() => {\n    const listener = ({ matches }: MediaQueryListEvent) => {\n      setColorScheme(matches ? 'dark' : 'light');\n    };\n\n    mediaQuery.addEventListener('change', listener);\n\n    return () => {\n      mediaQuery.removeEventListener('change', listener);\n    };\n  }, [mediaQuery]);\n\n  return colorScheme;\n}\n","import { useRef } from 'react';\n\nexport default function useLazyValue<T>(f: () => T): T {\n  const didInitialize = useRef(false);\n  const value = useRef<T | undefined>(undefined);\n\n  if (!didInitialize.current) {\n    didInitialize.current = true;\n\n    value.current = f();\n  }\n\n  return value.current!;\n}\n","/* eslint-disable */\nvar CanvasKitInit = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(CanvasKitInit) {\n  CanvasKitInit = CanvasKitInit || {};\n\n\nnull;var r;r||(r=typeof CanvasKitInit !== 'undefined' ? CanvasKitInit : {});var da,fa;r.ready=new Promise(function(a,b){da=a;fa=b});\n(function(a){a.Wd=a.Wd||[];a.Wd.push(function(){a.MakeSWCanvasSurface=function(b){var c=b;if(\"CANVAS\"!==c.tagName&&(c=document.getElementById(b),!c))throw\"Canvas with id \"+b+\" was not found\";if(b=a.MakeSurface(c.width,c.height))b.Sd=c;return b};a.MakeCanvasSurface||(a.MakeCanvasSurface=a.MakeSWCanvasSurface);a.MakeSurface=function(b,c){var f={width:b,height:c,colorType:a.ColorType.RGBA_8888,alphaType:a.AlphaType.Unpremul,colorSpace:a.ColorSpace.SRGB},h=b*c*4,m=a._malloc(h);if(f=a.Surface._makeRasterDirect(f,\nm,4*b))f.Sd=null,f.Kf=b,f.Hf=c,f.Jf=h,f.lf=m,f.getCanvas().clear(a.TRANSPARENT);return f};a.MakeRasterDirectSurface=function(b,c,f){return a.Surface._makeRasterDirect(b,c.byteOffset,f)};a.Surface.prototype.flush=function(b){this._flush();if(this.Sd){var c=new Uint8ClampedArray(a.HEAPU8.buffer,this.lf,this.Jf);c=new ImageData(c,this.Kf,this.Hf);b?this.Sd.getContext(\"2d\").putImageData(c,0,0,b[0],b[1],b[2]-b[0],b[3]-b[1]):this.Sd.getContext(\"2d\").putImageData(c,0,0)}};a.Surface.prototype.dispose=function(){this.lf&&\na._free(this.lf);this.delete()};a.currentContext=a.currentContext||function(){};a.setCurrentContext=a.setCurrentContext||function(){}})})(r);\n(function(a){a.Wd=a.Wd||[];a.Wd.push(function(){function b(c,f,h){return c&&c.hasOwnProperty(f)?c[f]:h}a.GetWebGLContext=function(c,f){if(!c)throw\"null canvas passed into makeWebGLContext\";var h={alpha:b(f,\"alpha\",1),depth:b(f,\"depth\",1),stencil:b(f,\"stencil\",8),antialias:b(f,\"antialias\",0),premultipliedAlpha:b(f,\"premultipliedAlpha\",1),preserveDrawingBuffer:b(f,\"preserveDrawingBuffer\",0),preferLowPowerToHighPerformance:b(f,\"preferLowPowerToHighPerformance\",0),failIfMajorPerformanceCaveat:b(f,\"failIfMajorPerformanceCaveat\",\n0),enableExtensionsByDefault:b(f,\"enableExtensionsByDefault\",1),explicitSwapControl:b(f,\"explicitSwapControl\",0),renderViaOffscreenBackBuffer:b(f,\"renderViaOffscreenBackBuffer\",0)};h.majorVersion=f&&f.majorVersion?f.majorVersion:\"undefined\"!==typeof WebGL2RenderingContext?2:1;if(h.explicitSwapControl)throw\"explicitSwapControl is not supported\";c=ia(c,h);if(!c)return 0;ja(c);return c};a.deleteContext=function(c){v===ma[c]&&(v=null);\"object\"===typeof JSEvents&&JSEvents.Ng(ma[c].Ne.canvas);ma[c]&&ma[c].Ne.canvas&&\n(ma[c].Ne.canvas.vf=void 0);ma[c]=null};a.MakeWebGLCanvasSurface=function(c,f,h){f=f||null;var m=c,q=\"undefined\"!==typeof OffscreenCanvas&&m instanceof OffscreenCanvas;if(!(\"undefined\"!==typeof HTMLCanvasElement&&m instanceof HTMLCanvasElement||q||(m=document.getElementById(c),m)))throw\"Canvas with id \"+c+\" was not found\";c=this.GetWebGLContext(m,h);if(!c||0>c)throw\"failed to create webgl context: err \"+c;h=this.MakeGrContext(c);f=this.MakeOnScreenGLSurface(h,m.width,m.height,f);if(!f)return f=m.cloneNode(!0),\nm.parentNode.replaceChild(f,m),f.classList.add(\"ck-replaced\"),a.MakeSWCanvasSurface(f);f.se=c;f.grContext=h;f.openGLversion=m.vf.version;return f};a.MakeCanvasSurface=a.MakeWebGLCanvasSurface})})(r);\n(function(a){function b(e,d,g,l,p){for(var x=0;x<e.length;x++)d[x*g+(x*p+l+g)%g]=e[x];return d}function c(e){for(var d=e*e,g=Array(d);d--;)g[d]=0===d%(e+1)?1:0;return g}function f(e){return e?e.constructor===Float32Array&&4===e.length:!1}function h(e){return(u(255*e[3])<<24|u(255*e[0])<<16|u(255*e[1])<<8|u(255*e[2])<<0)>>>0}function m(e){if(e instanceof Float32Array){for(var d=Math.floor(e.length/4),g=new Uint32Array(d),l=0;l<d;l++)g[l]=h(e.slice(4*l,4*(l+1)));return g}if(e instanceof Uint32Array)return e;\nif(e instanceof Array&&e[0]instanceof Float32Array)return e.map(h)}function q(e){if(void 0===e)return 1;var d=parseFloat(e);return e&&-1!==e.indexOf(\"%\")?d/100:d}function u(e){return Math.round(Math.max(0,Math.min(e||0,255)))}function y(e,d){d&&!d._ck&&a._free(e)}function w(e,d,g){if(!e||!e.length)return S;if(e._ck)return e.byteOffset;var l=a[d].BYTES_PER_ELEMENT;g||(g=a._malloc(e.length*l));a[d].set(e,g/l);return g}function I(e){var d={he:S,count:e.length,Ue:a.ColorType.RGBA_F32};if(e instanceof\nFloat32Array)d.he=w(e,\"HEAPF32\"),d.count=e.length/4;else if(e instanceof Uint32Array)d.he=w(e,\"HEAPU32\"),d.Ue=a.ColorType.RGBA_8888;else if(e instanceof Array){if(e&&e.length){for(var g=a._malloc(16*e.length),l=0,p=g/4,x=0;x<e.length;x++)for(var B=0;4>B;B++)a.HEAPF32[p+l]=e[x][B],l++;e=g}else e=S;d.he=e}else throw\"Invalid argument to copyFlexibleColorArray, Not a color array \"+typeof e;return d}function K(e){if(!e)return S;if(e.length){if(6===e.length||9===e.length)return w(e,\"HEAPF32\",Ma),6===e.length&&\na.HEAPF32.set(Hd,6+Ma/4),Ma;if(16===e.length){var d=Cb.toTypedArray();d[0]=e[0];d[1]=e[1];d[2]=e[3];d[3]=e[4];d[4]=e[5];d[5]=e[7];d[6]=e[12];d[7]=e[13];d[8]=e[15];return Ma}throw\"invalid matrix size\";}d=Cb.toTypedArray();d[0]=e.m11;d[1]=e.m21;d[2]=e.m41;d[3]=e.m12;d[4]=e.m22;d[5]=e.m42;d[6]=e.m14;d[7]=e.m24;d[8]=e.m44;return Ma}function P(e){if(!e)return S;var d=ec.toTypedArray();if(e.length){if(16!==e.length&&6!==e.length&&9!==e.length)throw\"invalid matrix size\";if(16===e.length)return w(e,\"HEAPF32\",\nNa);d.fill(0);d[0]=e[0];d[1]=e[1];d[3]=e[2];d[4]=e[3];d[5]=e[4];d[7]=e[5];d[12]=e[6];d[13]=e[7];d[15]=e[8];6===e.length&&(d[12]=0,d[13]=0,d[15]=1);return Na}d[0]=e.m11;d[1]=e.m21;d[2]=e.m31;d[3]=e.m41;d[4]=e.m12;d[5]=e.m22;d[6]=e.m32;d[7]=e.m42;d[8]=e.m13;d[9]=e.m23;d[10]=e.m33;d[11]=e.m43;d[12]=e.m14;d[13]=e.m24;d[14]=e.m34;d[15]=e.m44;return Na}function A(e){for(var d=Array(16),g=0;16>g;g++)d[g]=a.HEAPF32[e/4+g];return d}function M(e,d){return w(e,\"HEAPF32\",d||hb)}function X(e,d,g,l){var p=fc.toTypedArray();\np[0]=e;p[1]=d;p[2]=g;p[3]=l;return hb}function ea(e){for(var d=new Float32Array(4),g=0;4>g;g++)d[g]=a.HEAPF32[e/4+g];return d}function aa(e,d){return w(e,\"HEAPF32\",d||ca)}function pa(e,d){return w(e,\"HEAPF32\",d||hc)}function ib(){for(var e=0,d=0;d<arguments.length-1;d+=2)e+=arguments[d]*arguments[d+1];return e}function jb(e,d,g){for(var l=Array(e.length),p=0;p<g;p++)for(var x=0;x<g;x++){for(var B=0,J=0;J<g;J++)B+=e[g*p+J]*d[g*J+x];l[p*g+x]=B}return l}function Mc(e,d){for(var g=jb(d[0],d[1],e),l=2;l<\nd.length;)g=jb(g,d[l],e),l++;return g}a.Color=function(e,d,g,l){void 0===l&&(l=1);return a.Color4f(u(e)/255,u(d)/255,u(g)/255,l)};a.ColorAsInt=function(e,d,g,l){void 0===l&&(l=255);return(u(l)<<24|u(e)<<16|u(d)<<8|u(g)<<0&268435455)>>>0};a.Color4f=function(e,d,g,l){void 0===l&&(l=1);return Float32Array.of(e,d,g,l)};Object.defineProperty(a,\"TRANSPARENT\",{get:function(){return a.Color4f(0,0,0,0)}});Object.defineProperty(a,\"BLACK\",{get:function(){return a.Color4f(0,0,0,1)}});Object.defineProperty(a,\n\"WHITE\",{get:function(){return a.Color4f(1,1,1,1)}});Object.defineProperty(a,\"RED\",{get:function(){return a.Color4f(1,0,0,1)}});Object.defineProperty(a,\"GREEN\",{get:function(){return a.Color4f(0,1,0,1)}});Object.defineProperty(a,\"BLUE\",{get:function(){return a.Color4f(0,0,1,1)}});Object.defineProperty(a,\"YELLOW\",{get:function(){return a.Color4f(1,1,0,1)}});Object.defineProperty(a,\"CYAN\",{get:function(){return a.Color4f(0,1,1,1)}});Object.defineProperty(a,\"MAGENTA\",{get:function(){return a.Color4f(1,\n0,1,1)}});a.getColorComponents=function(e){return[Math.floor(255*e[0]),Math.floor(255*e[1]),Math.floor(255*e[2]),e[3]]};a.parseColorString=function(e,d){e=e.toLowerCase();if(e.startsWith(\"#\")){d=255;switch(e.length){case 9:d=parseInt(e.slice(7,9),16);case 7:var g=parseInt(e.slice(1,3),16);var l=parseInt(e.slice(3,5),16);var p=parseInt(e.slice(5,7),16);break;case 5:d=17*parseInt(e.slice(4,5),16);case 4:g=17*parseInt(e.slice(1,2),16),l=17*parseInt(e.slice(2,3),16),p=17*parseInt(e.slice(3,4),16)}return a.Color(g,\nl,p,d/255)}return e.startsWith(\"rgba\")?(e=e.slice(5,-1),e=e.split(\",\"),a.Color(+e[0],+e[1],+e[2],q(e[3]))):e.startsWith(\"rgb\")?(e=e.slice(4,-1),e=e.split(\",\"),a.Color(+e[0],+e[1],+e[2],q(e[3]))):e.startsWith(\"gray(\")||e.startsWith(\"hsl\")||!d||(e=d[e],void 0===e)?a.BLACK:e};a.multiplyByAlpha=function(e,d){e=e.slice();e[3]=Math.max(0,Math.min(e[3]*d,1));return e};a.Malloc=function(e,d){var g=a._malloc(d*e.BYTES_PER_ELEMENT);return{_ck:!0,length:d,byteOffset:g,ue:null,subarray:function(l,p){l=this.toTypedArray().subarray(l,\np);l._ck=!0;return l},toTypedArray:function(){if(this.ue&&this.ue.length)return this.ue;this.ue=new e(a.HEAPU8.buffer,g,d);this.ue._ck=!0;return this.ue}}};a.Free=function(e){a._free(e.byteOffset);e.byteOffset=S;e.toTypedArray=null;e.ue=null};var Ma=S,Cb,Na=S,ec,hb=S,fc,ra,ca=S,Nc,Ua=S,Oc,ic=S,Pc,jc=S,Qc,kc=S,Rc,hc=S,Sc,Tc=S,Hd=Float32Array.of(0,0,1),lc={};a.ve=function(){this.re=[];this.$d=null;Object.defineProperty(this,\"length\",{enumerable:!0,get:function(){return this.re.length/4}})};a.ve.prototype.push=\nfunction(e,d,g,l){this.$d||this.re.push(e,d,g,l)};a.ve.prototype.set=function(e,d,g,l,p){0>e||e>=this.re.length/4||(e*=4,this.$d?(e=this.$d/4+e,a.HEAPF32[e]=d,a.HEAPF32[e+1]=g,a.HEAPF32[e+2]=l,a.HEAPF32[e+3]=p):(this.re[e]=d,this.re[e+1]=g,this.re[e+2]=l,this.re[e+3]=p))};a.ve.prototype.build=function(){return this.$d?this.$d:this.$d=w(this.re,\"HEAPF32\")};a.ve.prototype.delete=function(){this.$d&&(a._free(this.$d),this.$d=null)};a.Oe=function(){this.Te=[];this.$d=null;Object.defineProperty(this,\"length\",\n{enumerable:!0,get:function(){return this.Te.length}})};a.Oe.prototype.push=function(e){this.$d||this.Te.push(e)};a.Oe.prototype.set=function(e,d){0>e||e>=this.Te.length||(e*=4,this.$d?a.HEAPU32[this.$d/4+e]=d:this.Te[e]=d)};a.Oe.prototype.build=function(){return this.$d?this.$d:this.$d=w(this.Te,\"HEAPU32\")};a.Oe.prototype.delete=function(){this.$d&&(a._free(this.$d),this.$d=null)};a.RectBuilder=a.ve;a.RSXFormBuilder=a.ve;a.ColorBuilder=a.Oe;var S=0;a.onRuntimeInitialized=function(){function e(d,\ng,l,p,x,B){B||(B=4*p.width,p.colorType===a.ColorType.RGBA_F16?B*=2:p.colorType===a.ColorType.RGBA_F32&&(B*=4));var J=B*p.height;var L=x?x.byteOffset:a._malloc(J);if(!d._readPixels(p,L,B,g,l))return x||a._free(L),null;if(x)return x.toTypedArray();switch(p.colorType){case a.ColorType.RGBA_8888:case a.ColorType.RGBA_F16:d=(new Uint8Array(a.HEAPU8.buffer,L,J)).slice();break;case a.ColorType.RGBA_F32:d=(new Float32Array(a.HEAPU8.buffer,L,J)).slice();break;default:return null}a._free(L);return d}fc=a.Malloc(Float32Array,\n4);hb=fc.byteOffset;ec=a.Malloc(Float32Array,16);Na=ec.byteOffset;Cb=a.Malloc(Float32Array,9);Ma=Cb.byteOffset;Rc=a.Malloc(Float32Array,12);hc=Rc.byteOffset;Sc=a.Malloc(Float32Array,12);Tc=Sc.byteOffset;ra=a.Malloc(Float32Array,4);ca=ra.byteOffset;Nc=a.Malloc(Float32Array,4);Ua=Nc.byteOffset;Oc=a.Malloc(Float32Array,3);ic=Oc.byteOffset;Pc=a.Malloc(Float32Array,3);jc=Pc.byteOffset;Qc=a.Malloc(Int32Array,4);kc=Qc.byteOffset;a.ColorSpace.SRGB=a.ColorSpace._MakeSRGB();a.ColorSpace.DISPLAY_P3=a.ColorSpace._MakeDisplayP3();\na.ColorSpace.ADOBE_RGB=a.ColorSpace._MakeAdobeRGB();a.GlyphRunFlags={IsWhiteSpace:a._GlyphRunFlags_isWhiteSpace};a.Path.MakeFromCmds=function(d){for(var g=0,l=0;l<d.length;l++)g+=d[l].length;if(lc[g])var p=lc[g];else p=new Float32Array(g),lc[g]=p;var x=0;for(l=0;l<d.length;l++)for(var B=0;B<d[l].length;B++)p[x]=d[l][B],x++;d=[w(p,\"HEAPF32\"),g];g=a.Path._MakeFromCmds(d[0],d[1]);a._free(d[0]);return g};a.Path.MakeFromVerbsPointsWeights=function(d,g,l){var p=w(d,\"HEAPU8\"),x=w(g,\"HEAPF32\"),B=w(l,\"HEAPF32\"),\nJ=a.Path._MakeFromVerbsPointsWeights(p,d.length,x,g.length,B,l&&l.length||0);y(p,d);y(x,g);y(B,l);return J};a.Path.prototype.addArc=function(d,g,l){d=aa(d);this._addArc(d,g,l);return this};a.Path.prototype.addOval=function(d,g,l){void 0===l&&(l=1);d=aa(d);this._addOval(d,!!g,l);return this};a.Path.prototype.addPath=function(){var d=Array.prototype.slice.call(arguments),g=d[0],l=!1;\"boolean\"===typeof d[d.length-1]&&(l=d.pop());if(1===d.length)this._addPath(g,1,0,0,0,1,0,0,0,1,l);else if(2===d.length)d=\nd[1],this._addPath(g,d[0],d[1],d[2],d[3],d[4],d[5],d[6]||0,d[7]||0,d[8]||1,l);else if(7===d.length||10===d.length)this._addPath(g,d[1],d[2],d[3],d[4],d[5],d[6],d[7]||0,d[8]||0,d[9]||1,l);else return null;return this};a.Path.prototype.addPoly=function(d,g){var l=w(d,\"HEAPF32\");this._addPoly(l,d.length/2,g);y(l,d);return this};a.Path.prototype.addRect=function(d,g){d=aa(d);this._addRect(d,!!g);return this};a.Path.prototype.addRRect=function(d,g){d=pa(d);this._addRRect(d,!!g);return this};a.Path.prototype.addVerbsPointsWeights=\nfunction(d,g,l){var p=w(d,\"HEAPU8\"),x=w(g,\"HEAPF32\"),B=w(l,\"HEAPF32\");this._addVerbsPointsWeights(p,d.length,x,g.length,B,l&&l.length||0);y(p,d);y(x,g);y(B,l)};a.Path.prototype.arc=function(d,g,l,p,x,B){d=a.LTRBRect(d-l,g-l,d+l,g+l);x=(x-p)/Math.PI*180-360*!!B;B=new a.Path;B.addArc(d,p/Math.PI*180,x);this.addPath(B,!0);B.delete();return this};a.Path.prototype.arcToOval=function(d,g,l,p){d=aa(d);this._arcToOval(d,g,l,p);return this};a.Path.prototype.arcToRotated=function(d,g,l,p,x,B,J){this._arcToRotated(d,\ng,l,!!p,!!x,B,J);return this};a.Path.prototype.arcToTangent=function(d,g,l,p,x){this._arcToTangent(d,g,l,p,x);return this};a.Path.prototype.close=function(){this._close();return this};a.Path.prototype.conicTo=function(d,g,l,p,x){this._conicTo(d,g,l,p,x);return this};a.Path.prototype.computeTightBounds=function(d){this._computeTightBounds(ca);var g=ra.toTypedArray();return d?(d.set(g),d):g.slice()};a.Path.prototype.cubicTo=function(d,g,l,p,x,B){this._cubicTo(d,g,l,p,x,B);return this};a.Path.prototype.dash=\nfunction(d,g,l){return this._dash(d,g,l)?this:null};a.Path.prototype.getBounds=function(d){this._getBounds(ca);var g=ra.toTypedArray();return d?(d.set(g),d):g.slice()};a.Path.prototype.lineTo=function(d,g){this._lineTo(d,g);return this};a.Path.prototype.moveTo=function(d,g){this._moveTo(d,g);return this};a.Path.prototype.offset=function(d,g){this._transform(1,0,d,0,1,g,0,0,1);return this};a.Path.prototype.quadTo=function(d,g,l,p){this._quadTo(d,g,l,p);return this};a.Path.prototype.rArcTo=function(d,\ng,l,p,x,B,J){this._rArcTo(d,g,l,p,x,B,J);return this};a.Path.prototype.rConicTo=function(d,g,l,p,x){this._rConicTo(d,g,l,p,x);return this};a.Path.prototype.rCubicTo=function(d,g,l,p,x,B){this._rCubicTo(d,g,l,p,x,B);return this};a.Path.prototype.rLineTo=function(d,g){this._rLineTo(d,g);return this};a.Path.prototype.rMoveTo=function(d,g){this._rMoveTo(d,g);return this};a.Path.prototype.rQuadTo=function(d,g,l,p){this._rQuadTo(d,g,l,p);return this};a.Path.prototype.stroke=function(d){d=d||{};d.width=\nd.width||1;d.miter_limit=d.miter_limit||4;d.cap=d.cap||a.StrokeCap.Butt;d.join=d.join||a.StrokeJoin.Miter;d.precision=d.precision||1;return this._stroke(d)?this:null};a.Path.prototype.transform=function(){if(1===arguments.length){var d=arguments[0];this._transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6]||0,d[7]||0,d[8]||1)}else if(6===arguments.length||9===arguments.length)d=arguments,this._transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6]||0,d[7]||0,d[8]||1);else throw\"transform expected to take 1 or 9 arguments. Got \"+\narguments.length;return this};a.Path.prototype.trim=function(d,g,l){return this._trim(d,g,!!l)?this:null};a.Image.prototype.makeShaderCubic=function(d,g,l,p,x){x=K(x);return this._makeShaderCubic(d,g,l,p,x)};a.Image.prototype.makeShaderOptions=function(d,g,l,p,x){x=K(x);return this._makeShaderOptions(d,g,l,p,x)};a.Image.prototype.readPixels=function(d,g,l,p,x){return e(this,d,g,l,p,x)};a.Canvas.prototype.clear=function(d){d=M(d);this._clear(d)};a.Canvas.prototype.clipRRect=function(d,g,l){d=pa(d);\nthis._clipRRect(d,g,l)};a.Canvas.prototype.clipRect=function(d,g,l){d=aa(d);this._clipRect(d,g,l)};a.Canvas.prototype.concat=function(d){d=P(d);this._concat(d)};a.Canvas.prototype.drawArc=function(d,g,l,p,x){d=aa(d);this._drawArc(d,g,l,p,x)};a.Canvas.prototype.drawAtlas=function(d,g,l,p,x,B,J){if(d&&p&&g&&l&&g.length===l.length){x||(x=a.BlendMode.SrcOver);var L=g.build?g.build():w(g,\"HEAPF32\");if(l.build){var O=l.build();var T=l.length}else O=w(l,\"HEAPF32\"),T=l.length/4;var t=S;B&&(t=B.build?B.build():\nw(m(B),\"HEAPU32\"));if(J&&\"B\"in J&&\"C\"in J)this._drawAtlasCubic(d,O,L,t,T,x,J.B,J.C,p);else{let F=a.FilterMode.Linear,R=a.MipmapMode.None;J&&(F=J.filter,\"mipmap\"in J&&(R=J.mipmap));this._drawAtlasOptions(d,O,L,t,T,x,F,R,p)}L&&!g.build&&y(L,g);O&&!l.build&&y(O,l);t&&!B.build&&y(t,B)}};a.Canvas.prototype.drawColor=function(d,g){d=M(d);void 0!==g?this._drawColor(d,g):this._drawColor(d)};a.Canvas.prototype.drawColorComponents=function(d,g,l,p,x){d=X(d,g,l,p);void 0!==x?this._drawColor(d,x):this._drawColor(d)};\na.Canvas.prototype.drawDRRect=function(d,g,l){d=pa(d,hc);g=pa(g,Tc);this._drawDRRect(d,g,l)};a.Canvas.prototype.drawGlyphs=function(d,g,l,p,x,B){if(!(2*d.length<=g.length))throw\"Not enough positions for the array of gyphs\";const J=w(d,\"HEAPU16\"),L=w(g,\"HEAPF32\");this._drawGlyphs(d.length,J,L,l,p,x,B);y(L,g);y(J,d)};a.Canvas.prototype.drawImageNine=function(d,g,l,p,x){g=w(g,\"HEAP32\",kc);l=aa(l);this._drawImageNine(d,g,l,p,x||null)};a.Canvas.prototype.drawImageRect=function(d,g,l,p,x){aa(g,ca);aa(l,\nUa);this._drawImageRect(d,ca,Ua,p,!!x)};a.Canvas.prototype.drawImageRectCubic=function(d,g,l,p,x,B){aa(g,ca);aa(l,Ua);this._drawImageRectCubic(d,ca,Ua,p,x,B||null)};a.Canvas.prototype.drawImageRectOptions=function(d,g,l,p,x,B){aa(g,ca);aa(l,Ua);this._drawImageRectOptions(d,ca,Ua,p,x,B||null)};a.Canvas.prototype.drawOval=function(d,g){d=aa(d);this._drawOval(d,g)};a.Canvas.prototype.drawPatch=function(d,g,l,p,x){if(24>d.length)throw\"Need 12 cubic points\";if(g&&4>g.length)throw\"Need 4 colors\";if(l&&\n8>l.length)throw\"Need 4 shader coordinates\";const B=w(d,\"HEAPF32\"),J=g?w(m(g),\"HEAPU32\"):S,L=l?w(l,\"HEAPF32\"):S;p||(p=a.BlendMode.Modulate);this._drawPatch(B,J,L,p,x);y(L,l);y(J,g);y(B,d)};a.Canvas.prototype.drawPoints=function(d,g,l){var p=w(g,\"HEAPF32\");this._drawPoints(d,p,g.length/2,l);y(p,g)};a.Canvas.prototype.drawRRect=function(d,g){d=pa(d);this._drawRRect(d,g)};a.Canvas.prototype.drawRect=function(d,g){d=aa(d);this._drawRect(d,g)};a.Canvas.prototype.drawShadow=function(d,g,l,p,x,B,J){var L=\nw(x,\"HEAPF32\"),O=w(B,\"HEAPF32\");g=w(g,\"HEAPF32\",ic);l=w(l,\"HEAPF32\",jc);this._drawShadow(d,g,l,p,L,O,J);y(L,x);y(O,B)};a.getShadowLocalBounds=function(d,g,l,p,x,B,J){d=K(d);l=w(l,\"HEAPF32\",ic);p=w(p,\"HEAPF32\",jc);if(!this._getShadowLocalBounds(d,g,l,p,x,B,ca))return null;g=ra.toTypedArray();return J?(J.set(g),J):g.slice()};a.Canvas.prototype.getLocalToDevice=function(){this._getLocalToDevice(Na);return A(Na)};a.Canvas.prototype.findMarkedCTM=function(d){return this._findMarkedCTM(d,Na)?A(Na):null};\na.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(Ma);for(var d=Array(9),g=0;9>g;g++)d[g]=a.HEAPF32[Ma/4+g];return d};a.Canvas.prototype.readPixels=function(d,g,l,p,x){return e(this,d,g,l,p,x)};a.Canvas.prototype.saveLayer=function(d,g,l,p){g=aa(g);return this._saveLayer(d||null,g,l||null,p||0)};a.Canvas.prototype.writePixels=function(d,g,l,p,x,B,J,L){if(d.byteLength%(g*l))throw\"pixels length must be a multiple of the srcWidth * srcHeight\";var O=d.byteLength/(g*l);B=B||a.AlphaType.Unpremul;\nJ=J||a.ColorType.RGBA_8888;L=L||a.ColorSpace.SRGB;var T=O*g;O=w(d,\"HEAPU8\");g=this._writePixels({width:g,height:l,colorType:J,alphaType:B,colorSpace:L},O,T,p,x);y(O,d);return g};a.ColorFilter.MakeBlend=function(d,g){d=M(d);return a.ColorFilter._MakeBlend(d,g)};a.ColorFilter.MakeMatrix=function(d){if(!d||20!==d.length)throw\"invalid color matrix\";var g=w(d,\"HEAPF32\"),l=a.ColorFilter._makeMatrix(g);y(g,d);return l};a.ContourMeasure.prototype.getPosTan=function(d,g){this._getPosTan(d,ca);d=ra.toTypedArray();\nreturn g?(g.set(d),g):d.slice()};a.ImageFilter.MakeDropShadow=function(d,g,l,p,x,B){x=M(x);return a.ImageFilter._MakeDropShadow(d,g,l,p,x,B)};a.ImageFilter.MakeDropShadowOnly=function(d,g,l,p,x,B){x=M(x);return a.ImageFilter._MakeDropShadowOnly(d,g,l,p,x,B)};a.ImageFilter.MakeMatrixTransform=function(d,g,l){d=K(d);return a.ImageFilter._MakeMatrixTransform(d,g,l)};a.Paint.prototype.getColor=function(){this._getColor(hb);return ea(hb)};a.Paint.prototype.setColor=function(d,g){g=g||null;d=M(d);this._setColor(d,\ng)};a.Paint.prototype.setColorComponents=function(d,g,l,p,x){x=x||null;d=X(d,g,l,p);this._setColor(d,x)};a.Path.prototype.getPoint=function(d,g){this._getPoint(d,ca);d=ra.toTypedArray();return g?(g[0]=d[0],g[1]=d[1],g):d.slice(0,2)};a.PictureRecorder.prototype.beginRecording=function(d){d=aa(d);return this._beginRecording(d)};a.Surface.prototype.makeImageSnapshot=function(d){d=w(d,\"HEAP32\",kc);return this._makeImageSnapshot(d)};a.Surface.prototype.requestAnimationFrame=function(d,g){this.Pe||(this.Pe=\nthis.getCanvas());requestAnimationFrame(function(){void 0!==this.se&&a.setCurrentContext(this.se);d(this.Pe);this.flush(g)}.bind(this))};a.Surface.prototype.drawOnce=function(d,g){this.Pe||(this.Pe=this.getCanvas());requestAnimationFrame(function(){void 0!==this.se&&a.setCurrentContext(this.se);d(this.Pe);this.flush(g);this.dispose()}.bind(this))};a.PathEffect.MakeDash=function(d,g){g||(g=0);if(!d.length||1===d.length%2)throw\"Intervals array must have even length\";var l=w(d,\"HEAPF32\");g=a.PathEffect._MakeDash(l,\nd.length,g);y(l,d);return g};a.Shader.MakeColor=function(d,g){g=g||null;d=M(d);return a.Shader._MakeColor(d,g)};a.Shader.Blend=a.Shader.MakeBlend;a.Shader.Color=a.Shader.MakeColor;a.Shader.Lerp=a.Shader.MakeLerp;a.Shader.MakeLinearGradient=function(d,g,l,p,x,B,J,L){L=L||null;var O=I(l),T=w(p,\"HEAPF32\");J=J||0;B=K(B);var t=ra.toTypedArray();t.set(d);t.set(g,2);d=a.Shader._MakeLinearGradient(ca,O.he,O.Ue,T,O.count,x,J,B,L);y(O.he,l);p&&y(T,p);return d};a.Shader.MakeRadialGradient=function(d,g,l,p,x,\nB,J,L){L=L||null;var O=I(l),T=w(p,\"HEAPF32\");J=J||0;B=K(B);d=a.Shader._MakeRadialGradient(d[0],d[1],g,O.he,O.Ue,T,O.count,x,J,B,L);y(O.he,l);p&&y(T,p);return d};a.Shader.MakeSweepGradient=function(d,g,l,p,x,B,J,L,O,T){T=T||null;var t=I(l),F=w(p,\"HEAPF32\");J=J||0;L=L||0;O=O||360;B=K(B);d=a.Shader._MakeSweepGradient(d,g,t.he,t.Ue,F,t.count,x,L,O,J,B,T);y(t.he,l);p&&y(F,p);return d};a.Shader.MakeTwoPointConicalGradient=function(d,g,l,p,x,B,J,L,O,T){T=T||null;var t=I(x),F=w(B,\"HEAPF32\");O=O||0;L=K(L);\nvar R=ra.toTypedArray();R.set(d);R.set(l,2);d=a.Shader._MakeTwoPointConicalGradient(ca,g,p,t.he,t.Ue,F,t.count,J,O,L,T);y(t.he,x);B&&y(F,B);return d};a.Vertices.prototype.bounds=function(d){this._bounds(ca);var g=ra.toTypedArray();return d?(d.set(g),d):g.slice()};a.Wd&&a.Wd.forEach(function(d){d()})};a.computeTonalColors=function(e){var d=w(e.ambient,\"HEAPF32\"),g=w(e.spot,\"HEAPF32\");this._computeTonalColors(d,g);var l={ambient:ea(d),spot:ea(g)};y(d,e.ambient);y(g,e.spot);return l};a.LTRBRect=function(e,\nd,g,l){return Float32Array.of(e,d,g,l)};a.XYWHRect=function(e,d,g,l){return Float32Array.of(e,d,e+g,d+l)};a.LTRBiRect=function(e,d,g,l){return Int32Array.of(e,d,g,l)};a.XYWHiRect=function(e,d,g,l){return Int32Array.of(e,d,e+g,d+l)};a.RRectXY=function(e,d,g){return Float32Array.of(e[0],e[1],e[2],e[3],d,g,d,g,d,g,d,g)};a.MakeAnimatedImageFromEncoded=function(e){e=new Uint8Array(e);var d=a._malloc(e.byteLength);a.HEAPU8.set(e,d);return(e=a._decodeAnimatedImage(d,e.byteLength))?e:null};a.MakeImageFromEncoded=\nfunction(e){e=new Uint8Array(e);var d=a._malloc(e.byteLength);a.HEAPU8.set(e,d);return(e=a._decodeImage(d,e.byteLength))?e:null};var kb=null;a.MakeImageFromCanvasImageSource=function(e){var d=e.width,g=e.height;kb||(kb=document.createElement(\"canvas\"));kb.width=d;kb.height=g;var l=kb.getContext(\"2d\");l.drawImage(e,0,0);e=l.getImageData(0,0,d,g);return a.MakeImage({width:d,height:g,alphaType:a.AlphaType.Unpremul,colorType:a.ColorType.RGBA_8888,colorSpace:a.ColorSpace.SRGB},e.data,4*d)};a.MakeImage=\nfunction(e,d,g){var l=a._malloc(d.length);a.HEAPU8.set(d,l);return a._MakeImage(e,l,d.length,g)};a.MakeVertices=function(e,d,g,l,p,x){var B=p&&p.length||0,J=0;g&&g.length&&(J|=1);l&&l.length&&(J|=2);void 0===x||x||(J|=4);e=new a._VerticesBuilder(e,d.length/2,B,J);w(d,\"HEAPF32\",e.positions());e.texCoords()&&w(g,\"HEAPF32\",e.texCoords());if(e.colors()){if(l.build)throw\"Color builder not accepted by MakeVertices, use array of ints\";w(m(l),\"HEAPU32\",e.colors())}e.indices()&&w(p,\"HEAPU16\",e.indices());\nreturn e.detach()};a.Matrix={};a.Matrix.identity=function(){return c(3)};a.Matrix.invert=function(e){var d=e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7];return d?[(e[4]*e[8]-e[5]*e[7])/d,(e[2]*e[7]-e[1]*e[8])/d,(e[1]*e[5]-e[2]*e[4])/d,(e[5]*e[6]-e[3]*e[8])/d,(e[0]*e[8]-e[2]*e[6])/d,(e[2]*e[3]-e[0]*e[5])/d,(e[3]*e[7]-e[4]*e[6])/d,(e[1]*e[6]-e[0]*e[7])/d,(e[0]*e[4]-e[1]*e[3])/d]:null};a.Matrix.mapPoints=function(e,d){for(var g=0;g<d.length;g+=2){var l=d[g],\np=d[g+1],x=e[6]*l+e[7]*p+e[8],B=e[3]*l+e[4]*p+e[5];d[g]=(e[0]*l+e[1]*p+e[2])/x;d[g+1]=B/x}return d};a.Matrix.multiply=function(){return Mc(3,arguments)};a.Matrix.rotated=function(e,d,g){d=d||0;g=g||0;var l=Math.sin(e);e=Math.cos(e);return[e,-l,ib(l,g,1-e,d),l,e,ib(-l,d,1-e,g),0,0,1]};a.Matrix.scaled=function(e,d,g,l){g=g||0;l=l||0;var p=b([e,d],c(3),3,0,1);return b([g-e*g,l-d*l],p,3,2,0)};a.Matrix.skewed=function(e,d,g,l){g=g||0;l=l||0;var p=b([e,d],c(3),3,1,-1);return b([-e*g,-d*l],p,3,2,0)};a.Matrix.translated=\nfunction(e,d){return b(arguments,c(3),3,2,0)};a.Vector={};a.Vector.dot=function(e,d){return e.map(function(g,l){return g*d[l]}).reduce(function(g,l){return g+l})};a.Vector.lengthSquared=function(e){return a.Vector.dot(e,e)};a.Vector.length=function(e){return Math.sqrt(a.Vector.lengthSquared(e))};a.Vector.mulScalar=function(e,d){return e.map(function(g){return g*d})};a.Vector.add=function(e,d){return e.map(function(g,l){return g+d[l]})};a.Vector.sub=function(e,d){return e.map(function(g,l){return g-\nd[l]})};a.Vector.dist=function(e,d){return a.Vector.length(a.Vector.sub(e,d))};a.Vector.normalize=function(e){return a.Vector.mulScalar(e,1/a.Vector.length(e))};a.Vector.cross=function(e,d){return[e[1]*d[2]-e[2]*d[1],e[2]*d[0]-e[0]*d[2],e[0]*d[1]-e[1]*d[0]]};a.M44={};a.M44.identity=function(){return c(4)};a.M44.translated=function(e){return b(e,c(4),4,3,0)};a.M44.scaled=function(e){return b(e,c(4),4,0,1)};a.M44.rotated=function(e,d){return a.M44.rotatedUnitSinCos(a.Vector.normalize(e),Math.sin(d),\nMath.cos(d))};a.M44.rotatedUnitSinCos=function(e,d,g){var l=e[0],p=e[1];e=e[2];var x=1-g;return[x*l*l+g,x*l*p-d*e,x*l*e+d*p,0,x*l*p+d*e,x*p*p+g,x*p*e-d*l,0,x*l*e-d*p,x*p*e+d*l,x*e*e+g,0,0,0,0,1]};a.M44.lookat=function(e,d,g){d=a.Vector.normalize(a.Vector.sub(d,e));g=a.Vector.normalize(g);g=a.Vector.normalize(a.Vector.cross(d,g));var l=a.M44.identity();b(g,l,4,0,0);b(a.Vector.cross(g,d),l,4,1,0);b(a.Vector.mulScalar(d,-1),l,4,2,0);b(e,l,4,3,0);e=a.M44.invert(l);return null===e?a.M44.identity():e};\na.M44.perspective=function(e,d,g){var l=1/(d-e);g/=2;g=Math.cos(g)/Math.sin(g);return[g,0,0,0,0,g,0,0,0,0,(d+e)*l,2*d*e*l,0,0,-1,1]};a.M44.rc=function(e,d,g){return e[4*d+g]};a.M44.multiply=function(){return Mc(4,arguments)};a.M44.invert=function(e){var d=e[0],g=e[4],l=e[8],p=e[12],x=e[1],B=e[5],J=e[9],L=e[13],O=e[2],T=e[6],t=e[10],F=e[14],R=e[3],ba=e[7],ka=e[11];e=e[15];var va=d*B-g*x,wa=d*J-l*x,la=d*L-p*x,G=g*J-l*B,k=g*L-p*B,n=l*L-p*J,z=O*ba-T*R,C=O*ka-t*R,D=O*e-F*R,E=T*ka-t*ba,N=T*e-F*ba,Y=t*e-\nF*ka,qa=va*Y-wa*N+la*E+G*D-k*C+n*z,ha=1/qa;if(0===qa||Infinity===ha)return null;va*=ha;wa*=ha;la*=ha;G*=ha;k*=ha;n*=ha;z*=ha;C*=ha;D*=ha;E*=ha;N*=ha;Y*=ha;d=[B*Y-J*N+L*E,J*D-x*Y-L*C,x*N-B*D+L*z,B*C-x*E-J*z,l*N-g*Y-p*E,d*Y-l*D+p*C,g*D-d*N-p*z,d*E-g*C+l*z,ba*n-ka*k+e*G,ka*la-R*n-e*wa,R*k-ba*la+e*va,ba*wa-R*G-ka*va,t*k-T*n-F*G,O*n-t*la+F*wa,T*la-O*k-F*va,O*G-T*wa+t*va];return d.every(function(Ha){return!isNaN(Ha)&&Infinity!==Ha&&-Infinity!==Ha})?d:null};a.M44.transpose=function(e){return[e[0],e[4],e[8],\ne[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]};a.M44.mustInvert=function(e){e=a.M44.invert(e);if(null===e)throw\"Matrix not invertible\";return e};a.M44.setupCamera=function(e,d,g){var l=a.M44.lookat(g.eye,g.coa,g.up);g=a.M44.perspective(g.near,g.far,g.angle);d=[(e[2]-e[0])/2,(e[3]-e[1])/2,d];e=a.M44.multiply(a.M44.translated([(e[0]+e[2])/2,(e[1]+e[3])/2,0]),a.M44.scaled(d));return a.M44.multiply(e,g,l,a.M44.mustInvert(e))};a.ColorMatrix={};a.ColorMatrix.identity=function(){var e=\nnew Float32Array(20);e[0]=1;e[6]=1;e[12]=1;e[18]=1;return e};a.ColorMatrix.scaled=function(e,d,g,l){var p=new Float32Array(20);p[0]=e;p[6]=d;p[12]=g;p[18]=l;return p};var Id=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];a.ColorMatrix.rotated=function(e,d,g){var l=a.ColorMatrix.identity();e=Id[e];l[e[0]]=g;l[e[1]]=d;l[e[2]]=-d;l[e[3]]=g;return l};a.ColorMatrix.postTranslate=function(e,d,g,l,p){e[4]+=d;e[9]+=g;e[14]+=l;e[19]+=p;return e};a.ColorMatrix.concat=function(e,d){for(var g=new Float32Array(20),l=0,p=\n0;20>p;p+=5){for(var x=0;4>x;x++)g[l++]=e[p]*d[x]+e[p+1]*d[x+5]+e[p+2]*d[x+10]+e[p+3]*d[x+15];g[l++]=e[p]*d[4]+e[p+1]*d[9]+e[p+2]*d[14]+e[p+3]*d[19]+e[p+4]}return g};(function(e){e.Wd=e.Wd||[];e.Wd.push(function(){function d(t){if(!t||!t.length)return[];for(var F=[],R=0;R<t.length;R+=5){var ba=e.LTRBRect(t[R],t[R+1],t[R+2],t[R+3]);ba.direction=0===t[R+4]?e.TextDirection.RTL:e.TextDirection.LTR;F.push(ba)}e._free(t.byteOffset);return F}function g(t){t=t||{};void 0===t.weight&&(t.weight=e.FontWeight.Normal);\nt.width=t.width||e.FontWidth.Normal;t.slant=t.slant||e.FontSlant.Upright;return t}function l(t){if(!t||!t.length)return S;for(var F=[],R=0;R<t.length;R++){var ba=p(t[R]);F.push(ba)}return w(F,\"HEAPU32\")}function p(t){if(J[t])return J[t];var F=na(t)+1,R=e._malloc(F);oa(t,H,R,F);return J[t]=R}function x(t){t._colorPtr=M(t.color);t._foregroundColorPtr=S;t._backgroundColorPtr=S;t._decorationColorPtr=S;t.foregroundColor&&(t._foregroundColorPtr=M(t.foregroundColor,L));t.backgroundColor&&(t._backgroundColorPtr=\nM(t.backgroundColor,O));t.decorationColor&&(t._decorationColorPtr=M(t.decorationColor,T));Array.isArray(t.fontFamilies)&&t.fontFamilies.length?(t._fontFamiliesPtr=l(t.fontFamilies),t._fontFamiliesLen=t.fontFamilies.length):(t._fontFamiliesPtr=S,t._fontFamiliesLen=0)}function B(t){e._free(t._fontFamiliesPtr)}e.Paragraph.prototype.getRectsForRange=function(t,F,R,ba){t=this._getRectsForRange(t,F,R,ba);return d(t)};e.Paragraph.prototype.getRectsForPlaceholders=function(){var t=this._getRectsForPlaceholders();\nreturn d(t)};e.TypefaceFontProvider.prototype.registerFont=function(t,F){t=e.FontMgr.RefDefault().MakeTypefaceFromData(t);if(!t)return null;F=p(F);this._registerFont(t,F)};e.ParagraphStyle=function(t){t.disableHinting=t.disableHinting||!1;if(t.ellipsis){var F=t.ellipsis;t._ellipsisPtr=p(F);t._ellipsisLen=na(F)+1}else t._ellipsisPtr=S,t._ellipsisLen=0;t.heightMultiplier=t.heightMultiplier||0;t.maxLines=t.maxLines||0;F=(F=t.strutStyle)||{};F.strutEnabled=F.strutEnabled||!1;F.strutEnabled&&Array.isArray(F.fontFamilies)&&\nF.fontFamilies.length?(F._fontFamiliesPtr=l(F.fontFamilies),F._fontFamiliesLen=F.fontFamilies.length):(F._fontFamiliesPtr=S,F._fontFamiliesLen=0);F.fontStyle=g(F.fontStyle);F.fontSize=F.fontSize||0;F.heightMultiplier=F.heightMultiplier||0;F.halfLeading=F.halfLeading||!1;F.leading=F.leading||0;F.forceStrutHeight=F.forceStrutHeight||!1;t.strutStyle=F;t.textAlign=t.textAlign||e.TextAlign.Start;t.textDirection=t.textDirection||e.TextDirection.LTR;t.textHeightBehavior=t.textHeightBehavior||e.TextHeightBehavior.All;\nt.textStyle=e.TextStyle(t.textStyle);return t};e.TextStyle=function(t){t.color||(t.color=e.BLACK);t.decoration=t.decoration||0;t.decorationThickness=t.decorationThickness||0;t.decorationStyle=t.decorationStyle||e.DecorationStyle.Solid;t.textBaseline=t.textBaseline||e.TextBaseline.Alphabetic;t.fontSize=t.fontSize||0;t.letterSpacing=t.letterSpacing||0;t.wordSpacing=t.wordSpacing||0;t.heightMultiplier=t.heightMultiplier||0;t.halfLeading=t.halfLeading||!1;if(t.locale){var F=t.locale;t._localePtr=p(F);\nt._localeLen=na(F)+1}else t._localePtr=S,t._localeLen=0;t.fontStyle=g(t.fontStyle);if(t.shadows){F=t.shadows;var R=F.map(function(G){return G.color||e.BLACK}),ba=F.map(function(G){return G.blurRadius||0});t._shadowLen=F.length;for(var ka=e._malloc(2*F.length,\"HEAPF32\"),va=ka/4,wa=0;wa<F.length;wa++){var la=F[wa].offset||[0,0];e.HEAPF32[va]=la[0];e.HEAPF32[va+1]=la[1];va+=2}t._shadowColorsPtr=I(R).he;t._shadowOffsetsPtr=ka;t._shadowBlurRadiiPtr=w(ba,\"HEAPF32\")}else t._shadowLen=0,t._shadowColorsPtr=\nS,t._shadowOffsetsPtr=S,t._shadowBlurRadiiPtr=S;t.fontFeatures?(F=t.fontFeatures,R=F.map(function(G){return G.name}),ba=F.map(function(G){return G.value}),t._fontFeatureLen=F.length,t._fontFeatureNamesPtr=l(R),t._fontFeatureValuesPtr=w(ba,\"HEAPU32\")):(t._fontFeatureLen=0,t._fontFeatureNamesPtr=S,t._fontFeatureValuesPtr=S);return t};var J={},L=e._malloc(16),O=e._malloc(16),T=e._malloc(16);e.ParagraphBuilder.Make=function(t,F){x(t.textStyle);F=e.ParagraphBuilder._Make(t,F);B(t.textStyle);return F};\ne.ParagraphBuilder.MakeFromFontProvider=function(t,F){x(t.textStyle);F=e.ParagraphBuilder._MakeFromFontProvider(t,F);B(t.textStyle);return F};e.ParagraphBuilder.ShapeText=function(t,F,R){let ba=0;for(const ka of F)ba+=ka.length;if(ba!==t.length)throw\"Accumulated block lengths must equal text.length\";return e.ParagraphBuilder._ShapeText(t,F,R)};e.ParagraphBuilder.prototype.pushStyle=function(t){x(t);this._pushStyle(t);B(t)};e.ParagraphBuilder.prototype.pushPaintStyle=function(t,F,R){x(t);this._pushPaintStyle(t,\nF,R);B(t)};e.ParagraphBuilder.prototype.addPlaceholder=function(t,F,R,ba,ka){R=R||e.PlaceholderAlignment.Baseline;ba=ba||e.TextBaseline.Alphabetic;this._addPlaceholder(t||0,F||0,R,ba,ka||0)}})})(r);a.MakeManagedAnimation=function(e,d,g,l,p){if(!a._MakeManagedAnimation)throw\"Not compiled with MakeManagedAnimation\";g||(g=\"\");if(!d)return a._MakeManagedAnimation(e,0,S,S,S,g,l,p);for(var x=[],B=[],J=[],L=Object.keys(d||{}),O=0;O<L.length;O++){var T=L[O],t=new Uint8Array(d[T]),F=a._malloc(t.byteLength);\na.HEAPU8.set(t,F);B.push(F);J.push(t.byteLength);t=na(T)+1;F=a._malloc(t);oa(T,H,F,t);x.push(F)}d=w(x,\"HEAPU32\");B=w(B,\"HEAPU32\");J=w(J,\"HEAPU32\");e=a._MakeManagedAnimation(e,L.length,d,B,J,g,l,p);a._free(d);a._free(B);a._free(J);return e};(function(e){e.Wd=e.Wd||[];e.Wd.push(function(){e.Animation.prototype.render=function(d,g){aa(g,ca);this._render(d,ca)};e.Animation.prototype.size=function(d){this._size(ca);var g=ra.toTypedArray();return d?(d[0]=g[0],d[1]=g[1],d):g.slice(0,2)};e.ManagedAnimation&&\n(e.ManagedAnimation.prototype.render=function(d,g){aa(g,ca);this._render(d,ca)},e.ManagedAnimation.prototype.seek=function(d,g){this._seek(d,ca);d=ra.toTypedArray();return g?(g.set(d),g):d.slice()},e.ManagedAnimation.prototype.seekFrame=function(d,g){this._seekFrame(d,ca);d=ra.toTypedArray();return g?(g.set(d),g):d.slice()},e.ManagedAnimation.prototype.setColor=function(d,g){g=M(g);return this._setColor(d,g)},e.ManagedAnimation.prototype.size=function(d){this._size(ca);var g=ra.toTypedArray();return d?\n(d[0]=g[0],d[1]=g[1],d):g.slice(0,2)})})})(r);a.MakeParticles=function(e,d){if(!a._MakeParticles)throw\"Not compiled with MakeParticles\";if(!d)return a._MakeParticles(e,0,S,S,S);for(var g=[],l=[],p=[],x=Object.keys(d||{}),B=0;B<x.length;B++){var J=x[B],L=new Uint8Array(d[J]),O=a._malloc(L.byteLength);a.HEAPU8.set(L,O);l.push(O);p.push(L.byteLength);L=na(J)+1;O=a._malloc(L);oa(J,H,O,L);g.push(O)}d=w(g,\"HEAPU32\");l=w(l,\"HEAPU32\");p=w(p,\"HEAPU32\");e=a._MakeParticles(e,x.length,d,l,p);a._free(d);a._free(l);\na._free(p);return e};a.Wd=a.Wd||[];a.Wd.push(function(){a.ParticleEffect.prototype.uniforms=function(){var e=this._uniformPtr(),d=this.getUniformFloatCount();return!e||0>=d?new Float32Array:new Float32Array(a.HEAPU8.buffer,e,d)};a.ParticleEffect.prototype.setPosition=function(e){this._setPosition(e[0],e[1])}});a.Wd=a.Wd||[];a.Wd.push(function(){a.Path.prototype.op=function(e,d){return this._op(e,d)?this:null};a.Path.prototype.simplify=function(){return this._simplify()?this:null}});a.Wd=a.Wd||[];\na.Wd.push(function(){a.Canvas.prototype.drawText=function(e,d,g,l,p){var x=na(e),B=a._malloc(x+1);oa(e,H,B,x+1);this._drawSimpleText(B,x,d,g,p,l);a._free(B)};a.Font.prototype.getGlyphBounds=function(e,d,g){var l=w(e,\"HEAPU16\"),p=a._malloc(16*e.length);this._getGlyphWidthBounds(l,e.length,S,p,d||null);d=new Float32Array(a.HEAPU8.buffer,p,4*e.length);y(l,e);if(g)return g.set(d),a._free(p),g;e=Float32Array.from(d);a._free(p);return e};a.Font.prototype.getGlyphIDs=function(e,d,g){d||(d=e.length);var l=\nna(e)+1,p=a._malloc(l);oa(e,H,p,l);e=a._malloc(2*d);d=this._getGlyphIDs(p,l-1,d,e);a._free(p);if(0>d)return a._free(e),null;p=new Uint16Array(a.HEAPU8.buffer,e,d);if(g)return g.set(p),a._free(e),g;g=Uint16Array.from(p);a._free(e);return g};a.Font.prototype.getGlyphWidths=function(e,d,g){var l=w(e,\"HEAPU16\"),p=a._malloc(4*e.length);this._getGlyphWidthBounds(l,e.length,p,S,d||null);d=new Float32Array(a.HEAPU8.buffer,p,e.length);y(l,e);if(g)return g.set(d),a._free(p),g;e=Float32Array.from(d);a._free(p);\nreturn e};a.FontMgr.FromData=function(){if(!arguments.length)return null;var e=arguments;1===e.length&&Array.isArray(e[0])&&(e=arguments[0]);if(!e.length)return null;for(var d=[],g=[],l=0;l<e.length;l++){var p=new Uint8Array(e[l]),x=w(p,\"HEAPU8\");d.push(x);g.push(p.byteLength)}d=w(d,\"HEAPU32\");g=w(g,\"HEAPU32\");e=a.FontMgr._fromData(d,g,e.length);a._free(d);a._free(g);return e};a.FontMgr.prototype.MakeTypefaceFromData=function(e){e=new Uint8Array(e);var d=w(e,\"HEAPU8\");return(e=this._makeTypefaceFromData(d,\ne.byteLength))?e:null};a.TextBlob.MakeOnPath=function(e,d,g,l){if(e&&e.length&&d&&d.countPoints()){if(1===d.countPoints())return this.MakeFromText(e,g);l||(l=0);var p=g.getGlyphIDs(e),x=g.getGlyphWidths(p);p=new a.RSXFormBuilder;d=new a.ContourMeasureIter(d,!1,1);for(var B=d.next(),J=new Float32Array(4),L=0;L<e.length&&B;L++){var O=x[L];l+=O/2;if(l>B.length()){B.delete();B=d.next();if(!B){e=e.substring(0,L);break}l=O/2}B.getPosTan(l,J);var T=J[2],t=J[3];p.push(T,t,J[0]-O/2*T,J[1]-O/2*t);l+=O/2}e=\nthis.MakeFromRSXform(e,p,g);p.delete();B&&B.delete();d.delete();return e}};a.TextBlob.MakeFromRSXform=function(e,d,g){var l=na(e)+1,p=a._malloc(l);oa(e,H,p,l);e=d.build?d.build():w(d,\"HEAPF32\");g=a.TextBlob._MakeFromRSXform(p,l-1,e,g);a._free(p);return g?g:null};a.TextBlob.MakeFromRSXformGlyphs=function(e,d,g){var l=w(e,\"HEAPU16\");d=d.build?d.build():w(d,\"HEAPF32\");g=a.TextBlob._MakeFromRSXformGlyphs(l,2*e.length,d,g);y(l,e);return g?g:null};a.TextBlob.MakeFromGlyphs=function(e,d){var g=w(e,\"HEAPU16\");\nd=a.TextBlob._MakeFromGlyphs(g,2*e.length,d);y(g,e);return d?d:null};a.TextBlob.MakeFromText=function(e,d){var g=na(e)+1,l=a._malloc(g);oa(e,H,l,g);e=a.TextBlob._MakeFromText(l,g-1,d);a._free(l);return e?e:null};a.MallocGlyphIDs=function(e){return a.Malloc(Uint16Array,e)}});a.Wd=a.Wd||[];a.Wd.push(function(){a.MakePicture=function(e){e=new Uint8Array(e);var d=a._malloc(e.byteLength);a.HEAPU8.set(e,d);return(e=a._MakePicture(d,e.byteLength))?e:null}});a.Wd=a.Wd||[];a.Wd.push(function(){a.RuntimeEffect.Make=\nfunction(e,d){return a.RuntimeEffect._Make(e,{onError:d||function(g){console.log(\"RuntimeEffect error\",g)}})};a.RuntimeEffect.prototype.makeShader=function(e,d,g){var l=w(e,\"HEAPF32\");g=K(g);return this._makeShader(l,4*e.length,!!d,g)};a.RuntimeEffect.prototype.makeShaderWithChildren=function(e,d,g,l){var p=w(e,\"HEAPF32\");l=K(l);for(var x=[],B=0;B<g.length;B++)x.push(g[B].Rd.Vd);g=w(x,\"HEAPU32\");return this._makeShaderWithChildren(p,4*e.length,!!d,g,x.length,l)}});(function(){function e(G){for(var k=\n0;k<G.length;k++)if(void 0!==G[k]&&!Number.isFinite(G[k]))return!1;return!0}function d(G){var k=a.getColorComponents(G);G=k[0];var n=k[1],z=k[2];k=k[3];if(1===k)return G=G.toString(16).toLowerCase(),n=n.toString(16).toLowerCase(),z=z.toString(16).toLowerCase(),G=1===G.length?\"0\"+G:G,n=1===n.length?\"0\"+n:n,z=1===z.length?\"0\"+z:z,\"#\"+G+n+z;k=0===k||1===k?k:k.toFixed(8);return\"rgba(\"+G+\", \"+n+\", \"+z+\", \"+k+\")\"}function g(G){return a.parseColorString(G,va)}function l(G){G=wa.exec(G);if(!G)return null;\nvar k=parseFloat(G[4]),n=16;switch(G[5]){case \"em\":case \"rem\":n=16*k;break;case \"pt\":n=4*k/3;break;case \"px\":n=k;break;case \"pc\":n=16*k;break;case \"in\":n=96*k;break;case \"cm\":n=96*k/2.54;break;case \"mm\":n=96/25.4*k;break;case \"q\":n=96/25.4/4*k;break;case \"%\":n=16/75*k}return{style:G[1],variant:G[2],weight:G[3],sizePx:n,family:G[6].trim()}}function p(G){this.Sd=G;this.Ud=new a.Paint;this.Ud.setAntiAlias(!0);this.Ud.setStrokeMiter(10);this.Ud.setStrokeCap(a.StrokeCap.Butt);this.Ud.setStrokeJoin(a.StrokeJoin.Miter);\nthis.Ze=\"10px monospace\";this.ye=new a.Font(null,10);this.ye.setSubpixel(!0);this.ge=this.me=a.BLACK;this.Be=0;this.Re=a.TRANSPARENT;this.De=this.Ce=0;this.Se=this.oe=1;this.Qe=0;this.Ae=[];this.Td=a.BlendMode.SrcOver;this.Ud.setStrokeWidth(this.Se);this.Ud.setBlendMode(this.Td);this.Yd=new a.Path;this.Zd=a.Matrix.identity();this.wf=[];this.He=[];this.qe=function(){this.Yd.delete();this.Ud.delete();this.ye.delete();this.He.forEach(function(k){k.qe()})};Object.defineProperty(this,\"currentTransform\",\n{enumerable:!0,get:function(){return{a:this.Zd[0],c:this.Zd[1],e:this.Zd[2],b:this.Zd[3],d:this.Zd[4],f:this.Zd[5]}},set:function(k){k.a&&this.setTransform(k.a,k.b,k.c,k.d,k.e,k.f)}});Object.defineProperty(this,\"fillStyle\",{enumerable:!0,get:function(){return f(this.ge)?d(this.ge):this.ge},set:function(k){\"string\"===typeof k?this.ge=g(k):k.ze&&(this.ge=k)}});Object.defineProperty(this,\"font\",{enumerable:!0,get:function(){return this.Ze},set:function(k){var n=l(k),z=n.family;n.typeface=la[z]?la[z][(n.style||\n\"normal\")+\"|\"+(n.variant||\"normal\")+\"|\"+(n.weight||\"normal\")]||la[z][\"*\"]:null;n&&(this.ye.setSize(n.sizePx),this.ye.setTypeface(n.typeface),this.Ze=k)}});Object.defineProperty(this,\"globalAlpha\",{enumerable:!0,get:function(){return this.oe},set:function(k){!isFinite(k)||0>k||1<k||(this.oe=k)}});Object.defineProperty(this,\"globalCompositeOperation\",{enumerable:!0,get:function(){switch(this.Td){case a.BlendMode.SrcOver:return\"source-over\";case a.BlendMode.DstOver:return\"destination-over\";case a.BlendMode.Src:return\"copy\";\ncase a.BlendMode.Dst:return\"destination\";case a.BlendMode.Clear:return\"clear\";case a.BlendMode.SrcIn:return\"source-in\";case a.BlendMode.DstIn:return\"destination-in\";case a.BlendMode.SrcOut:return\"source-out\";case a.BlendMode.DstOut:return\"destination-out\";case a.BlendMode.SrcATop:return\"source-atop\";case a.BlendMode.DstATop:return\"destination-atop\";case a.BlendMode.Xor:return\"xor\";case a.BlendMode.Plus:return\"lighter\";case a.BlendMode.Multiply:return\"multiply\";case a.BlendMode.Screen:return\"screen\";\ncase a.BlendMode.Overlay:return\"overlay\";case a.BlendMode.Darken:return\"darken\";case a.BlendMode.Lighten:return\"lighten\";case a.BlendMode.ColorDodge:return\"color-dodge\";case a.BlendMode.ColorBurn:return\"color-burn\";case a.BlendMode.HardLight:return\"hard-light\";case a.BlendMode.SoftLight:return\"soft-light\";case a.BlendMode.Difference:return\"difference\";case a.BlendMode.Exclusion:return\"exclusion\";case a.BlendMode.Hue:return\"hue\";case a.BlendMode.Saturation:return\"saturation\";case a.BlendMode.Color:return\"color\";\ncase a.BlendMode.Luminosity:return\"luminosity\"}},set:function(k){switch(k){case \"source-over\":this.Td=a.BlendMode.SrcOver;break;case \"destination-over\":this.Td=a.BlendMode.DstOver;break;case \"copy\":this.Td=a.BlendMode.Src;break;case \"destination\":this.Td=a.BlendMode.Dst;break;case \"clear\":this.Td=a.BlendMode.Clear;break;case \"source-in\":this.Td=a.BlendMode.SrcIn;break;case \"destination-in\":this.Td=a.BlendMode.DstIn;break;case \"source-out\":this.Td=a.BlendMode.SrcOut;break;case \"destination-out\":this.Td=\na.BlendMode.DstOut;break;case \"source-atop\":this.Td=a.BlendMode.SrcATop;break;case \"destination-atop\":this.Td=a.BlendMode.DstATop;break;case \"xor\":this.Td=a.BlendMode.Xor;break;case \"lighter\":this.Td=a.BlendMode.Plus;break;case \"plus-lighter\":this.Td=a.BlendMode.Plus;break;case \"plus-darker\":throw\"plus-darker is not supported\";case \"multiply\":this.Td=a.BlendMode.Multiply;break;case \"screen\":this.Td=a.BlendMode.Screen;break;case \"overlay\":this.Td=a.BlendMode.Overlay;break;case \"darken\":this.Td=a.BlendMode.Darken;\nbreak;case \"lighten\":this.Td=a.BlendMode.Lighten;break;case \"color-dodge\":this.Td=a.BlendMode.ColorDodge;break;case \"color-burn\":this.Td=a.BlendMode.ColorBurn;break;case \"hard-light\":this.Td=a.BlendMode.HardLight;break;case \"soft-light\":this.Td=a.BlendMode.SoftLight;break;case \"difference\":this.Td=a.BlendMode.Difference;break;case \"exclusion\":this.Td=a.BlendMode.Exclusion;break;case \"hue\":this.Td=a.BlendMode.Hue;break;case \"saturation\":this.Td=a.BlendMode.Saturation;break;case \"color\":this.Td=a.BlendMode.Color;\nbreak;case \"luminosity\":this.Td=a.BlendMode.Luminosity;break;default:return}this.Ud.setBlendMode(this.Td)}});Object.defineProperty(this,\"imageSmoothingEnabled\",{enumerable:!0,get:function(){return!0},set:function(){}});Object.defineProperty(this,\"imageSmoothingQuality\",{enumerable:!0,get:function(){return\"high\"},set:function(){}});Object.defineProperty(this,\"lineCap\",{enumerable:!0,get:function(){switch(this.Ud.getStrokeCap()){case a.StrokeCap.Butt:return\"butt\";case a.StrokeCap.Round:return\"round\";\ncase a.StrokeCap.Square:return\"square\"}},set:function(k){switch(k){case \"butt\":this.Ud.setStrokeCap(a.StrokeCap.Butt);break;case \"round\":this.Ud.setStrokeCap(a.StrokeCap.Round);break;case \"square\":this.Ud.setStrokeCap(a.StrokeCap.Square)}}});Object.defineProperty(this,\"lineDashOffset\",{enumerable:!0,get:function(){return this.Qe},set:function(k){isFinite(k)&&(this.Qe=k)}});Object.defineProperty(this,\"lineJoin\",{enumerable:!0,get:function(){switch(this.Ud.getStrokeJoin()){case a.StrokeJoin.Miter:return\"miter\";\ncase a.StrokeJoin.Round:return\"round\";case a.StrokeJoin.Bevel:return\"bevel\"}},set:function(k){switch(k){case \"miter\":this.Ud.setStrokeJoin(a.StrokeJoin.Miter);break;case \"round\":this.Ud.setStrokeJoin(a.StrokeJoin.Round);break;case \"bevel\":this.Ud.setStrokeJoin(a.StrokeJoin.Bevel)}}});Object.defineProperty(this,\"lineWidth\",{enumerable:!0,get:function(){return this.Ud.getStrokeWidth()},set:function(k){0>=k||!k||(this.Se=k,this.Ud.setStrokeWidth(k))}});Object.defineProperty(this,\"miterLimit\",{enumerable:!0,\nget:function(){return this.Ud.getStrokeMiter()},set:function(k){0>=k||!k||this.Ud.setStrokeMiter(k)}});Object.defineProperty(this,\"shadowBlur\",{enumerable:!0,get:function(){return this.Be},set:function(k){0>k||!isFinite(k)||(this.Be=k)}});Object.defineProperty(this,\"shadowColor\",{enumerable:!0,get:function(){return d(this.Re)},set:function(k){this.Re=g(k)}});Object.defineProperty(this,\"shadowOffsetX\",{enumerable:!0,get:function(){return this.Ce},set:function(k){isFinite(k)&&(this.Ce=k)}});Object.defineProperty(this,\n\"shadowOffsetY\",{enumerable:!0,get:function(){return this.De},set:function(k){isFinite(k)&&(this.De=k)}});Object.defineProperty(this,\"strokeStyle\",{enumerable:!0,get:function(){return d(this.me)},set:function(k){\"string\"===typeof k?this.me=g(k):k.ze&&(this.me=k)}});this.arc=function(k,n,z,C,D,E){t(this.Yd,k,n,z,z,0,C,D,E)};this.arcTo=function(k,n,z,C,D){L(this.Yd,k,n,z,C,D)};this.beginPath=function(){this.Yd.delete();this.Yd=new a.Path};this.bezierCurveTo=function(k,n,z,C,D,E){var N=this.Yd;e([k,\nn,z,C,D,E])&&(N.isEmpty()&&N.moveTo(k,n),N.cubicTo(k,n,z,C,D,E))};this.clearRect=function(k,n,z,C){this.Ud.setStyle(a.PaintStyle.Fill);this.Ud.setBlendMode(a.BlendMode.Clear);this.Sd.drawRect(a.XYWHRect(k,n,z,C),this.Ud);this.Ud.setBlendMode(this.Td)};this.clip=function(k,n){\"string\"===typeof k?(n=k,k=this.Yd):k&&k.kf&&(k=k.ae);k||(k=this.Yd);k=k.copy();n&&\"evenodd\"===n.toLowerCase()?k.setFillType(a.FillType.EvenOdd):k.setFillType(a.FillType.Winding);this.Sd.clipPath(k,a.ClipOp.Intersect,!0);k.delete()};\nthis.closePath=function(){O(this.Yd)};this.createImageData=function(){if(1===arguments.length){var k=arguments[0];return new B(new Uint8ClampedArray(4*k.width*k.height),k.width,k.height)}if(2===arguments.length){k=arguments[0];var n=arguments[1];return new B(new Uint8ClampedArray(4*k*n),k,n)}throw\"createImageData expects 1 or 2 arguments, got \"+arguments.length;};this.createLinearGradient=function(k,n,z,C){if(e(arguments)){var D=new J(k,n,z,C);this.He.push(D);return D}};this.createPattern=function(k,\nn){k=new ba(k,n);this.He.push(k);return k};this.createRadialGradient=function(k,n,z,C,D,E){if(e(arguments)){var N=new ka(k,n,z,C,D,E);this.He.push(N);return N}};this.drawImage=function(k){var n=this.Ye();if(3===arguments.length||5===arguments.length)var z=a.XYWHRect(arguments[1],arguments[2],arguments[3]||k.width(),arguments[4]||k.height()),C=a.XYWHRect(0,0,k.width(),k.height());else if(9===arguments.length)z=a.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),C=a.XYWHRect(arguments[1],\narguments[2],arguments[3],arguments[4]);else throw\"invalid number of args for drawImage, need 3, 5, or 9; got \"+arguments.length;this.Sd.drawImageRect(k,C,z,n,!1);n.dispose()};this.ellipse=function(k,n,z,C,D,E,N,Y){t(this.Yd,k,n,z,C,D,E,N,Y)};this.Ye=function(){var k=this.Ud.copy();k.setStyle(a.PaintStyle.Fill);if(f(this.ge)){var n=a.multiplyByAlpha(this.ge,this.oe);k.setColor(n)}else n=this.ge.ze(this.Zd),k.setColor(a.Color(0,0,0,this.oe)),k.setShader(n);k.dispose=function(){this.delete()};return k};\nthis.fill=function(k,n){\"string\"===typeof k?(n=k,k=this.Yd):k&&k.kf&&(k=k.ae);if(\"evenodd\"===n)this.Yd.setFillType(a.FillType.EvenOdd);else{if(\"nonzero\"!==n&&n)throw\"invalid fill rule\";this.Yd.setFillType(a.FillType.Winding)}k||(k=this.Yd);n=this.Ye();var z=this.Ee(n);z&&(this.Sd.save(),this.we(),this.Sd.drawPath(k,z),this.Sd.restore(),z.dispose());this.Sd.drawPath(k,n);n.dispose()};this.fillRect=function(k,n,z,C){var D=this.Ye(),E=this.Ee(D);E&&(this.Sd.save(),this.we(),this.Sd.drawRect(a.XYWHRect(k,\nn,z,C),E),this.Sd.restore(),E.dispose());this.Sd.drawRect(a.XYWHRect(k,n,z,C),D);D.dispose()};this.fillText=function(k,n,z){var C=this.Ye();k=a.TextBlob.MakeFromText(k,this.ye);var D=this.Ee(C);D&&(this.Sd.save(),this.we(),this.Sd.drawTextBlob(k,n,z,D),this.Sd.restore(),D.dispose());this.Sd.drawTextBlob(k,n,z,C);k.delete();C.dispose()};this.getImageData=function(k,n,z,C){return(k=this.Sd.readPixels(k,n,{width:z,height:C,colorType:a.ColorType.RGBA_8888,alphaType:a.AlphaType.Unpremul,colorSpace:a.ColorSpace.SRGB}))?\nnew B(new Uint8ClampedArray(k.buffer),z,C):null};this.getLineDash=function(){return this.Ae.slice()};this.xf=function(k){var n=a.Matrix.invert(this.Zd);a.Matrix.mapPoints(n,k);return k};this.isPointInPath=function(k,n,z){var C=arguments;if(3===C.length)var D=this.Yd;else if(4===C.length)D=C[0],k=C[1],n=C[2],z=C[3];else throw\"invalid arg count, need 3 or 4, got \"+C.length;if(!isFinite(k)||!isFinite(n))return!1;z=z||\"nonzero\";if(\"nonzero\"!==z&&\"evenodd\"!==z)return!1;C=this.xf([k,n]);k=C[0];n=C[1];D.setFillType(\"nonzero\"===\nz?a.FillType.Winding:a.FillType.EvenOdd);return D.contains(k,n)};this.isPointInStroke=function(k,n){var z=arguments;if(2===z.length)var C=this.Yd;else if(3===z.length)C=z[0],k=z[1],n=z[2];else throw\"invalid arg count, need 2 or 3, got \"+z.length;if(!isFinite(k)||!isFinite(n))return!1;z=this.xf([k,n]);k=z[0];n=z[1];C=C.copy();C.setFillType(a.FillType.Winding);C.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Ud.getStrokeCap(),join:this.Ud.getStrokeJoin(),precision:.3});z=C.contains(k,\nn);C.delete();return z};this.lineTo=function(k,n){F(this.Yd,k,n)};this.measureText=function(){throw Error(\"Clients wishing to properly measure text should use the Paragraph API\");};this.moveTo=function(k,n){var z=this.Yd;e([k,n])&&z.moveTo(k,n)};this.putImageData=function(k,n,z,C,D,E,N){if(e([n,z,C,D,E,N]))if(void 0===C)this.Sd.writePixels(k.data,k.width,k.height,n,z);else if(C=C||0,D=D||0,E=E||k.width,N=N||k.height,0>E&&(C+=E,E=Math.abs(E)),0>N&&(D+=N,N=Math.abs(N)),0>C&&(E+=C,C=0),0>D&&(N+=D,D=\n0),!(0>=E||0>=N)){k=a.MakeImage({width:k.width,height:k.height,alphaType:a.AlphaType.Unpremul,colorType:a.ColorType.RGBA_8888,colorSpace:a.ColorSpace.SRGB},k.data,4*k.width);var Y=a.XYWHRect(C,D,E,N);n=a.XYWHRect(n+C,z+D,E,N);z=a.Matrix.invert(this.Zd);this.Sd.save();this.Sd.concat(z);this.Sd.drawImageRect(k,Y,n,null,!1);this.Sd.restore();k.delete()}};this.quadraticCurveTo=function(k,n,z,C){var D=this.Yd;e([k,n,z,C])&&(D.isEmpty()&&D.moveTo(k,n),D.quadTo(k,n,z,C))};this.rect=function(k,n,z,C){var D=\nthis.Yd;k=a.XYWHRect(k,n,z,C);e(k)&&D.addRect(k)};this.resetTransform=function(){this.Yd.transform(this.Zd);var k=a.Matrix.invert(this.Zd);this.Sd.concat(k);this.Zd=this.Sd.getTotalMatrix()};this.restore=function(){var k=this.wf.pop();if(k){var n=a.Matrix.multiply(this.Zd,a.Matrix.invert(k.Nf));this.Yd.transform(n);this.Ud.delete();this.Ud=k.kg;this.Ae=k.gg;this.Se=k.Cg;this.me=k.Bg;this.ge=k.fs;this.Ce=k.zg;this.De=k.Ag;this.Be=k.og;this.Re=k.yg;this.oe=k.Uf;this.Td=k.Vf;this.Qe=k.hg;this.Ze=k.Tf;\nthis.Sd.restore();this.Zd=this.Sd.getTotalMatrix()}};this.rotate=function(k){if(isFinite(k)){var n=a.Matrix.rotated(-k);this.Yd.transform(n);this.Sd.rotate(k/Math.PI*180,0,0);this.Zd=this.Sd.getTotalMatrix()}};this.save=function(){if(this.ge.xe){var k=this.ge.xe();this.He.push(k)}else k=this.ge;if(this.me.xe){var n=this.me.xe();this.He.push(n)}else n=this.me;this.wf.push({Nf:this.Zd.slice(),gg:this.Ae.slice(),Cg:this.Se,Bg:n,fs:k,zg:this.Ce,Ag:this.De,og:this.Be,yg:this.Re,Uf:this.oe,hg:this.Qe,Vf:this.Td,\nkg:this.Ud.copy(),Tf:this.Ze});this.Sd.save()};this.scale=function(k,n){if(e(arguments)){var z=a.Matrix.scaled(1/k,1/n);this.Yd.transform(z);this.Sd.scale(k,n);this.Zd=this.Sd.getTotalMatrix()}};this.setLineDash=function(k){for(var n=0;n<k.length;n++)if(!isFinite(k[n])||0>k[n])return;1===k.length%2&&Array.prototype.push.apply(k,k);this.Ae=k};this.setTransform=function(k,n,z,C,D,E){e(arguments)&&(this.resetTransform(),this.transform(k,n,z,C,D,E))};this.we=function(){var k=a.Matrix.invert(this.Zd);\nthis.Sd.concat(k);this.Sd.concat(a.Matrix.translated(this.Ce,this.De));this.Sd.concat(this.Zd)};this.Ee=function(k){var n=a.multiplyByAlpha(this.Re,this.oe);if(!a.getColorComponents(n)[3]||!(this.Be||this.De||this.Ce))return null;k=k.copy();k.setColor(n);var z=a.MaskFilter.MakeBlur(a.BlurStyle.Normal,this.Be/2,!1);k.setMaskFilter(z);k.dispose=function(){z.delete();this.delete()};return k};this.mf=function(){var k=this.Ud.copy();k.setStyle(a.PaintStyle.Stroke);if(f(this.me)){var n=a.multiplyByAlpha(this.me,\nthis.oe);k.setColor(n)}else n=this.me.ze(this.Zd),k.setColor(a.Color(0,0,0,this.oe)),k.setShader(n);k.setStrokeWidth(this.Se);if(this.Ae.length){var z=a.PathEffect.MakeDash(this.Ae,this.Qe);k.setPathEffect(z)}k.dispose=function(){z&&z.delete();this.delete()};return k};this.stroke=function(k){k=k?k.ae:this.Yd;var n=this.mf(),z=this.Ee(n);z&&(this.Sd.save(),this.we(),this.Sd.drawPath(k,z),this.Sd.restore(),z.dispose());this.Sd.drawPath(k,n);n.dispose()};this.strokeRect=function(k,n,z,C){var D=this.mf(),\nE=this.Ee(D);E&&(this.Sd.save(),this.we(),this.Sd.drawRect(a.XYWHRect(k,n,z,C),E),this.Sd.restore(),E.dispose());this.Sd.drawRect(a.XYWHRect(k,n,z,C),D);D.dispose()};this.strokeText=function(k,n,z){var C=this.mf();k=a.TextBlob.MakeFromText(k,this.ye);var D=this.Ee(C);D&&(this.Sd.save(),this.we(),this.Sd.drawTextBlob(k,n,z,D),this.Sd.restore(),D.dispose());this.Sd.drawTextBlob(k,n,z,C);k.delete();C.dispose()};this.translate=function(k,n){if(e(arguments)){var z=a.Matrix.translated(-k,-n);this.Yd.transform(z);\nthis.Sd.translate(k,n);this.Zd=this.Sd.getTotalMatrix()}};this.transform=function(k,n,z,C,D,E){k=[k,z,D,n,C,E,0,0,1];n=a.Matrix.invert(k);this.Yd.transform(n);this.Sd.concat(k);this.Zd=this.Sd.getTotalMatrix()};this.addHitRegion=function(){};this.clearHitRegions=function(){};this.drawFocusIfNeeded=function(){};this.removeHitRegion=function(){};this.scrollPathIntoView=function(){};Object.defineProperty(this,\"canvas\",{value:null,writable:!1})}function x(G){this.nf=G;this.se=new p(G.getCanvas());this.$e=\n[];this.Gf=a.FontMgr.RefDefault();this.decodeImage=function(k){k=a.MakeImageFromEncoded(k);if(!k)throw\"Invalid input\";this.$e.push(k);return k};this.loadFont=function(k,n){k=this.Gf.MakeTypefaceFromData(k);if(!k)return null;this.$e.push(k);var z=(n.style||\"normal\")+\"|\"+(n.variant||\"normal\")+\"|\"+(n.weight||\"normal\");n=n.family;la[n]||(la[n]={\"*\":k});la[n][z]=k};this.makePath2D=function(k){k=new R(k);this.$e.push(k.ae);return k};this.getContext=function(k){return\"2d\"===k?this.se:null};this.toDataURL=\nfunction(k,n){this.nf.flush();var z=this.nf.makeImageSnapshot();if(z){k=k||\"image/png\";var C=a.ImageFormat.PNG;\"image/jpeg\"===k&&(C=a.ImageFormat.JPEG);if(n=z.encodeToBytes(C,n||.92)){z.delete();k=\"data:\"+k+\";base64,\";if(\"undefined\"!==typeof Buffer)n=Buffer.from(n).toString(\"base64\");else{z=0;C=n.length;for(var D=\"\",E;z<C;)E=n.slice(z,Math.min(z+32768,C)),D+=String.fromCharCode.apply(null,E),z+=32768;n=btoa(D)}return k+n}}};this.dispose=function(){this.se.qe();this.$e.forEach(function(k){k.delete()});\nthis.nf.dispose()}}function B(G,k,n){if(!k||0===n)throw\"invalid dimensions, width and height must be non-zero\";if(G.length%4)throw\"arr must be a multiple of 4\";n=n||G.length/(4*k);Object.defineProperty(this,\"data\",{value:G,writable:!1});Object.defineProperty(this,\"height\",{value:n,writable:!1});Object.defineProperty(this,\"width\",{value:k,writable:!1})}function J(G,k,n,z){this.ce=null;this.je=[];this.ee=[];this.addColorStop=function(C,D){if(0>C||1<C||!isFinite(C))throw\"offset must be between 0 and 1 inclusively\";\nD=g(D);var E=this.ee.indexOf(C);if(-1!==E)this.je[E]=D;else{for(E=0;E<this.ee.length&&!(this.ee[E]>C);E++);this.ee.splice(E,0,C);this.je.splice(E,0,D)}};this.xe=function(){var C=new J(G,k,n,z);C.je=this.je.slice();C.ee=this.ee.slice();return C};this.qe=function(){this.ce&&(this.ce.delete(),this.ce=null)};this.ze=function(C){var D=[G,k,n,z];a.Matrix.mapPoints(C,D);C=D[0];var E=D[1],N=D[2];D=D[3];this.qe();return this.ce=a.Shader.MakeLinearGradient([C,E],[N,D],this.je,this.ee,a.TileMode.Clamp)}}function L(G,\nk,n,z,C,D){if(e([k,n,z,C,D])){if(0>D)throw\"radii cannot be negative\";G.isEmpty()&&G.moveTo(k,n);G.arcToTangent(k,n,z,C,D)}}function O(G){if(!G.isEmpty()){var k=G.getBounds();(k[3]-k[1]||k[2]-k[0])&&G.close()}}function T(G,k,n,z,C,D,E){E=(E-D)/Math.PI*180;D=D/Math.PI*180;k=a.LTRBRect(k-z,n-C,k+z,n+C);1E-5>Math.abs(Math.abs(E)-360)?(n=E/2,G.arcToOval(k,D,n,!1),G.arcToOval(k,D+n,n,!1)):G.arcToOval(k,D,E,!1)}function t(G,k,n,z,C,D,E,N,Y){if(e([k,n,z,C,D,E,N])){if(0>z||0>C)throw\"radii cannot be negative\";\nvar qa=2*Math.PI,ha=E%qa;0>ha&&(ha+=qa);var Ha=ha-E;E=ha;N+=Ha;!Y&&N-E>=qa?N=E+qa:Y&&E-N>=qa?N=E-qa:!Y&&E>N?N=E+(qa-(E-N)%qa):Y&&E<N&&(N=E-(qa-(N-E)%qa));D?(Y=a.Matrix.rotated(D,k,n),D=a.Matrix.rotated(-D,k,n),G.transform(D),T(G,k,n,z,C,E,N),G.transform(Y)):T(G,k,n,z,C,E,N)}}function F(G,k,n){e([k,n])&&(G.isEmpty()&&G.moveTo(k,n),G.lineTo(k,n))}function R(G){this.ae=null;this.ae=\"string\"===typeof G?a.Path.MakeFromSVGString(G):G&&G.kf?G.ae.copy():new a.Path;this.kf=function(){return this.ae};this.addPath=\nfunction(k,n){n||(n={a:1,c:0,e:0,b:0,d:1,f:0});this.ae.addPath(k.ae,[n.a,n.c,n.e,n.b,n.d,n.f])};this.arc=function(k,n,z,C,D,E){t(this.ae,k,n,z,z,0,C,D,E)};this.arcTo=function(k,n,z,C,D){L(this.ae,k,n,z,C,D)};this.bezierCurveTo=function(k,n,z,C,D,E){var N=this.ae;e([k,n,z,C,D,E])&&(N.isEmpty()&&N.moveTo(k,n),N.cubicTo(k,n,z,C,D,E))};this.closePath=function(){O(this.ae)};this.ellipse=function(k,n,z,C,D,E,N,Y){t(this.ae,k,n,z,C,D,E,N,Y)};this.lineTo=function(k,n){F(this.ae,k,n)};this.moveTo=function(k,\nn){var z=this.ae;e([k,n])&&z.moveTo(k,n)};this.quadraticCurveTo=function(k,n,z,C){var D=this.ae;e([k,n,z,C])&&(D.isEmpty()&&D.moveTo(k,n),D.quadTo(k,n,z,C))};this.rect=function(k,n,z,C){var D=this.ae;k=a.XYWHRect(k,n,z,C);e(k)&&D.addRect(k)}}function ba(G,k){this.ce=null;this.If=G;this._transform=a.Matrix.identity();\"\"===k&&(k=\"repeat\");switch(k){case \"repeat-x\":this.Fe=a.TileMode.Repeat;this.Ge=a.TileMode.Decal;break;case \"repeat-y\":this.Fe=a.TileMode.Decal;this.Ge=a.TileMode.Repeat;break;case \"repeat\":this.Ge=\nthis.Fe=a.TileMode.Repeat;break;case \"no-repeat\":this.Ge=this.Fe=a.TileMode.Decal;break;default:throw\"invalid repetition mode \"+k;}this.setTransform=function(n){n=[n.a,n.c,n.e,n.b,n.d,n.f,0,0,1];e(n)&&(this._transform=n)};this.xe=function(){var n=new ba;n.Fe=this.Fe;n.Ge=this.Ge;return n};this.qe=function(){this.ce&&(this.ce.delete(),this.ce=null)};this.ze=function(){this.qe();return this.ce=this.If.makeShaderCubic(this.Fe,this.Ge,1/3,1/3,this._transform)}}function ka(G,k,n,z,C,D){this.ce=null;this.je=\n[];this.ee=[];this.addColorStop=function(E,N){if(0>E||1<E||!isFinite(E))throw\"offset must be between 0 and 1 inclusively\";N=g(N);var Y=this.ee.indexOf(E);if(-1!==Y)this.je[Y]=N;else{for(Y=0;Y<this.ee.length&&!(this.ee[Y]>E);Y++);this.ee.splice(Y,0,E);this.je.splice(Y,0,N)}};this.xe=function(){var E=new ka(G,k,n,z,C,D);E.je=this.je.slice();E.ee=this.ee.slice();return E};this.qe=function(){this.ce&&(this.ce.delete(),this.ce=null)};this.ze=function(E){var N=[G,k,z,C];a.Matrix.mapPoints(E,N);var Y=N[0],\nqa=N[1],ha=N[2];N=N[3];var Ha=(Math.abs(E[0])+Math.abs(E[4]))/2;E=n*Ha;Ha*=D;this.qe();return this.ce=a.Shader.MakeTwoPointConicalGradient([Y,qa],E,[ha,N],Ha,this.je,this.ee,a.TileMode.Clamp)}}a._testing={};var va={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,\n0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,\n1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,\n0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,\n.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,\n1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),\nlightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,\n1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,\n1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,\n.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,\n1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,\n.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,\n.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};a._testing.parseColor=g;a._testing.colorToString=d;var wa=/(italic|oblique|normal|)\\s*(small-caps|normal|)\\s*(bold|bolder|lighter|[1-9]00|normal|)\\s*([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)/,la={\"Noto Mono\":{\"*\":null},monospace:{\"*\":null}};a._testing.parseFontString=\nl;a.MakeCanvas=function(G,k){return(G=a.MakeSurface(G,k))?new x(G):null};a.ImageData=function(){if(2===arguments.length){var G=arguments[0],k=arguments[1];return new B(new Uint8ClampedArray(4*G*k),G,k)}if(3===arguments.length){var n=arguments[0];if(n.prototype.constructor!==Uint8ClampedArray)throw\"bytes must be given as a Uint8ClampedArray\";G=arguments[1];k=arguments[2];if(n%4)throw\"bytes must be given in a multiple of 4\";if(n%G)throw\"bytes must divide evenly by width\";if(k&&k!==n/(4*G))throw\"invalid height given\";\nreturn new B(n,G,n/(4*G))}throw\"invalid number of arguments - takes 2 or 3, saw \"+arguments.length;}})()})(r);var sa={},ta;for(ta in r)r.hasOwnProperty(ta)&&(sa[ta]=r[ta]);var ua=\"./this.program\";function xa(a,b){throw b;}var ya=!1,za=!1,Aa=!1,Ba=!1;ya=\"object\"===typeof window;za=\"function\"===typeof importScripts;Aa=\"object\"===typeof process&&\"object\"===typeof process.versions&&\"string\"===typeof process.versions.node;Ba=!ya&&!Aa&&!za;var Ca=\"\",Da,Ea,Fa,Ga,Ia;\nif(Aa)Ca=za?require(\"path\").dirname(Ca)+\"/\":__dirname+\"/\",Da=function(a,b){Ga||(Ga=require(\"fs\"));Ia||(Ia=require(\"path\"));a=Ia.normalize(a);return Ga.readFileSync(a,b?null:\"utf8\")},Fa=function(a){a=Da(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a},1<process.argv.length&&(ua=process.argv[1].replace(/\\\\/g,\"/\")),process.argv.slice(2),process.on(\"uncaughtException\",function(a){if(!(a instanceof Ja))throw a;}),process.on(\"unhandledRejection\",Ka),xa=function(a){process.exit(a)},r.inspect=\nfunction(){return\"[Emscripten Module object]\"};else if(Ba)\"undefined\"!=typeof read&&(Da=function(a){return read(a)}),Fa=function(a){if(\"function\"===typeof readbuffer)return new Uint8Array(readbuffer(a));a=read(a,\"binary\");assert(\"object\"===typeof a);return a},\"function\"===typeof quit&&(xa=function(a){quit(a)}),\"undefined\"!==typeof print&&(\"undefined\"===typeof console&&(console={}),console.log=print,console.warn=console.error=\"undefined\"!==typeof printErr?printErr:print);else if(ya||za)za?Ca=self.location.href:\n\"undefined\"!==typeof document&&document.currentScript&&(Ca=document.currentScript.src),_scriptDir&&(Ca=_scriptDir),0!==Ca.indexOf(\"blob:\")?Ca=Ca.substr(0,Ca.lastIndexOf(\"/\")+1):Ca=\"\",Da=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.send(null);return b.responseText},za&&(Fa=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.responseType=\"arraybuffer\";b.send(null);return new Uint8Array(b.response)}),Ea=function(a,b,c){var f=new XMLHttpRequest;f.open(\"GET\",a,!0);f.responseType=\"arraybuffer\";\nf.onload=function(){200==f.status||0==f.status&&f.response?b(f.response):c()};f.onerror=c;f.send(null)};var La=r.print||console.log.bind(console),Oa=r.printErr||console.warn.bind(console);for(ta in sa)sa.hasOwnProperty(ta)&&(r[ta]=sa[ta]);sa=null;r.thisProgram&&(ua=r.thisProgram);r.quit&&(xa=r.quit);var Pa=0,Qa;r.wasmBinary&&(Qa=r.wasmBinary);var noExitRuntime=r.noExitRuntime||!0;\"object\"!==typeof WebAssembly&&Ka(\"no native wasm support detected\");var Ra,Sa=!1;\nfunction assert(a,b){a||Ka(\"Assertion failed: \"+b)}var Ta=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction Va(a,b,c){var f=b+c;for(c=b;a[c]&&!(c>=f);)++c;if(16<c-b&&a.subarray&&Ta)return Ta.decode(a.subarray(b,c));for(f=\"\";b<c;){var h=a[b++];if(h&128){var m=a[b++]&63;if(192==(h&224))f+=String.fromCharCode((h&31)<<6|m);else{var q=a[b++]&63;h=224==(h&240)?(h&15)<<12|m<<6|q:(h&7)<<18|m<<12|q<<6|a[b++]&63;65536>h?f+=String.fromCharCode(h):(h-=65536,f+=String.fromCharCode(55296|h>>10,56320|h&1023))}}else f+=String.fromCharCode(h)}return f}function Wa(a,b){return a?Va(H,a,b):\"\"}\nfunction oa(a,b,c,f){if(!(0<f))return 0;var h=c;f=c+f-1;for(var m=0;m<a.length;++m){var q=a.charCodeAt(m);if(55296<=q&&57343>=q){var u=a.charCodeAt(++m);q=65536+((q&1023)<<10)|u&1023}if(127>=q){if(c>=f)break;b[c++]=q}else{if(2047>=q){if(c+1>=f)break;b[c++]=192|q>>6}else{if(65535>=q){if(c+2>=f)break;b[c++]=224|q>>12}else{if(c+3>=f)break;b[c++]=240|q>>18;b[c++]=128|q>>12&63}b[c++]=128|q>>6&63}b[c++]=128|q&63}}b[c]=0;return c-h}\nfunction na(a){for(var b=0,c=0;c<a.length;++c){var f=a.charCodeAt(c);55296<=f&&57343>=f&&(f=65536+((f&1023)<<10)|a.charCodeAt(++c)&1023);127>=f?++b:b=2047>=f?b+2:65535>=f?b+3:b+4}return b}var Xa=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf-16le\"):void 0;function Ya(a,b){var c=a>>1;for(var f=c+b/2;!(c>=f)&&Za[c];)++c;c<<=1;if(32<c-a&&Xa)return Xa.decode(H.subarray(a,c));c=\"\";for(f=0;!(f>=b/2);++f){var h=$a[a+2*f>>1];if(0==h)break;c+=String.fromCharCode(h)}return c}\nfunction ab(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var f=b;c=c<2*a.length?c/2:a.length;for(var h=0;h<c;++h)$a[b>>1]=a.charCodeAt(h),b+=2;$a[b>>1]=0;return b-f}function bb(a){return 2*a.length}function cb(a,b){for(var c=0,f=\"\";!(c>=b/4);){var h=Q[a+4*c>>2];if(0==h)break;++c;65536<=h?(h-=65536,f+=String.fromCharCode(55296|h>>10,56320|h&1023)):f+=String.fromCharCode(h)}return f}\nfunction db(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var f=b;c=f+c-4;for(var h=0;h<a.length;++h){var m=a.charCodeAt(h);if(55296<=m&&57343>=m){var q=a.charCodeAt(++h);m=65536+((m&1023)<<10)|q&1023}Q[b>>2]=m;b+=4;if(b+4>c)break}Q[b>>2]=0;return b-f}function eb(a){for(var b=0,c=0;c<a.length;++c){var f=a.charCodeAt(c);55296<=f&&57343>=f&&++c;b+=4}return b}var fb,gb,H,$a,Za,Q,lb,U,mb;\nfunction nb(){var a=Ra.buffer;fb=a;r.HEAP8=gb=new Int8Array(a);r.HEAP16=$a=new Int16Array(a);r.HEAP32=Q=new Int32Array(a);r.HEAPU8=H=new Uint8Array(a);r.HEAPU16=Za=new Uint16Array(a);r.HEAPU32=lb=new Uint32Array(a);r.HEAPF32=U=new Float32Array(a);r.HEAPF64=mb=new Float64Array(a)}var ob,pb=[],qb=[],rb=[];function sb(){var a=r.preRun.shift();pb.unshift(a)}var tb=0,ub=null,vb=null;r.preloadedImages={};r.preloadedAudios={};\nfunction Ka(a){if(r.onAbort)r.onAbort(a);Oa(a);Sa=!0;a=new WebAssembly.RuntimeError(\"abort(\"+a+\"). Build with -s ASSERTIONS=1 for more info.\");fa(a);throw a;}function wb(){return xb.startsWith(\"data:application/octet-stream;base64,\")}var xb=\"canvaskit.wasm\";if(!wb()){var yb=xb;xb=r.locateFile?r.locateFile(yb,Ca):Ca+yb}function zb(){var a=xb;try{if(a==xb&&Qa)return new Uint8Array(Qa);if(Fa)return Fa(a);throw\"both async and sync fetching of the wasm failed\";}catch(b){Ka(b)}}\nfunction Ab(){if(!Qa&&(ya||za)){if(\"function\"===typeof fetch&&!xb.startsWith(\"file://\"))return fetch(xb,{credentials:\"same-origin\"}).then(function(a){if(!a.ok)throw\"failed to load wasm binary file at '\"+xb+\"'\";return a.arrayBuffer()}).catch(function(){return zb()});if(Ea)return new Promise(function(a,b){Ea(xb,function(c){a(new Uint8Array(c))},b)})}return Promise.resolve().then(function(){return zb()})}\nfunction Bb(a){for(;0<a.length;){var b=a.shift();if(\"function\"==typeof b)b(r);else{var c=b.Jg;\"number\"===typeof c?void 0===b.pf?ob.get(c)():ob.get(c)(b.pf):c(void 0===b.pf?null:b.pf)}}}function Db(a){this.Vd=a-16;this.tg=function(b){Q[this.Vd+8>>2]=b};this.qg=function(b){Q[this.Vd+0>>2]=b};this.rg=function(){Q[this.Vd+4>>2]=0};this.pg=function(){gb[this.Vd+12>>0]=0};this.sg=function(){gb[this.Vd+13>>0]=0};this.dg=function(b,c){this.tg(b);this.qg(c);this.rg();this.pg();this.sg()}}\nvar Eb=0,Fb={},Gb=[null,[],[]],Hb={},Ib={};function Jb(a){for(;a.length;){var b=a.pop();a.pop()(b)}}function Kb(a){return this.fromWireType(lb[a>>2])}var Lb={},Mb={},Nb={};function Ob(a){if(void 0===a)return\"_unknown\";a=a.replace(/[^a-zA-Z0-9_]/g,\"$\");var b=a.charCodeAt(0);return 48<=b&&57>=b?\"_\"+a:a}function Pb(a,b){a=Ob(a);return(new Function(\"body\",\"return function \"+a+'() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n'))(b)}\nfunction Qb(a){var b=Error,c=Pb(a,function(f){this.name=a;this.message=f;f=Error(f).stack;void 0!==f&&(this.stack=this.toString()+\"\\n\"+f.replace(/^Error(:[^\\n]*)?\\n/,\"\"))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+\": \"+this.message};return c}var Rb=void 0;function Sb(a){throw new Rb(a);}\nfunction Tb(a,b,c){function f(u){u=c(u);u.length!==a.length&&Sb(\"Mismatched type converter count\");for(var y=0;y<a.length;++y)Ub(a[y],u[y])}a.forEach(function(u){Nb[u]=b});var h=Array(b.length),m=[],q=0;b.forEach(function(u,y){Mb.hasOwnProperty(u)?h[y]=Mb[u]:(m.push(u),Lb.hasOwnProperty(u)||(Lb[u]=[]),Lb[u].push(function(){h[y]=Mb[u];++q;q===m.length&&f(h)}))});0===m.length&&f(h)}\nfunction Vb(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(\"Unknown type size: \"+a);}}var Wb=void 0;function Xb(a){for(var b=\"\";H[a];)b+=Wb[H[a++]];return b}var Yb=void 0;function V(a){throw new Yb(a);}\nfunction Ub(a,b,c){c=c||{};if(!(\"argPackAdvance\"in b))throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");var f=b.name;a||V('type \"'+f+'\" must have a positive integer typeid pointer');if(Mb.hasOwnProperty(a)){if(c.cg)return;V(\"Cannot register type '\"+f+\"' twice\")}Mb[a]=b;delete Nb[a];Lb.hasOwnProperty(a)&&(b=Lb[a],delete Lb[a],b.forEach(function(h){h()}))}function Zb(a){V(a.Rd.be.Xd.name+\" instance already deleted\")}var $b=!1;function ac(){}\nfunction bc(a){--a.count.value;0===a.count.value&&(a.ie?a.le.pe(a.ie):a.be.Xd.pe(a.Vd))}function cc(a){if(\"undefined\"===typeof FinalizationGroup)return cc=function(b){return b},a;$b=new FinalizationGroup(function(b){for(var c=b.next();!c.done;c=b.next())c=c.value,c.Vd?bc(c):console.warn(\"object already deleted: \"+c.Vd)});cc=function(b){$b.register(b,b.Rd,b.Rd);return b};ac=function(b){$b.unregister(b.Rd)};return cc(a)}var dc=void 0,mc=[];\nfunction nc(){for(;mc.length;){var a=mc.pop();a.Rd.Ke=!1;a[\"delete\"]()}}function oc(){}var pc={};function qc(a,b,c){if(void 0===a[b].de){var f=a[b];a[b]=function(){a[b].de.hasOwnProperty(arguments.length)||V(\"Function '\"+c+\"' called with an invalid number of arguments (\"+arguments.length+\") - expects one of (\"+a[b].de+\")!\");return a[b].de[arguments.length].apply(this,arguments)};a[b].de=[];a[b].de[f.Ie]=f}}\nfunction rc(a,b,c){r.hasOwnProperty(a)?((void 0===c||void 0!==r[a].de&&void 0!==r[a].de[c])&&V(\"Cannot register public name '\"+a+\"' twice\"),qc(r,a,a),r.hasOwnProperty(c)&&V(\"Cannot register multiple overloads of a function with the same number of arguments (\"+c+\")!\"),r[a].de[c]=b):(r[a]=b,void 0!==c&&(r[a].Lg=c))}function sc(a,b,c,f,h,m,q,u){this.name=a;this.constructor=b;this.Le=c;this.pe=f;this.ne=h;this.Wf=m;this.Xe=q;this.Qf=u;this.mg=[]}\nfunction tc(a,b,c){for(;b!==c;)b.Xe||V(\"Expected null or instance of \"+c.name+\", got an instance of \"+b.name),a=b.Xe(a),b=b.ne;return a}function uc(a,b){if(null===b)return this.rf&&V(\"null is not a valid \"+this.name),0;b.Rd||V('Cannot pass \"'+vc(b)+'\" as a '+this.name);b.Rd.Vd||V(\"Cannot pass deleted object as a pointer of type \"+this.name);return tc(b.Rd.Vd,b.Rd.be.Xd,this.Xd)}\nfunction wc(a,b){if(null===b){this.rf&&V(\"null is not a valid \"+this.name);if(this.bf){var c=this.sf();null!==a&&a.push(this.pe,c);return c}return 0}b.Rd||V('Cannot pass \"'+vc(b)+'\" as a '+this.name);b.Rd.Vd||V(\"Cannot pass deleted object as a pointer of type \"+this.name);!this.af&&b.Rd.be.af&&V(\"Cannot convert argument of type \"+(b.Rd.le?b.Rd.le.name:b.Rd.be.name)+\" to parameter type \"+this.name);c=tc(b.Rd.Vd,b.Rd.be.Xd,this.Xd);if(this.bf)switch(void 0===b.Rd.ie&&V(\"Passing raw pointer to smart pointer is illegal\"),\nthis.xg){case 0:b.Rd.le===this?c=b.Rd.ie:V(\"Cannot convert argument of type \"+(b.Rd.le?b.Rd.le.name:b.Rd.be.name)+\" to parameter type \"+this.name);break;case 1:c=b.Rd.ie;break;case 2:if(b.Rd.le===this)c=b.Rd.ie;else{var f=b.clone();c=this.ng(c,xc(function(){f[\"delete\"]()}));null!==a&&a.push(this.pe,c)}break;default:V(\"Unsupporting sharing policy\")}return c}\nfunction yc(a,b){if(null===b)return this.rf&&V(\"null is not a valid \"+this.name),0;b.Rd||V('Cannot pass \"'+vc(b)+'\" as a '+this.name);b.Rd.Vd||V(\"Cannot pass deleted object as a pointer of type \"+this.name);b.Rd.be.af&&V(\"Cannot convert argument of type \"+b.Rd.be.name+\" to parameter type \"+this.name);return tc(b.Rd.Vd,b.Rd.be.Xd,this.Xd)}function zc(a,b,c){if(b===c)return a;if(void 0===c.ne)return null;a=zc(a,b,c.ne);return null===a?null:c.Qf(a)}var Ac={};\nfunction Bc(a,b){for(void 0===b&&V(\"ptr should not be undefined\");a.ne;)b=a.Xe(b),a=a.ne;return Ac[b]}function Cc(a,b){b.be&&b.Vd||Sb(\"makeClassHandle requires ptr and ptrType\");!!b.le!==!!b.ie&&Sb(\"Both smartPtrType and smartPtr must be specified\");b.count={value:1};return cc(Object.create(a,{Rd:{value:b}}))}\nfunction Dc(a,b,c,f,h,m,q,u,y,w,I){this.name=a;this.Xd=b;this.rf=c;this.af=f;this.bf=h;this.lg=m;this.xg=q;this.Ef=u;this.sf=y;this.ng=w;this.pe=I;h||void 0!==b.ne?this.toWireType=wc:(this.toWireType=f?uc:yc,this.ke=null)}function Ec(a,b,c){r.hasOwnProperty(a)||Sb(\"Replacing nonexistant public symbol\");void 0!==r[a].de&&void 0!==c?r[a].de[c]=b:(r[a]=b,r[a].Ie=c)}\nfunction Fc(a,b){var c=[];return function(){c.length=arguments.length;for(var f=0;f<arguments.length;f++)c[f]=arguments[f];a.includes(\"j\")?(f=r[\"dynCall_\"+a],f=c&&c.length?f.apply(null,[b].concat(c)):f.call(null,b)):f=ob.get(b).apply(null,c);return f}}function Gc(a,b){a=Xb(a);var c=a.includes(\"j\")?Fc(a,b):ob.get(b);\"function\"!==typeof c&&V(\"unknown function pointer with signature \"+a+\": \"+b);return c}var Hc=void 0;function Ic(a){a=Jc(a);var b=Xb(a);Kc(a);return b}\nfunction Lc(a,b){function c(m){h[m]||Mb[m]||(Nb[m]?Nb[m].forEach(c):(f.push(m),h[m]=!0))}var f=[],h={};b.forEach(c);throw new Hc(a+\": \"+f.map(Ic).join([\", \"]));}function Uc(a){var b=Function;if(!(b instanceof Function))throw new TypeError(\"new_ called with constructor type \"+typeof b+\" which is not a function\");var c=Pb(b.name||\"unknownFunctionName\",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}\nfunction Vc(a,b,c,f,h){var m=b.length;2>m&&V(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");var q=null!==b[1]&&null!==c,u=!1;for(c=1;c<b.length;++c)if(null!==b[c]&&void 0===b[c].ke){u=!0;break}var y=\"void\"!==b[0].name,w=\"\",I=\"\";for(c=0;c<m-2;++c)w+=(0!==c?\", \":\"\")+\"arg\"+c,I+=(0!==c?\", \":\"\")+\"arg\"+c+\"Wired\";a=\"return function \"+Ob(a)+\"(\"+w+\") {\\nif (arguments.length !== \"+(m-2)+\") {\\nthrowBindingError('function \"+a+\" called with ' + arguments.length + ' arguments, expected \"+\n(m-2)+\" args!');\\n}\\n\";u&&(a+=\"var destructors = [];\\n\");var K=u?\"destructors\":\"null\";w=\"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");f=[V,f,h,Jb,b[0],b[1]];q&&(a+=\"var thisWired = classParam.toWireType(\"+K+\", this);\\n\");for(c=0;c<m-2;++c)a+=\"var arg\"+c+\"Wired = argType\"+c+\".toWireType(\"+K+\", arg\"+c+\"); // \"+b[c+2].name+\"\\n\",w.push(\"argType\"+c),f.push(b[c+2]);q&&(I=\"thisWired\"+(0<I.length?\", \":\"\")+I);a+=(y?\"var rv = \":\"\")+\"invoker(fn\"+(0<I.length?\", \":\"\")+I+\");\\n\";if(u)a+=\n\"runDestructors(destructors);\\n\";else for(c=q?1:2;c<b.length;++c)m=1===c?\"thisWired\":\"arg\"+(c-2)+\"Wired\",null!==b[c].ke&&(a+=m+\"_dtor(\"+m+\"); // \"+b[c].name+\"\\n\",w.push(m+\"_dtor\"),f.push(b[c].ke));y&&(a+=\"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");w.push(a+\"}\\n\");return Uc(w).apply(null,f)}function Wc(a,b){for(var c=[],f=0;f<a;f++)c.push(Q[(b>>2)+f]);return c}var Xc=[],Yc=[{},{value:void 0},{value:null},{value:!0},{value:!1}];\nfunction Zc(a){4<a&&0===--Yc[a].tf&&(Yc[a]=void 0,Xc.push(a))}function xc(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=Xc.length?Xc.pop():Yc.length;Yc[b]={tf:1,value:a};return b}}\nfunction $c(a,b,c){switch(b){case 0:return function(f){return this.fromWireType((c?gb:H)[f])};case 1:return function(f){return this.fromWireType((c?$a:Za)[f>>1])};case 2:return function(f){return this.fromWireType((c?Q:lb)[f>>2])};default:throw new TypeError(\"Unknown integer type: \"+a);}}function ad(a,b){var c=Mb[a];void 0===c&&V(b+\" has unknown type \"+Ic(a));return c}function vc(a){if(null===a)return\"null\";var b=typeof a;return\"object\"===b||\"array\"===b||\"function\"===b?a.toString():\"\"+a}\nfunction bd(a,b){switch(b){case 2:return function(c){return this.fromWireType(U[c>>2])};case 3:return function(c){return this.fromWireType(mb[c>>3])};default:throw new TypeError(\"Unknown float type: \"+a);}}\nfunction cd(a,b,c){switch(b){case 0:return c?function(f){return gb[f]}:function(f){return H[f]};case 1:return c?function(f){return $a[f>>1]}:function(f){return Za[f>>1]};case 2:return c?function(f){return Q[f>>2]}:function(f){return lb[f>>2]};default:throw new TypeError(\"Unknown integer type: \"+a);}}function dd(a){a||V(\"Cannot use deleted val. handle = \"+a);return Yc[a].value}var ed={};function fd(a){var b=ed[a];return void 0===b?Xb(a):b}var gd=[];\nfunction hd(){return\"object\"===typeof globalThis?globalThis:Function(\"return this\")()}function jd(a){var b=gd.length;gd.push(a);return b}function kd(a,b){for(var c=Array(a),f=0;f<a;++f)c[f]=ad(Q[(b>>2)+f],\"parameter \"+f);return c}var ld={},md;Aa?md=function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:\"undefined\"!==typeof dateNow?md=dateNow:md=function(){return performance.now()};\nfunction nd(a){var b=a.getExtension(\"ANGLE_instanced_arrays\");b&&(a.vertexAttribDivisor=function(c,f){b.vertexAttribDivisorANGLE(c,f)},a.drawArraysInstanced=function(c,f,h,m){b.drawArraysInstancedANGLE(c,f,h,m)},a.drawElementsInstanced=function(c,f,h,m,q){b.drawElementsInstancedANGLE(c,f,h,m,q)})}\nfunction od(a){var b=a.getExtension(\"OES_vertex_array_object\");b&&(a.createVertexArray=function(){return b.createVertexArrayOES()},a.deleteVertexArray=function(c){b.deleteVertexArrayOES(c)},a.bindVertexArray=function(c){b.bindVertexArrayOES(c)},a.isVertexArray=function(c){return b.isVertexArrayOES(c)})}function pd(a){var b=a.getExtension(\"WEBGL_draw_buffers\");b&&(a.drawBuffers=function(c,f){b.drawBuffersWEBGL(c,f)})}\nvar qd=1,rd=[],sd=[],td=[],ud=[],vd=[],wd=[],xd=[],ma=[],yd=[],zd=[],Ad={},Bd={},Cd=4;function Dd(a){Ed||(Ed=a)}function Fd(a){for(var b=qd++,c=a.length;c<b;c++)a[c]=null;return b}function ia(a,b){a.Cf||(a.Cf=a.getContext,a.getContext=function(f,h){h=a.Cf(f,h);return\"webgl\"==f==h instanceof WebGLRenderingContext?h:null});var c=1<b.majorVersion?a.getContext(\"webgl2\",b):a.getContext(\"webgl\",b);return c?Gd(c,b):0}\nfunction Gd(a,b){var c=Fd(ma),f={bg:c,attributes:b,version:b.majorVersion,Ne:a};a.canvas&&(a.canvas.vf=f);ma[c]=f;(\"undefined\"===typeof b.Rf||b.Rf)&&Jd(f);return c}function ja(a){v=ma[a];r.Ig=W=v&&v.Ne;return!(a&&!W)}\nfunction Jd(a){a||(a=v);if(!a.eg){a.eg=!0;var b=a.Ne;nd(b);od(b);pd(b);b.zf=b.getExtension(\"WEBGL_draw_instanced_base_vertex_base_instance\");b.Df=b.getExtension(\"WEBGL_multi_draw_instanced_base_vertex_base_instance\");2<=a.version&&(b.Af=b.getExtension(\"EXT_disjoint_timer_query_webgl2\"));if(2>a.version||!b.Af)b.Af=b.getExtension(\"EXT_disjoint_timer_query\");b.Kg=b.getExtension(\"WEBGL_multi_draw\");(b.getSupportedExtensions()||[]).forEach(function(c){c.includes(\"lose_context\")||c.includes(\"debug\")||b.getExtension(c)})}}\nvar Ed,v,Kd=[];function Ld(a,b,c,f){for(var h=0;h<a;h++){var m=W[c](),q=m&&Fd(f);m?(m.name=q,f[q]=m):Dd(1282);Q[b+4*h>>2]=q}}\nfunction Md(a,b){if(b){var c=void 0;switch(a){case 36346:c=1;break;case 36344:return;case 34814:case 36345:c=0;break;case 34466:var f=W.getParameter(34467);c=f?f.length:0;break;case 33309:if(2>v.version){Dd(1282);return}c=2*(W.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>v.version){Dd(1280);return}c=33307==a?3:0}if(void 0===c)switch(f=W.getParameter(a),typeof f){case \"number\":c=f;break;case \"boolean\":c=f?1:0;break;case \"string\":Dd(1280);return;case \"object\":if(null===f)switch(a){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:c=\n0;break;default:Dd(1280);return}else{if(f instanceof Float32Array||f instanceof Uint32Array||f instanceof Int32Array||f instanceof Array){for(a=0;a<f.length;++a)Q[b+4*a>>2]=f[a];return}try{c=f.name|0}catch(h){Dd(1280);Oa(\"GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter(\"+a+\")! (error: \"+h+\")\");return}}break;default:Dd(1280);Oa(\"GL_INVALID_ENUM in glGet0v: Native code calling glGet0v(\"+a+\") and it returns \"+f+\" of type \"+typeof f+\"!\");return}Q[b>>2]=c}else Dd(1281)}\nfunction Nd(a){var b=na(a)+1,c=Od(b);oa(a,H,c,b);return c}function Pd(a){a-=5120;return 0==a?gb:1==a?H:2==a?$a:4==a?Q:6==a?U:5==a||28922==a||28520==a||30779==a||30782==a?lb:Za}function Qd(a,b,c,f,h){a=Pd(a);var m=31-Math.clz32(a.BYTES_PER_ELEMENT),q=Cd;return a.subarray(h>>m,h+f*(c*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[b-6402]||1)*(1<<m)+q-1&-q)>>m)}function Z(a){var b=W.Of,c=b.jf[a];0<=c&&(b.jf[a]=c=W.getUniformLocation(b,b.Ff[a]+(0<c?\"[\"+c+\"]\":\"\")));return c}\nvar Rd=[],Sd=[],Td={};function Ud(){if(!Vd){var a={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:(\"object\"===typeof navigator&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\",_:ua||\"./this.program\"},b;for(b in Td)a[b]=Td[b];var c=[];for(b in a)c.push(b+\"=\"+a[b]);Vd=c}return Vd}var Vd;function Wd(a){return 0===a%4&&(0!==a%100||0===a%400)}function Xd(a,b){for(var c=0,f=0;f<=b;c+=a[f++]);return c}\nvar Yd=[31,29,31,30,31,30,31,31,30,31,30,31],Zd=[31,28,31,30,31,30,31,31,30,31,30,31];function $d(a,b){for(a=new Date(a.getTime());0<b;){var c=a.getMonth(),f=(Wd(a.getFullYear())?Yd:Zd)[c];if(b>f-a.getDate())b-=f-a.getDate()+1,a.setDate(1),11>c?a.setMonth(c+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);break}}return a}\nfunction ae(a,b,c,f){function h(A,M,X){for(A=\"number\"===typeof A?A.toString():A||\"\";A.length<M;)A=X[0]+A;return A}function m(A,M){return h(A,M,\"0\")}function q(A,M){function X(aa){return 0>aa?-1:0<aa?1:0}var ea;0===(ea=X(A.getFullYear()-M.getFullYear()))&&0===(ea=X(A.getMonth()-M.getMonth()))&&(ea=X(A.getDate()-M.getDate()));return ea}function u(A){switch(A.getDay()){case 0:return new Date(A.getFullYear()-1,11,29);case 1:return A;case 2:return new Date(A.getFullYear(),0,3);case 3:return new Date(A.getFullYear(),\n0,2);case 4:return new Date(A.getFullYear(),0,1);case 5:return new Date(A.getFullYear()-1,11,31);case 6:return new Date(A.getFullYear()-1,11,30)}}function y(A){A=$d(new Date(A.fe+1900,0,1),A.hf);var M=new Date(A.getFullYear()+1,0,4),X=u(new Date(A.getFullYear(),0,4));M=u(M);return 0>=q(X,A)?0>=q(M,A)?A.getFullYear()+1:A.getFullYear():A.getFullYear()-1}var w=Q[f+40>>2];f={Fg:Q[f>>2],Eg:Q[f+4>>2],ff:Q[f+8>>2],We:Q[f+12>>2],Me:Q[f+16>>2],fe:Q[f+20>>2],gf:Q[f+24>>2],hf:Q[f+28>>2],Og:Q[f+32>>2],Dg:Q[f+\n36>>2],Gg:w?Wa(w):\"\"};c=Wa(c);w={\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m/%d/%y\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%r\":\"%I:%M:%S %p\",\"%R\":\"%H:%M\",\"%T\":\"%H:%M:%S\",\"%x\":\"%m/%d/%y\",\"%X\":\"%H:%M:%S\",\"%Ec\":\"%c\",\"%EC\":\"%C\",\"%Ex\":\"%m/%d/%y\",\"%EX\":\"%H:%M:%S\",\"%Ey\":\"%y\",\"%EY\":\"%Y\",\"%Od\":\"%d\",\"%Oe\":\"%e\",\"%OH\":\"%H\",\"%OI\":\"%I\",\"%Om\":\"%m\",\"%OM\":\"%M\",\"%OS\":\"%S\",\"%Ou\":\"%u\",\"%OU\":\"%U\",\"%OV\":\"%V\",\"%Ow\":\"%w\",\"%OW\":\"%W\",\"%Oy\":\"%y\"};for(var I in w)c=c.replace(new RegExp(I,\"g\"),w[I]);var K=\"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),\nP=\"January February March April May June July August September October November December\".split(\" \");w={\"%a\":function(A){return K[A.gf].substring(0,3)},\"%A\":function(A){return K[A.gf]},\"%b\":function(A){return P[A.Me].substring(0,3)},\"%B\":function(A){return P[A.Me]},\"%C\":function(A){return m((A.fe+1900)/100|0,2)},\"%d\":function(A){return m(A.We,2)},\"%e\":function(A){return h(A.We,2,\" \")},\"%g\":function(A){return y(A).toString().substring(2)},\"%G\":function(A){return y(A)},\"%H\":function(A){return m(A.ff,\n2)},\"%I\":function(A){A=A.ff;0==A?A=12:12<A&&(A-=12);return m(A,2)},\"%j\":function(A){return m(A.We+Xd(Wd(A.fe+1900)?Yd:Zd,A.Me-1),3)},\"%m\":function(A){return m(A.Me+1,2)},\"%M\":function(A){return m(A.Eg,2)},\"%n\":function(){return\"\\n\"},\"%p\":function(A){return 0<=A.ff&&12>A.ff?\"AM\":\"PM\"},\"%S\":function(A){return m(A.Fg,2)},\"%t\":function(){return\"\\t\"},\"%u\":function(A){return A.gf||7},\"%U\":function(A){var M=new Date(A.fe+1900,0,1),X=0===M.getDay()?M:$d(M,7-M.getDay());A=new Date(A.fe+1900,A.Me,A.We);return 0>\nq(X,A)?m(Math.ceil((31-X.getDate()+(Xd(Wd(A.getFullYear())?Yd:Zd,A.getMonth()-1)-31)+A.getDate())/7),2):0===q(X,M)?\"01\":\"00\"},\"%V\":function(A){var M=new Date(A.fe+1901,0,4),X=u(new Date(A.fe+1900,0,4));M=u(M);var ea=$d(new Date(A.fe+1900,0,1),A.hf);return 0>q(ea,X)?\"53\":0>=q(M,ea)?\"01\":m(Math.ceil((X.getFullYear()<A.fe+1900?A.hf+32-X.getDate():A.hf+1-X.getDate())/7),2)},\"%w\":function(A){return A.gf},\"%W\":function(A){var M=new Date(A.fe,0,1),X=1===M.getDay()?M:$d(M,0===M.getDay()?1:7-M.getDay()+1);\nA=new Date(A.fe+1900,A.Me,A.We);return 0>q(X,A)?m(Math.ceil((31-X.getDate()+(Xd(Wd(A.getFullYear())?Yd:Zd,A.getMonth()-1)-31)+A.getDate())/7),2):0===q(X,M)?\"01\":\"00\"},\"%y\":function(A){return(A.fe+1900).toString().substring(2)},\"%Y\":function(A){return A.fe+1900},\"%z\":function(A){A=A.Dg;var M=0<=A;A=Math.abs(A)/60;return(M?\"+\":\"-\")+String(\"0000\"+(A/60*100+A%60)).slice(-4)},\"%Z\":function(A){return A.Gg},\"%%\":function(){return\"%\"}};for(I in w)c.includes(I)&&(c=c.replace(new RegExp(I,\"g\"),w[I](f)));I=\nbe(c);if(I.length>b)return 0;gb.set(I,a);return I.length-1}Rb=r.InternalError=Qb(\"InternalError\");for(var ce=Array(256),de=0;256>de;++de)ce[de]=String.fromCharCode(de);Wb=ce;Yb=r.BindingError=Qb(\"BindingError\");oc.prototype.isAliasOf=function(a){if(!(this instanceof oc&&a instanceof oc))return!1;var b=this.Rd.be.Xd,c=this.Rd.Vd,f=a.Rd.be.Xd;for(a=a.Rd.Vd;b.ne;)c=b.Xe(c),b=b.ne;for(;f.ne;)a=f.Xe(a),f=f.ne;return b===f&&c===a};\noc.prototype.clone=function(){this.Rd.Vd||Zb(this);if(this.Rd.Ve)return this.Rd.count.value+=1,this;var a=cc,b=Object,c=b.create,f=Object.getPrototypeOf(this),h=this.Rd;a=a(c.call(b,f,{Rd:{value:{count:h.count,Ke:h.Ke,Ve:h.Ve,Vd:h.Vd,be:h.be,ie:h.ie,le:h.le}}}));a.Rd.count.value+=1;a.Rd.Ke=!1;return a};oc.prototype[\"delete\"]=function(){this.Rd.Vd||Zb(this);this.Rd.Ke&&!this.Rd.Ve&&V(\"Object already scheduled for deletion\");ac(this);bc(this.Rd);this.Rd.Ve||(this.Rd.ie=void 0,this.Rd.Vd=void 0)};\noc.prototype.isDeleted=function(){return!this.Rd.Vd};oc.prototype.deleteLater=function(){this.Rd.Vd||Zb(this);this.Rd.Ke&&!this.Rd.Ve&&V(\"Object already scheduled for deletion\");mc.push(this);1===mc.length&&dc&&dc(nc);this.Rd.Ke=!0;return this};Dc.prototype.Xf=function(a){this.Ef&&(a=this.Ef(a));return a};Dc.prototype.yf=function(a){this.pe&&this.pe(a)};Dc.prototype.argPackAdvance=8;Dc.prototype.readValueFromPointer=Kb;Dc.prototype.deleteObject=function(a){if(null!==a)a[\"delete\"]()};\nDc.prototype.fromWireType=function(a){function b(){return this.bf?Cc(this.Xd.Le,{be:this.lg,Vd:c,le:this,ie:a}):Cc(this.Xd.Le,{be:this,Vd:a})}var c=this.Xf(a);if(!c)return this.yf(a),null;var f=Bc(this.Xd,c);if(void 0!==f){if(0===f.Rd.count.value)return f.Rd.Vd=c,f.Rd.ie=a,f.clone();f=f.clone();this.yf(a);return f}f=this.Xd.Wf(c);f=pc[f];if(!f)return b.call(this);f=this.af?f.Mf:f.pointerType;var h=zc(c,this.Xd,f.Xd);return null===h?b.call(this):this.bf?Cc(f.Xd.Le,{be:f,Vd:h,le:this,ie:a}):Cc(f.Xd.Le,\n{be:f,Vd:h})};r.getInheritedInstanceCount=function(){return Object.keys(Ac).length};r.getLiveInheritedInstances=function(){var a=[],b;for(b in Ac)Ac.hasOwnProperty(b)&&a.push(Ac[b]);return a};r.flushPendingDeletes=nc;r.setDelayFunction=function(a){dc=a;mc.length&&dc&&dc(nc)};Hc=r.UnboundTypeError=Qb(\"UnboundTypeError\");r.count_emval_handles=function(){for(var a=0,b=5;b<Yc.length;++b)void 0!==Yc[b]&&++a;return a};\nr.get_first_emval=function(){for(var a=5;a<Yc.length;++a)if(void 0!==Yc[a])return Yc[a];return null};for(var W,ee=0;32>ee;++ee)Kd.push(Array(ee));var fe=new Float32Array(288);for(ee=0;288>ee;++ee)Rd[ee]=fe.subarray(0,ee+1);var ge=new Int32Array(288);for(ee=0;288>ee;++ee)Sd[ee]=ge.subarray(0,ee+1);function be(a){var b=Array(na(a)+1);oa(a,b,0,b.length);return b}\nvar Ae={L:function(a){return Od(a+16)+16},K:function(a,b,c){(new Db(a)).dg(b,c);Eb++;throw a;},P:function(){return 0},Ab:function(){},xb:function(){return 0},yb:function(a,b,c,f,h,m){m<<=12;0!==(f&16)&&0!==a%65536?b=-28:0!==(f&32)?(a=he(65536,b))?(ie(a,0,b),Fb[a]={jg:a,ig:b,Lf:!0,fd:h,Mg:c,flags:f,offset:m},b=a):b=-48:b=-52;return b},zb:function(a,b){if(-1===(a|0)||0===b)a=-28;else{var c=Fb[a];c&&b===c.ig&&(Fb[a]=null,c.Lf&&Kc(c.jg));a=0}return a},R:function(){},Q:function(){},y:function(a){var b=\nIb[a];delete Ib[a];var c=b.sf,f=b.pe,h=b.Bf,m=h.map(function(q){return q.ag}).concat(h.map(function(q){return q.vg}));Tb([a],m,function(q){var u={};h.forEach(function(y,w){var I=q[w],K=y.Zf,P=y.$f,A=q[w+h.length],M=y.ug,X=y.wg;u[y.Sf]={read:function(ea){return I.fromWireType(K(P,ea))},write:function(ea,aa){var pa=[];M(X,ea,A.toWireType(pa,aa));Jb(pa)}}});return[{name:b.name,fromWireType:function(y){var w={},I;for(I in u)w[I]=u[I].read(y);f(y);return w},toWireType:function(y,w){for(var I in u)if(!(I in\nw))throw new TypeError('Missing field:  \"'+I+'\"');var K=c();for(I in u)u[I].write(K,w[I]);null!==y&&y.push(f,K);return K},argPackAdvance:8,readValueFromPointer:Kb,ke:f}]})},pb:function(){},Db:function(a,b,c,f,h){var m=Vb(c);b=Xb(b);Ub(a,{name:b,fromWireType:function(q){return!!q},toWireType:function(q,u){return u?f:h},argPackAdvance:8,readValueFromPointer:function(q){if(1===c)var u=gb;else if(2===c)u=$a;else if(4===c)u=Q;else throw new TypeError(\"Unknown boolean type size: \"+b);return this.fromWireType(u[q>>\nm])},ke:null})},n:function(a,b,c,f,h,m,q,u,y,w,I,K,P){I=Xb(I);m=Gc(h,m);u&&(u=Gc(q,u));w&&(w=Gc(y,w));P=Gc(K,P);var A=Ob(I);rc(A,function(){Lc(\"Cannot construct \"+I+\" due to unbound types\",[f])});Tb([a,b,c],f?[f]:[],function(M){M=M[0];if(f){var X=M.Xd;var ea=X.Le}else ea=oc.prototype;M=Pb(A,function(){if(Object.getPrototypeOf(this)!==aa)throw new Yb(\"Use 'new' to construct \"+I);if(void 0===pa.te)throw new Yb(I+\" has no accessible constructor\");var jb=pa.te[arguments.length];if(void 0===jb)throw new Yb(\"Tried to invoke ctor of \"+\nI+\" with invalid number of parameters (\"+arguments.length+\") - expected (\"+Object.keys(pa.te).toString()+\") parameters instead!\");return jb.apply(this,arguments)});var aa=Object.create(ea,{constructor:{value:M}});M.prototype=aa;var pa=new sc(I,M,aa,P,X,m,u,w);X=new Dc(I,pa,!0,!1,!1);ea=new Dc(I+\"*\",pa,!1,!1,!1);var ib=new Dc(I+\" const*\",pa,!1,!0,!1);pc[a]={pointerType:ea,Mf:ib};Ec(A,M);return[X,ea,ib]})},f:function(a,b,c,f,h,m,q){var u=Wc(c,f);b=Xb(b);m=Gc(h,m);Tb([],[a],function(y){function w(){Lc(\"Cannot call \"+\nI+\" due to unbound types\",u)}y=y[0];var I=y.name+\".\"+b,K=y.Xd.constructor;void 0===K[b]?(w.Ie=c-1,K[b]=w):(qc(K,b,I),K[b].de[c-1]=w);Tb([],u,function(P){P=[P[0],null].concat(P.slice(1));P=Vc(I,P,null,m,q);void 0===K[b].de?(P.Ie=c-1,K[b]=P):K[b].de[c-1]=P;return[]});return[]})},x:function(a,b,c,f,h,m){assert(0<b);var q=Wc(b,c);h=Gc(f,h);var u=[m],y=[];Tb([],[a],function(w){w=w[0];var I=\"constructor \"+w.name;void 0===w.Xd.te&&(w.Xd.te=[]);if(void 0!==w.Xd.te[b-1])throw new Yb(\"Cannot register multiple constructors with identical number of parameters (\"+\n(b-1)+\") for class '\"+w.name+\"'! Overload resolution is currently only performed using the parameter count, not actual type info!\");w.Xd.te[b-1]=function(){Lc(\"Cannot construct \"+w.name+\" due to unbound types\",q)};Tb([],q,function(K){w.Xd.te[b-1]=function(){arguments.length!==b-1&&V(I+\" called with \"+arguments.length+\" arguments, expected \"+(b-1));y.length=0;u.length=b;for(var P=1;P<b;++P)u[P]=K[P].toWireType(y,arguments[P-1]);P=h.apply(null,u);Jb(y);return K[0].fromWireType(P)};return[]});return[]})},\nc:function(a,b,c,f,h,m,q,u){var y=Wc(c,f);b=Xb(b);m=Gc(h,m);Tb([],[a],function(w){function I(){Lc(\"Cannot call \"+K+\" due to unbound types\",y)}w=w[0];var K=w.name+\".\"+b;u&&w.Xd.mg.push(b);var P=w.Xd.Le,A=P[b];void 0===A||void 0===A.de&&A.className!==w.name&&A.Ie===c-2?(I.Ie=c-2,I.className=w.name,P[b]=I):(qc(P,b,K),P[b].de[c-2]=I);Tb([],y,function(M){M=Vc(K,M,w,m,q);void 0===P[b].de?(M.Ie=c-2,P[b]=M):P[b].de[c-2]=M;return[]});return[]})},X:function(a,b,c){a=Xb(a);Tb([],[b],function(f){f=f[0];r[a]=\nf.fromWireType(c);return[]})},Bb:function(a,b){b=Xb(b);Ub(a,{name:b,fromWireType:function(c){var f=Yc[c].value;Zc(c);return f},toWireType:function(c,f){return xc(f)},argPackAdvance:8,readValueFromPointer:Kb,ke:null})},m:function(a,b,c,f){function h(){}c=Vb(c);b=Xb(b);h.values={};Ub(a,{name:b,constructor:h,fromWireType:function(m){return this.constructor.values[m]},toWireType:function(m,q){return q.value},argPackAdvance:8,readValueFromPointer:$c(b,c,f),ke:null});rc(b,h)},l:function(a,b,c){var f=ad(a,\n\"enum\");b=Xb(b);a=f.constructor;f=Object.create(f.constructor.prototype,{value:{value:c},constructor:{value:Pb(f.name+\"_\"+b,function(){})}});a.values[c]=f;a[b]=f},S:function(a,b,c){c=Vb(c);b=Xb(b);Ub(a,{name:b,fromWireType:function(f){return f},toWireType:function(f,h){if(\"number\"!==typeof h&&\"boolean\"!==typeof h)throw new TypeError('Cannot convert \"'+vc(h)+'\" to '+this.name);return h},argPackAdvance:8,readValueFromPointer:bd(b,c),ke:null})},s:function(a,b,c,f,h,m){var q=Wc(b,c);a=Xb(a);h=Gc(f,h);\nrc(a,function(){Lc(\"Cannot call \"+a+\" due to unbound types\",q)},b-1);Tb([],q,function(u){u=[u[0],null].concat(u.slice(1));Ec(a,Vc(a,u,null,h,m),b-1);return[]})},A:function(a,b,c,f,h){function m(w){return w}b=Xb(b);-1===h&&(h=4294967295);var q=Vb(c);if(0===f){var u=32-8*c;m=function(w){return w<<u>>>u}}var y=b.includes(\"unsigned\");Ub(a,{name:b,fromWireType:m,toWireType:function(w,I){if(\"number\"!==typeof I&&\"boolean\"!==typeof I)throw new TypeError('Cannot convert \"'+vc(I)+'\" to '+this.name);if(I<f||\nI>h)throw new TypeError('Passing a number \"'+vc(I)+'\" from JS side to C/C++ side to an argument of type \"'+b+'\", which is outside the valid range ['+f+\", \"+h+\"]!\");return y?I>>>0:I|0},argPackAdvance:8,readValueFromPointer:cd(b,q,0!==f),ke:null})},w:function(a,b,c){function f(m){m>>=2;var q=lb;return new h(fb,q[m+1],q[m])}var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=Xb(c);Ub(a,{name:c,fromWireType:f,argPackAdvance:8,readValueFromPointer:f},\n{cg:!0})},p:function(a,b,c,f,h,m,q,u,y,w,I,K){c=Xb(c);m=Gc(h,m);u=Gc(q,u);w=Gc(y,w);K=Gc(I,K);Tb([a],[b],function(P){P=P[0];return[new Dc(c,P.Xd,!1,!1,!0,P,f,m,u,w,K)]})},T:function(a,b){b=Xb(b);var c=\"std::string\"===b;Ub(a,{name:b,fromWireType:function(f){var h=lb[f>>2];if(c)for(var m=f+4,q=0;q<=h;++q){var u=f+4+q;if(q==h||0==H[u]){m=Wa(m,u-m);if(void 0===y)var y=m;else y+=String.fromCharCode(0),y+=m;m=u+1}}else{y=Array(h);for(q=0;q<h;++q)y[q]=String.fromCharCode(H[f+4+q]);y=y.join(\"\")}Kc(f);return y},\ntoWireType:function(f,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var m=\"string\"===typeof h;m||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||V(\"Cannot pass non-string to std::string\");var q=(c&&m?function(){return na(h)}:function(){return h.length})(),u=Od(4+q+1);lb[u>>2]=q;if(c&&m)oa(h,H,u+4,q+1);else if(m)for(m=0;m<q;++m){var y=h.charCodeAt(m);255<y&&(Kc(u),V(\"String has UTF-16 code units that do not fit in 8 bits\"));H[u+4+m]=y}else for(m=0;m<q;++m)H[u+\n4+m]=h[m];null!==f&&f.push(Kc,u);return u},argPackAdvance:8,readValueFromPointer:Kb,ke:function(f){Kc(f)}})},G:function(a,b,c){c=Xb(c);if(2===b){var f=Ya;var h=ab;var m=bb;var q=function(){return Za};var u=1}else 4===b&&(f=cb,h=db,m=eb,q=function(){return lb},u=2);Ub(a,{name:c,fromWireType:function(y){for(var w=lb[y>>2],I=q(),K,P=y+4,A=0;A<=w;++A){var M=y+4+A*b;if(A==w||0==I[M>>u])P=f(P,M-P),void 0===K?K=P:(K+=String.fromCharCode(0),K+=P),P=M+b}Kc(y);return K},toWireType:function(y,w){\"string\"!==\ntypeof w&&V(\"Cannot pass non-string to C++ string type \"+c);var I=m(w),K=Od(4+I+b);lb[K>>2]=I>>u;h(w,K+4,I+b);null!==y&&y.push(Kc,K);return K},argPackAdvance:8,readValueFromPointer:Kb,ke:function(y){Kc(y)}})},z:function(a,b,c,f,h,m){Ib[a]={name:Xb(b),sf:Gc(c,f),pe:Gc(h,m),Bf:[]}},j:function(a,b,c,f,h,m,q,u,y,w){Ib[a].Bf.push({Sf:Xb(b),ag:c,Zf:Gc(f,h),$f:m,vg:q,ug:Gc(u,y),wg:w})},Eb:function(a,b){b=Xb(b);Ub(a,{fg:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},C:function(a,\nb,c){a=dd(a);b=ad(b,\"emval::as\");var f=[],h=xc(f);Q[c>>2]=h;return b.toWireType(f,a)},E:function(a,b,c,f,h){a=gd[a];b=dd(b);c=fd(c);var m=[];Q[f>>2]=xc(m);return a(b,c,m,h)},B:function(a,b,c,f){a=gd[a];b=dd(b);c=fd(c);a(b,c,null,f)},H:Zc,jb:function(a){if(0===a)return xc(hd());a=fd(a);return xc(hd()[a])},v:function(a,b){b=kd(a,b);for(var c=b[0],f=c.name+\"_$\"+b.slice(1).map(function(w){return w.name}).join(\"_\")+\"$\",h=[\"retType\"],m=[c],q=\"\",u=0;u<a-1;++u)q+=(0!==u?\", \":\"\")+\"arg\"+u,h.push(\"argType\"+\nu),m.push(b[1+u]);f=\"return function \"+Ob(\"methodCaller_\"+f)+\"(handle, name, destructors, args) {\\n\";var y=0;for(u=0;u<a-1;++u)f+=\"    var arg\"+u+\" = argType\"+u+\".readValueFromPointer(args\"+(y?\"+\"+y:\"\")+\");\\n\",y+=b[u+1].argPackAdvance;f+=\"    var rv = handle[name](\"+q+\");\\n\";for(u=0;u<a-1;++u)b[u+1].deleteObject&&(f+=\"    argType\"+u+\".deleteObject(arg\"+u+\");\\n\");c.fg||(f+=\"    return retType.toWireType(destructors, rv);\\n\");h.push(f+\"};\\n\");a=Uc(h).apply(null,m);return jd(a)},M:function(a,b){a=dd(a);\nb=dd(b);return xc(a[b])},N:function(a){4<a&&(Yc[a].tf+=1)},hb:function(a,b){a=dd(a);b=dd(b);return a instanceof b},ib:function(a,b,c,f){a=dd(a);var h=ld[b];if(!h){h=\"\";for(var m=0;m<b;++m)h+=(0!==m?\", \":\"\")+\"arg\"+m;var q=\"return function emval_allocator_\"+b+\"(constructor, argTypes, args) {\\n\";for(m=0;m<b;++m)q+=\"var argType\"+m+\" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + \"+m+'], \"parameter '+m+'\");\\nvar arg'+m+\" = argType\"+m+\".readValueFromPointer(args);\\nargs += argType\"+m+\"['argPackAdvance'];\\n\";\nh=(new Function(\"requireRegisteredType\",\"Module\",\"__emval_register\",q+(\"var obj = new constructor(\"+h+\");\\nreturn __emval_register(obj);\\n}\\n\")))(ad,r,xc);ld[b]=h}return h(a,c,f)},ra:function(){return xc([])},Ca:function(a){return xc(fd(a))},lb:function(){return xc({})},gb:function(a){a=dd(a);return!a},mb:function(a){Jb(Yc[a].value);Zc(a)},u:function(a,b,c){a=dd(a);b=dd(b);c=dd(c);a[b]=c},t:function(a,b){a=ad(a,\"_emval_take_value\");a=a.readValueFromPointer(b);return xc(a)},d:function(){Ka()},rb:function(a,\nb){if(0===a)a=Date.now();else if(1===a||4===a)a=md();else return Q[je()>>2]=28,-1;Q[b>>2]=a/1E3|0;Q[b+4>>2]=a%1E3*1E6|0;return 0},Yc:function(a){W.activeTexture(a)},Zc:function(a,b){W.attachShader(sd[a],wd[b])},_c:function(a,b,c){W.bindAttribLocation(sd[a],b,Wa(c))},$c:function(a,b){35051==a?W.qf=b:35052==a&&(W.Je=b);W.bindBuffer(a,rd[b])},$b:function(a,b){W.bindFramebuffer(a,td[b])},ac:function(a,b){W.bindRenderbuffer(a,ud[b])},Nb:function(a,b){W.bindSampler(a,yd[b])},ad:function(a,b){W.bindTexture(a,\nvd[b])},uc:function(a){W.bindVertexArray(xd[a])},xc:function(a){W.bindVertexArray(xd[a])},bd:function(a,b,c,f){W.blendColor(a,b,c,f)},cd:function(a){W.blendEquation(a)},dd:function(a,b){W.blendFunc(a,b)},Ub:function(a,b,c,f,h,m,q,u,y,w){W.blitFramebuffer(a,b,c,f,h,m,q,u,y,w)},ed:function(a,b,c,f){2<=v.version?c?W.bufferData(a,H,f,c,b):W.bufferData(a,b,f):W.bufferData(a,c?H.subarray(c,c+b):b,f)},Z:function(a,b,c,f){2<=v.version?W.bufferSubData(a,b,H,f,c):W.bufferSubData(a,b,H.subarray(f,f+c))},bc:function(a){return W.checkFramebufferStatus(a)},\n_:function(a){W.clear(a)},$:function(a,b,c,f){W.clearColor(a,b,c,f)},aa:function(a){W.clearStencil(a)},db:function(a,b,c,f){return W.clientWaitSync(zd[a],b,(c>>>0)+4294967296*f)},ba:function(a,b,c,f){W.colorMask(!!a,!!b,!!c,!!f)},ca:function(a){W.compileShader(wd[a])},da:function(a,b,c,f,h,m,q,u){2<=v.version?W.Je?W.compressedTexImage2D(a,b,c,f,h,m,q,u):W.compressedTexImage2D(a,b,c,f,h,m,H,u,q):W.compressedTexImage2D(a,b,c,f,h,m,u?H.subarray(u,u+q):null)},ea:function(a,b,c,f,h,m,q,u,y){2<=v.version?\nW.Je?W.compressedTexSubImage2D(a,b,c,f,h,m,q,u,y):W.compressedTexSubImage2D(a,b,c,f,h,m,q,H,y,u):W.compressedTexSubImage2D(a,b,c,f,h,m,q,y?H.subarray(y,y+u):null)},fa:function(a,b,c,f,h,m,q,u){W.copyTexSubImage2D(a,b,c,f,h,m,q,u)},ga:function(){var a=Fd(sd),b=W.createProgram();b.name=a;b.ef=b.cf=b.df=0;b.uf=1;sd[a]=b;return a},ha:function(a){var b=Fd(wd);wd[b]=W.createShader(a);return b},ia:function(a){W.cullFace(a)},ja:function(a,b){for(var c=0;c<a;c++){var f=Q[b+4*c>>2],h=rd[f];h&&(W.deleteBuffer(h),\nh.name=0,rd[f]=null,f==W.qf&&(W.qf=0),f==W.Je&&(W.Je=0))}},cc:function(a,b){for(var c=0;c<a;++c){var f=Q[b+4*c>>2],h=td[f];h&&(W.deleteFramebuffer(h),h.name=0,td[f]=null)}},ka:function(a){if(a){var b=sd[a];b?(W.deleteProgram(b),b.name=0,sd[a]=null):Dd(1281)}},dc:function(a,b){for(var c=0;c<a;c++){var f=Q[b+4*c>>2],h=ud[f];h&&(W.deleteRenderbuffer(h),h.name=0,ud[f]=null)}},Ob:function(a,b){for(var c=0;c<a;c++){var f=Q[b+4*c>>2],h=yd[f];h&&(W.deleteSampler(h),h.name=0,yd[f]=null)}},la:function(a){if(a){var b=\nwd[a];b?(W.deleteShader(b),wd[a]=null):Dd(1281)}},Wb:function(a){if(a){var b=zd[a];b?(W.deleteSync(b),b.name=0,zd[a]=null):Dd(1281)}},ma:function(a,b){for(var c=0;c<a;c++){var f=Q[b+4*c>>2],h=vd[f];h&&(W.deleteTexture(h),h.name=0,vd[f]=null)}},vc:function(a,b){for(var c=0;c<a;c++){var f=Q[b+4*c>>2];W.deleteVertexArray(xd[f]);xd[f]=null}},yc:function(a,b){for(var c=0;c<a;c++){var f=Q[b+4*c>>2];W.deleteVertexArray(xd[f]);xd[f]=null}},na:function(a){W.depthMask(!!a)},oa:function(a){W.disable(a)},pa:function(a){W.disableVertexAttribArray(a)},\nqa:function(a,b,c){W.drawArrays(a,b,c)},sc:function(a,b,c,f){W.drawArraysInstanced(a,b,c,f)},qc:function(a,b,c,f,h){W.zf.drawArraysInstancedBaseInstanceWEBGL(a,b,c,f,h)},oc:function(a,b){for(var c=Kd[a],f=0;f<a;f++)c[f]=Q[b+4*f>>2];W.drawBuffers(c)},sa:function(a,b,c,f){W.drawElements(a,b,c,f)},tc:function(a,b,c,f,h){W.drawElementsInstanced(a,b,c,f,h)},rc:function(a,b,c,f,h,m,q){W.zf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(a,b,c,f,h,m,q)},ic:function(a,b,c,f,h,m){W.drawElements(a,f,h,m)},\nta:function(a){W.enable(a)},ua:function(a){W.enableVertexAttribArray(a)},Sb:function(a,b){return(a=W.fenceSync(a,b))?(b=Fd(zd),a.name=b,zd[b]=a,b):0},va:function(){W.finish()},wa:function(){W.flush()},ec:function(a,b,c,f){W.framebufferRenderbuffer(a,b,c,ud[f])},fc:function(a,b,c,f,h){W.framebufferTexture2D(a,b,c,vd[f],h)},xa:function(a){W.frontFace(a)},ya:function(a,b){Ld(a,b,\"createBuffer\",rd)},gc:function(a,b){Ld(a,b,\"createFramebuffer\",td)},hc:function(a,b){Ld(a,b,\"createRenderbuffer\",ud)},Pb:function(a,\nb){Ld(a,b,\"createSampler\",yd)},za:function(a,b){Ld(a,b,\"createTexture\",vd)},wc:function(a,b){Ld(a,b,\"createVertexArray\",xd)},zc:function(a,b){Ld(a,b,\"createVertexArray\",xd)},Xb:function(a){W.generateMipmap(a)},Aa:function(a,b,c){c?Q[c>>2]=W.getBufferParameter(a,b):Dd(1281)},Ba:function(){var a=W.getError()||Ed;Ed=0;return a},Yb:function(a,b,c,f){a=W.getFramebufferAttachmentParameter(a,b,c);if(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)a=a.name|0;Q[f>>2]=a},bb:function(a,b){Md(a,b)},\nDa:function(a,b,c,f){a=W.getProgramInfoLog(sd[a]);null===a&&(a=\"(unknown error)\");b=0<b&&f?oa(a,H,f,b):0;c&&(Q[c>>2]=b)},Ea:function(a,b,c){if(c)if(a>=qd)Dd(1281);else if(a=sd[a],35716==b)a=W.getProgramInfoLog(a),null===a&&(a=\"(unknown error)\"),Q[c>>2]=a.length+1;else if(35719==b){if(!a.ef)for(b=0;b<W.getProgramParameter(a,35718);++b)a.ef=Math.max(a.ef,W.getActiveUniform(a,b).name.length+1);Q[c>>2]=a.ef}else if(35722==b){if(!a.cf)for(b=0;b<W.getProgramParameter(a,35721);++b)a.cf=Math.max(a.cf,W.getActiveAttrib(a,\nb).name.length+1);Q[c>>2]=a.cf}else if(35381==b){if(!a.df)for(b=0;b<W.getProgramParameter(a,35382);++b)a.df=Math.max(a.df,W.getActiveUniformBlockName(a,b).length+1);Q[c>>2]=a.df}else Q[c>>2]=W.getProgramParameter(a,b);else Dd(1281)},Zb:function(a,b,c){c?Q[c>>2]=W.getRenderbufferParameter(a,b):Dd(1281)},Fa:function(a,b,c,f){a=W.getShaderInfoLog(wd[a]);null===a&&(a=\"(unknown error)\");b=0<b&&f?oa(a,H,f,b):0;c&&(Q[c>>2]=b)},Kb:function(a,b,c,f){a=W.getShaderPrecisionFormat(a,b);Q[c>>2]=a.rangeMin;Q[c+\n4>>2]=a.rangeMax;Q[f>>2]=a.precision},Ga:function(a,b,c){c?35716==b?(a=W.getShaderInfoLog(wd[a]),null===a&&(a=\"(unknown error)\"),Q[c>>2]=a?a.length+1:0):35720==b?(a=W.getShaderSource(wd[a]),Q[c>>2]=a?a.length+1:0):Q[c>>2]=W.getShaderParameter(wd[a],b):Dd(1281)},J:function(a){var b=Ad[a];if(!b){switch(a){case 7939:b=W.getSupportedExtensions()||[];b=b.concat(b.map(function(f){return\"GL_\"+f}));b=Nd(b.join(\" \"));break;case 7936:case 7937:case 37445:case 37446:(b=W.getParameter(a))||Dd(1280);b=b&&Nd(b);\nbreak;case 7938:b=W.getParameter(7938);b=2<=v.version?\"OpenGL ES 3.0 (\"+b+\")\":\"OpenGL ES 2.0 (\"+b+\")\";b=Nd(b);break;case 35724:b=W.getParameter(35724);var c=b.match(/^WebGL GLSL ES ([0-9]\\.[0-9][0-9]?)(?:$| .*)/);null!==c&&(3==c[1].length&&(c[1]+=\"0\"),b=\"OpenGL ES GLSL ES \"+c[1]+\" (\"+b+\")\");b=Nd(b);break;default:Dd(1280)}Ad[a]=b}return b},cb:function(a,b){if(2>v.version)return Dd(1282),0;var c=Bd[a];if(c)return 0>b||b>=c.length?(Dd(1281),0):c[b];switch(a){case 7939:return c=W.getSupportedExtensions()||\n[],c=c.concat(c.map(function(f){return\"GL_\"+f})),c=c.map(function(f){return Nd(f)}),c=Bd[a]=c,0>b||b>=c.length?(Dd(1281),0):c[b];default:return Dd(1280),0}},Ha:function(a,b){function c(A){return\"]\"==A.slice(-1)&&A.lastIndexOf(\"[\")}b=Wa(b);a=sd[a];var f=a.jf,h=a.Hg,m,q=0,u=b,y=c(b);if(!f)for(a.jf=f={},a.Ff={},m=0;m<W.getProgramParameter(a,35718);++m){var w=W.getActiveUniform(a,m);var I=w.name;w=w.size;var K=c(I);K=0<K?I.slice(0,K):I;var P=a.uf;a.uf+=w;h[K]=[w,P];for(I=0;I<w;++I)f[P]=I,a.Ff[P++]=K}0<\ny&&(q=parseInt(b.slice(y+1))>>>0,u=b.slice(0,y));return(h=h[u])&&q<h[0]&&(q+=h[1],f[q]=f[q]||W.getUniformLocation(a,b))?q:-1},Lb:function(a,b,c){for(var f=Kd[b],h=0;h<b;h++)f[h]=Q[c+4*h>>2];W.invalidateFramebuffer(a,f)},Mb:function(a,b,c,f,h,m,q){for(var u=Kd[b],y=0;y<b;y++)u[y]=Q[c+4*y>>2];W.invalidateSubFramebuffer(a,u,f,h,m,q)},Tb:function(a){return W.isSync(zd[a])},Ia:function(a){return(a=vd[a])?W.isTexture(a):0},Ja:function(a){W.lineWidth(a)},Ka:function(a){a=sd[a];W.linkProgram(a);a.jf=0;a.Hg=\n{}},mc:function(a,b,c,f,h,m){W.Df.multiDrawArraysInstancedBaseInstanceWEBGL(a,Q,b>>2,Q,c>>2,Q,f>>2,lb,h>>2,m)},nc:function(a,b,c,f,h,m,q,u){W.Df.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(a,Q,b>>2,c,Q,f>>2,Q,h>>2,Q,m>>2,lb,q>>2,u)},La:function(a,b){3317==a&&(Cd=b);W.pixelStorei(a,b)},pc:function(a){W.readBuffer(a)},Ma:function(a,b,c,f,h,m,q){if(2<=v.version)if(W.qf)W.readPixels(a,b,c,f,h,m,q);else{var u=Pd(m);W.readPixels(a,b,c,f,h,m,u,q>>31-Math.clz32(u.BYTES_PER_ELEMENT))}else(q=Qd(m,\nh,c,f,q))?W.readPixels(a,b,c,f,h,m,q):Dd(1280)},_b:function(a,b,c,f){W.renderbufferStorage(a,b,c,f)},Vb:function(a,b,c,f,h){W.renderbufferStorageMultisample(a,b,c,f,h)},Qb:function(a,b,c){W.samplerParameteri(yd[a],b,c)},Rb:function(a,b,c){W.samplerParameteri(yd[a],b,Q[c>>2])},Na:function(a,b,c,f){W.scissor(a,b,c,f)},Oa:function(a,b,c,f){for(var h=\"\",m=0;m<b;++m){var q=f?Q[f+4*m>>2]:-1;h+=Wa(Q[c+4*m>>2],0>q?void 0:q)}W.shaderSource(wd[a],h)},Pa:function(a,b,c){W.stencilFunc(a,b,c)},Qa:function(a,b,\nc,f){W.stencilFuncSeparate(a,b,c,f)},Ra:function(a){W.stencilMask(a)},Sa:function(a,b){W.stencilMaskSeparate(a,b)},Ta:function(a,b,c){W.stencilOp(a,b,c)},Ua:function(a,b,c,f){W.stencilOpSeparate(a,b,c,f)},Va:function(a,b,c,f,h,m,q,u,y){if(2<=v.version)if(W.Je)W.texImage2D(a,b,c,f,h,m,q,u,y);else if(y){var w=Pd(u);W.texImage2D(a,b,c,f,h,m,q,u,w,y>>31-Math.clz32(w.BYTES_PER_ELEMENT))}else W.texImage2D(a,b,c,f,h,m,q,u,null);else W.texImage2D(a,b,c,f,h,m,q,u,y?Qd(u,q,f,h,y):null)},Wa:function(a,b,c){W.texParameterf(a,\nb,c)},Xa:function(a,b,c){W.texParameterf(a,b,U[c>>2])},Ya:function(a,b,c){W.texParameteri(a,b,c)},Za:function(a,b,c){W.texParameteri(a,b,Q[c>>2])},jc:function(a,b,c,f,h){W.texStorage2D(a,b,c,f,h)},_a:function(a,b,c,f,h,m,q,u,y){if(2<=v.version)if(W.Je)W.texSubImage2D(a,b,c,f,h,m,q,u,y);else if(y){var w=Pd(u);W.texSubImage2D(a,b,c,f,h,m,q,u,w,y>>31-Math.clz32(w.BYTES_PER_ELEMENT))}else W.texSubImage2D(a,b,c,f,h,m,q,u,null);else w=null,y&&(w=Qd(u,q,h,m,y)),W.texSubImage2D(a,b,c,f,h,m,q,u,w)},$a:function(a,\nb){W.uniform1f(Z(a),b)},ab:function(a,b,c){if(2<=v.version)W.uniform1fv(Z(a),U,c>>2,b);else{if(288>=b)for(var f=Rd[b-1],h=0;h<b;++h)f[h]=U[c+4*h>>2];else f=U.subarray(c>>2,c+4*b>>2);W.uniform1fv(Z(a),f)}},Uc:function(a,b){W.uniform1i(Z(a),b)},Vc:function(a,b,c){if(2<=v.version)W.uniform1iv(Z(a),Q,c>>2,b);else{if(288>=b)for(var f=Sd[b-1],h=0;h<b;++h)f[h]=Q[c+4*h>>2];else f=Q.subarray(c>>2,c+4*b>>2);W.uniform1iv(Z(a),f)}},Wc:function(a,b,c){W.uniform2f(Z(a),b,c)},Xc:function(a,b,c){if(2<=v.version)W.uniform2fv(Z(a),\nU,c>>2,2*b);else{if(144>=b)for(var f=Rd[2*b-1],h=0;h<2*b;h+=2)f[h]=U[c+4*h>>2],f[h+1]=U[c+(4*h+4)>>2];else f=U.subarray(c>>2,c+8*b>>2);W.uniform2fv(Z(a),f)}},Tc:function(a,b,c){W.uniform2i(Z(a),b,c)},Sc:function(a,b,c){if(2<=v.version)W.uniform2iv(Z(a),Q,c>>2,2*b);else{if(144>=b)for(var f=Sd[2*b-1],h=0;h<2*b;h+=2)f[h]=Q[c+4*h>>2],f[h+1]=Q[c+(4*h+4)>>2];else f=Q.subarray(c>>2,c+8*b>>2);W.uniform2iv(Z(a),f)}},Rc:function(a,b,c,f){W.uniform3f(Z(a),b,c,f)},Qc:function(a,b,c){if(2<=v.version)W.uniform3fv(Z(a),\nU,c>>2,3*b);else{if(96>=b)for(var f=Rd[3*b-1],h=0;h<3*b;h+=3)f[h]=U[c+4*h>>2],f[h+1]=U[c+(4*h+4)>>2],f[h+2]=U[c+(4*h+8)>>2];else f=U.subarray(c>>2,c+12*b>>2);W.uniform3fv(Z(a),f)}},Pc:function(a,b,c,f){W.uniform3i(Z(a),b,c,f)},Oc:function(a,b,c){if(2<=v.version)W.uniform3iv(Z(a),Q,c>>2,3*b);else{if(96>=b)for(var f=Sd[3*b-1],h=0;h<3*b;h+=3)f[h]=Q[c+4*h>>2],f[h+1]=Q[c+(4*h+4)>>2],f[h+2]=Q[c+(4*h+8)>>2];else f=Q.subarray(c>>2,c+12*b>>2);W.uniform3iv(Z(a),f)}},Nc:function(a,b,c,f,h){W.uniform4f(Z(a),\nb,c,f,h)},Mc:function(a,b,c){if(2<=v.version)W.uniform4fv(Z(a),U,c>>2,4*b);else{if(72>=b){var f=Rd[4*b-1],h=U;c>>=2;for(var m=0;m<4*b;m+=4){var q=c+m;f[m]=h[q];f[m+1]=h[q+1];f[m+2]=h[q+2];f[m+3]=h[q+3]}}else f=U.subarray(c>>2,c+16*b>>2);W.uniform4fv(Z(a),f)}},Ac:function(a,b,c,f,h){W.uniform4i(Z(a),b,c,f,h)},Bc:function(a,b,c){if(2<=v.version)W.uniform4iv(Z(a),Q,c>>2,4*b);else{if(72>=b)for(var f=Sd[4*b-1],h=0;h<4*b;h+=4)f[h]=Q[c+4*h>>2],f[h+1]=Q[c+(4*h+4)>>2],f[h+2]=Q[c+(4*h+8)>>2],f[h+3]=Q[c+(4*\nh+12)>>2];else f=Q.subarray(c>>2,c+16*b>>2);W.uniform4iv(Z(a),f)}},Cc:function(a,b,c,f){if(2<=v.version)W.uniformMatrix2fv(Z(a),!!c,U,f>>2,4*b);else{if(72>=b)for(var h=Rd[4*b-1],m=0;m<4*b;m+=4)h[m]=U[f+4*m>>2],h[m+1]=U[f+(4*m+4)>>2],h[m+2]=U[f+(4*m+8)>>2],h[m+3]=U[f+(4*m+12)>>2];else h=U.subarray(f>>2,f+16*b>>2);W.uniformMatrix2fv(Z(a),!!c,h)}},Dc:function(a,b,c,f){if(2<=v.version)W.uniformMatrix3fv(Z(a),!!c,U,f>>2,9*b);else{if(32>=b)for(var h=Rd[9*b-1],m=0;m<9*b;m+=9)h[m]=U[f+4*m>>2],h[m+1]=U[f+\n(4*m+4)>>2],h[m+2]=U[f+(4*m+8)>>2],h[m+3]=U[f+(4*m+12)>>2],h[m+4]=U[f+(4*m+16)>>2],h[m+5]=U[f+(4*m+20)>>2],h[m+6]=U[f+(4*m+24)>>2],h[m+7]=U[f+(4*m+28)>>2],h[m+8]=U[f+(4*m+32)>>2];else h=U.subarray(f>>2,f+36*b>>2);W.uniformMatrix3fv(Z(a),!!c,h)}},Ec:function(a,b,c,f){if(2<=v.version)W.uniformMatrix4fv(Z(a),!!c,U,f>>2,16*b);else{if(18>=b){var h=Rd[16*b-1],m=U;f>>=2;for(var q=0;q<16*b;q+=16){var u=f+q;h[q]=m[u];h[q+1]=m[u+1];h[q+2]=m[u+2];h[q+3]=m[u+3];h[q+4]=m[u+4];h[q+5]=m[u+5];h[q+6]=m[u+6];h[q+7]=\nm[u+7];h[q+8]=m[u+8];h[q+9]=m[u+9];h[q+10]=m[u+10];h[q+11]=m[u+11];h[q+12]=m[u+12];h[q+13]=m[u+13];h[q+14]=m[u+14];h[q+15]=m[u+15]}}else h=U.subarray(f>>2,f+64*b>>2);W.uniformMatrix4fv(Z(a),!!c,h)}},Fc:function(a){a=sd[a];W.useProgram(a);W.Of=a},Gc:function(a,b){W.vertexAttrib1f(a,b)},Hc:function(a,b){W.vertexAttrib2f(a,U[b>>2],U[b+4>>2])},Ic:function(a,b){W.vertexAttrib3f(a,U[b>>2],U[b+4>>2],U[b+8>>2])},Jc:function(a,b){W.vertexAttrib4f(a,U[b>>2],U[b+4>>2],U[b+8>>2],U[b+12>>2])},kc:function(a,b){W.vertexAttribDivisor(a,\nb)},lc:function(a,b,c,f,h){W.vertexAttribIPointer(a,b,c,f,h)},Kc:function(a,b,c,f,h,m){W.vertexAttribPointer(a,b,c,!!f,h,m)},Lc:function(a,b,c,f){W.viewport(a,b,c,f)},eb:function(a,b,c,f){W.waitSync(zd[a],b,(c>>>0)+4294967296*f)},e:function(a,b){ke(a,b||1);throw\"longjmp\";},qb:function(a){var b=H.length;a>>>=0;if(2147483648<a)return!1;for(var c=1;4>=c;c*=2){var f=b*(1+.2/c);f=Math.min(f,a+100663296);f=Math.max(a,f);0<f%65536&&(f+=65536-f%65536);a:{try{Ra.grow(Math.min(2147483648,f)-fb.byteLength+65535>>>\n16);nb();var h=1;break a}catch(m){}h=void 0}if(h)return!0}return!1},fd:function(){return v?v.bg:0},Y:function(a){return ja(a)?0:-5},ub:function(a,b){var c=0;Ud().forEach(function(f,h){var m=b+c;h=Q[a+4*h>>2]=m;for(m=0;m<f.length;++m)gb[h++>>0]=f.charCodeAt(m);gb[h>>0]=0;c+=f.length+1});return 0},vb:function(a,b){var c=Ud();Q[a>>2]=c.length;var f=0;c.forEach(function(h){f+=h.length+1});Q[b>>2]=f;return 0},Fb:function(a){if(!noExitRuntime){if(r.onExit)r.onExit(a);Sa=!0}xa(a,new Ja(a))},F:function(){return 0},\ntb:function(a,b){a=1==a||2==a?2:Ka();gb[b>>0]=a;return 0},ob:function(a,b,c,f,h,m){a=Hb.Yf(a);b=Hb.Pf(a,b,c,f);Q[m>>2]=b;return 0},wb:function(a,b,c,f){a=Hb.Yf(a);b=Hb.Pf(a,b,c);Q[f>>2]=b;return 0},nb:function(){},O:function(a,b,c,f){for(var h=0,m=0;m<c;m++){for(var q=Q[b+8*m>>2],u=Q[b+(8*m+4)>>2],y=0;y<u;y++){var w=H[q+y],I=Gb[a];0===w||10===w?((1===a?La:Oa)(Va(I,0)),I.length=0):I.push(w)}h+=u}Q[f>>2]=h;return 0},a:function(){return Pa},gd:function(a,b){W.bindFramebuffer(a,td[b])},fb:function(a){W.clear(a)},\nCb:function(a,b,c,f){W.clearColor(a,b,c,f)},kb:function(a){W.clearStencil(a)},I:function(a,b){Md(a,b)},i:le,o:me,g:ne,D:oe,Jb:pe,W:qe,V:re,U:se,k:te,r:ue,h:ve,q:we,Ib:xe,Gb:ye,Hb:ze,b:function(a){Pa=a},sb:function(a,b,c,f){return ae(a,b,c,f)}};\n(function(){function a(h){r.asm=h.exports;Ra=r.asm.hd;nb();ob=r.asm.kd;qb.unshift(r.asm.id);tb--;r.monitorRunDependencies&&r.monitorRunDependencies(tb);0==tb&&(null!==ub&&(clearInterval(ub),ub=null),vb&&(h=vb,vb=null,h()))}function b(h){a(h.instance)}function c(h){return Ab().then(function(m){return WebAssembly.instantiate(m,f)}).then(h,function(m){Oa(\"failed to asynchronously prepare wasm: \"+m);Ka(m)})}var f={a:Ae};tb++;r.monitorRunDependencies&&r.monitorRunDependencies(tb);if(r.instantiateWasm)try{return r.instantiateWasm(f,\na)}catch(h){return Oa(\"Module.instantiateWasm callback failed with error: \"+h),!1}(function(){return Qa||\"function\"!==typeof WebAssembly.instantiateStreaming||wb()||xb.startsWith(\"file://\")||\"function\"!==typeof fetch?c(b):fetch(xb,{credentials:\"same-origin\"}).then(function(h){return WebAssembly.instantiateStreaming(h,f).then(b,function(m){Oa(\"wasm streaming compile failed: \"+m);Oa(\"falling back to ArrayBuffer instantiation\");return c(b)})})})().catch(fa);return{}})();\nr.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.id).apply(null,arguments)};var ie=r._memset=function(){return(ie=r._memset=r.asm.jd).apply(null,arguments)},Od=r._malloc=function(){return(Od=r._malloc=r.asm.ld).apply(null,arguments)},Kc=r._free=function(){return(Kc=r._free=r.asm.md).apply(null,arguments)},je=r.___errno_location=function(){return(je=r.___errno_location=r.asm.nd).apply(null,arguments)},Jc=r.___getTypeName=function(){return(Jc=r.___getTypeName=r.asm.od).apply(null,arguments)};\nr.___embind_register_native_and_builtin_types=function(){return(r.___embind_register_native_and_builtin_types=r.asm.pd).apply(null,arguments)};var Be=r.stackSave=function(){return(Be=r.stackSave=r.asm.qd).apply(null,arguments)},Ce=r.stackRestore=function(){return(Ce=r.stackRestore=r.asm.rd).apply(null,arguments)},ke=r._setThrew=function(){return(ke=r._setThrew=r.asm.sd).apply(null,arguments)},he=r._memalign=function(){return(he=r._memalign=r.asm.td).apply(null,arguments)};\nr.dynCall_ji=function(){return(r.dynCall_ji=r.asm.ud).apply(null,arguments)};r.dynCall_iiji=function(){return(r.dynCall_iiji=r.asm.vd).apply(null,arguments)};r.dynCall_iijjiii=function(){return(r.dynCall_iijjiii=r.asm.wd).apply(null,arguments)};r.dynCall_iij=function(){return(r.dynCall_iij=r.asm.xd).apply(null,arguments)};r.dynCall_vijjjii=function(){return(r.dynCall_vijjjii=r.asm.yd).apply(null,arguments)};r.dynCall_viji=function(){return(r.dynCall_viji=r.asm.zd).apply(null,arguments)};\nr.dynCall_vijiii=function(){return(r.dynCall_vijiii=r.asm.Ad).apply(null,arguments)};r.dynCall_viiiiij=function(){return(r.dynCall_viiiiij=r.asm.Bd).apply(null,arguments)};r.dynCall_viijii=function(){return(r.dynCall_viijii=r.asm.Cd).apply(null,arguments)};r.dynCall_jiiii=function(){return(r.dynCall_jiiii=r.asm.Dd).apply(null,arguments)};r.dynCall_jii=function(){return(r.dynCall_jii=r.asm.Ed).apply(null,arguments)};r.dynCall_iiij=function(){return(r.dynCall_iiij=r.asm.Fd).apply(null,arguments)};\nr.dynCall_iiiij=function(){return(r.dynCall_iiiij=r.asm.Gd).apply(null,arguments)};r.dynCall_viij=function(){return(r.dynCall_viij=r.asm.Hd).apply(null,arguments)};r.dynCall_viiij=function(){return(r.dynCall_viiij=r.asm.Id).apply(null,arguments)};r.dynCall_vij=function(){return(r.dynCall_vij=r.asm.Jd).apply(null,arguments)};r.dynCall_jiiiiii=function(){return(r.dynCall_jiiiiii=r.asm.Kd).apply(null,arguments)};r.dynCall_jiiiiji=function(){return(r.dynCall_jiiiiji=r.asm.Ld).apply(null,arguments)};\nr.dynCall_iijj=function(){return(r.dynCall_iijj=r.asm.Md).apply(null,arguments)};r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.Nd).apply(null,arguments)};r.dynCall_iiiiij=function(){return(r.dynCall_iiiiij=r.asm.Od).apply(null,arguments)};r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.Pd).apply(null,arguments)};r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.Qd).apply(null,arguments)};\nfunction le(a,b){var c=Be();try{return ob.get(a)(b)}catch(f){Ce(c);if(f!==f+0&&\"longjmp\"!==f)throw f;ke(1,0)}}function me(a,b,c){var f=Be();try{return ob.get(a)(b,c)}catch(h){Ce(f);if(h!==h+0&&\"longjmp\"!==h)throw h;ke(1,0)}}function ve(a,b,c,f){var h=Be();try{ob.get(a)(b,c,f)}catch(m){Ce(h);if(m!==m+0&&\"longjmp\"!==m)throw m;ke(1,0)}}function ne(a,b,c,f){var h=Be();try{return ob.get(a)(b,c,f)}catch(m){Ce(h);if(m!==m+0&&\"longjmp\"!==m)throw m;ke(1,0)}}\nfunction te(a,b){var c=Be();try{ob.get(a)(b)}catch(f){Ce(c);if(f!==f+0&&\"longjmp\"!==f)throw f;ke(1,0)}}function ue(a,b,c){var f=Be();try{ob.get(a)(b,c)}catch(h){Ce(f);if(h!==h+0&&\"longjmp\"!==h)throw h;ke(1,0)}}function pe(a,b,c,f,h,m){var q=Be();try{return ob.get(a)(b,c,f,h,m)}catch(u){Ce(q);if(u!==u+0&&\"longjmp\"!==u)throw u;ke(1,0)}}function we(a,b,c,f,h){var m=Be();try{ob.get(a)(b,c,f,h)}catch(q){Ce(m);if(q!==q+0&&\"longjmp\"!==q)throw q;ke(1,0)}}\nfunction qe(a,b,c,f,h,m,q){var u=Be();try{return ob.get(a)(b,c,f,h,m,q)}catch(y){Ce(u);if(y!==y+0&&\"longjmp\"!==y)throw y;ke(1,0)}}function oe(a,b,c,f,h){var m=Be();try{return ob.get(a)(b,c,f,h)}catch(q){Ce(m);if(q!==q+0&&\"longjmp\"!==q)throw q;ke(1,0)}}function xe(a,b,c,f,h,m){var q=Be();try{ob.get(a)(b,c,f,h,m)}catch(u){Ce(q);if(u!==u+0&&\"longjmp\"!==u)throw u;ke(1,0)}}\nfunction ze(a,b,c,f,h,m,q,u,y,w){var I=Be();try{ob.get(a)(b,c,f,h,m,q,u,y,w)}catch(K){Ce(I);if(K!==K+0&&\"longjmp\"!==K)throw K;ke(1,0)}}function ye(a,b,c,f,h,m,q){var u=Be();try{ob.get(a)(b,c,f,h,m,q)}catch(y){Ce(u);if(y!==y+0&&\"longjmp\"!==y)throw y;ke(1,0)}}function re(a,b,c,f,h,m,q,u,y,w){var I=Be();try{return ob.get(a)(b,c,f,h,m,q,u,y,w)}catch(K){Ce(I);if(K!==K+0&&\"longjmp\"!==K)throw K;ke(1,0)}}function se(a){var b=Be();try{ob.get(a)()}catch(c){Ce(b);if(c!==c+0&&\"longjmp\"!==c)throw c;ke(1,0)}}var De;\nfunction Ja(a){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+a+\")\";this.status=a}vb=function Ee(){De||Fe();De||(vb=Ee)};\nfunction Fe(){function a(){if(!De&&(De=!0,r.calledRun=!0,!Sa)){Bb(qb);da(r);if(r.onRuntimeInitialized)r.onRuntimeInitialized();if(r.postRun)for(\"function\"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var b=r.postRun.shift();rb.unshift(b)}Bb(rb)}}if(!(0<tb)){if(r.preRun)for(\"function\"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)sb();Bb(pb);0<tb||(r.setStatus?(r.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){r.setStatus(\"\")},1);a()},1)):a())}}\nr.run=Fe;if(r.preInit)for(\"function\"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();Fe();\n\n\n  return CanvasKitInit.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = CanvasKitInit;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return CanvasKitInit; });\nelse if (typeof exports === 'object')\n  exports[\"CanvasKitInit\"] = CanvasKitInit;\n","import JSZip from 'jszip';\nimport type Sketch from '@sketch-hq/sketch-file-format-ts';\n\nasync function readEntry<T>(zip: JSZip, name: string): Promise<T> {\n  const data = await zip.file(name)!.async('string');\n\n  return JSON.parse(data);\n}\n\nexport type FileMap = Record<string, ArrayBuffer>;\n\nasync function readFiles(zip: JSZip, directory: string = ''): Promise<FileMap> {\n  const files = await Promise.all(\n    Object.entries(zip.files)\n      .filter(([name]) => name.startsWith(directory))\n      .map(([name, file]) =>\n        file\n          .async('arraybuffer')\n          .then((data): [string, ArrayBuffer] => [name, data]),\n      ),\n  );\n\n  return Object.fromEntries(files);\n}\n\nexport type SketchFile = {\n  document: Sketch.Document;\n  meta: Sketch.Meta;\n  user: Sketch.User;\n  pages: Sketch.Page[];\n  images: FileMap;\n};\n\nexport async function decode(encoded: ArrayBuffer): Promise<SketchFile> {\n  const zip = await JSZip.loadAsync(encoded);\n\n  const [document, meta, user, images] = await Promise.all([\n    readEntry<Sketch.Document>(zip, 'document.json'),\n    readEntry<Sketch.Meta>(zip, 'meta.json'),\n    readEntry<Sketch.User>(zip, 'user.json'),\n    readFiles(zip, 'images/'),\n  ]);\n\n  const pages = await Promise.all(\n    document.pages.map((page) =>\n      readEntry<Sketch.Page>(zip, `${page._ref}.json`),\n    ),\n  );\n\n  return {\n    document,\n    meta,\n    user,\n    pages,\n    images,\n  };\n}\n\nexport async function encode(decoded: SketchFile): Promise<ArrayBuffer> {\n  const { document, meta, user, pages, images } = decoded;\n\n  const zip = new JSZip();\n\n  // We set the `document.pages` array before encoding. The app may not\n  // maintain this array properly, since once the pages are in-memory, we don't\n  // need to access it anymore. So we generate a new valid array here.\n  const normalizedDocument: Sketch.Document = {\n    ...document,\n    pages: pages.map((page) => ({\n      _class: 'MSJSONFileReference',\n      _ref_class: 'MSImmutablePage',\n      _ref: `pages/${page.do_objectID}`,\n    })),\n  };\n\n  zip.file('document.json', JSON.stringify(normalizedDocument));\n  zip.file('meta.json', JSON.stringify(meta));\n  zip.file('user.json', JSON.stringify(user));\n\n  pages.forEach((page) => {\n    zip.file(`pages/${page.do_objectID}.json`, JSON.stringify(page));\n  });\n\n  Object.entries(images).forEach(([name, data]) => {\n    zip.file(name, data);\n  });\n\n  return zip.generateAsync({\n    type: 'arraybuffer',\n    mimeType: 'application/zip',\n  });\n}\n","import { PlatformName } from './platform';\n\nexport function normalizeKeyName(name: string, platform: PlatformName): string {\n  const parts = name.split(/-(?!$)/);\n  let result = parts[parts.length - 1];\n  if (result === 'Space') result = ' ';\n  let alt, ctrl, shift, meta;\n  for (let i = 0; i < parts.length - 1; ++i) {\n    const mod = parts[i];\n    if (/^(cmd|meta|m)$/i.test(mod)) meta = true;\n    else if (/^a(lt)?$/i.test(mod)) alt = true;\n    else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;\n    else if (/^s(hift)?$/i.test(mod)) shift = true;\n    else if (/^mod$/i.test(mod)) {\n      if (platform === 'mac') meta = true;\n      else ctrl = true;\n    } else throw new Error('Unrecognized modifier name: ' + mod);\n  }\n  if (alt) result = 'Alt-' + result;\n  if (ctrl) result = 'Ctrl-' + result;\n  if (meta) result = 'Meta-' + result;\n  if (shift) result = 'Shift-' + result;\n  return result;\n}\n\nexport interface KeyModifiers {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function prependModifiers(\n  name: string,\n  event: KeyModifiers,\n  useShift: boolean,\n) {\n  if (event.altKey) name = 'Alt-' + name;\n  if (event.ctrlKey) name = 'Ctrl-' + name;\n  if (event.metaKey) name = 'Meta-' + name;\n  if (useShift !== false && event.shiftKey) name = 'Shift-' + name;\n  return name;\n}\n","import { base, keyName } from 'w3c-keyname';\nimport { KeyModifiers, normalizeKeyName, prependModifiers } from './names';\nimport { PlatformName } from './platform';\n\nexport type PlatformKeyboardShortcut = Partial<Record<PlatformName, string>>;\n\nexport function getPlatformShortcutName(\n  shortcut: PlatformKeyboardShortcut,\n  platformName: PlatformName,\n) {\n  const platformKey = shortcut[platformName] || shortcut.key;\n\n  return platformKey ? normalizeKeyName(platformKey, platformName) : undefined;\n}\n\nconst modifierKeyNames = new Set(['Alt', 'Control', 'Meta', 'Shift']);\n\nexport function getEventShortcutNames(\n  event: KeyboardEvent,\n  platformName: PlatformName,\n) {\n  const eventKeyName = keyName(event);\n  const isChar = eventKeyName.length === 1 && eventKeyName !== ' ';\n\n  const eventModifiers: KeyModifiers = {\n    altKey: event.altKey,\n    shiftKey: event.shiftKey,\n    ctrlKey: event.ctrlKey,\n    metaKey: event.metaKey,\n  };\n\n  const eventShortcutName = normalizeKeyName(\n    modifierKeyNames.has(eventKeyName)\n      ? eventKeyName\n      : prependModifiers(eventKeyName, eventModifiers, !isChar),\n    platformName,\n  );\n\n  let shortcutNames: string[] = [eventShortcutName];\n\n  const baseKeyName = base[event.keyCode];\n\n  if (isChar) {\n    let alternateShortcutName: string | undefined;\n\n    if (\n      // Holding these keys may change the key that gets entered,\n      // e.g. pressing \"Alt\" + \"a\" will enter \"\". However, we can look\n      // at the basename to get the actual key pressed.\n      (event.shiftKey || event.altKey || event.metaKey) &&\n      baseKeyName &&\n      baseKeyName !== eventShortcutName\n    ) {\n      alternateShortcutName = normalizeKeyName(\n        prependModifiers(baseKeyName, eventModifiers, true),\n        platformName,\n      );\n    } else if (event.shiftKey) {\n      // At this point, we've previously added a shortcut like \"@\",\n      // but we also want to add \"Shift+@\" for a more convenient API\n      alternateShortcutName = normalizeKeyName(\n        prependModifiers(eventShortcutName, eventModifiers, true),\n        platformName,\n      );\n    }\n\n    if (\n      alternateShortcutName &&\n      !shortcutNames.includes(alternateShortcutName)\n    ) {\n      shortcutNames.push(alternateShortcutName);\n    }\n  }\n\n  return shortcutNames;\n}\n","import { PlatformName } from './platform';\nimport { getPlatformShortcutName, PlatformKeyboardShortcut } from './shortcuts';\n\nexport type KeyCommand = () => void;\n\nexport type KeyMap = Record<string, KeyCommand>;\n\nexport function createKeyMap(\n  shortcuts: [string | PlatformKeyboardShortcut, KeyCommand][] | KeyMap,\n  platformName: PlatformName,\n): KeyMap {\n  const shortcutsArray = Array.isArray(shortcuts)\n    ? shortcuts\n    : Object.entries(shortcuts);\n\n  return Object.fromEntries(\n    shortcutsArray.flatMap(([key, command]) => {\n      const platformShortcutName = getPlatformShortcutName(\n        typeof key === 'string' ? { key } : key,\n        platformName,\n      );\n\n      return platformShortcutName\n        ? [[platformShortcutName, command] as const]\n        : [];\n    }),\n  );\n}\n","export type PlatformName = 'mac' | 'win' | 'linux' | 'key';\n\nexport const getCurrentPlatform = (navigator?: {\n  platform: string;\n}): PlatformName =>\n  typeof navigator === 'undefined'\n    ? 'key'\n    : /Mac/.test(navigator.platform)\n    ? 'mac'\n    : /Win/.test(navigator.platform)\n    ? 'win'\n    : /Linux|X11/.test(navigator.platform)\n    ? 'linux'\n    : 'key';\n","import { useEffect, useMemo, useRef } from 'react';\nimport { createKeyMap } from './keyMap';\nimport { getCurrentPlatform } from './platform';\nimport { getEventShortcutNames } from './shortcuts';\n\ntype KeyEventName = 'keydown' | 'keyup' | 'keypress';\n\ntype KeyMapDefinition = Parameters<typeof createKeyMap>[0];\n\nexport function useKeyboardShortcuts(shortcuts: KeyMapDefinition): void;\nexport function useKeyboardShortcuts(\n  eventName: KeyEventName,\n  shortcuts: KeyMapDefinition,\n): void;\nexport function useKeyboardShortcuts(\n  ...args: [KeyMapDefinition] | [KeyEventName, KeyMapDefinition]\n) {\n  const [eventName, shortcuts] =\n    args.length === 1 ? (['keydown', args[0]] as const) : args;\n\n  const platformName = getCurrentPlatform(navigator);\n\n  const keyMap = useMemo(() => createKeyMap(shortcuts, platformName), [\n    platformName,\n    shortcuts,\n  ]);\n\n  const keyMapRef = useRef(keyMap);\n\n  useEffect(() => {\n    keyMapRef.current = keyMap;\n  });\n\n  useEffect(() => {\n    const handler = (event: KeyboardEvent) => {\n      if (event.target instanceof HTMLInputElement) return;\n\n      const eventShortcutNames = getEventShortcutNames(event, platformName);\n\n      const matchingName = eventShortcutNames.find(\n        (name) => name in keyMapRef.current,\n      );\n\n      if (!matchingName) return;\n\n      event.preventDefault();\n      event.stopImmediatePropagation();\n\n      const command = keyMapRef.current[matchingName];\n\n      command();\n    };\n\n    document.addEventListener(eventName, handler, true);\n\n    return () => {\n      document.removeEventListener(eventName, handler, true);\n    };\n  }, [eventName, platformName]);\n}\n","import { DragEvent, memo, ReactNode, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { OffsetPoint } from '../containers/Canvas';\nimport { useFileDropTarget } from '../hooks/useFileDropTarget';\n\nexport type TypedFile<T> = File & { type: T };\n\nexport function isSupportedFile<T extends string>(\n  file: File,\n  supportedFileTypes: T[],\n): file is TypedFile<T> {\n  return supportedFileTypes.includes(file.type as T);\n}\n\ninterface Props<T extends string> {\n  children: ReactNode | ((isActive: boolean) => ReactNode);\n  onDropFile: (file: TypedFile<T>, event: OffsetPoint) => void;\n  supportedFileTypes: T[];\n}\n\nconst Container = styled.div(() => ({ display: 'flex', flex: 1 }));\n\nexport default memo(function ImageDropTarget<T extends string>({\n  children,\n  onDropFile,\n  supportedFileTypes,\n}: Props<T>) {\n  const handleImageFile = useCallback(\n    (e: DragEvent) => {\n      e.preventDefault();\n\n      if (!e.dataTransfer) return;\n\n      const file = e.dataTransfer.files[0];\n\n      if (!file) {\n        alert('Unable to read file');\n        return;\n      }\n\n      if (!isSupportedFile(file, supportedFileTypes)) {\n        alert(\n          `Files of type ${\n            file.type\n          } aren't supported. The following types are supported: ${supportedFileTypes.join(\n            ', ',\n          )}`,\n        );\n        return;\n      }\n\n      const offsetPoint = {\n        offsetX: e.nativeEvent.offsetX,\n        offsetY: e.nativeEvent.offsetY,\n      };\n\n      onDropFile(file, offsetPoint);\n    },\n    [onDropFile, supportedFileTypes],\n  );\n\n  const { dropTargetProps, isDropTargetActive } = useFileDropTarget(\n    handleImageFile,\n  );\n\n  return (\n    <Container {...dropTargetProps}>\n      {typeof children === 'function' ? children(isDropTargetActive) : children}\n    </Container>\n  );\n});\n","import { useCallback, useState, DragEvent } from 'react';\n\nexport function useFileDropTarget(dropEvent: (e: DragEvent) => void) {\n  const [isDropTargetActive, setIsDropTargetActive] = useState(false);\n\n  const handleDragEvent = useCallback((e: DragEvent, on?: boolean) => {\n    if (on !== undefined) setIsDropTargetActive(on);\n    e.preventDefault();\n  }, []);\n\n  const handleDropEvent = useCallback(\n    (e: DragEvent) => {\n      dropEvent(e);\n      setIsDropTargetActive(false);\n    },\n    [dropEvent, setIsDropTargetActive],\n  );\n\n  return {\n    dropTargetProps: {\n      onDragOver: handleDragEvent,\n      onDragEnter: (e: DragEvent) => handleDragEvent(e, true),\n      onDragLeave: (e: DragEvent) => handleDragEvent(e, false),\n      onDrop: handleDropEvent,\n    },\n    isDropTargetActive,\n  };\n}\n","import { useRef } from 'react';\nimport { isShallowEqual } from 'noya-utils';\n\n/**\n * Memoize an array using shallow comparison.\n */\nexport default function useShallowArray<T>(array: T[]) {\n  const ref = useRef(array);\n\n  if (!isShallowEqual(ref.current, array)) {\n    ref.current = array;\n  }\n\n  return ref.current;\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { createSectionedMenu, MenuItem } from 'noya-designsystem';\nimport { Layers } from 'noya-state';\nimport { useCallback, useMemo } from 'react';\nimport { useDispatch } from 'noya-app-state-context';\nimport useShallowArray from './useShallowArray';\n\nfunction isValidClippingMaskType(type: Sketch.AnyLayer['_class']): boolean {\n  switch (type) {\n    case 'bitmap':\n    case 'oval':\n    case 'polygon':\n    case 'rectangle':\n    case 'shapeGroup':\n    case 'shapePath':\n    case 'star':\n    case 'triangle':\n      return true;\n    case 'page':\n    case 'artboard':\n    case 'group':\n    case 'MSImmutableHotspotLayer':\n    case 'slice':\n    case 'symbolInstance':\n    case 'symbolMaster':\n    case 'text':\n      return false;\n  }\n}\n\nfunction isValidMaskChainBreakerType(type: Sketch.AnyLayer['_class']): boolean {\n  switch (type) {\n    case 'bitmap':\n    case 'group':\n    case 'oval':\n    case 'polygon':\n    case 'rectangle':\n    case 'shapeGroup':\n    case 'shapePath':\n    case 'star':\n    case 'symbolInstance':\n    case 'text':\n    case 'triangle':\n      return true;\n    case 'page':\n    case 'artboard':\n    case 'MSImmutableHotspotLayer':\n    case 'slice':\n    case 'symbolMaster':\n      return false;\n  }\n}\n\nexport type LayerMenuItemType =\n  | 'selectAll'\n  | 'duplicate'\n  | 'group'\n  | 'ungroup'\n  | 'delete'\n  | 'createSymbol'\n  | 'detachSymbol'\n  | 'useAsMask'\n  | 'ignoreMasks'\n  | 'isAlphaMask'\n  | 'lock'\n  | 'unlock'\n  | 'hide'\n  | 'show';\n\nexport default function useLayerMenu(layers: Sketch.AnyLayer[]) {\n  const dispatch = useDispatch();\n\n  const hasSelectedLayers = layers.length > 0;\n\n  const canUngroup = layers.length === 1 && Layers.isGroup(layers[0]);\n\n  const canDetach = layers.length === 1 && Layers.isSymbolInstance(layers[0]);\n\n  const canBeMask = layers.every((layer) =>\n    isValidClippingMaskType(layer._class),\n  );\n\n  const canBeMaskChainBreaker = layers.every((layer) =>\n    isValidMaskChainBreakerType(layer._class),\n  );\n\n  const canBeSymbol = useMemo(() => {\n    return (\n      layers.length >= 1 &&\n      !layers.some(Layers.isSymbolMaster) &&\n      (layers.every(Layers.isArtboard) ||\n        layers.every((item) => !Layers.isArtboard(item)))\n    );\n  }, [layers]);\n\n  const shouldAskForSymbolName =\n    layers.length > 1 && !Layers.isArtboard(layers[0]);\n\n  const newUseAsMaskValue = !layers.every((item) => item.hasClippingMask);\n\n  const newIsAlphaMaskValue = !layers.every(\n    (item) => item.clippingMaskMode === 1,\n  );\n\n  const newIgnoreMasksValue = !layers.every(\n    (item) => item.shouldBreakMaskChain,\n  );\n\n  const canUnlock = layers.some((layer) => layer.isLocked);\n\n  const canLock =\n    !canUnlock &&\n    layers.every((layer) => !Layers.isSymbolMasterOrArtboard(layer));\n\n  const canShow = layers.some((item) => !item.isVisible);\n\n  const menuItems: MenuItem<LayerMenuItemType>[] = useMemo(\n    () =>\n      hasSelectedLayers\n        ? createSectionedMenu(\n            [\n              canBeSymbol && {\n                value: 'createSymbol',\n                title: 'Create Symbol',\n              },\n              canDetach && {\n                value: 'detachSymbol',\n                title: 'Detach Symbol',\n              },\n            ],\n            [\n              { value: 'group', title: 'Group' },\n              canUngroup && { value: 'ungroup', title: 'Ungroup' },\n            ],\n            [{ value: 'duplicate', title: 'Duplicate' }],\n            [{ value: 'delete', title: 'Delete' }],\n            [\n              canUnlock && { value: 'unlock', title: 'Unlock' },\n              canLock && { value: 'lock', title: 'Lock' },\n              canShow && { value: 'show', title: 'Show' },\n              !canShow && { value: 'hide', title: 'Hide' },\n            ],\n            [\n              canBeMask && {\n                value: 'useAsMask',\n                title: 'Use as mask',\n                checked: !newUseAsMaskValue,\n              },\n              canBeMask && {\n                value: 'isAlphaMask',\n                title: 'Mask using alpha',\n                checked: !newIsAlphaMaskValue,\n              },\n              canBeMaskChainBreaker && {\n                value: 'ignoreMasks',\n                title: 'Ignore masks',\n                checked: !newIgnoreMasksValue,\n              },\n            ],\n          )\n        : [{ value: 'selectAll', title: 'Select All' }],\n    [\n      canBeMask,\n      canBeMaskChainBreaker,\n      canBeSymbol,\n      canDetach,\n      canLock,\n      canShow,\n      canUngroup,\n      canUnlock,\n      hasSelectedLayers,\n      newIsAlphaMaskValue,\n      newIgnoreMasksValue,\n      newUseAsMaskValue,\n    ],\n  );\n\n  const selectedLayerIds = useShallowArray(\n    layers.map((layer) => layer.do_objectID),\n  );\n\n  const onSelectMenuItem = useCallback(\n    (value: LayerMenuItemType) => {\n      switch (value) {\n        case 'selectAll':\n          dispatch('selectAllLayers');\n          return;\n        case 'delete':\n          dispatch('deleteLayer', selectedLayerIds);\n          return;\n        case 'duplicate':\n          dispatch('duplicateLayer', selectedLayerIds);\n          return;\n        case 'group': {\n          const name = prompt('New Group Name');\n\n          if (!name) return;\n\n          dispatch('groupLayer', selectedLayerIds, name);\n          return;\n        }\n        case 'ungroup':\n          dispatch('ungroupLayer', selectedLayerIds);\n          return;\n        case 'createSymbol': {\n          const name = shouldAskForSymbolName ? prompt('New Symbol Name') : ' ';\n\n          if (!name) return;\n          dispatch('createSymbol', selectedLayerIds, name);\n          return;\n        }\n        case 'detachSymbol': {\n          dispatch('detachSymbol', selectedLayerIds);\n          return;\n        }\n        case 'useAsMask': {\n          dispatch('setHasClippingMask', newUseAsMaskValue);\n          return;\n        }\n        case 'ignoreMasks': {\n          dispatch('setShouldBreakMaskChain', newIgnoreMasksValue);\n          return;\n        }\n        case 'isAlphaMask':\n          dispatch('setMaskMode', newIsAlphaMaskValue ? 'alpha' : 'outline');\n          return;\n        case 'lock': {\n          dispatch('setLayerIsLocked', selectedLayerIds, true);\n          return;\n        }\n        case 'unlock': {\n          dispatch('setLayerIsLocked', selectedLayerIds, false);\n          return;\n        }\n        case 'show': {\n          dispatch('setLayerVisible', selectedLayerIds, true);\n          return;\n        }\n        case 'hide': {\n          dispatch('setLayerVisible', selectedLayerIds, false);\n          return;\n        }\n      }\n    },\n    [\n      dispatch,\n      newIsAlphaMaskValue,\n      newIgnoreMasksValue,\n      newUseAsMaskValue,\n      selectedLayerIds,\n      shouldAskForSymbolName,\n    ],\n  );\n\n  return [menuItems, onSelectMenuItem] as const;\n}\n","// MIT License\n//\n// Copyright (c) 2020 Modulz\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n// https://github.com/radix-ui/primitives/blob/f3de622e944785d01eb6041249ca1645f79ce102/packages/react/utils/src/useSize.tsx\n\n/// <reference types=\"resize-observer-browser\" />\n\nimport * as React from 'react';\n\ntype Size = {\n  width: number;\n  height: number;\n};\n\nexport function useSize(\n  /** A reference to the element whose size to observe */\n  refToObserve: React.RefObject<HTMLElement | SVGElement>,\n) {\n  const [size, setSize] = React.useState<Size | undefined>(undefined);\n\n  React.useEffect(() => {\n    if (refToObserve.current) {\n      const elementToObserve = refToObserve.current;\n      const resizeObserver = new ResizeObserver((entries) => {\n        if (!Array.isArray(entries)) {\n          return;\n        }\n\n        // Since we only observe the one element, we don't need to loop over the\n        // array\n        if (!entries.length) {\n          return;\n        }\n\n        const entry = entries[0];\n        let width: number;\n        let height: number;\n\n        if ('borderBoxSize' in entry) {\n          const borderSizeEntry = entry['borderBoxSize'];\n          // iron out differences between browsers\n          const borderSize = Array.isArray(borderSizeEntry)\n            ? borderSizeEntry[0]\n            : borderSizeEntry;\n          width = borderSize['inlineSize'];\n          height = borderSize['blockSize'];\n        } else {\n          // for browsers that don't support `borderBoxSize`\n          // we calculate a rect ourselves to get the correct border box.\n          const rect = elementToObserve.getBoundingClientRect();\n          width = rect.width;\n          height = rect.height;\n        }\n\n        setSize({ width, height });\n      });\n\n      resizeObserver.observe(elementToObserve, { box: 'border-box' });\n\n      return () => {\n        setSize(undefined);\n        resizeObserver.unobserve(elementToObserve);\n      };\n    }\n    return;\n  }, [refToObserve]);\n\n  return size;\n}\n","import type { Surface } from 'canvaskit';\nimport { Size } from 'noya-geometry';\nimport { Components, render, unmount } from 'noya-react-canvaskit';\nimport {\n  CanvasKitProvider,\n  ComponentsProvider,\n  FontManagerProvider,\n  ImageCacheProvider,\n  SketchFileRenderer,\n  useCanvasKit,\n} from 'noya-renderer';\nimport { memo, useLayoutEffect, useRef, useState } from 'react';\nimport styled, { ThemeProvider, useTheme } from 'styled-components';\nimport { StateProvider, useWorkspaceState } from 'noya-app-state-context';\n\nconst CanvasComponent = styled.canvas({\n  position: 'absolute',\n  inset: 0,\n  zIndex: -1,\n});\n\ninterface Props {\n  size: Size;\n}\n\nexport default memo(function CanvasKitRenderer({ size }: Props) {\n  const theme = useTheme();\n  const workspaceState = useWorkspaceState();\n  const [surface, setSurface] = useState<Surface | null>(null);\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const CanvasKit = useCanvasKit();\n\n  // Update the canvas size and recreate the surface whenever the window is resized\n  useLayoutEffect(() => {\n    const canvasElement = canvasRef.current;\n\n    if (!canvasElement) return;\n\n    canvasElement.width = size.width;\n    canvasElement.height = size.height;\n\n    const newSurface = CanvasKit.MakeCanvasSurface(canvasElement);\n\n    if (!newSurface) {\n      console.warn('failed to create surface');\n      return;\n    }\n\n    setSurface(newSurface);\n\n    return () => {\n      newSurface?.delete();\n    };\n  }, [CanvasKit, size]);\n\n  // We use `useLayoutEffect` so that the canvas updates as soon as possible,\n  // even at the expense of the UI stuttering slightly.\n  // With `useEffect`, the updates are batched and potentially delayed, which\n  // makes continuous events like modifying a color unusably slow.\n  useLayoutEffect(() => {\n    if (!surface || surface.isDeleted()) return;\n\n    try {\n      render(\n        <CanvasKitProvider>\n          <ThemeProvider theme={theme}>\n            <StateProvider state={workspaceState}>\n              <ImageCacheProvider>\n                <FontManagerProvider>\n                  <ComponentsProvider value={Components}>\n                    <SketchFileRenderer />\n                  </ComponentsProvider>\n                </FontManagerProvider>\n              </ImageCacheProvider>\n            </StateProvider>\n          </ThemeProvider>\n        </CanvasKitProvider>,\n        surface,\n        CanvasKit,\n      );\n\n      return () => {\n        if (surface.isDeleted()) {\n          unmount(surface);\n        }\n      };\n    } catch (e) {\n      console.warn('rendering error', e);\n    }\n  }, [CanvasKit, workspaceState, theme, surface]);\n\n  return <CanvasComponent ref={canvasRef} />;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  useApplicationState,\n  useSelector,\n  useWorkspace,\n} from 'noya-app-state-context';\nimport {\n  ContextMenu,\n  mergeEventHandlers,\n  SupportedImageUploadType,\n  SUPPORTED_IMAGE_UPLOAD_TYPES,\n} from 'noya-designsystem';\nimport { createRect, Insets } from 'noya-geometry';\nimport { useKeyboardShortcuts } from 'noya-keymap';\nimport { useCanvasKit } from 'noya-renderer';\nimport {\n  ApplicationState,\n  CompassDirection,\n  decodeCurvePoint,\n  getSelectedLineLayer,\n  Layers,\n  Point,\n  SelectedControlPoint,\n  SelectedPoint,\n  Selectors,\n  ShapeType,\n} from 'noya-state';\nimport { getFileExtensionForType, uuid } from 'noya-utils';\nimport {\n  CSSProperties,\n  memo,\n  useCallback,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n} from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport styled, { useTheme } from 'styled-components';\nimport ImageDropTarget, { TypedFile } from '../components/ImageDropTarget';\nimport useLayerMenu from '../hooks/useLayerMenu';\nimport { useSize } from '../hooks/useSize';\nimport * as MouseEvent from '../utils/mouseEvent';\nimport CanvasKitRenderer from './renderer/CanvasKitRenderer';\n// import SVGRenderer from './renderer/SVGRenderer';\n\nconst InsetContainer = styled.div<{ insets: Insets }>(({ insets }) => ({\n  position: 'absolute',\n  top: -insets.top,\n  bottom: -insets.bottom,\n  right: -insets.right,\n  left: -insets.left,\n  zIndex: -1,\n}));\n\nfunction getCursorForDirection(\n  direction: CompassDirection,\n  state: ApplicationState,\n): CSSProperties['cursor'] {\n  if (getSelectedLineLayer(state)) {\n    return 'move';\n  }\n  switch (direction) {\n    case 'e':\n    case 'w':\n      return 'ew-resize';\n    case 'n':\n    case 's':\n      return 'ns-resize';\n    case 'ne':\n    case 'sw':\n      return 'nesw-resize';\n    case 'nw':\n    case 'se':\n      return 'nwse-resize';\n  }\n}\n\nexport type OffsetPoint = {\n  offsetX: number;\n  offsetY: number;\n};\n\nfunction getPoint(event: OffsetPoint): Point {\n  return { x: Math.round(event.offsetX), y: Math.round(event.offsetY) };\n}\n\nfunction isMoving(point: Point, origin: Point): boolean {\n  return Math.abs(point.x - origin.x) > 2 || Math.abs(point.y - origin.y) > 2;\n}\nconst Container = styled.div<{ cursor: CSSProperties['cursor'] }>(\n  ({ cursor }) => ({\n    flex: '1',\n    position: 'relative',\n    cursor,\n  }),\n);\n\nexport default memo(function Canvas() {\n  const theme = useTheme();\n  const {\n    sizes: { sidebarWidth },\n  } = theme;\n  const [state, dispatch] = useApplicationState();\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const CanvasKit = useCanvasKit();\n  const containerSize = useSize(containerRef);\n  const meta = useSelector(Selectors.getCurrentPageMetadata);\n  const { setCanvasSize, highlightLayer, highlightedLayer } = useWorkspace();\n  const bind = useGesture({\n    onWheel: ({ delta: [x, y] }) => {\n      dispatch('pan', { x, y });\n    },\n  });\n\n  const isEditingPath = Selectors.getIsEditingPath(state.interactionState.type);\n  const nudge = (axis: 'X' | 'Y', amount: number) => {\n    if (isEditingPath && state.selectedControlPoint) {\n      dispatch(`setControlPoint${axis}` as const, amount, 'adjust');\n    } else if (isEditingPath) {\n      dispatch(\n        `setPoint${axis}` as const,\n        state.selectedPointLists,\n        amount,\n        'adjust',\n      );\n    } else {\n      dispatch(`setLayer${axis}` as const, amount, 'adjust');\n    }\n  };\n\n  useKeyboardShortcuts({\n    ArrowLeft: () => nudge('X', -1),\n    ArrowRight: () => nudge('X', 1),\n    ArrowUp: () => nudge('Y', -1),\n    ArrowDown: () => nudge('Y', 1),\n    'Shift-ArrowLeft': () => nudge('X', -10),\n    'Shift-ArrowRight': () => nudge('X', 10),\n    'Shift-ArrowUp': () => nudge('Y', -10),\n    'Shift-ArrowDown': () => nudge('Y', 10),\n    Backspace: () => dispatch('deleteLayer', state.selectedObjects),\n    Escape: () => dispatch('interaction', ['reset']),\n    Shift: () => dispatch('setKeyModifier', 'shiftKey', true),\n  });\n\n  useKeyboardShortcuts('keyup', {\n    Shift: () => dispatch('setKeyModifier', 'shiftKey', false),\n  });\n\n  const insets = useMemo(\n    () => ({\n      left: sidebarWidth,\n      right: sidebarWidth,\n      top: 0,\n      bottom: 0,\n    }),\n    [sidebarWidth],\n  );\n\n  // Update the canvas size whenever the window is resized\n  useLayoutEffect(() => {\n    if (!containerSize) return;\n\n    setCanvasSize(containerSize, insets);\n  }, [insets, setCanvasSize, containerSize]);\n\n  const visibleCanvasSize = useMemo(\n    () => containerSize ?? { width: 0, height: 0 },\n    [containerSize],\n  );\n\n  const canvasSizeWithInsets = useMemo(\n    () =>\n      containerSize && containerSize.width > 0 && containerSize.height > 0\n        ? {\n            width: containerSize.width + insets.left + insets.right,\n            height: containerSize.height,\n          }\n        : undefined,\n    [containerSize, insets.left, insets.right],\n  );\n\n  // Event coordinates are relative to (0,0), but we want them to include\n  // the current document's offset from the origin\n  const offsetEventPoint = useCallback(\n    (point: Point) => {\n      return {\n        x: point.x - meta.scrollOrigin.x,\n        y: point.y - meta.scrollOrigin.y,\n      };\n    },\n    [meta],\n  );\n\n  const selectedLayers = useSelector(Selectors.getSelectedLayers);\n  const [menuItems, onSelectMenuItem] = useLayerMenu(selectedLayers);\n\n  const handleMouseDown = useCallback(\n    (event: React.PointerEvent) => {\n      const rawPoint = getPoint(event.nativeEvent);\n      const point = offsetEventPoint(rawPoint);\n\n      if (MouseEvent.isRightButtonClicked(event)) {\n        const layer = Selectors.getLayerAtPoint(\n          CanvasKit,\n          state,\n          insets,\n          rawPoint,\n          {\n            clickThroughGroups: event.metaKey,\n            includeHiddenLayers: false,\n            includeArtboardLayers: false,\n          },\n        );\n\n        if (!layer) {\n          dispatch('selectLayer', undefined);\n        } else if (!state.selectedObjects.includes(layer.do_objectID)) {\n          dispatch('selectLayer', layer.do_objectID);\n        }\n\n        return;\n      }\n\n      if (!MouseEvent.isLeftButtonClicked(event)) return;\n\n      switch (state.interactionState.type) {\n        case 'insertArtboard':\n        case 'insertRectangle':\n        case 'insertOval':\n        case 'insertText': {\n          const id = uuid();\n\n          dispatch('interaction', [\n            'startDrawing',\n            state.interactionState.type.slice(6).toLowerCase() as ShapeType,\n            id,\n            point,\n          ]);\n\n          break;\n        }\n        case 'insertingSymbol': {\n          dispatch('addSymbolLayer', state.interactionState.symbolID, point);\n          dispatch('interaction', ['reset']);\n          break;\n        }\n        case 'panMode': {\n          dispatch('interaction', ['maybePan', rawPoint]);\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n          break;\n        }\n        case 'drawingShapePath': {\n          dispatch('addShapePathLayer', point);\n          dispatch('interaction', ['maybeConvertCurveMode', point]);\n          break;\n        }\n        case 'editPath': {\n          const { shiftKey } = state.keyModifiers;\n          let selectedPoint: SelectedPoint | undefined = undefined;\n          let selectedControlPoint: SelectedControlPoint | undefined;\n\n          const boundingRects = Selectors.getBoundingRectMap(\n            Selectors.getCurrentPage(state),\n            state.selectedObjects,\n            {\n              clickThroughGroups: true,\n              includeArtboardLayers: false,\n              includeHiddenLayers: false,\n            },\n          );\n\n          Selectors.getSelectedLayers(state)\n            .filter(Layers.isPointsLayer)\n            .forEach((layer) => {\n              const boundingRect = boundingRects[layer.do_objectID];\n              layer.points.forEach((curvePoint, index) => {\n                const decodedPoint = decodeCurvePoint(curvePoint, boundingRect);\n\n                if (Selectors.isPointInRange(decodedPoint.point, point)) {\n                  selectedPoint = [layer.do_objectID, index];\n                } else if (\n                  Selectors.isPointInRange(decodedPoint.curveTo, point)\n                ) {\n                  selectedControlPoint = {\n                    layerId: layer.do_objectID,\n                    pointIndex: index,\n                    controlPointType: 'curveTo',\n                  };\n                } else if (\n                  Selectors.isPointInRange(decodedPoint.curveFrom, point)\n                ) {\n                  selectedControlPoint = {\n                    layerId: layer.do_objectID,\n                    pointIndex: index,\n                    controlPointType: 'curveFrom',\n                  };\n                }\n              });\n            });\n\n          const indexPathOfOpenShapeLayer = Selectors.getIndexPathOfOpenShapeLayer(\n            state,\n          );\n\n          if (selectedPoint) {\n            if (Selectors.canClosePath(state, selectedPoint) && !shiftKey) {\n              dispatch('setIsClosed', true);\n              dispatch('selectPoint', selectedPoint);\n            } else {\n              const alreadySelected = state.selectedPointLists[\n                selectedPoint[0]\n              ]?.includes(selectedPoint[1]);\n\n              dispatch(\n                'selectPoint',\n                selectedPoint,\n                shiftKey || event.metaKey\n                  ? alreadySelected\n                    ? 'difference'\n                    : 'intersection'\n                  : 'replace',\n              );\n              dispatch('interaction', ['maybeMovePoint', point]);\n            }\n          } else if (selectedControlPoint) {\n            dispatch(\n              'selectControlPoint',\n              selectedControlPoint.layerId,\n              selectedControlPoint.pointIndex,\n              selectedControlPoint.controlPointType,\n            );\n            dispatch('interaction', ['maybeMoveControlPoint', point]);\n          } else if (indexPathOfOpenShapeLayer) {\n            dispatch('addPointToPath', point);\n            dispatch('interaction', ['maybeConvertCurveMode', point]);\n          } else if (!(shiftKey || event.metaKey)) {\n            dispatch('interaction', ['reset']);\n          }\n          break;\n        }\n        case 'hoverHandle':\n        case 'none': {\n          if (state.selectedObjects.length > 0) {\n            const direction = Selectors.getScaleDirectionAtPoint(state, point);\n\n            if (direction) {\n              dispatch('interaction', [\n                'maybeScale',\n                point,\n                direction,\n                visibleCanvasSize,\n              ]);\n\n              return;\n            }\n          }\n\n          const layer = Selectors.getLayerAtPoint(\n            CanvasKit,\n            state,\n            insets,\n            rawPoint,\n            {\n              clickThroughGroups: event.metaKey,\n              includeHiddenLayers: false,\n              includeArtboardLayers: false,\n            },\n          );\n\n          if (layer) {\n            if (state.selectedObjects.includes(layer.do_objectID)) {\n              if (event.shiftKey && state.selectedObjects.length !== 1) {\n                dispatch('selectLayer', layer.do_objectID, 'difference');\n              }\n            } else {\n              dispatch(\n                'selectLayer',\n                layer.do_objectID,\n                event.shiftKey ? 'intersection' : 'replace',\n              );\n            }\n\n            dispatch('interaction', ['maybeMove', point, visibleCanvasSize]);\n          } else {\n            dispatch('selectLayer', undefined);\n\n            dispatch('interaction', ['startMarquee', rawPoint]);\n          }\n          break;\n        }\n      }\n    },\n    [offsetEventPoint, state, CanvasKit, insets, dispatch, visibleCanvasSize],\n  );\n\n  const handleMouseMove = useCallback(\n    (event: React.PointerEvent) => {\n      const rawPoint = getPoint(event.nativeEvent);\n      const point = offsetEventPoint(rawPoint);\n\n      switch (state.interactionState.type) {\n        case 'insertingSymbol': {\n          dispatch('interaction', [\n            'insertingSymbol',\n            state.interactionState.symbolID,\n            point,\n          ]);\n          break;\n        }\n        case 'editPath': {\n          dispatch('interaction', ['resetEditPath', point]);\n          break;\n        }\n        case 'drawingShapePath': {\n          dispatch('interaction', ['drawingShapePath', point]);\n          break;\n        }\n        case 'maybePan': {\n          dispatch('interaction', ['startPanning', rawPoint]);\n\n          event.preventDefault();\n          break;\n        }\n        case 'panning': {\n          dispatch('interaction', ['updatePanning', rawPoint]);\n\n          event.preventDefault();\n          break;\n        }\n        case 'maybeMove':\n        case 'maybeScale': {\n          const { origin } = state.interactionState;\n\n          if (isMoving(point, origin)) {\n            dispatch('interaction', [\n              state.interactionState.type === 'maybeMove'\n                ? 'startMoving'\n                : 'startScaling',\n              point,\n            ]);\n          }\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n          break;\n        }\n        case 'maybeMovePoint': {\n          const { origin } = state.interactionState;\n\n          if (isMoving(point, origin)) {\n            dispatch('interaction', ['movingPoint', origin, point]);\n          }\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n          break;\n        }\n        case 'movingPoint': {\n          const { origin } = state.interactionState;\n\n          dispatch('interaction', ['updateMovingPoint', origin, point]);\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n          break;\n        }\n        case 'maybeConvertCurveMode': {\n          const { origin } = state.interactionState;\n\n          if (isMoving(point, origin)) {\n            dispatch('setPointCurveMode', Sketch.CurveMode.Mirrored);\n            dispatch(\n              'selectControlPoint',\n              selectedLayers[0].do_objectID,\n              0,\n              'curveFrom',\n            );\n            dispatch('interaction', ['maybeMoveControlPoint', origin]);\n            dispatch('interaction', ['movingControlPoint', origin, point]);\n          }\n\n          event.preventDefault();\n          containerRef.current?.setPointerCapture(event.pointerId);\n          break;\n        }\n        case 'maybeMoveControlPoint': {\n          const { origin } = state.interactionState;\n\n          if (isMoving(point, origin)) {\n            dispatch('interaction', ['movingControlPoint', origin, point]);\n          }\n\n          event.preventDefault();\n          containerRef.current?.setPointerCapture(event.pointerId);\n          break;\n        }\n        case 'movingControlPoint': {\n          const { origin } = state.interactionState;\n\n          dispatch('interaction', ['updateMovingControlPoint', origin, point]);\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n\n          break;\n        }\n        case 'moving':\n        case 'scaling': {\n          dispatch('interaction', [\n            state.interactionState.type === 'moving'\n              ? 'updateMoving'\n              : 'updateScaling',\n            point,\n          ]);\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n\n          break;\n        }\n        case 'drawing': {\n          dispatch('interaction', ['updateDrawing', point]);\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n\n          break;\n        }\n        case 'marquee': {\n          dispatch('interaction', ['updateMarquee', rawPoint]);\n\n          containerRef.current?.setPointerCapture(event.pointerId);\n          event.preventDefault();\n\n          const { origin, current } = state.interactionState;\n\n          const layers = Selectors.getLayersInRect(\n            state,\n            insets,\n            createRect(origin, current),\n            {\n              clickThroughGroups: event.metaKey,\n              includeHiddenLayers: false,\n              includeArtboardLayers: false,\n            },\n          );\n\n          dispatch(\n            'selectLayer',\n            layers.map((layer) => layer.do_objectID),\n          );\n\n          break;\n        }\n        case 'hoverHandle': {\n          const direction = Selectors.getScaleDirectionAtPoint(state, point);\n\n          if (direction) {\n            if (direction !== state.interactionState.direction) {\n              dispatch('interaction', ['hoverHandle', direction]);\n            }\n          } else {\n            dispatch('interaction', ['reset']);\n          }\n\n          break;\n        }\n        case 'none': {\n          const layer = Selectors.getLayerAtPoint(\n            CanvasKit,\n            state,\n            insets,\n            rawPoint,\n            {\n              clickThroughGroups: event.metaKey,\n              includeHiddenLayers: false,\n              includeArtboardLayers: false,\n            },\n          );\n\n          // For perf, check that we actually need to update the highlight.\n          // This gets called on every mouse movement.\n          if (highlightedLayer?.id !== layer?.do_objectID) {\n            highlightLayer(\n              layer\n                ? {\n                    id: layer.do_objectID,\n                    precedence: 'belowSelection',\n                    isMeasured: event.altKey,\n                  }\n                : undefined,\n            );\n          }\n\n          if (state.selectedObjects.length > 0) {\n            const direction = Selectors.getScaleDirectionAtPoint(state, point);\n\n            if (direction) {\n              dispatch('interaction', ['hoverHandle', direction]);\n\n              return;\n            }\n          }\n\n          break;\n        }\n      }\n    },\n    [\n      offsetEventPoint,\n      state,\n      dispatch,\n      CanvasKit,\n      selectedLayers,\n      insets,\n      highlightedLayer?.id,\n      highlightLayer,\n    ],\n  );\n\n  const handleMouseUp = useCallback(\n    (event) => {\n      const rawPoint = getPoint(event.nativeEvent);\n      const point = offsetEventPoint(rawPoint);\n\n      switch (state.interactionState.type) {\n        case 'maybePan':\n          dispatch('interaction', ['enablePanMode']);\n\n          containerRef.current?.releasePointerCapture(event.pointerId);\n\n          break;\n        case 'panning': {\n          dispatch('interaction', ['updatePanning', rawPoint]);\n          dispatch('interaction', ['enablePanMode']);\n\n          containerRef.current?.releasePointerCapture(event.pointerId);\n\n          break;\n        }\n        case 'drawing': {\n          dispatch('interaction', ['updateDrawing', point]);\n          dispatch('addDrawnLayer');\n\n          containerRef.current?.releasePointerCapture(event.pointerId);\n\n          break;\n        }\n        case 'marquee': {\n          dispatch('interaction', ['reset']);\n\n          const { origin, current } = state.interactionState;\n\n          const layers = Selectors.getLayersInRect(\n            state,\n            insets,\n            createRect(origin, current),\n            {\n              clickThroughGroups: event.metaKey,\n              includeHiddenLayers: false,\n              includeArtboardLayers: false,\n            },\n          );\n\n          dispatch(\n            'selectLayer',\n            layers.map((layer) => layer.do_objectID),\n          );\n\n          containerRef.current?.releasePointerCapture(event.pointerId);\n\n          break;\n        }\n        case 'maybeMove':\n        case 'maybeScale': {\n          dispatch('interaction', ['reset']);\n\n          containerRef.current?.releasePointerCapture(event.pointerId);\n\n          break;\n        }\n        case 'moving':\n        case 'scaling': {\n          dispatch('interaction', [\n            state.interactionState.type === 'moving'\n              ? 'updateMoving'\n              : 'updateScaling',\n            point,\n          ]);\n\n          if (state.interactionState.type === 'moving')\n            dispatch('moveLayersIntoParentAtPoint', point);\n\n          dispatch('interaction', ['reset']);\n\n          containerRef.current?.releasePointerCapture(event.pointerId);\n\n          break;\n        }\n        case 'maybeMoveControlPoint':\n        case 'movingControlPoint':\n        case 'maybeMovePoint':\n        case 'movingPoint': {\n          dispatch('interaction', ['resetEditPath', point]);\n          containerRef.current?.releasePointerCapture(event.pointerId);\n          break;\n        }\n        case 'maybeConvertCurveMode':\n          dispatch('interaction', ['resetEditPath', point]);\n          break;\n      }\n    },\n    [offsetEventPoint, state, dispatch, insets],\n  );\n\n  const handleDirection =\n    state.interactionState.type === 'hoverHandle' ||\n    state.interactionState.type === 'maybeScale' ||\n    state.interactionState.type === 'scaling'\n      ? state.interactionState.direction\n      : undefined;\n\n  const cursor = useMemo((): CSSProperties['cursor'] => {\n    switch (state.interactionState.type) {\n      case 'panning':\n      case 'maybePan':\n        return 'grabbing';\n      case 'panMode':\n        return 'grab';\n      case 'insertArtboard':\n      case 'insertOval':\n      case 'insertRectangle':\n      case 'insertText':\n        return 'crosshair';\n      case 'drawingShapePath':\n        return 'crosshair';\n      case 'maybeScale':\n      case 'scaling':\n      case 'hoverHandle':\n        if (handleDirection) {\n          return getCursorForDirection(handleDirection, state);\n        }\n        return 'default';\n      case 'editPath': {\n        const { point } = state.interactionState;\n\n        return point\n          ? Selectors.getCursorForEditPathMode(state, point)\n          : 'default';\n      }\n      case 'maybeMoveControlPoint':\n      case 'maybeMovePoint':\n      case 'movingControlPoint':\n      case 'movingPoint':\n        return 'move';\n      default:\n        return 'default';\n    }\n  }, [state, handleDirection]);\n\n  const onDropFile = useCallback(\n    async (\n      file: TypedFile<SupportedImageUploadType>,\n      offsetPoint: OffsetPoint,\n    ) => {\n      const rawPoint = getPoint(offsetPoint);\n      const point = offsetEventPoint(rawPoint);\n\n      if (file.type === 'image/svg+xml') {\n        const svgString = await file.text();\n        const name = file.name.replace(/\\.svg$/, '');\n        dispatch('importSvg', point, name, svgString);\n        return;\n      }\n\n      const data = await file.arrayBuffer();\n      const image = CanvasKit.MakeImageFromEncoded(data);\n\n      if (!image) return;\n\n      const size = {\n        width: image.width(),\n        height: image.height(),\n      };\n\n      const frame = {\n        ...size,\n        x: point.x - size.width / 2,\n        y: point.y - size.height / 2,\n      };\n\n      dispatch('insertBitmap', data, {\n        name: file.name,\n        frame: frame,\n        extension: getFileExtensionForType(file.type),\n      });\n    },\n    [CanvasKit, dispatch, offsetEventPoint],\n  );\n\n  return (\n    <ImageDropTarget\n      onDropFile={onDropFile}\n      supportedFileTypes={SUPPORTED_IMAGE_UPLOAD_TYPES}\n    >\n      <ContextMenu items={menuItems} onSelect={onSelectMenuItem}>\n        <Container\n          ref={containerRef}\n          cursor={cursor}\n          {...mergeEventHandlers(bind(), {\n            onPointerDown: handleMouseDown,\n            onPointerMove: handleMouseMove,\n            onPointerUp: handleMouseUp,\n          })}\n        >\n          <InsetContainer insets={insets}>\n            {canvasSizeWithInsets && (\n              // <SVGRenderer size={canvasSizeWithInsets}>\n              //   <SketchFileRenderer />\n              // </SVGRenderer>\n              <CanvasKitRenderer size={canvasSizeWithInsets} />\n            )}\n          </InsetContainer>\n        </Container>\n      </ContextMenu>\n    </ImageDropTarget>\n  );\n});\n","export function isLeftButtonClicked(event: React.MouseEvent) {\n  return event.button === 0;\n}\n\nexport function isRightButtonClicked(event: React.MouseEvent) {\n  return event.button === 2;\n}\n","import { InputField } from 'noya-designsystem';\nimport { SetNumberMode } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport { DimensionValue } from './DimensionsInspector';\n\ninterface Props {\n  id?: string;\n  value: DimensionValue;\n  onSetValue: (value: number, mode: SetNumberMode) => void;\n  label?: string;\n  size?: number;\n}\n\nexport default memo(function DimensionInput({\n  id,\n  value,\n  onSetValue,\n  label,\n  size,\n}: Props) {\n  const handleNudgeValue = useCallback(\n    (value: number) => onSetValue(value, 'adjust'),\n    [onSetValue],\n  );\n\n  const handleSetValue = useCallback((value) => onSetValue(value, 'replace'), [\n    onSetValue,\n  ]);\n\n  return (\n    <InputField.Root id={id} size={size}>\n      <InputField.NumberInput\n        value={value}\n        placeholder={value === undefined ? 'multi' : undefined}\n        onNudge={handleNudgeValue}\n        onSubmit={handleSetValue}\n      />\n      {label && <InputField.Label>{label}</InputField.Label>}\n    </InputField.Root>\n  );\n});\n","import { IconProps } from '@radix-ui/react-icons/dist/types';\n\nconst FlipHorizontalIcon = ({\n  color = 'currentColor',\n  ...props\n}: IconProps) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M8.5 3V12C8.5 12.2761 8.72386 12.5 9 12.5H12C12.2761 12.5 12.5 12.2761 12.5 12V10.6336C12.5 10.5766 12.4903 10.5201 12.4713 10.4665L9.76481 2.83292C9.69406 2.63336 9.50528 2.5 9.29355 2.5H9C8.72386 2.5 8.5 2.72386 8.5 3Z\"\n        fill={color}\n        stroke={color}\n      />\n      <path\n        d=\"M6.5 3V12C6.5 12.2761 6.27614 12.5 6 12.5H3C2.72386 12.5 2.5 12.2761 2.5 12V10.6336C2.5 10.5766 2.50972 10.5201 2.52874 10.4665L5.23519 2.83292C5.30594 2.63336 5.49472 2.5 5.70645 2.5H6C6.27614 2.5 6.5 2.72386 6.5 3Z\"\n        stroke={color}\n      />\n    </svg>\n  );\n};\n\nexport default FlipHorizontalIcon;\n","import { IconProps } from '@radix-ui/react-icons/dist/types';\n\nconst FlipVerticalIcon = ({ color = 'currentColor', ...props }: IconProps) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M12 8.5L3 8.5C2.72386 8.5 2.5 8.72386 2.5 9L2.5 12C2.5 12.2761 2.72386 12.5 3 12.5L4.36644 12.5C4.42336 12.5 4.47987 12.4903 4.53352 12.4713L12.1671 9.76481C12.3666 9.69406 12.5 9.50528 12.5 9.29355L12.5 9C12.5 8.72386 12.2761 8.5 12 8.5Z\"\n        fill={color}\n        stroke={color}\n      />\n      <path\n        d=\"M12 6.5L3 6.5C2.72386 6.5 2.5 6.27614 2.5 6L2.5 3C2.5 2.72386 2.72386 2.5 3 2.5L4.36644 2.5C4.42336 2.5 4.47987 2.50972 4.53352 2.52874L12.1671 5.23519C12.3666 5.30594 12.5 5.49472 12.5 5.70645L12.5 6C12.5 6.27614 12.2761 6.5 12 6.5Z\"\n        stroke={color}\n      />\n    </svg>\n  );\n};\n\nexport default FlipVerticalIcon;\n","import { Button, Spacer } from 'noya-designsystem';\nimport { useCallback } from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport FlipHorizontalIcon from '../icons/FlipHorizontalIcon';\nimport FlipVerticalIcon from '../icons/FlipVerticalIcon';\n\nexport type DimensionValue = number | undefined;\n\nconst FlipButtonContainer = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'row',\n}));\n\nexport interface Props {\n  isFlippedVertical: boolean;\n  isFlippedHorizontal: boolean;\n  onSetIsFlippedVertical: (value: boolean) => void;\n  onSetIsFlippedHorizontal: (value: boolean) => void;\n}\n\nexport default function FlipButtonElements({\n  isFlippedVertical,\n  isFlippedHorizontal,\n  onSetIsFlippedVertical,\n  onSetIsFlippedHorizontal,\n}: Props) {\n  const {\n    icon: iconColor,\n    iconSelected: iconSelectedColor,\n  } = useTheme().colors;\n\n  const handleSetIsFlippedVertical = useCallback(\n    () => onSetIsFlippedVertical(!isFlippedVertical),\n    [isFlippedVertical, onSetIsFlippedVertical],\n  );\n\n  const handleSetIsFlippedHorizontal = useCallback(\n    () => onSetIsFlippedHorizontal(!isFlippedHorizontal),\n    [isFlippedHorizontal, onSetIsFlippedHorizontal],\n  );\n\n  return (\n    <FlipButtonContainer>\n      <Button\n        id=\"flip-horizontal\"\n        tooltip=\"Flip horizontally\"\n        onClick={handleSetIsFlippedHorizontal}\n        active={isFlippedHorizontal}\n      >\n        <FlipHorizontalIcon\n          color={isFlippedHorizontal ? iconSelectedColor : iconColor}\n        />\n      </Button>\n      <Spacer.Horizontal />\n      <Button\n        id=\"flip-vertical\"\n        tooltip=\"Flip vertically\"\n        onClick={handleSetIsFlippedVertical}\n        active={isFlippedVertical}\n      >\n        <FlipVerticalIcon\n          color={isFlippedVertical ? iconSelectedColor : iconColor}\n        />\n      </Button>\n    </FlipButtonContainer>\n  );\n}\n","import { Spacer } from 'noya-designsystem';\nimport { SetNumberMode } from 'noya-state';\nimport styled from 'styled-components';\nimport DimensionInput from './DimensionInput';\nimport FlipControls from './FlipControls';\n\nexport type DimensionValue = number | undefined;\n\nconst Row = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'row',\n  paddingLeft: '10px',\n  paddingRight: '10px',\n}));\n\nexport interface Props {\n  x: DimensionValue;\n  y: DimensionValue;\n  width: DimensionValue;\n  height: DimensionValue;\n  rotation: DimensionValue;\n  isFlippedVertical: boolean;\n  isFlippedHorizontal: boolean;\n  onSetX: (value: number, mode: SetNumberMode) => void;\n  onSetY: (value: number, mode: SetNumberMode) => void;\n  onSetWidth: (value: number, mode: SetNumberMode) => void;\n  onSetHeight: (value: number, mode: SetNumberMode) => void;\n  onSetRotation: (value: number, mode: SetNumberMode) => void;\n  onSetIsFlippedVertical: (value: boolean) => void;\n  onSetIsFlippedHorizontal: (value: boolean) => void;\n}\n\nexport default function DimensionsInspector({\n  x,\n  y,\n  width,\n  height,\n  rotation,\n  isFlippedVertical,\n  isFlippedHorizontal,\n  onSetX,\n  onSetY,\n  onSetWidth,\n  onSetHeight,\n  onSetRotation,\n  onSetIsFlippedVertical,\n  onSetIsFlippedHorizontal,\n}: Props) {\n  return (\n    <>\n      <Row>\n        <DimensionInput value={x} onSetValue={onSetX} label=\"X\" />\n        <Spacer.Horizontal size={16} />\n        <DimensionInput value={y} onSetValue={onSetY} label=\"Y\" />\n        <Spacer.Horizontal size={16} />\n        <DimensionInput value={rotation} onSetValue={onSetRotation} label=\"\" />\n      </Row>\n      <Spacer.Vertical size={10} />\n      <Row>\n        <DimensionInput value={width} onSetValue={onSetWidth} label=\"W\" />\n        <Spacer.Horizontal size={16} />\n        <DimensionInput value={height} onSetValue={onSetHeight} label=\"H\" />\n        <Spacer.Horizontal size={16} />\n        <FlipControls\n          isFlippedVertical={isFlippedVertical}\n          isFlippedHorizontal={isFlippedHorizontal}\n          onSetIsFlippedVertical={onSetIsFlippedVertical}\n          onSetIsFlippedHorizontal={onSetIsFlippedHorizontal}\n        />\n      </Row>\n    </>\n  );\n}\n","import { memo } from 'react';\nimport styled from 'styled-components';\nimport {\n  AlignLeftIcon,\n  AlignCenterHorizontallyIcon,\n  AlignRightIcon,\n  AlignTopIcon,\n  AlignCenterVerticallyIcon,\n  AlignBottomIcon,\n  SpaceEvenlyHorizontallyIcon,\n  SpaceEvenlyVerticallyIcon,\n} from '@radix-ui/react-icons';\nimport { useApplicationState } from 'noya-app-state-context';\n\nconst AlignmentInspectorContainer = styled.div(({ theme }) => ({\n  display: 'flex',\n  minHeight: '35px',\n  alignItems: 'center',\n  justifyContent: 'space-evenly',\n  color: 'rgb(139, 139, 139)',\n}));\n\ninterface AlignmentInspectorProps {}\n\nfunction AlignmentInspector(props: AlignmentInspectorProps) {\n  const [, dispatch] = useApplicationState();\n  return (\n    <AlignmentInspectorContainer>\n      <SpaceEvenlyHorizontallyIcon\n        onClick={() => dispatch('distributeLayers', 'horizontal')}\n      />\n      <SpaceEvenlyVerticallyIcon\n        onClick={() => dispatch('distributeLayers', 'vertical')}\n      />\n      <AlignLeftIcon onClick={() => dispatch('alignLayers', 'left')} />\n      <AlignCenterHorizontallyIcon\n        onClick={() => dispatch('alignLayers', 'centerHorizontal')}\n      />\n      <AlignRightIcon onClick={() => dispatch('alignLayers', 'right')} />\n      <AlignTopIcon onClick={() => dispatch('alignLayers', 'top')} />\n      <AlignCenterVerticallyIcon\n        onClick={() => dispatch('alignLayers', 'centerVertical')}\n      />\n      <AlignBottomIcon onClick={() => dispatch('alignLayers', 'bottom')} />\n    </AlignmentInspectorContainer>\n  );\n}\n\nexport default memo(AlignmentInspector);\n","import { Select, Spacer, TreeView } from 'noya-designsystem';\nimport { useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport { useApplicationState } from 'noya-app-state-context';\n\ntype Preset = { name: string; width: number; height: number };\ntype PresetGroup = { name: string; presets: Preset[] };\ntype PresetCategory = { name: string; groups: PresetGroup[] };\n\nconst Header = styled.div(({ theme }) => ({\n  display: 'flex',\n  padding: '8px',\n}));\n\nconst canvasSizePresets: PresetCategory[] = [\n  {\n    name: 'Apple Devices',\n    groups: [\n      {\n        name: 'iPhone',\n        presets: [\n          { name: 'iPhone 8', width: 375, height: 667 },\n          { name: 'iPhone 8 Plus', width: 414, height: 736 },\n          { name: 'iPhone SE', width: 320, height: 568 },\n          { name: 'iPhone 11 Pro', width: 375, height: 812 },\n          { name: 'iPhone 11', width: 414, height: 896 },\n          { name: 'iPhone 11 Pro Max', width: 414, height: 896 },\n          { name: 'iPhone 12 Mini', width: 375, height: 812 },\n          { name: 'iPhone 12', width: 375, height: 844 },\n          { name: 'iPhone 12 Pro', width: 375, height: 844 },\n          { name: 'iPhone 12 Pro Max', width: 428, height: 926 },\n        ],\n      },\n      {\n        name: 'iPad',\n        presets: [\n          { name: '7.9\" iPad mini', width: 768, height: 1024 },\n          { name: '10.2\" iPad', width: 810, height: 1080 },\n          { name: '10.5\" iPad Air', width: 834, height: 1112 },\n          { name: '10.9\" iPad Air', width: 840, height: 1180 },\n          { name: '11\" iPad Pro', width: 834, height: 1194 },\n          { name: '12.9\" iPad Pro', width: 1024, height: 1366 },\n        ],\n      },\n      {\n        name: 'Apple Watch',\n        presets: [\n          { name: 'Apple Watch 38mm', width: 136, height: 170 },\n          { name: 'Apple Watch 40mm', width: 162, height: 197 },\n          { name: 'Apple Watch 42mm', width: 156, height: 195 },\n          { name: 'Apple Watch 44mm', width: 184, height: 224 },\n        ],\n      },\n      {\n        name: 'Apple TV',\n        presets: [{ name: 'Apple TV', width: 1920, height: 1080 }],\n      },\n    ],\n  },\n  {\n    name: 'Android Devices',\n    groups: [],\n  },\n  {\n    name: 'Responsive Web',\n    groups: [],\n  },\n  {\n    name: 'Social Media',\n    groups: [],\n  },\n  {\n    name: 'Paper Sizes',\n    groups: [],\n  },\n];\n\nconst SizeLabel = styled.span(({ theme }) => ({\n  ...theme.textStyles.code,\n}));\n\nexport default function ArtboardSizeList() {\n  const [, dispatch] = useApplicationState();\n\n  const categoryNames = useMemo(\n    () => canvasSizePresets.map((category) => category.name),\n    [],\n  );\n  const [categoryName, setCategoryName] = useState(categoryNames[0]);\n\n  const layerElements = useMemo(() => {\n    return canvasSizePresets\n      .find((category) => category.name === categoryName)!\n      .groups.map(({ name, presets }) => {\n        return [\n          <TreeView.Row\n            isSectionHeader\n            expanded\n            depth={0}\n            key={`group-${name}`}\n          >\n            {name}\n          </TreeView.Row>,\n          ...presets.map(({ name, width, height }) => (\n            <TreeView.Row\n              depth={1}\n              key={name}\n              onClick={() => {\n                dispatch('insertArtboard', { name, width, height });\n              }}\n            >\n              <TreeView.RowTitle>{name}</TreeView.RowTitle>\n              <Spacer.Horizontal size={8} />\n              <SizeLabel>\n                {width}{height}\n              </SizeLabel>\n            </TreeView.Row>\n          )),\n        ];\n      });\n  }, [dispatch, categoryName]);\n\n  return (\n    <>\n      <Header>\n        <Select\n          id=\"artboard-preset\"\n          value={categoryName}\n          options={categoryNames}\n          onChange={setCategoryName}\n        />\n      </Header>\n      <TreeView.Root>{layerElements}</TreeView.Root>\n    </>\n  );\n}\n","import { PlusIcon, TrashIcon } from '@radix-ui/react-icons';\nimport { Spacer, withSeparatorElements } from 'noya-designsystem';\nimport { memo, ReactNode, useCallback } from 'react';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\n\ntype BaseArrayItem = { isEnabled: boolean };\n\n/* ----------------------------------------------------------------------------\n * ArrayElement\n * ------------------------------------------------------------------------- */\n\nconst ElementRow = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n  marginTop: '10px',\n  cursor: 'initial !important', // Override draggableProps.style\n}));\n\ninterface ArrayElementProps {\n  id: string;\n  index: number;\n  children: ReactNode;\n}\n\nconst ArrayElement = memo(function ArrayElement({\n  id,\n  index,\n  children,\n}: ArrayElementProps) {\n  return (\n    <Draggable draggableId={id} index={index}>\n      {(provided) => (\n        <ElementRow\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n          ref={provided.innerRef}\n        >\n          {children}\n        </ElementRow>\n      )}\n    </Draggable>\n  );\n});\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst TitleRow = styled.div({\n  display: 'flex',\n  alignItems: 'center',\n});\n\nconst Title = styled.div(({ theme }) => ({\n  ...theme.textStyles.small,\n  fontWeight: 'bold',\n  display: 'flex',\n  flexDirection: 'row',\n  userSelect: 'none',\n}));\n\nconst Checkbox = styled.input(({ theme }) => ({\n  margin: 0,\n}));\n\nconst ArrayControllerContainer = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'column',\n  padding: '10px',\n}));\n\ninterface ArrayControllerProps<Item> {\n  id: string;\n  value: Item[];\n  title: ReactNode;\n  isDraggable?: boolean;\n  alwaysShowTrashIcon?: boolean;\n  onDeleteItem?: (index: number) => void;\n  onMoveItem?: (sourceIndex: number, destinationIndex: number) => void;\n  onChangeCheckbox?: (index: number, checked: boolean) => void;\n  onClickPlus?: () => void;\n  onClickTrash?: () => void;\n  getKey?: (item: Item) => string | number;\n  children: (props: {\n    item: Item;\n    index: number;\n    checkbox: ReactNode;\n  }) => ReactNode;\n}\n\nfunction ArrayController<Item extends BaseArrayItem>({\n  id,\n  value,\n  title,\n  isDraggable = true,\n  alwaysShowTrashIcon = false,\n  getKey,\n  onDeleteItem,\n  onMoveItem,\n  onClickPlus,\n  onClickTrash,\n  onChangeCheckbox,\n  children: renderItem,\n}: ArrayControllerProps<Item>) {\n  const handleDragEnd = useCallback(\n    (result) => {\n      const { destination, source } = result;\n\n      if (!destination) {\n        onDeleteItem?.(source.index);\n        return;\n      }\n\n      if (\n        // Different destination\n        source.droppableId !== destination.droppableId ||\n        // Same index\n        source.index === destination.index\n      ) {\n        return;\n      }\n\n      onMoveItem?.(source.index, destination.index);\n    },\n    [onDeleteItem, onMoveItem],\n  );\n\n  const getCheckboxElement = (index: number) =>\n    onChangeCheckbox ? (\n      <Checkbox\n        type=\"checkbox\"\n        checked={value[index].isEnabled}\n        onChange={(event) => {\n          onChangeCheckbox(index, event.target.checked);\n        }}\n      />\n    ) : null;\n\n  const arrayController = (\n    <ArrayControllerContainer>\n      <TitleRow>\n        <Title>{title}</Title>\n        <Spacer.Horizontal />\n        {withSeparatorElements(\n          [\n            onClickTrash &&\n              (alwaysShowTrashIcon ||\n                value.some((item) => !item.isEnabled)) && (\n                <span onClick={onClickTrash}>\n                  <TrashIcon color=\"rgb(139,139,139)\" />\n                </span>\n              ),\n            onClickPlus && (\n              <span onClick={onClickPlus}>\n                <PlusIcon color=\"rgb(139,139,139)\" />\n              </span>\n            ),\n          ],\n          <Spacer.Horizontal size={12} />,\n        )}\n      </TitleRow>\n      {isDraggable ? (\n        <Droppable droppableId={id}>\n          {(provided) => (\n            <div ref={provided.innerRef} {...provided.droppableProps}>\n              {value.map((item, index) => (\n                <ArrayElement\n                  key={getKey?.(item) ?? index}\n                  id={String(index)}\n                  index={index}\n                >\n                  {renderItem({\n                    item,\n                    index,\n                    checkbox: getCheckboxElement(index),\n                  })}\n                </ArrayElement>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      ) : (\n        value.map((item, index) => (\n          <ElementRow key={getKey?.(item) ?? index}>\n            {renderItem({ item, index, checkbox: getCheckboxElement(index) })}\n          </ElementRow>\n        ))\n      )}\n    </ArrayControllerContainer>\n  );\n\n  return isDraggable ? (\n    <DragDropContext onDragEnd={handleDragEnd}>\n      {arrayController}\n    </DragDropContext>\n  ) : (\n    arrayController\n  );\n}\n\nexport default memo(ArrayController);\n","import { IconProps } from '@radix-ui/react-icons/dist/types';\n\nconst BorderCenterIcon = ({ color = 'currentColor', ...props }: IconProps) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <rect x=\"1.5\" y=\"1.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"1.5\" y=\"11.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"11.5\" y=\"11.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"11.5\" y=\"1.5\" width=\"2\" height=\"2\" stroke={color} />\n      <path\n        d=\"M3 11.5H2.5V3.5H3H3.5V3V2.5H11.5V3V3.5H12H12.5V11.5H12H11.5V12V12.5H3.5V12V11.5H3Z\"\n        stroke={color}\n      />\n    </svg>\n  );\n};\n\nexport default BorderCenterIcon;\n","import { IconProps } from '@radix-ui/react-icons/dist/types';\n\nconst BorderInsideIcon = ({ color = 'currentColor', ...props }: IconProps) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <rect x=\"1.5\" y=\"1.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"1.5\" y=\"11.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"11.5\" y=\"11.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"11.5\" y=\"1.5\" width=\"2\" height=\"2\" stroke={color} />\n      <rect x=\"3.5\" y=\"3.5\" width=\"8\" height=\"8\" stroke={color} />\n    </svg>\n  );\n};\n\nexport default BorderInsideIcon;\n","import { IconProps } from '@radix-ui/react-icons/dist/types';\n\nconst BorderOutsideIcon = ({ color = 'currentColor', ...props }: IconProps) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M2.5 1.5H3.5V3.5H1.5V2.5C1.5 1.94772 1.94772 1.5 2.5 1.5Z\"\n        stroke={color}\n      />\n      <path\n        d=\"M1.5 11.5H3.5V13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V11.5Z\"\n        stroke={color}\n      />\n      <path\n        d=\"M11.5 11.5H13.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H11.5V11.5Z\"\n        stroke={color}\n      />\n      <path\n        d=\"M11.5 1.5H12.5C13.0523 1.5 13.5 1.94772 13.5 2.5V3.5H11.5V1.5Z\"\n        stroke={color}\n      />\n      <rect x=\"1.5\" y=\"1.5\" width=\"12\" height=\"12\" rx=\"1\" stroke={color} />\n    </svg>\n  );\n};\n\nexport default BorderOutsideIcon;\n","import { memo, ReactNode } from 'react';\nimport styled from 'styled-components';\n\nexport const Section = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'column',\n  padding: '10px',\n}));\n\nexport const SectionHeader = styled.div(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n}));\n\nexport const Title = styled.div(({ theme }) => ({\n  ...theme.textStyles.small,\n  fontWeight: 'bold',\n  display: 'flex',\n  flexDirection: 'row',\n  userSelect: 'none',\n}));\n\nexport const Row = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n}));\n\nexport const Column = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nexport const Checkbox = styled.input(({ theme }) => ({\n  margin: 0,\n}));\n\nexport const Text = styled.span(({ theme }) => ({\n  ...theme.textStyles.small,\n}));\n\nconst SliderRowLabel = styled.span(({ theme }) => ({\n  ...theme.textStyles.small,\n  color: theme.colors.textMuted,\n  marginBottom: '-6px',\n}));\n\nconst RowLabel = styled.span(({ theme }) => ({\n  ...theme.textStyles.small,\n  color: theme.colors.textMuted,\n  marginBottom: '2px',\n}));\n\nexport const LabeledRow = memo(function LabeledRow({\n  children,\n  label,\n}: {\n  children: ReactNode;\n  label: string;\n}) {\n  return (\n    <Row>\n      <Column>\n        <RowLabel>{label}</RowLabel>\n        <Row>{children}</Row>\n      </Column>\n    </Row>\n  );\n});\n\nexport const LabeledSliderRow = memo(function LabeledRow({\n  children,\n  label,\n}: {\n  children: ReactNode;\n  label: string;\n}) {\n  return (\n    <Row>\n      <Column>\n        <SliderRowLabel>{label}</SliderRowLabel>\n        <Row>{children}</Row>\n      </Column>\n    </Row>\n  );\n});\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  ColorPicker,\n  InputField,\n  Label,\n  LabeledElementView,\n  sketchColorToHex,\n  Spacer,\n} from 'noya-designsystem';\nimport { SetNumberMode } from 'noya-state';\nimport { clamp } from 'noya-utils';\nimport { memo, useCallback } from 'react';\nimport DimensionInput from './DimensionInput';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\nconst DEFAULT_SKETCH_COLOR: Sketch.Color = {\n  _class: 'color',\n  red: 0,\n  green: 0,\n  blue: 0,\n  alpha: 1,\n};\n\ninterface Props {\n  id: string;\n  color?: Sketch.Color;\n  /**\n   * The only required change handler is `onChangeColor`. However, to handle\n   * more granular changes specially, e.g. nudging opacity, you can pass other\n   * handlers.\n   */\n  onChangeColor: (color: Sketch.Color) => void;\n  onSetOpacity?: (value: number, mode: SetNumberMode) => void;\n}\n\nexport default memo(function ColorInspector({\n  id,\n  color,\n  onChangeColor,\n  onSetOpacity,\n}: Props) {\n  const colorInputId = `${id}-color`;\n  const hexInputId = `${id}-hex`;\n  const opacityInputId = `${id}-opacity`;\n\n  const displayColor = color ?? DEFAULT_SKETCH_COLOR;\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case colorInputId:\n          return <Label.Label>Color</Label.Label>;\n        case hexInputId:\n          return <Label.Label>Hex</Label.Label>;\n        case opacityInputId:\n          return <Label.Label>Opacity</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [colorInputId, hexInputId, opacityInputId],\n  );\n\n  const handleSetOpacity = useCallback(\n    (amount: number, mode: SetNumberMode) => {\n      const scaledAmount = amount / 100;\n\n      if (onSetOpacity) {\n        onSetOpacity(scaledAmount, mode);\n      } else {\n        const newValue =\n          mode === 'replace' ? scaledAmount : displayColor.alpha + scaledAmount;\n\n        onChangeColor({\n          ...displayColor,\n          alpha: clamp(newValue, 0, 1),\n        });\n      }\n    },\n    [displayColor, onChangeColor, onSetOpacity],\n  );\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.Column>\n        <ColorPicker value={displayColor} onChange={onChangeColor} />\n        <Spacer.Vertical size={10} />\n        <InspectorPrimitives.Row id={id}>\n          <LabeledElementView renderLabel={renderLabel}>\n            <Spacer.Vertical size={8} />\n            <InputField.Root id={hexInputId} labelPosition=\"start\">\n              <InputField.Input\n                value={color ? sketchColorToHex(displayColor).slice(1) : ''}\n                placeholder={color ? '' : 'multiple'}\n                onSubmit={useCallback(() => {}, [])}\n              />\n              <InputField.Label>#</InputField.Label>\n            </InputField.Root>\n            <Spacer.Horizontal size={8} />\n            <DimensionInput\n              id={opacityInputId}\n              size={50}\n              label=\"%\"\n              value={color ? Math.round(color.alpha * 100) : undefined}\n              onSetValue={handleSetOpacity}\n            />\n          </LabeledElementView>\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Column>\n    </InspectorPrimitives.Section>\n  );\n});\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  GradientPicker,\n  InputField,\n  Label,\n  LabeledElementView,\n  sketchColorToHex,\n  Spacer,\n} from 'noya-designsystem';\nimport { clamp } from 'noya-utils';\nimport { memo, useCallback, useMemo, useState } from 'react';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface Props {\n  id: string;\n  gradient: Sketch.GradientStop[];\n  onChangeColor?: (color: Sketch.Color, index: number) => void;\n  onChangeOpacity?: (amount: number) => void;\n  onNudgeOpacity?: (amount: number) => void;\n  onChangePosition?: (index: number, position: number) => void;\n  onAddStop?: (color: Sketch.Color, position: number) => void;\n  onDeleteStop?: (index: number) => void;\n}\n\nexport default memo(function GradientInspector({\n  id,\n  gradient,\n  onChangeOpacity,\n  onNudgeOpacity,\n  onChangeColor = (color: Sketch.Color, index: number) => {},\n  onChangePosition = (position: number, index: number) => {},\n  onAddStop = (color: Sketch.Color, position: number) => {},\n  onDeleteStop = (index: number) => {},\n}: Props) {\n  const colorInputId = `${id}-color`;\n  const hexInputId = `${id}-hex`;\n  const opacityInputId = `${id}-opacity`;\n\n  const [selectedStopIndex, setSelectedStopIndex] = useState(0);\n\n  const clampedSelectedStopIndex = !gradient[selectedStopIndex]\n    ? 0\n    : selectedStopIndex;\n\n  const selectedcolor = gradient[clampedSelectedStopIndex].color;\n  const selectedColorHex = sketchColorToHex(selectedcolor);\n  const hexValue = useMemo(() => selectedColorHex.slice(1), [selectedColorHex]);\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case colorInputId:\n          return <Label.Label>Color</Label.Label>;\n        case hexInputId:\n          return <Label.Label>Hex</Label.Label>;\n        case opacityInputId:\n          return <Label.Label>Opacity</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [colorInputId, hexInputId, opacityInputId],\n  );\n\n  const handleSubmitOpacity = useCallback(\n    (opacity: number) => {\n      if (onChangeOpacity) {\n        onChangeOpacity(opacity / 100);\n      } else {\n        onChangeColor(\n          {\n            ...selectedcolor,\n            alpha: clamp(opacity / 100, 0, 1),\n          },\n          clampedSelectedStopIndex,\n        );\n      }\n    },\n    [selectedcolor, clampedSelectedStopIndex, onChangeOpacity, onChangeColor],\n  );\n\n  const handleNudgeOpacity = useCallback(\n    (amount: number) => {\n      if (onNudgeOpacity) {\n        onNudgeOpacity(amount / 100);\n      } else {\n        onChangeColor(\n          {\n            ...selectedcolor,\n            alpha: clamp(selectedcolor.alpha + amount / 100, 0, 1),\n          },\n          clampedSelectedStopIndex,\n        );\n      }\n    },\n    [selectedcolor, clampedSelectedStopIndex, onNudgeOpacity, onChangeColor],\n  );\n\n  const handleChangeColor = useCallback(\n    (color: Sketch.Color) => {\n      onChangeColor(color, clampedSelectedStopIndex);\n    },\n    [clampedSelectedStopIndex, onChangeColor],\n  );\n\n  const handleChangePosition = useCallback(\n    (position: number) => {\n      onChangePosition(position, clampedSelectedStopIndex);\n    },\n    [clampedSelectedStopIndex, onChangePosition],\n  );\n\n  const handleAddStop = useCallback(\n    (color: Sketch.Color, position: number) => {\n      onAddStop(color, position);\n      setSelectedStopIndex(gradient.length);\n    },\n    [gradient, onAddStop, setSelectedStopIndex],\n  );\n\n  const handleDeleteStop = useCallback(() => {\n    if (gradient.length === 2) return;\n\n    onDeleteStop(clampedSelectedStopIndex);\n    setSelectedStopIndex(\n      clampedSelectedStopIndex - 1 > 0 ? 0 : clampedSelectedStopIndex - 1,\n    );\n  }, [gradient, clampedSelectedStopIndex, onDeleteStop, setSelectedStopIndex]);\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.Column>\n        <GradientPicker\n          value={gradient}\n          selectedStop={clampedSelectedStopIndex}\n          onChangeColor={handleChangeColor}\n          onChangePosition={handleChangePosition}\n          onAdd={handleAddStop}\n          onSelectStop={useCallback(\n            (index: number) => setSelectedStopIndex(index),\n            [setSelectedStopIndex],\n          )}\n          onDelete={handleDeleteStop}\n        />\n        <Spacer.Vertical size={10} />\n        <InspectorPrimitives.Row id={id}>\n          <LabeledElementView renderLabel={renderLabel}>\n            <Spacer.Vertical size={8} />\n            <InputField.Root id={hexInputId} labelPosition=\"start\">\n              <InputField.Input\n                value={hexValue ?? ''}\n                placeholder={hexValue ? '' : 'Multiple'}\n                onSubmit={useCallback(() => {}, [])}\n              />\n              <InputField.Label>#</InputField.Label>\n            </InputField.Root>\n            <Spacer.Horizontal size={8} />\n            <InputField.Root id={opacityInputId} size={50}>\n              <InputField.NumberInput\n                value={Math.round(selectedcolor.alpha * 100)}\n                onSubmit={handleSubmitOpacity}\n                onNudge={handleNudgeOpacity}\n              />\n              <InputField.Label>%</InputField.Label>\n            </InputField.Root>\n          </LabeledElementView>\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Column>\n    </InspectorPrimitives.Section>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { fileOpen } from 'browser-fs-access';\nimport {\n  InputField,\n  PatternPreviewBackground,\n  Select,\n  SketchPattern,\n  Slider,\n  Spacer,\n  SupportedImageUploadType,\n  SUPPORTED_IMAGE_UPLOAD_TYPES,\n  useHover,\n} from 'noya-designsystem';\nimport { memo, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { getFileExtensionForType, uuid } from 'noya-utils';\nimport ImageDropTarget, {\n  isSupportedFile,\n  TypedFile,\n} from '../ImageDropTarget';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\nconst Container = styled.div<{\n  isActive: boolean;\n}>(({ theme, isActive }) => ({\n  display: 'flex',\n  flex: 1,\n  position: 'relative',\n  outline: 'none',\n  borderRadius: '4px',\n  overflow: 'hidden',\n  minHeight: '150px',\n  border: (isActive ? '2px ' : '0px ') + theme.colors.primaryDark,\n  backgroundColor: 'white',\n  imageRendering: 'crisp-edges',\n  width: '100%',\n  justifyContent: 'center',\n}));\n\nconst DropTargetOverlay = styled.div(({ theme }) => ({\n  position: 'absolute',\n  inset: 0,\n  background: theme.colors.imageOverlay,\n  pointerEvents: 'none',\n}));\n\nconst UploadButton = styled.button<{ show: boolean }>(({ show = false }) => ({\n  color: 'white',\n  position: 'absolute',\n  background: 'rgba(0, 0, 0, 0.75)',\n  cursor: 'pointer',\n  userSelect: 'auto',\n  alignSelf: 'center',\n  height: '30px',\n  width: '105px',\n  borderRadius: '24px',\n  border: 'none',\n  display: show ? 'block' : 'none',\n  zIndex: 1,\n}));\n\ninterface Props {\n  id: string;\n  pattern: SketchPattern;\n  onChangeImage: (image: Sketch.FileRef | Sketch.DataRef) => void;\n  onChangeFillType: (amount: Sketch.PatternFillType) => void;\n  onChangeTileScale: (amount: number) => void;\n  createImage: (image: ArrayBuffer, _ref: string) => void;\n}\n\nexport type PatternFillType = 'Stretch' | 'Fill' | 'Fit' | 'Tile';\n\nexport const PATTERN_FILL_TYPE_OPTIONS: PatternFillType[] = [\n  'Tile',\n  'Fill',\n  'Stretch',\n  'Fit',\n];\n\ninterface PatternPreviewProps {\n  pattern: SketchPattern;\n  onAddImage: (image: ArrayBuffer, _ref: string) => void;\n  onChangeImage: (image: Sketch.FileRef | Sketch.DataRef) => void;\n}\n\nconst PatternPreview = memo(\n  ({ pattern, onAddImage, onChangeImage }: PatternPreviewProps) => {\n    const [isHovering, onHoverChange] = useState(false);\n    const { hoverProps } = useHover({\n      onHoverChange,\n    });\n\n    const handleImageFile = useCallback(\n      async (file: TypedFile<SupportedImageUploadType>) => {\n        const data = await file.arrayBuffer();\n        const _ref = `images/${uuid()}.${getFileExtensionForType(file.type)}`;\n\n        onAddImage(data, _ref);\n        onChangeImage({\n          _class: 'MSJSONFileReference',\n          _ref: _ref,\n          _ref_class: 'MSImageData',\n        });\n      },\n      [onAddImage, onChangeImage],\n    );\n\n    const openFile = useCallback(async () => {\n      const file = await fileOpen({\n        extensions: Object.values(SUPPORTED_IMAGE_UPLOAD_TYPES).map(\n          (type) => '.' + getFileExtensionForType(type),\n        ),\n        mimeTypes: SUPPORTED_IMAGE_UPLOAD_TYPES,\n      });\n\n      if (!isSupportedFile(file, SUPPORTED_IMAGE_UPLOAD_TYPES)) {\n        alert(\n          `Files of type ${\n            file.type\n          } aren't supported. The following types are supported: ${SUPPORTED_IMAGE_UPLOAD_TYPES.join(\n            ', ',\n          )}`,\n        );\n        return;\n      }\n\n      handleImageFile(file);\n    }, [handleImageFile]);\n\n    return (\n      <ImageDropTarget\n        onDropFile={handleImageFile}\n        supportedFileTypes={SUPPORTED_IMAGE_UPLOAD_TYPES}\n      >\n        {(isDropTargetActive: boolean) => (\n          <Container {...hoverProps} isActive={isDropTargetActive}>\n            {pattern.image && (\n              <PatternPreviewBackground\n                imageRef={pattern.image}\n                fillType={pattern.patternFillType}\n                tileScale={pattern.patternTileScale}\n              />\n            )}\n            <UploadButton\n              show={!isDropTargetActive && isHovering}\n              onClick={openFile}\n            >\n              Upload Image\n            </UploadButton>\n            {isDropTargetActive && <DropTargetOverlay />}\n          </Container>\n        )}\n      </ImageDropTarget>\n    );\n  },\n);\n\nexport default memo(function PatternInspector({\n  id,\n  pattern,\n  createImage,\n  onChangeImage,\n  onChangeFillType,\n  onChangeTileScale,\n}: Props) {\n  const patternType = pattern.patternFillType;\n  const isTile = patternType === Sketch.PatternFillType.Tile;\n  const changeFillType = useCallback(\n    (value: PatternFillType) => {\n      onChangeFillType(Sketch.PatternFillType[value]);\n    },\n    [onChangeFillType],\n  );\n\n  const onSubmitTileScale = useCallback(\n    (value: number) => {\n      onChangeTileScale(value / 100);\n    },\n    [onChangeTileScale],\n  );\n\n  const onNudgeTileScale = useCallback(\n    (value: number) => {\n      onChangeTileScale(value / 100);\n    },\n    [onChangeTileScale],\n  );\n\n  const scale = Math.round(pattern.patternTileScale * 100);\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.Column>\n        <PatternPreview\n          pattern={pattern}\n          onAddImage={createImage}\n          onChangeImage={onChangeImage}\n        />\n        <Spacer.Vertical size={10} />\n        <InspectorPrimitives.LabeledRow label={'Size'}>\n          <Select\n            id={`${id}-pattern-options`}\n            value={Sketch.PatternFillType[patternType] as PatternFillType}\n            options={PATTERN_FILL_TYPE_OPTIONS}\n            onChange={changeFillType}\n          />\n        </InspectorPrimitives.LabeledRow>\n        {isTile && (\n          <>\n            <Spacer.Vertical size={10} />\n            <InspectorPrimitives.LabeledSliderRow label={'Scale'}>\n              <Slider\n                id={`${id}-slider`}\n                value={scale}\n                onValueChange={onSubmitTileScale}\n                min={10}\n                max={200}\n              />\n              <Spacer.Horizontal size={10} />\n              <InputField.Root size={50}>\n                <InputField.NumberInput\n                  value={scale}\n                  onSubmit={onSubmitTileScale}\n                  onNudge={onNudgeTileScale}\n                />\n                <InputField.Label>{'%'}</InputField.Label>\n              </InputField.Root>\n            </InspectorPrimitives.LabeledSliderRow>\n          </>\n        )}\n      </InspectorPrimitives.Column>\n    </InspectorPrimitives.Section>\n  );\n});\n","import { GridIcon, RowsIcon } from '@radix-ui/react-icons';\nimport { RadioGroup } from 'noya-designsystem';\nimport styled from 'styled-components';\nimport { memo, useCallback } from 'react';\n\nexport const Square = styled.div<{ background?: string; selected?: boolean }>(\n  ({ theme, background, selected = false }) => ({\n    height: '25px',\n    width: '25px',\n    background,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    border: `2px solid ${\n      selected ? 'rgb(132,63,255)' : theme.colors.popover.background\n    } `,\n    borderRadius: '4px',\n    cursor: 'pointer',\n    position: 'relative',\n  }),\n);\n\nexport const GridSmall = styled.div({\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fill, 25px)',\n  gap: '5px',\n});\n\nexport const RadioGroupContainer = styled.div({\n  flex: '0 0 50px',\n  display: 'flex',\n  alignItems: 'stretch',\n});\n\nexport type LayoutType = 'list' | 'grid';\n\nexport const LayoutRadioGroup = memo(\n  ({\n    layout,\n    setLayout,\n  }: {\n    layout: LayoutType;\n    setLayout: (value: LayoutType) => void;\n  }) => (\n    <RadioGroupContainer>\n      <RadioGroup.Root\n        id={'layout'}\n        value={layout}\n        onValueChange={useCallback(\n          (event: React.ChangeEvent<HTMLInputElement>) =>\n            setLayout(event.target.value as LayoutType),\n          [setLayout],\n        )}\n      >\n        <RadioGroup.Item value=\"grid\" tooltip=\"Grid\">\n          <GridIcon />\n        </RadioGroup.Item>\n        <RadioGroup.Item value=\"list\" tooltip=\"List\">\n          <RowsIcon />\n        </RadioGroup.Item>\n      </RadioGroup.Root>\n    </RadioGroupContainer>\n  ),\n);\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Spacer,\n  Select,\n  ListView,\n  Button,\n  Divider,\n  ContextMenu,\n  getGradientBackground,\n  MenuItem,\n} from 'noya-designsystem';\nimport { memo, useState, useCallback } from 'react';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport {\n  GridSmall,\n  Square,\n  LayoutType,\n  LayoutRadioGroup,\n} from './PickerAssetGrid';\n\nexport type MenuItemType = 'rename' | 'delete';\n\nexport const menuItems: MenuItem<MenuItemType>[] = [\n  { value: 'rename', title: 'Rename' },\n  { value: 'delete', title: 'Delete' },\n];\n\ninterface GridsProps {\n  gradients: Sketch.GradientAsset[];\n  handleSelectMenuItem: (value: MenuItemType) => void;\n  onSelectGradientAsset: (gradient: Sketch.Gradient) => void;\n  setGradientId: (id: string) => void;\n}\n\nconst GradientsList = memo(function GradientsList({\n  gradients,\n  setGradientId,\n  handleSelectMenuItem,\n  onSelectGradientAsset,\n}: GridsProps) {\n  return (\n    <ListView.Root>\n      {gradients.map(({ do_objectID, gradient, name }) => {\n        const colorString = getGradientBackground(\n          gradient.stops,\n          gradient.gradientType,\n          180,\n        );\n\n        return (\n          <ContextMenu<MenuItemType>\n            key={do_objectID}\n            items={menuItems}\n            onSelect={handleSelectMenuItem}\n          >\n            <ListView.Row\n              id={do_objectID}\n              onContextMenu={() => setGradientId(do_objectID)}\n              onClick={() => onSelectGradientAsset(gradient)}\n            >\n              <Square background={colorString} />\n              <Spacer.Horizontal size={8} />\n              {name}\n            </ListView.Row>\n          </ContextMenu>\n        );\n      })}\n    </ListView.Root>\n  );\n});\n\nconst GradientsGrid = memo(function GradientsGrid({\n  gradients,\n  setGradientId,\n  handleSelectMenuItem,\n  onSelectGradientAsset,\n}: GridsProps) {\n  return (\n    <GridSmall>\n      {gradients.map(({ do_objectID, gradient }) => {\n        const gridString = getGradientBackground(\n          gradient.stops,\n          gradient.gradientType,\n          180,\n        );\n\n        return (\n          <ContextMenu<MenuItemType>\n            key={do_objectID}\n            items={menuItems}\n            onSelect={handleSelectMenuItem}\n          >\n            <Square\n              background={gridString}\n              onContextMenu={() => setGradientId(do_objectID)}\n              onClick={() => onSelectGradientAsset(gradient)}\n            />\n          </ContextMenu>\n        );\n      })}\n    </GridSmall>\n  );\n});\n\ninterface Props {\n  gradientAssets: Sketch.GradientAsset[];\n  onCreate: () => void;\n  onChange: (gradient: Sketch.Gradient) => void;\n  onRename: (id: string, name: string) => void;\n  onDelete: (id: string) => void;\n}\n\nexport default memo(function PickerGradients({\n  gradientAssets,\n  onChange,\n  onCreate,\n  onRename,\n  onDelete,\n}: Props) {\n  const [gradientLayout, setGradientLayout] = useState<LayoutType>('grid');\n  const [gradientId, setGradientId] = useState<string | undefined>(undefined);\n\n  const handleSelectMenuItem = useCallback(\n    (value: MenuItemType) => {\n      if (!gradientId) return;\n      switch (value) {\n        case 'rename': {\n          const name = prompt('New Gradient Name');\n          if (!name) return;\n          onRename(gradientId, name);\n          break;\n        }\n        case 'delete': {\n          onDelete(gradientId);\n          break;\n        }\n      }\n    },\n    [gradientId, onRename, onDelete],\n  );\n\n  return (\n    <>\n      <InspectorPrimitives.Section>\n        <Button id={'create-theme-gradient'} onClick={onCreate}>\n          Create Theme Gradient\n        </Button>\n      </InspectorPrimitives.Section>\n      <Divider />\n      <InspectorPrimitives.Section>\n        <InspectorPrimitives.Row>\n          <Select\n            id=\"gradient-category\"\n            options={['Document']}\n            value=\"Document\"\n            onChange={() => {}}\n          />\n          <Spacer.Horizontal size={8} />\n          <LayoutRadioGroup\n            layout={gradientLayout}\n            setLayout={setGradientLayout}\n          />\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Section>\n      {gradientAssets.length > 0 && (\n        <InspectorPrimitives.Section>\n          {gradientLayout === 'grid' ? (\n            <GradientsGrid\n              gradients={gradientAssets}\n              setGradientId={setGradientId}\n              handleSelectMenuItem={handleSelectMenuItem}\n              onSelectGradientAsset={onChange}\n            />\n          ) : (\n            <GradientsList\n              gradients={gradientAssets}\n              setGradientId={setGradientId}\n              handleSelectMenuItem={handleSelectMenuItem}\n              onSelectGradientAsset={onChange}\n            />\n          )}\n        </InspectorPrimitives.Section>\n      )}\n    </>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Divider, PatternPreviewBackground, Select } from 'noya-designsystem';\nimport { memo, useCallback } from 'react';\nimport { useTheme } from 'styled-components';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport { GridSmall, Square } from './PickerAssetGrid';\n\nconst PatternSquare = memo(\n  ({\n    item,\n    onClick,\n  }: {\n    item: Sketch.FileRef | Sketch.DataRef;\n    onClick: (file: Sketch.FileRef | Sketch.DataRef) => void;\n  }) => {\n    const { inputBackground } = useTheme().colors;\n\n    return (\n      <Square\n        background={inputBackground}\n        onClick={useCallback(() => onClick(item), [item, onClick])}\n      >\n        <PatternPreviewBackground\n          imageRef={item}\n          fillType={Sketch.PatternFillType.Fit}\n          tileScale={1}\n        />\n      </Square>\n    );\n  },\n);\n\ninterface Props {\n  imageAssets: (Sketch.FileRef | Sketch.DataRef)[];\n  onChange: (file: Sketch.FileRef | Sketch.DataRef) => void;\n}\n\nexport default memo(function PickerPatterns({ imageAssets, onChange }: Props) {\n  return (\n    <>\n      <Divider />\n      <InspectorPrimitives.Section>\n        <InspectorPrimitives.Row>\n          <Select\n            id=\"document-images\"\n            options={['Document Images']}\n            value=\"Document Images\"\n            onChange={() => {}}\n          />\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Section>\n      {imageAssets.length > 0 && (\n        <InspectorPrimitives.Section>\n          <GridSmall>\n            {imageAssets.map((item) => (\n              <PatternSquare key={item._ref} item={item} onClick={onChange} />\n            ))}\n          </GridSmall>\n        </InspectorPrimitives.Section>\n      )}\n    </>\n  );\n});\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Button,\n  Divider,\n  ListView,\n  Select,\n  sketchColorToRgbaString,\n  Spacer,\n} from 'noya-designsystem';\nimport { uuid } from 'noya-utils';\nimport { memo, useCallback, useState } from 'react';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport {\n  GridSmall,\n  LayoutRadioGroup,\n  LayoutType,\n  Square,\n} from './PickerAssetGrid';\n\ninterface SwatchesProps {\n  selectedId?: string;\n  swatches: Sketch.Swatch[];\n  onSelect: (id: string) => void;\n}\n\nconst SwatchesList = memo(function SwatchesList({\n  selectedId,\n  swatches,\n  onSelect,\n}: SwatchesProps) {\n  return (\n    <ListView.Root>\n      {swatches.map((item) => (\n        <ListView.Row\n          id={item.do_objectID}\n          key={item.do_objectID}\n          selected={selectedId === item.do_objectID}\n          onClick={() => {\n            onSelect(item.do_objectID);\n          }}\n        >\n          <Square background={sketchColorToRgbaString(item.value)} />\n          <Spacer.Horizontal size={8} />\n          {item.name}\n        </ListView.Row>\n      ))}\n    </ListView.Root>\n  );\n});\n\nconst SwatchesGrid = memo(function SwatchesGrid({\n  selectedId,\n  swatches,\n  onSelect,\n}: SwatchesProps) {\n  return (\n    <GridSmall>\n      {swatches.map((item) => (\n        <Square\n          key={item.do_objectID}\n          background={sketchColorToRgbaString(item.value)}\n          selected={selectedId === item.do_objectID}\n          onClick={() => {\n            onSelect(item.do_objectID);\n          }}\n        />\n      ))}\n    </GridSmall>\n  );\n});\n\ninterface Props {\n  selectedId?: string;\n  swatches: Sketch.Swatch[];\n  onChange: (swatchID: string) => void;\n  onCreate: (swatchID: string, name: string) => void;\n  onDetach: () => void;\n}\n\nexport default memo(function PickerSwatches({\n  selectedId,\n  swatches,\n  onChange,\n  onCreate,\n  onDetach,\n}: Props) {\n  const [swatchLayout, setSwatchLayout] = useState<LayoutType>('grid');\n\n  const isSwatch = swatches.some((e) => e.do_objectID === selectedId);\n\n  const handleCreate = useCallback(() => {\n    const swatchName = prompt('New Theme Color Name');\n\n    if (!swatchName) return;\n\n    const id = uuid();\n\n    onCreate(id, swatchName);\n  }, [onCreate]);\n\n  return (\n    <>\n      <InspectorPrimitives.Section>\n        {isSwatch ? (\n          <Button id=\"detach-theme-color\" onClick={onDetach}>\n            Detach Theme Color\n          </Button>\n        ) : (\n          <Button id=\"create-theme-color\" onClick={handleCreate}>\n            Create Theme Color\n          </Button>\n        )}\n      </InspectorPrimitives.Section>\n      <Divider />\n      <InspectorPrimitives.Section>\n        <InspectorPrimitives.Row>\n          <Select\n            id=\"colors-category\"\n            options={['Theme colors']}\n            value=\"Theme colors\"\n            onChange={() => {}}\n          />\n          <Spacer.Horizontal size={8} />\n          <LayoutRadioGroup layout={swatchLayout} setLayout={setSwatchLayout} />\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Section>\n      {swatches.length > 0 && (\n        <InspectorPrimitives.Section>\n          {swatchLayout === 'grid' ? (\n            <SwatchesGrid\n              selectedId={selectedId}\n              swatches={swatches}\n              onSelect={onChange}\n            />\n          ) : (\n            <SwatchesList\n              selectedId={selectedId}\n              swatches={swatches}\n              onSelect={onChange}\n            />\n          )}\n        </InspectorPrimitives.Section>\n      )}\n    </>\n  );\n});\n","import * as Popover from '@radix-ui/react-popover';\nimport { Slot } from '@radix-ui/react-slot';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  ColorInputField,\n  Divider,\n  Select,\n  SketchPattern,\n} from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useApplicationState } from 'noya-app-state-context';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport ColorInspector from './ColorInspector';\nimport GradientInspector from './GradientInspector';\nimport PatternInspector from './PatternInspector';\nimport PickerGradients from './PickerGradients';\nimport PickerPatterns from './PickerPatterns';\nimport ColorPickerSwatches from './PickerSwatches';\n\nconst Content = styled(Popover.Content)(({ theme }) => ({\n  width: '240px',\n  borderRadius: 4,\n  fontSize: 14,\n  backgroundColor: theme.colors.popover.background,\n  boxShadow: '0 2px 4px rgba(0,0,0,0.2), 0 0 12px rgba(0,0,0,0.1)',\n  maxHeight: '600px',\n  overflowY: 'auto',\n}));\n\ntype FillOption =\n  | 'Solid Color'\n  | 'Linear Gradient'\n  | 'Radial Gradient'\n  | 'Angular Gradient'\n  | 'Pattern Fill';\n\nfunction ColorFillPicker({\n  id,\n  color,\n  onChangeColor,\n}: ColorFillProps & { id?: string }) {\n  const [state, dispatch] = useApplicationState();\n\n  const swatches = Selectors.getSharedSwatches(state);\n\n  const onChangeSwatch = useCallback(\n    (swatchID: string) => {\n      const swatch = swatches.find((swatch) => swatch.do_objectID === swatchID);\n\n      if (!swatch) return;\n\n      onChangeColor({ ...swatch.value, swatchID });\n    },\n    [onChangeColor, swatches],\n  );\n\n  const detachThemeColor = useCallback(() => {\n    if (!color) return;\n\n    onChangeColor({ ...color, swatchID: undefined });\n  }, [onChangeColor, color]);\n\n  const createThemeColor = useCallback(\n    (swatchID: string, name: string) => {\n      if (!color) return;\n\n      dispatch('addSwatch', name, color, swatchID);\n      onChangeColor({ ...color, swatchID });\n    },\n    [color, dispatch, onChangeColor],\n  );\n\n  return (\n    <>\n      <ColorInspector\n        id={`${id}-color-inspector`}\n        color={color}\n        onChangeColor={onChangeColor}\n      />\n      <ColorPickerSwatches\n        selectedId={color ? color.swatchID : undefined}\n        swatches={swatches}\n        onChange={onChangeSwatch}\n        onCreate={createThemeColor}\n        onDetach={detachThemeColor}\n      />\n    </>\n  );\n}\n\nfunction GradientFillPicker({\n  id,\n  gradient,\n  onChangeGradient,\n  onChangeGradientColor,\n  onChangeGradientPosition,\n  onAddGradientStop,\n  onDeleteGradientStop,\n}: Omit<GradientFillProps, 'onChangeGradientType'> & { id?: string }) {\n  const [state, dispatch] = useApplicationState();\n\n  const gradientAssets = Selectors.getGradientAssets(state);\n\n  const createThemeGradient = useCallback(() => {\n    if (!gradient) return;\n\n    const gradientName = prompt('New Gradient Assets Name');\n\n    if (!gradientName) return;\n\n    dispatch('addGradientAsset', gradientName, gradient);\n  }, [dispatch, gradient]);\n\n  const onRemoveThemeGradient = useCallback(\n    (id: string) => dispatch('removeGradientAsset', id),\n    [dispatch],\n  );\n\n  const onRenameThemeGradient = useCallback(\n    (id: string, name: string) => dispatch('setGradientAssetName', id, name),\n    [dispatch],\n  );\n\n  return (\n    <>\n      <GradientInspector\n        id={`${id}-gradient-inspector`}\n        gradient={gradient.stops}\n        onChangeColor={onChangeGradientColor}\n        onChangePosition={onChangeGradientPosition}\n        onAddStop={onAddGradientStop}\n        onDeleteStop={onDeleteGradientStop}\n      />\n      <PickerGradients\n        gradientAssets={gradientAssets}\n        onCreate={createThemeGradient}\n        onChange={onChangeGradient}\n        onDelete={onRemoveThemeGradient}\n        onRename={onRenameThemeGradient}\n      />\n    </>\n  );\n}\n\nfunction PatternFillPicker({\n  id,\n  pattern,\n  onChangePatternFillType,\n  onChangePatternTileScale,\n  onChangeFillImage,\n}: PatternFillProps & { id?: string }) {\n  const [state, dispatch] = useApplicationState();\n\n  const createImage = useCallback(\n    (data: ArrayBuffer, _ref: string) => {\n      dispatch('addImage', data, _ref);\n    },\n    [dispatch],\n  );\n\n  return (\n    <>\n      <PatternInspector\n        id={`${id}-pattern-inspector`}\n        pattern={pattern}\n        createImage={createImage}\n        onChangeImage={onChangeFillImage}\n        onChangeFillType={onChangePatternFillType}\n        onChangeTileScale={onChangePatternTileScale}\n      />\n      <PickerPatterns\n        imageAssets={Selectors.getImageAssets(state)}\n        onChange={onChangeFillImage}\n      />\n    </>\n  );\n}\n\ninterface FillOptionSelectProps {\n  fillType: Sketch.FillType;\n  gradientType: Sketch.GradientType;\n  onChangeType?: (type: Sketch.FillType) => void;\n  onChangeGradientType?: (type: Sketch.GradientType) => void;\n  supportsGradients: boolean;\n  supportsPatterns: boolean;\n}\n\nfunction FillOptionSelect({\n  fillType,\n  gradientType,\n  onChangeType,\n  onChangeGradientType,\n  supportsGradients,\n  supportsPatterns,\n}: FillOptionSelectProps) {\n  const fillOptions: FillOption[] = useMemo(\n    () => [\n      'Solid Color' as const,\n      ...(supportsGradients\n        ? [\n            'Linear Gradient' as const,\n            'Radial Gradient' as const,\n            'Angular Gradient' as const,\n          ]\n        : []),\n      ...(supportsPatterns ? ['Pattern Fill' as const] : []),\n    ],\n    [supportsGradients, supportsPatterns],\n  );\n\n  const value: FillOption = useMemo(() => {\n    switch (fillType) {\n      case Sketch.FillType.Pattern:\n        return 'Pattern Fill';\n      case Sketch.FillType.Gradient:\n        const gradientTypeString = Sketch.GradientType[gradientType];\n        return `${gradientTypeString} Gradient` as FillOption;\n      case Sketch.FillType.Color:\n        return 'Solid Color';\n    }\n  }, [fillType, gradientType]);\n\n  const handleChange = useCallback(\n    (value: FillOption) => {\n      if (!onChangeType) return;\n\n      switch (value) {\n        case 'Solid Color':\n          onChangeType(Sketch.FillType.Color);\n          break;\n        case 'Linear Gradient':\n        case 'Angular Gradient':\n        case 'Radial Gradient':\n          onChangeType(Sketch.FillType.Gradient);\n\n          onChangeGradientType?.(\n            value === 'Linear Gradient'\n              ? Sketch.GradientType.Linear\n              : value === 'Radial Gradient'\n              ? Sketch.GradientType.Radial\n              : Sketch.GradientType.Angular,\n          );\n          break;\n        case 'Pattern Fill':\n          onChangeType(Sketch.FillType.Pattern);\n          break;\n      }\n    },\n    [onChangeType, onChangeGradientType],\n  );\n\n  return (\n    <Select\n      id=\"fill-options\"\n      value={value}\n      options={fillOptions}\n      onChange={handleChange}\n    />\n  );\n}\n\nexport type ColorFillProps = {\n  color?: Sketch.Color;\n  onChangeColor: (color: Sketch.Color) => void;\n};\n\nexport type GradientFillProps = {\n  gradient: Sketch.Gradient;\n  onChangeGradient: (type: Sketch.Gradient) => void;\n  onChangeGradientColor: (color: Sketch.Color, index: number) => void;\n  onChangeGradientType: (type: Sketch.GradientType) => void;\n  onChangeGradientPosition: (index: number, position: number) => void;\n  onAddGradientStop: (color: Sketch.Color, position: number) => void;\n  onDeleteGradientStop: (index: number) => void;\n};\n\nexport type PatternFillProps = {\n  pattern: SketchPattern;\n  onChangePatternFillType: (value: Sketch.PatternFillType) => void;\n  onChangePatternTileScale: (amount: number) => void;\n  onChangeFillImage: (value: Sketch.FileRef | Sketch.DataRef) => void;\n};\n\ninterface Props {\n  id: string;\n  fillType?: Sketch.FillType;\n  onChangeType?: (type: Sketch.FillType) => void;\n  hasMultipleFills?: boolean;\n  colorProps: ColorFillProps;\n  gradientProps?: GradientFillProps;\n  patternProps?: PatternFillProps;\n}\n\nexport default memo(function FillInputFieldWithPicker({\n  id,\n  fillType,\n  onChangeType,\n  hasMultipleFills = false,\n  colorProps,\n  gradientProps,\n  patternProps,\n}: Props) {\n  const picker = useMemo(() => {\n    switch (fillType) {\n      case Sketch.FillType.Gradient:\n        return gradientProps ? (\n          <GradientFillPicker id={id} {...gradientProps} />\n        ) : null;\n      case Sketch.FillType.Pattern:\n        return patternProps ? (\n          <PatternFillPicker id={id} {...patternProps} />\n        ) : null;\n      case Sketch.FillType.Color:\n      case undefined:\n        return <ColorFillPicker id={id} {...colorProps} />;\n    }\n  }, [id, fillType, colorProps, gradientProps, patternProps]);\n\n  const value = useMemo(() => {\n    switch (fillType) {\n      case Sketch.FillType.Gradient:\n        return gradientProps?.gradient;\n      case Sketch.FillType.Pattern:\n        return patternProps?.pattern;\n      case Sketch.FillType.Color:\n      case undefined:\n        return colorProps.color;\n    }\n  }, [\n    fillType,\n    colorProps.color,\n    gradientProps?.gradient,\n    patternProps?.pattern,\n  ]);\n\n  return (\n    <Popover.Root>\n      <Popover.Trigger as={Slot}>\n        <ColorInputField id={id} value={hasMultipleFills ? undefined : value} />\n      </Popover.Trigger>\n      <Content side=\"bottom\" align=\"center\">\n        {(gradientProps || patternProps) && (\n          <>\n            <InspectorPrimitives.Section>\n              <InspectorPrimitives.Row>\n                <FillOptionSelect\n                  supportsGradients={!!gradientProps}\n                  supportsPatterns={!!patternProps}\n                  fillType={fillType ?? Sketch.FillType.Color}\n                  gradientType={\n                    gradientProps?.gradient.gradientType ??\n                    Sketch.GradientType.Linear\n                  }\n                  onChangeType={onChangeType}\n                  onChangeGradientType={gradientProps?.onChangeGradientType}\n                />\n              </InspectorPrimitives.Row>\n            </InspectorPrimitives.Section>\n            <Divider />\n          </>\n        )}\n        {picker}\n      </Content>\n    </Popover.Root>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Label,\n  LabeledElementView,\n  RadioGroup,\n  Spacer,\n} from 'noya-designsystem';\nimport { memo, ReactNode, useCallback } from 'react';\nimport { SetNumberMode } from 'noya-state';\nimport BorderCenterIcon from '../icons/BorderCenterIcon';\nimport BorderInsideIcon from '../icons/BorderInsideIcon';\nimport BorderOutsideIcon from '../icons/BorderOutsideIcon';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport DimensionInput from './DimensionInput';\nimport { DimensionValue } from './DimensionsInspector';\nimport FillInputFieldWithPicker, {\n  ColorFillProps,\n  GradientFillProps,\n} from './FillInputFieldWithPicker';\n\nfunction toPositionString(position: Sketch.BorderPosition) {\n  switch (position) {\n    case Sketch.BorderPosition.Inside:\n      return 'inside';\n    case Sketch.BorderPosition.Center:\n      return 'center';\n    case Sketch.BorderPosition.Outside:\n      return 'outside';\n  }\n}\n\nfunction toPositionEnum(position: string): Sketch.BorderPosition {\n  switch (position) {\n    case 'inside':\n      return Sketch.BorderPosition.Inside;\n    case 'center':\n      return Sketch.BorderPosition.Center;\n    case 'outside':\n      return Sketch.BorderPosition.Outside;\n    default:\n      throw new Error('Bad border position value');\n  }\n}\n\ninterface Props {\n  id: string;\n  prefix?: ReactNode;\n  fillType?: Sketch.FillType;\n  hasMultipleFills: boolean;\n  width: DimensionValue;\n  position: Sketch.BorderPosition;\n  onSetWidth: (amount: number, mode: SetNumberMode) => void;\n  onChangePosition: (value: Sketch.BorderPosition) => void;\n  onChangeFillType: (type: Sketch.FillType) => void;\n  colorProps: ColorFillProps;\n  gradientProps: GradientFillProps;\n}\n\nexport default memo(function BorderRow({\n  id,\n  prefix,\n  fillType,\n  hasMultipleFills,\n  width,\n  position,\n  onSetWidth,\n  onChangePosition,\n  onChangeFillType,\n  colorProps,\n  gradientProps,\n}: Props) {\n  const colorInputId = `${id}-color`;\n  const borderPositionId = `${id}-hex`;\n  const widthInputId = `${id}-width`;\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case colorInputId:\n          return <Label.Label>Color</Label.Label>;\n        case borderPositionId:\n          return <Label.Label>Position</Label.Label>;\n        case widthInputId:\n          return <Label.Label>Width</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [colorInputId, borderPositionId, widthInputId],\n  );\n\n  const handleChangePosition = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      onChangePosition(toPositionEnum(event.target.value));\n    },\n    [onChangePosition],\n  );\n\n  return (\n    <InspectorPrimitives.Row>\n      <LabeledElementView renderLabel={renderLabel}>\n        {prefix}\n        {prefix && <Spacer.Horizontal size={8} />}\n        <FillInputFieldWithPicker\n          id={colorInputId}\n          fillType={fillType}\n          hasMultipleFills={hasMultipleFills}\n          onChangeType={onChangeFillType}\n          colorProps={colorProps}\n          gradientProps={gradientProps}\n        />\n        <Spacer.Horizontal size={8} />\n        <RadioGroup.Root\n          id={borderPositionId}\n          value={toPositionString(position)}\n          onValueChange={handleChangePosition}\n        >\n          <RadioGroup.Item value=\"inside\" tooltip=\"Inside\">\n            <BorderInsideIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item value=\"center\" tooltip=\"Center\">\n            <BorderCenterIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item value=\"outside\" tooltip=\"Outside\">\n            <BorderOutsideIcon />\n          </RadioGroup.Item>\n        </RadioGroup.Root>\n        <Spacer.Horizontal size={8} />\n        <DimensionInput\n          id={widthInputId}\n          size={50}\n          value={width}\n          onSetValue={onSetWidth}\n        />\n      </LabeledElementView>\n    </InspectorPrimitives.Row>\n  );\n});\n","export default function getMultiValue<T>(\n  values: T[],\n  isEqual: (a: T, b: T) => boolean = (a, b) => a === b,\n): T | undefined {\n  if (values.length === 1) {\n    return values[0];\n  } else if (values.length > 1) {\n    const first = values[0];\n\n    return values.every((v) => isEqual(v, first)) ? first : undefined;\n  } else {\n    return undefined;\n  }\n}\n","export default function getMultiNumberValue(\n  values: number[],\n): number | undefined {\n  if (values.length === 1) {\n    return values[0];\n  } else if (values.length > 1) {\n    const min = Math.min(...values);\n    const max = Math.max(...values);\n\n    return max - min < Number.EPSILON ? min : undefined;\n  } else {\n    return undefined;\n  }\n}\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Selectors } from 'noya-state';\nimport { memo, ReactNode, useCallback, useMemo } from 'react';\nimport { isDeepEqual, zipLongest } from 'noya-utils';\nimport ArrayController from '../components/inspector/ArrayController';\nimport BorderRow from '../components/inspector/BorderRow';\nimport { DimensionValue } from '../components/inspector/DimensionsInspector';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiValue from '../utils/getMultiValue';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\n\ntype EditableBorder = {\n  // TODO: Indeterminate `isEnabled` state\n  isEnabled: boolean;\n  hasMultipleFills: boolean;\n  color?: Sketch.Color;\n  fillType?: Sketch.FillType;\n  position?: Sketch.BorderPosition;\n  thickness?: DimensionValue;\n  contextOpacity?: DimensionValue;\n  gradient: Sketch.Gradient;\n};\n\nexport default memo(function BorderInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedStyles),\n  );\n\n  const layerBorderLists = useShallowArray(\n    selectedStyles.map((style) => style?.borders ?? []),\n  );\n\n  const editableBorders = useMemo(\n    () =>\n      zipLongest(undefined, ...layerBorderLists).map(\n        (borders): EditableBorder => {\n          const filtered = borders.flatMap((border) =>\n            border ? [border] : [],\n          );\n\n          const fillType = getMultiValue(\n            filtered.map((border) => border.fillType),\n            isDeepEqual,\n          );\n\n          const gradient = getMultiValue(\n            filtered.map((border) => border.gradient),\n            isDeepEqual,\n          );\n\n          return {\n            isEnabled:\n              getMultiValue(filtered.map((border) => border.isEnabled)) ?? true,\n            hasMultipleFills:\n              fillType === undefined ||\n              (fillType === Sketch.FillType.Gradient && !gradient),\n            color: getMultiValue(\n              filtered.map((border) => border.color),\n              isDeepEqual,\n            ),\n            fillType,\n            position: getMultiValue(\n              filtered.map((border) => border.position),\n              isDeepEqual,\n            ),\n            thickness: getMultiNumberValue(\n              filtered.map((border) => border.thickness),\n            ),\n            contextOpacity: getMultiNumberValue(\n              filtered.map((border) => border.contextSettings.opacity),\n            ),\n            gradient: gradient ?? filtered[0].gradient,\n          };\n        },\n      ),\n    [layerBorderLists],\n  );\n\n  return (\n    <ArrayController<EditableBorder>\n      title=\"Borders\"\n      id=\"borders\"\n      key=\"borders\"\n      value={editableBorders}\n      onClickPlus={useCallback(() => dispatch('addNewBorder'), [dispatch])}\n      onClickTrash={useCallback(() => dispatch('deleteDisabledBorders'), [\n        dispatch,\n      ])}\n      onDeleteItem={useCallback((index) => dispatch('deleteBorder', index), [\n        dispatch,\n      ])}\n      onMoveItem={useCallback(\n        (sourceIndex, destinationIndex) =>\n          dispatch('moveBorder', sourceIndex, destinationIndex),\n        [dispatch],\n      )}\n      onChangeCheckbox={useCallback(\n        (index, checked) => dispatch('setBorderEnabled', index, checked),\n        [dispatch],\n      )}\n    >\n      {useCallback(\n        ({\n          item,\n          index,\n          checkbox,\n        }: {\n          item: EditableBorder;\n          index: number;\n          checkbox: ReactNode;\n        }) => (\n          <BorderRow\n            id={`border-${index}`}\n            prefix={checkbox}\n            fillType={item.fillType ?? Sketch.FillType.Color}\n            hasMultipleFills={item.hasMultipleFills}\n            width={item.thickness}\n            position={item.position ?? Sketch.BorderPosition.Inside}\n            onSetWidth={(value, mode) =>\n              dispatch('setBorderWidth', index, value, mode)\n            }\n            onChangePosition={(value) => {\n              dispatch('setBorderPosition', index, value);\n            }}\n            onChangeFillType={(value) =>\n              dispatch('setBorderFillType', index, value)\n            }\n            colorProps={{\n              color: item.color,\n              onChangeColor: (value) =>\n                dispatch('setBorderColor', index, value),\n            }}\n            gradientProps={{\n              gradient: item.gradient,\n              onChangeGradientColor: (value, stopIndex) =>\n                dispatch('setBorderGradientColor', index, stopIndex, value),\n              onChangeGradientPosition: (value, stopIndex) =>\n                dispatch('setBorderGradientPosition', index, stopIndex, value),\n              onAddGradientStop: (color, position) =>\n                dispatch('addBorderGradientStop', index, color, position),\n              onDeleteGradientStop: (value) =>\n                dispatch('deleteBorderGradientStop', index, value),\n              onChangeGradientType: (value) =>\n                dispatch('setBorderGradientType', index, value),\n              onChangeGradient: (value) =>\n                dispatch('setBorderGradient', index, value),\n            }}\n          />\n        ),\n        [dispatch],\n      )}\n    </ArrayController>\n  );\n});\n","import { InputField, Slider, Spacer } from 'noya-designsystem';\nimport { SetNumberMode } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport { DimensionValue } from './DimensionsInspector';\n\ninterface ColorControlInputProps {\n  id: string;\n  label: string;\n  value: DimensionValue;\n  onChange: (value: number, mode: SetNumberMode) => void;\n}\n\nfunction ColorControlInput({\n  id,\n  label,\n  value,\n  onChange,\n}: ColorControlInputProps) {\n  const handleSubmit = useCallback(\n    (value: number) => onChange(value, 'replace'),\n    [onChange],\n  );\n\n  const handleNudge = useCallback(\n    (value: number) => onChange(value, 'adjust'),\n    [onChange],\n  );\n\n  return (\n    <InspectorPrimitives.LabeledRow label={label}>\n      <Slider\n        id={`${id}-slider`}\n        value={value ?? 0}\n        onValueChange={handleSubmit}\n        min={-100}\n        max={100}\n      />\n      <Spacer.Horizontal size={10} />\n      <InputField.Root id={`${id}-input`} size={50}>\n        <InputField.NumberInput\n          value={value}\n          placeholder={value === undefined ? 'multi' : undefined}\n          onSubmit={handleSubmit}\n          onNudge={handleNudge}\n        />\n        <InputField.Label>%</InputField.Label>\n      </InputField.Root>\n    </InspectorPrimitives.LabeledRow>\n  );\n}\n\ninterface Props {\n  id: string;\n  hue: DimensionValue;\n  saturation: DimensionValue;\n  brightness: DimensionValue;\n  contrast: DimensionValue;\n  onChangeHue: (value: number, mode: SetNumberMode) => void;\n  onChangeSaturation: (value: number, mode: SetNumberMode) => void;\n  onChangeBrightness: (value: number, mode: SetNumberMode) => void;\n  onChangeContrast: (value: number, mode: SetNumberMode) => void;\n}\n\nexport default memo(function FillRow({\n  id,\n  hue,\n  saturation,\n  brightness,\n  contrast,\n  onChangeHue,\n  onChangeSaturation,\n  onChangeBrightness,\n  onChangeContrast,\n}: Props) {\n  return (\n    <InspectorPrimitives.Column id={id}>\n      <ColorControlInput\n        id={id}\n        label=\"Hue\"\n        value={hue}\n        onChange={onChangeHue}\n      />\n      <ColorControlInput\n        id={id}\n        label=\"Saturation\"\n        value={saturation}\n        onChange={onChangeSaturation}\n      />\n      <ColorControlInput\n        id={id}\n        label=\"Brightness\"\n        value={brightness}\n        onChange={onChangeBrightness}\n      />\n      <ColorControlInput\n        id={id}\n        label=\"Contrast\"\n        value={contrast}\n        onChange={onChangeContrast}\n      />\n    </InspectorPrimitives.Column>\n  );\n});\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Selectors, SetNumberMode } from 'noya-state';\nimport { interpolate, InterpolateOptions } from 'noya-utils';\nimport { memo, useCallback, useMemo } from 'react';\nimport ArrayController from '../components/inspector/ArrayController';\nimport ColorControlsRow from '../components/inspector/ColorControlsRow';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\n\nfunction makeInterpolator(options: InterpolateOptions) {\n  return {\n    toDisplay: (value: number) => Math.round(interpolate(value, options)),\n    fromDisplay: (value: number) =>\n      interpolate(value, {\n        inputRange: options.outputRange,\n        outputRange: options.inputRange,\n      }),\n  };\n}\n\nconst hueInterpolator = makeInterpolator({\n  inputRange: [-Math.PI, Math.PI],\n  outputRange: [-100, 100],\n});\n\nconst saturationInterpolator = makeInterpolator({\n  inputRange: [0, 2],\n  outputRange: [-100, 100],\n});\n\nconst brightnessInterpolator = makeInterpolator({\n  inputRange: [-1, 1],\n  outputRange: [-100, 100],\n});\n\nconst contrastInterpolator = makeInterpolator({\n  inputRange: [0, 1, 4],\n  outputRange: [-100, 0, 100],\n});\n\nexport default memo(function ColorControlsInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedStyles),\n  );\n\n  const colorControls = useMemo(\n    () => selectedStyles.map((style) => style.colorControls),\n    [selectedStyles],\n  );\n\n  const firstColorControls = useMemo(\n    () => (colorControls[0].isEnabled ? [colorControls[0]] : []),\n    [colorControls],\n  );\n\n  const isEnabled = firstColorControls[0]?.isEnabled ?? false;\n\n  const hue = getMultiNumberValue(colorControls.map((control) => control.hue));\n\n  const saturation = getMultiNumberValue(\n    colorControls.map((control) => control.saturation),\n  );\n\n  const brightness = getMultiNumberValue(\n    colorControls.map((control) => control.brightness),\n  );\n\n  const contrast = getMultiNumberValue(\n    colorControls.map((control) => control.contrast),\n  );\n\n  const interpolatedHue =\n    hue !== undefined ? hueInterpolator.toDisplay(hue) : undefined;\n\n  const interpolatedSaturation =\n    saturation !== undefined\n      ? saturationInterpolator.toDisplay(saturation)\n      : undefined;\n\n  const interpolatedBrightness =\n    brightness !== undefined\n      ? brightnessInterpolator.toDisplay(brightness)\n      : undefined;\n\n  const interpolatedContrast =\n    contrast !== undefined\n      ? contrastInterpolator.toDisplay(contrast)\n      : undefined;\n\n  const handleClickPlus = useCallback(() => {\n    dispatch('setColorControlsEnabled', true);\n  }, [dispatch]);\n\n  const handleClickTrash = useCallback(\n    () => dispatch('setColorControlsEnabled', false),\n    [dispatch],\n  );\n\n  const handleChangeHue = useCallback(\n    (value: number, mode: SetNumberMode) =>\n      dispatch('setHue', hueInterpolator.fromDisplay(value), mode),\n    [dispatch],\n  );\n\n  const handleChangeSaturation = useCallback(\n    (value: number, mode: SetNumberMode) =>\n      dispatch(\n        'setSaturation',\n        mode === 'adjust'\n          ? value / 100\n          : saturationInterpolator.fromDisplay(value),\n        mode,\n      ),\n    [dispatch],\n  );\n\n  const handleChangeBrightness = useCallback(\n    (value: number, mode: SetNumberMode) =>\n      dispatch(\n        'setBrightness',\n        brightnessInterpolator.fromDisplay(value),\n        mode,\n      ),\n    [dispatch],\n  );\n\n  const handleChangeContrast = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      if (contrast !== undefined && mode === 'adjust') {\n        const displayValue = contrastInterpolator.toDisplay(contrast);\n        const newValue = contrastInterpolator.fromDisplay(displayValue + value);\n        const delta = newValue - contrast;\n\n        return dispatch('setContrast', delta, mode);\n      }\n\n      return dispatch(\n        'setContrast',\n        mode === 'adjust'\n          ? value / 100\n          : contrastInterpolator.fromDisplay(value),\n        mode,\n      );\n    },\n    [contrast, dispatch],\n  );\n\n  return (\n    <ArrayController<Sketch.ColorControls>\n      title=\"Color Adjust\"\n      id=\"color-adjust\"\n      value={firstColorControls}\n      isDraggable={false}\n      alwaysShowTrashIcon\n      onClickPlus={isEnabled ? undefined : handleClickPlus}\n      onClickTrash={isEnabled ? handleClickTrash : undefined}\n      onDeleteItem={useCallback((index) => dispatch('deleteFill', index), [\n        dispatch,\n      ])}\n      onMoveItem={useCallback(\n        (sourceIndex, destinationIndex) =>\n          dispatch('moveFill', sourceIndex, destinationIndex),\n        [dispatch],\n      )}\n    >\n      {useCallback(\n        () => (\n          <ColorControlsRow\n            id={'color-controls'}\n            hue={interpolatedHue}\n            saturation={interpolatedSaturation}\n            brightness={interpolatedBrightness}\n            contrast={interpolatedContrast}\n            onChangeHue={handleChangeHue}\n            onChangeSaturation={handleChangeSaturation}\n            onChangeBrightness={handleChangeBrightness}\n            onChangeContrast={handleChangeContrast}\n          />\n        ),\n        [\n          handleChangeBrightness,\n          handleChangeContrast,\n          handleChangeHue,\n          handleChangeSaturation,\n          interpolatedBrightness,\n          interpolatedContrast,\n          interpolatedHue,\n          interpolatedSaturation,\n        ],\n      )}\n    </ArrayController>\n  );\n});\n","import { PlusIcon, TrashIcon } from '@radix-ui/react-icons';\nimport { Spacer } from 'noya-designsystem';\nimport { memo, ReactNode, useCallback } from 'react';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\n\n/* ----------------------------------------------------------------------------\n * ArrayElement\n * ------------------------------------------------------------------------- */\n\nconst ElementRow = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n  marginTop: '10px',\n  cursor: 'initial !important', // Override draggableProps.style\n}));\n\ninterface ArrayElementProps {\n  id: string;\n  index: number;\n  children: ReactNode;\n}\n\nconst ArrayElement = memo(function ArrayElement({\n  id,\n  index,\n  children,\n}: ArrayElementProps) {\n  return (\n    <Draggable draggableId={id} index={index}>\n      {(provided) => (\n        <ElementRow\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n          ref={provided.innerRef}\n        >\n          {children}\n        </ElementRow>\n      )}\n    </Draggable>\n  );\n});\n\n/* ----------------------------------------------------------------------------\n * Root\n * ------------------------------------------------------------------------- */\n\nconst Title = styled.div(({ theme }) => ({\n  ...theme.textStyles.small,\n  fontWeight: 'bold',\n  display: 'flex',\n  flexDirection: 'row',\n  userSelect: 'none',\n}));\n\nconst Checkbox = styled.input(({ theme }) => ({\n  margin: 0,\n}));\n\nconst ArrayControllerContainer = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'column',\n  padding: '10px',\n}));\n\ninterface ArrayControllerProps<Item> {\n  id: string;\n  value: Item[];\n  title: ReactNode;\n  onDeleteItem?: (index: number) => void;\n  onMoveItem?: (sourceIndex: number, destinationIndex: number) => void;\n  onChangeCheckbox?: (index: number, checked: boolean) => void;\n  onClickPlus?: () => void;\n  onClickTrash?: () => void;\n  getKey?: (item: Item) => string | number;\n  children: (props: {\n    item: Item;\n    index: number;\n    checkbox: ReactNode;\n  }) => ReactNode;\n}\n\nfunction ArrayController<Item>({\n  id,\n  value,\n  title,\n  getKey,\n  onDeleteItem,\n  onMoveItem,\n  onClickPlus,\n  onClickTrash,\n  onChangeCheckbox,\n  children: renderItem,\n}: ArrayControllerProps<Item>) {\n  const handleDragEnd = useCallback(\n    (result) => {\n      const { destination, source } = result;\n\n      if (!destination) {\n        onDeleteItem?.(source.index);\n        return;\n      }\n\n      if (\n        // Different destination\n        source.droppableId !== destination.droppableId ||\n        // Same index\n        source.index === destination.index\n      ) {\n        return;\n      }\n\n      onMoveItem?.(source.index, destination.index);\n    },\n    [onDeleteItem, onMoveItem],\n  );\n\n  return (\n    <DragDropContext onDragEnd={handleDragEnd}>\n      <ArrayControllerContainer>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          <Title>{title}</Title>\n          <Spacer.Horizontal />\n          {onClickTrash && value.some((item) => !item) && (\n            <span onClick={onClickTrash}>\n              <TrashIcon color=\"rgb(139,139,139)\" />\n            </span>\n          )}\n          <Spacer.Horizontal size={12} />\n          {onClickPlus && (\n            <span onClick={onClickPlus}>\n              <PlusIcon color=\"rgb(139,139,139)\" />\n            </span>\n          )}\n        </div>\n        <Droppable droppableId={id}>\n          {(provided) => (\n            <div ref={provided.innerRef} {...provided.droppableProps}>\n              {value.map((item, index) => (\n                <ArrayElement\n                  key={getKey?.(item) ?? index}\n                  id={String(index)}\n                  index={index}\n                >\n                  {renderItem({\n                    item,\n                    index,\n                    checkbox: onChangeCheckbox && (\n                      <Checkbox\n                        type=\"checkbox\"\n                        checked={true}\n                        onChange={(event) => {\n                          onChangeCheckbox(index, event.target.checked);\n                        }}\n                      />\n                    ),\n                  })}\n                </ArrayElement>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </ArrayControllerContainer>\n    </DragDropContext>\n  );\n}\n\nexport default memo(ArrayController);\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Cross1Icon } from '@radix-ui/react-icons';\nimport {\n  InputField,\n  Select,\n  Spacer,\n  LabeledElementView,\n  Label,\n  withSeparatorElements,\n} from 'noya-designsystem';\nimport { memo, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { ExportOptions } from 'noya-state';\n\nconst Row = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n}));\n\nexport const SUPPORTED_EXPORT_FORMAT_OPTIONS: Sketch.ExportFileFormat[] = [\n  Sketch.ExportFileFormat.PNG,\n  Sketch.ExportFileFormat.JPG,\n  Sketch.ExportFileFormat.WEBP,\n  Sketch.ExportFileFormat.SVG,\n];\n\ninterface Props {\n  id: string;\n  last: boolean;\n  exportFormat: Sketch.ExportFormat;\n  onDelete: () => void;\n  onChangeScale: (value: ExportOptions.ExportSize) => void;\n  onChangeName: (name: string) => void;\n  onChangeFileFormat: (value: Sketch.ExportFileFormat) => void;\n  onChangeNamingScheme: (value: Sketch.ExportFormatNamingScheme) => void;\n}\n\nexport default memo(function ExportFormatsRow({\n  id,\n  last,\n  exportFormat,\n  onDelete,\n  onChangeScale,\n  onChangeName,\n  onChangeFileFormat,\n  onChangeNamingScheme,\n}: Props) {\n  const { scale, absoluteSize, visibleScaleType } = exportFormat;\n\n  const scaleString =\n    (visibleScaleType === Sketch.VisibleScaleType.Scale\n      ? scale\n      : absoluteSize) + ExportOptions.getScaleUnits(visibleScaleType);\n\n  const scaleInputId = `${id}-size`;\n  const namingSchemeInputId = `${id}-`;\n  const fileFormatInputId = `${id}-opacity`;\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case scaleInputId:\n          return <Label.Label>Size</Label.Label>;\n        case namingSchemeInputId:\n          return <Label.Label>Prefix/Suffix</Label.Label>;\n        case fileFormatInputId:\n          return <Label.Label>Format</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [scaleInputId, namingSchemeInputId, fileFormatInputId],\n  );\n\n  const canChangeScale =\n    exportFormat.fileFormat !== Sketch.ExportFileFormat.SVG;\n\n  const isPrefix =\n    exportFormat.namingScheme === Sketch.ExportFormatNamingScheme.Prefix;\n\n  const elements = [\n    <InputField.Root id={scaleInputId} size={55}>\n      <InputField.Input\n        disabled={!canChangeScale}\n        value={scaleString}\n        onSubmit={useCallback(\n          (value, reset) => {\n            const parseScale = ExportOptions.parseScale(value);\n            if (!parseScale) {\n              reset();\n              return;\n            }\n\n            onChangeScale(parseScale);\n          },\n          [onChangeScale],\n        )}\n      />\n    </InputField.Root>,\n    <InputField.Root\n      id={namingSchemeInputId}\n      labelPosition={isPrefix ? 'end' : 'start'}\n    >\n      <InputField.Input\n        value={exportFormat.name}\n        placeholder={isPrefix ? 'Prefix' : 'Suffix'}\n        onSubmit={onChangeName}\n        textAlign={isPrefix ? 'end' : 'start'}\n      />\n      <InputField.DropdownMenu\n        items={useMemo(\n          () => [\n            {\n              value: Sketch.ExportFormatNamingScheme.Prefix.toString(),\n              title: 'Prefix',\n            },\n            {\n              value: Sketch.ExportFormatNamingScheme.Suffix.toString(),\n              title: 'Suffix',\n            },\n          ],\n          [],\n        )}\n        buttonId={`${id}-nameingScheme-button`}\n        onSelect={useCallback(\n          (value: string) => onChangeNamingScheme(parseInt(value)),\n          [onChangeNamingScheme],\n        )}\n      />\n      <InputField.Label>...</InputField.Label>\n    </InputField.Root>,\n    <InputField.Root size={65} id={fileFormatInputId}>\n      <Select\n        id={'fileFormat-select'}\n        value={exportFormat.fileFormat}\n        options={SUPPORTED_EXPORT_FORMAT_OPTIONS}\n        getTitle={useCallback((id) => id.toUpperCase(), [])}\n        onChange={onChangeFileFormat}\n      />\n    </InputField.Root>,\n    <Cross1Icon onClick={onDelete} cursor={'pointer'} />,\n  ];\n\n  return (\n    <Row id={id}>\n      {last ? (\n        <LabeledElementView renderLabel={renderLabel}>\n          {withSeparatorElements(elements, <Spacer.Horizontal size={6} />)}\n        </LabeledElementView>\n      ) : (\n        <>{withSeparatorElements(elements, <Spacer.Horizontal size={6} />)}</>\n      )}\n    </Row>\n  );\n});\n","import { createContext, memo, ReactNode, useContext, useRef } from 'react';\n\ntype ElementIdContextValue = (prefix: string) => string;\n\nconst ElementIdContext = createContext<ElementIdContextValue | undefined>(\n  undefined,\n);\n\ninterface Props {\n  prefix: string;\n  children: ReactNode;\n}\n\nexport const ElementIdProvider = memo(function ElementIdProvider({\n  prefix,\n  children,\n}: Props) {\n  const id = useRef(1);\n  const contextValue = useRef((instancePrefix: string) => {\n    return prefix + instancePrefix + id.current++;\n  }).current;\n\n  return (\n    <ElementIdContext.Provider value={contextValue}>\n      {children}\n    </ElementIdContext.Provider>\n  );\n});\n\nexport function useGetNextElementId() {\n  const value = useContext(ElementIdContext);\n\n  if (!value) {\n    throw new Error('Missing ElementIdContextValue');\n  }\n\n  return value;\n}\n","import { Paint } from 'canvaskit';\nimport { AffineTransform, Size } from 'noya-geometry';\nimport { ClipProps } from 'noya-react-canvaskit';\nimport {\n  ComponentsContextValue,\n  ComponentsProvider,\n  useCanvasKit,\n} from 'noya-renderer';\nimport { Base64, detectFileType, getFileExtensionForType } from 'noya-utils';\nimport { memo, ReactNode, useMemo, useRef } from 'react';\nimport { ElementIdProvider, useGetNextElementId } from './ElementIdContext';\n\nconst stringifyAffineTransform = (matrix: AffineTransform) => {\n  const values = [\n    matrix.m00,\n    matrix.m10,\n    matrix.m01,\n    matrix.m11,\n    matrix.m02,\n    matrix.m12,\n  ];\n\n  return `matrix(${values.join(',')})`;\n};\n\nconst stringifyColor = (color: Iterable<number>) => {\n  const [r, g, b, a] = color;\n\n  // Format a precision of 4 then parse again as a number to trim trailing 0s\n  // and remove any exponentially formatted numbers\n  const components = [r, g, b].map(\n    (c) => Number((c * 100).toPrecision(4)) + '%',\n  );\n\n  if (a !== 1) {\n    return `rgba(${components.join(', ')}, ${a})`;\n  } else {\n    return `rgb(${components.join(', ')})`;\n  }\n};\n\nfunction usePaintProps(paint: Paint): React.SVGProps<any> {\n  const CanvasKit = useCanvasKit();\n  const color = stringifyColor(paint.getColor());\n\n  if (paint.style === CanvasKit.PaintStyle.Stroke) {\n    return {\n      stroke: color,\n      strokeWidth: paint.getStrokeWidth(),\n      fill: 'none',\n    };\n  }\n\n  return {\n    fill: color,\n  };\n}\n\nfunction getRectProps(rect: Float32Array) {\n  const [minX, minY, maxX, maxY] = rect;\n\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nconst Rect: ComponentsContextValue['Rect'] = memo(({ rect, paint }) => {\n  return <rect {...usePaintProps(paint)} {...getRectProps(rect)} />;\n});\n\nconst Polyline: ComponentsContextValue['Polyline'] = memo(\n  ({ points, paint }) => {\n    const pointsString = points.map(({ x, y }) => `${x},${y}`).join(' ');\n\n    return <polyline points={pointsString} {...usePaintProps(paint)} />;\n  },\n);\n\nconst Path: ComponentsContextValue['Path'] = memo(({ path, paint }) => {\n  const CanvasKit = useCanvasKit();\n\n  return (\n    <path\n      d={path.toSVGString()}\n      fillRule={\n        path.getFillType() === CanvasKit.FillType.EvenOdd\n          ? 'evenodd'\n          : 'nonzero'\n      }\n      {...usePaintProps(paint)}\n    />\n  );\n});\n\nconst Text: ComponentsContextValue['Text'] = memo(({ rect, paragraph }) => {\n  // const rectProps = getRectProps(rect);\n\n  // const transform = useMemo(() => {\n  //   const affineTransform = AffineTransform.translation(\n  //     rectProps.x,\n  //     rectProps.y,\n  //   );\n  //   return stringifyAffineTransform(affineTransform);\n  // }, [rectProps.x, rectProps.y]);\n\n  return null;\n\n  // const shapedLines = useMemo(() => paragraph.getShapedLines(), [paragraph]);\n\n  // return (\n  //   <g transform={transform}>\n  //     {shapedLines.map((shapedLine, s) =>\n  //       shapedLine.runs.map((run, r) => {\n  //         const positions: Point[] = [];\n\n  //         run.positions.forEach((value, index) => {\n  //           if (index % 2 === 0) {\n  //             positions.push({ x: value, y: 0 });\n  //           } else {\n  //             positions[positions.length - 1].y = value;\n  //           }\n  //         });\n\n  //         const strings = [...run.glyphs].map(\n  //           (value) => String.fromCharCode(value + 28), // TODO: Lookup by glyph id\n  //         );\n\n  //         const info = zip(positions, strings);\n\n  //         return info.map(([position, string], i) => (\n  //           <text\n  //             fontSize={12}\n  //             fill=\"white\"\n  //             key={`${s}-${r}-${i}`}\n  //             x={position.x}\n  //             y={shapedLine.top + position.y}\n  //           >\n  //             {string}\n  //           </text>\n  //         ));\n  //       }),\n  //     )}\n  //   </g>\n  // );\n});\n\nconst ClipPath = memo(\n  ({\n    clip,\n    children,\n  }: {\n    clip: ClipProps;\n    children: (url: string) => ReactNode;\n  }) => {\n    const { path } = clip;\n    const getNextId = useGetNextElementId();\n    const id = useMemo(() => getNextId('clip-'), [getNextId]);\n\n    return (\n      <>\n        <clipPath id={id}>\n          {path instanceof Float32Array ? (\n            <rect {...getRectProps(path)} />\n          ) : (\n            <path d={path.toSVGString()} />\n          )}\n        </clipPath>\n        {children(`url(#${id})`)}\n      </>\n    );\n  },\n);\n\nconst Group: ComponentsContextValue['Group'] = memo(\n  ({ opacity, transform, children, clip, colorFilter, imageFilter }) => {\n    const groupProps = {\n      opacity,\n      transform: transform ? stringifyAffineTransform(transform) : undefined,\n      children,\n    };\n\n    if (clip) {\n      return (\n        <ClipPath clip={clip}>\n          {(url) => <g {...groupProps} clipPath={url} />}\n        </ClipPath>\n      );\n    }\n\n    return <g {...groupProps} />;\n  },\n);\n\nconst Image: ComponentsContextValue['Image'] = memo(\n  ({ rect, paint, image }) => {\n    const encodedImage = useMemo(() => {\n      const fileType = detectFileType(image);\n\n      if (!fileType) return;\n\n      return `data:${getFileExtensionForType(fileType)};base64,${Base64.encode(\n        image,\n      )}`;\n    }, [image]);\n\n    return <image {...getRectProps(rect)} href={encodedImage} />;\n  },\n);\n\nconst SVGComponents = {\n  Rect,\n  Polyline,\n  Path,\n  Text,\n  Group,\n  Image,\n};\n\ninterface Props {\n  size: Size;\n  children: ReactNode;\n  idPrefix?: string;\n}\n\nlet svgId = 0;\nconst getNextSvgPrefix = () => `svg-${++svgId}-`;\n\nexport default memo(function SVGRenderer({ size, children, idPrefix }: Props) {\n  const prefix = useRef(idPrefix ?? getNextSvgPrefix()).current;\n\n  return (\n    <ElementIdProvider prefix={prefix}>\n      <svg\n        width={size.width}\n        height={size.height}\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <ComponentsProvider value={SVGComponents}>\n          {children}\n        </ComponentsProvider>\n      </svg>\n    </ElementIdProvider>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport type { CanvasKit, Image } from 'canvaskit';\nimport { Theme } from 'noya-designsystem';\nimport { Components, render, unmount } from 'noya-react-canvaskit';\nimport { WorkspaceState } from 'noya-state';\nimport React, { ReactNode } from 'react';\nimport { ThemeProvider } from 'styled-components';\nimport {\n  CanvasKitProvider,\n  ComponentsProvider,\n  FontManagerProvider,\n} from 'noya-renderer';\nimport { StateProvider } from 'noya-app-state-context';\nimport { ImageCacheProvider } from 'noya-renderer';\nimport { renderToStaticMarkup } from 'react-dom/server';\nimport { SVGRenderer } from 'noya-svg-renderer';\nimport { UTF16 } from 'noya-utils';\n\nfunction readPixels(image: Image): Uint8Array | null {\n  const colorSpace = image.getColorSpace();\n\n  const pixels = image.readPixels(0, 0, {\n    ...image.getImageInfo(),\n    colorSpace,\n  }) as Uint8Array | null;\n\n  colorSpace.delete();\n\n  return pixels;\n}\n\nexport type ImageEncoding = 'bytes' | 'svg' | 'png' | 'jpg' | 'webp';\n\nexport function generateImage(\n  CanvasKit: CanvasKit,\n  width: number,\n  height: number,\n  theme: Theme,\n  state: WorkspaceState,\n  format: ImageEncoding,\n  renderContent: () => ReactNode,\n): Promise<Uint8Array | undefined> {\n  switch (format) {\n    case Sketch.ExportFileFormat.SVG: {\n      const svg = renderToStaticMarkup(\n        <CanvasKitProvider CanvasKit={CanvasKit}>\n          <ThemeProvider theme={theme}>\n            <StateProvider state={state}>\n              <ImageCacheProvider>\n                <FontManagerProvider>\n                  <SVGRenderer\n                    idPrefix=\"\"\n                    size={{ width: width, height: height }}\n                  >\n                    {renderContent()}\n                  </SVGRenderer>\n                </FontManagerProvider>\n              </ImageCacheProvider>\n            </StateProvider>\n          </ThemeProvider>\n        </CanvasKitProvider>,\n      );\n\n      return Promise.resolve(\n        UTF16.toUTF8(`<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n` + svg),\n      );\n    }\n    default: {\n      const surface = CanvasKit.MakeSurface(width, height);\n\n      if (!surface) {\n        console.warn('failed to create surface');\n        return Promise.resolve(undefined);\n      }\n\n      return new Promise((resolve) => {\n        const root = (\n          <CanvasKitProvider CanvasKit={CanvasKit}>\n            <ThemeProvider theme={theme}>\n              <StateProvider state={state}>\n                <ImageCacheProvider>\n                  <FontManagerProvider>\n                    <ComponentsProvider value={Components}>\n                      {renderContent()}\n                    </ComponentsProvider>\n                  </FontManagerProvider>\n                </ImageCacheProvider>\n              </StateProvider>\n            </ThemeProvider>\n          </CanvasKitProvider>\n        );\n\n        render(root, surface, CanvasKit, () => {\n          const image = surface.makeImageSnapshot();\n\n          const bytes =\n            format === 'bytes'\n              ? readPixels(image)\n              : image.encodeToBytes(\n                  format === 'png'\n                    ? CanvasKit.ImageFormat.PNG\n                    : format === 'jpg'\n                    ? CanvasKit.ImageFormat.JPEG\n                    : CanvasKit.ImageFormat.WEBP,\n                  100,\n                );\n\n          if (!bytes) {\n            resolve(undefined);\n            return;\n          }\n\n          unmount(surface, () => {\n            resolve(bytes);\n\n            surface.delete();\n          });\n        });\n      });\n    }\n  }\n}\n","import { useCanvasKit } from 'noya-renderer';\nimport React, {\n  memo,\n  ReactNode,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { useTheme } from 'styled-components';\nimport { useWorkspaceState } from 'noya-app-state-context';\nimport { generateImage } from 'noya-generate-image';\n\ninterface Props {\n  width: number;\n  height: number;\n  renderContent: () => ReactNode;\n}\n\nexport default memo(function CanvasViewer({\n  width,\n  height,\n  renderContent,\n}: Props) {\n  const CanvasKit = useCanvasKit();\n  const rawApplicationState = useWorkspaceState();\n  const theme = useTheme();\n  const [imageData, setImageData] = useState<ImageData | undefined>();\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n\n  useLayoutEffect(() => {\n    let valid = true;\n\n    generateImage(\n      CanvasKit,\n      width,\n      height,\n      theme,\n      rawApplicationState,\n      'bytes',\n      renderContent,\n    ).then((bytes) => {\n      if (!valid || !bytes) return;\n\n      setImageData(\n        new ImageData(new Uint8ClampedArray(bytes.buffer), width, height),\n      );\n    });\n\n    return () => {\n      valid = false;\n    };\n  }, [CanvasKit, width, height, theme, rawApplicationState, renderContent]);\n\n  useLayoutEffect(() => {\n    if (!imageData) return;\n\n    const context = canvasRef.current?.getContext('2d');\n\n    if (!context) return;\n\n    context.putImageData(imageData, 0, 0);\n  }, [height, imageData, width]);\n\n  return <canvas ref={canvasRef} width={width} height={height} />;\n});\n","import { Size } from 'noya-geometry';\nimport { memo, ReactNode, useCallback, useRef } from 'react';\nimport styled from 'styled-components';\nimport CanvasViewer from '../../containers/CanvasViewer';\nimport { useSize } from '../../hooks/useSize';\n\nconst Container = styled.div<{ background?: string }>(({ background }) => ({\n  position: 'relative',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden',\n  ...(background && { background }),\n}));\n\nconst Inner = styled.div({\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n});\n\ninterface Props {\n  renderContent: (size: Size) => ReactNode;\n  background?: string;\n}\n\nexport default memo(function CanvasGridItem({\n  renderContent,\n  background,\n}: Props) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const size = useSize(containerRef);\n  const renderer = useCallback(() => (size ? renderContent(size) : null), [\n    renderContent,\n    size,\n  ]);\n\n  return (\n    <Container ref={containerRef} background={background}>\n      <Inner>\n        {size && (\n          <CanvasViewer\n            width={size.width}\n            height={size.height}\n            renderContent={renderer}\n          />\n        )}\n      </Inner>\n    </Container>\n  );\n});\n","import * as AspectRatio from '@radix-ui/react-aspect-ratio';\nimport { memo, useCallback } from 'react';\nimport { LayerPreview as RCKLayerPreview } from 'noya-renderer';\nimport { PageLayer } from 'noya-state';\nimport CanvasGridItem from '../theme/CanvasGridItem';\n\ninterface Props {\n  layer: PageLayer;\n}\n\nexport default memo(function ExportPreviewRow({ layer }: Props) {\n  return (\n    <AspectRatio.Root\n      ratio={Math.max(1, layer.frame.width / layer.frame.height)}\n    >\n      <CanvasGridItem\n        renderContent={useCallback(\n          (size) => (\n            <RCKLayerPreview\n              layer={layer}\n              size={size}\n              showCheckeredBackground\n            />\n          ),\n          [layer],\n        )}\n      />\n    </AspectRatio.Root>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { fileSave } from 'browser-fs-access';\nimport JSZip from 'jszip';\nimport {\n  Button,\n  Divider,\n  Spacer,\n  withSeparatorElements,\n} from 'noya-designsystem';\nimport { Size } from 'noya-geometry';\nimport { LayerPreview as RCKLayerPreview, useCanvasKit } from 'noya-renderer';\nimport { Selectors } from 'noya-state';\nimport {\n  FileType,\n  getFileExtensionForType,\n  getFileTypeForExtension,\n} from 'noya-utils';\nimport { memo, useCallback } from 'react';\nimport { useTheme } from 'styled-components';\nimport ArrayController from '../components/inspector/ExportArrayController';\nimport ExportFormatsRow from '../components/inspector/ExportFormatsRow';\nimport ExportPreviewRow from '../components/inspector/ExportPreviewRow';\nimport * as InspectorPrimitives from '../components/inspector/InspectorPrimitives';\nimport {\n  useDispatch,\n  useGetWorkspaceStateSnapshot,\n  useSelector,\n} from 'noya-app-state-context';\nimport { ImageEncoding, generateImage } from 'noya-generate-image';\n\nasync function saveFile(name: string, type: FileType, data: ArrayBuffer) {\n  const file = new File([data], name, {\n    type,\n  });\n\n  await fileSave(\n    file,\n    { fileName: file.name, extensions: [`.${getFileExtensionForType(type)}`] },\n    undefined,\n    false,\n  );\n}\n\nfunction getExportSize(exportFormat: Sketch.ExportFormat, size: Size) {\n  const { scale, absoluteSize, visibleScaleType } = exportFormat;\n\n  switch (visibleScaleType) {\n    case Sketch.VisibleScaleType.Width:\n      return { width: absoluteSize, height: size.height };\n    case Sketch.VisibleScaleType.Scale:\n      return {\n        width: size.width * scale,\n        height: size.height * scale,\n      };\n    case Sketch.VisibleScaleType.Height:\n      return { width: size.width, height: absoluteSize };\n  }\n}\n\nexport default memo(function ExportInspector() {\n  const title = 'Exports';\n  const dispatch = useDispatch();\n  const theme = useTheme();\n  const CanvasKit = useCanvasKit();\n  const getWorkspaceStateSnapshot = useGetWorkspaceStateSnapshot();\n\n  const selectedLayer = useSelector(\n    Selectors.getSelectedLayers,\n  )[0] as Sketch.SymbolInstance;\n\n  const exportFormats = selectedLayer.exportOptions.exportFormats;\n\n  const renderImageForExportFormat = useCallback(\n    async (exportFormat: Sketch.ExportFormat) => {\n      const size = {\n        width: selectedLayer.frame.width,\n        height: selectedLayer.frame.height,\n      };\n\n      const exportSize = getExportSize(exportFormat, size);\n\n      return generateImage(\n        CanvasKit,\n        exportSize.width,\n        exportSize.height,\n        theme,\n        getWorkspaceStateSnapshot(),\n        exportFormat.fileFormat.toString() as ImageEncoding,\n        () => <RCKLayerPreview layer={selectedLayer} size={exportSize} />,\n      );\n    },\n    [CanvasKit, theme, selectedLayer, getWorkspaceStateSnapshot],\n  );\n\n  const getExportFileName = useCallback(\n    (exportFormat: Sketch.ExportFormat) => {\n      const { name, namingScheme, fileFormat } = exportFormat;\n\n      if (namingScheme === Sketch.ExportFormatNamingScheme.Suffix)\n        return `${selectedLayer.name}${name}.${fileFormat}`;\n\n      return `${name}${selectedLayer.name}.${fileFormat}`;\n    },\n    [selectedLayer],\n  );\n\n  const handleExport = useCallback(async () => {\n    if (exportFormats.length === 1) {\n      const exportFormat = exportFormats[0];\n\n      if (\n        exportFormat.fileFormat !== Sketch.ExportFileFormat.JPG &&\n        exportFormat.fileFormat !== Sketch.ExportFileFormat.PNG &&\n        exportFormat.fileFormat !== Sketch.ExportFileFormat.SVG &&\n        exportFormat.fileFormat !== Sketch.ExportFileFormat.WEBP\n      )\n        return;\n\n      const data = await renderImageForExportFormat(exportFormat);\n\n      if (!data) return;\n\n      const fileName = getExportFileName(exportFormat);\n\n      saveFile(\n        fileName,\n        getFileTypeForExtension(exportFormat.fileFormat),\n        data,\n      );\n    } else {\n      const zip = new JSZip();\n\n      const files = exportFormats.map(async (exportFormat) => {\n        const data = await renderImageForExportFormat(exportFormat);\n\n        if (!data) return;\n\n        zip.file(getExportFileName(exportFormat), data, {\n          base64: true,\n        });\n      });\n\n      Promise.allSettled(files).then(async () => {\n        const data = await zip.generateAsync({\n          type: 'arraybuffer',\n          mimeType: 'application/zip',\n        });\n\n        saveFile(`${selectedLayer.name}.zip`, 'application/zip', data);\n      });\n    }\n  }, [\n    selectedLayer,\n    exportFormats,\n    getExportFileName,\n    renderImageForExportFormat,\n  ]);\n\n  const elements = [\n    <ArrayController<Sketch.ExportFormat>\n      title={title}\n      id={title}\n      key={title}\n      value={exportFormats}\n      onClickPlus={useCallback(() => {\n        dispatch('addExportFormat');\n      }, [dispatch])}\n    >\n      {useCallback(\n        ({ item, index }: { item: Sketch.ExportFormat; index: number }) => (\n          <ExportFormatsRow\n            id={`exportFormat-${index}}`}\n            last={index === exportFormats.length - 1}\n            exportFormat={item}\n            onChangeScale={(value) => {\n              dispatch('setExportScale', index, value);\n            }}\n            onChangeName={(value) => {\n              dispatch('setExportName', index, value);\n            }}\n            onChangeFileFormat={(value) => {\n              dispatch('setExportFileFormat', index, value);\n            }}\n            onChangeNamingScheme={(value) => {\n              dispatch('setExportNamingScheme', index, value);\n            }}\n            onDelete={() => dispatch('deleteExportFormat', index)}\n          />\n        ),\n        [exportFormats.length, dispatch],\n      )}\n    </ArrayController>,\n    exportFormats.length > 0 && selectedLayer && (\n      <>\n        <InspectorPrimitives.Section>\n          <ExportPreviewRow layer={selectedLayer} />\n          <Spacer.Vertical size={10} />\n          <Button id=\"export-selected\" onClick={handleExport}>\n            Export Selected...\n          </Button>\n        </InspectorPrimitives.Section>\n      </>\n    ),\n  ];\n\n  return <>{withSeparatorElements(elements, <Divider />)}</>;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  InputField,\n  Label,\n  LabeledElementView,\n  Select,\n  sketchColorToHex,\n  SketchPattern,\n  Spacer,\n} from 'noya-designsystem';\nimport { memo, ReactNode, useCallback, useMemo } from 'react';\nimport { SetNumberMode } from 'noya-state';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport DimensionInput from './DimensionInput';\nimport FillInputFieldWithPicker, {\n  ColorFillProps,\n  GradientFillProps,\n  PatternFillProps,\n} from './FillInputFieldWithPicker';\nimport { PATTERN_FILL_TYPE_OPTIONS, PatternFillType } from './PatternInspector';\n\nconst GRADIENT_TYPE_OPTIONS = [\n  Sketch.GradientType.Linear.toString(),\n  Sketch.GradientType.Angular.toString(),\n  Sketch.GradientType.Radial.toString(),\n];\n\ninterface Props {\n  id: string;\n  prefix?: ReactNode;\n  fillType?: Sketch.FillType;\n  gradient?: Sketch.Gradient;\n  pattern?: SketchPattern;\n  contextOpacity: number;\n  onChangeFillType: (type: Sketch.FillType) => void;\n  onSetOpacity: (amount: number, mode: SetNumberMode) => void;\n  onSetContextOpacity: (value: number, mode: SetNumberMode) => void;\n  colorProps: ColorFillProps;\n  gradientProps: GradientFillProps;\n  patternProps: PatternFillProps;\n}\n\nexport default memo(function FillRow({\n  id,\n  prefix,\n  fillType,\n  contextOpacity,\n  onSetOpacity,\n  onSetContextOpacity,\n  onChangeFillType,\n  colorProps,\n  gradientProps,\n  patternProps,\n}: Props) {\n  const fillInputId = `${id}-color`;\n  const hexInputId = `${id}-hex`;\n  const opacityInputId = `${id}-opacity`;\n  const gradientTypeId = `${id}-gradient-type`;\n  const patternSizeId = `${id}-pattern-type`;\n\n  const fillLabel = useMemo(() => {\n    switch (fillType) {\n      case Sketch.FillType.Color:\n        return 'Color';\n      case Sketch.FillType.Gradient:\n        return 'Gradient';\n      case Sketch.FillType.Pattern:\n        return 'Image';\n    }\n  }, [fillType]);\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case fillInputId:\n          return <Label.Label>{fillLabel}</Label.Label>;\n        case hexInputId:\n          return <Label.Label>Hex</Label.Label>;\n        case opacityInputId:\n          return <Label.Label>Opacity</Label.Label>;\n        case gradientTypeId:\n          return <Label.Label>Type</Label.Label>;\n        case patternSizeId:\n          return <Label.Label>Size</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [\n      fillInputId,\n      fillLabel,\n      hexInputId,\n      opacityInputId,\n      gradientTypeId,\n      patternSizeId,\n    ],\n  );\n\n  const handleSetOpacity = useCallback(\n    (amount: number, mode: SetNumberMode) => onSetOpacity(amount / 100, mode),\n    [onSetOpacity],\n  );\n\n  const handleSetContextOpacity = useCallback(\n    (amount: number, mode: SetNumberMode) =>\n      onSetContextOpacity(amount / 100, mode),\n    [onSetContextOpacity],\n  );\n\n  const getGradientTypeTitle = useCallback(\n    (id: string) => Sketch.GradientType[parseInt(id)],\n    [],\n  );\n\n  const handleSelectGradientType = useCallback(\n    (value: string) => gradientProps.onChangeGradientType(parseInt(value)),\n    [gradientProps],\n  );\n\n  const handleSelectPatternSize = useCallback(\n    (value: PatternFillType) =>\n      patternProps.onChangePatternFillType(Sketch.PatternFillType[value]),\n    [patternProps],\n  );\n\n  const fields = useMemo(() => {\n    switch (fillType) {\n      case Sketch.FillType.Color:\n        return (\n          <>\n            <InputField.Root id={hexInputId} labelPosition=\"start\">\n              <InputField.Input\n                value={\n                  colorProps.color\n                    ? sketchColorToHex(colorProps.color).replace('#', '')\n                    : ''\n                }\n                placeholder={colorProps.color ? undefined : 'multiple'}\n                onSubmit={() => {}}\n              />\n              <InputField.Label>#</InputField.Label>\n            </InputField.Root>\n            <Spacer.Horizontal size={8} />\n            <DimensionInput\n              id={opacityInputId}\n              size={50}\n              label=\"%\"\n              value={\n                colorProps.color\n                  ? Math.round(colorProps.color.alpha * 100)\n                  : undefined\n              }\n              onSetValue={handleSetOpacity}\n            />\n          </>\n        );\n      case Sketch.FillType.Gradient:\n        return (\n          <>\n            <Select\n              id={gradientTypeId}\n              value={gradientProps.gradient.gradientType.toString()}\n              options={GRADIENT_TYPE_OPTIONS}\n              getTitle={getGradientTypeTitle}\n              onChange={handleSelectGradientType}\n            />\n            <Spacer.Horizontal size={8} />\n            <DimensionInput\n              id={opacityInputId}\n              size={50}\n              label=\"%\"\n              value={Math.round(contextOpacity * 100)}\n              onSetValue={handleSetContextOpacity}\n            />\n          </>\n        );\n      case Sketch.FillType.Pattern:\n        return (\n          <>\n            <Select\n              id={patternSizeId}\n              value={\n                Sketch.PatternFillType[\n                  patternProps.pattern.patternFillType\n                ] as PatternFillType\n              }\n              options={PATTERN_FILL_TYPE_OPTIONS}\n              onChange={handleSelectPatternSize}\n            />\n            <Spacer.Horizontal size={8} />\n            <DimensionInput\n              id={opacityInputId}\n              size={50}\n              label=\"%\"\n              value={Math.round(contextOpacity * 100)}\n              onSetValue={handleSetContextOpacity}\n            />\n          </>\n        );\n    }\n  }, [\n    colorProps.color,\n    contextOpacity,\n    fillType,\n    getGradientTypeTitle,\n    gradientProps.gradient.gradientType,\n    gradientTypeId,\n    handleSelectGradientType,\n    handleSelectPatternSize,\n    handleSetContextOpacity,\n    handleSetOpacity,\n    hexInputId,\n    opacityInputId,\n    patternProps.pattern.patternFillType,\n    patternSizeId,\n  ]);\n\n  return (\n    <InspectorPrimitives.Row id={id}>\n      <LabeledElementView renderLabel={renderLabel}>\n        {prefix}\n        {prefix && <Spacer.Horizontal size={8} />}\n        <FillInputFieldWithPicker\n          id={fillInputId}\n          fillType={fillType}\n          onChangeType={onChangeFillType}\n          colorProps={colorProps}\n          gradientProps={gradientProps}\n          patternProps={patternProps}\n        />\n        <Spacer.Horizontal size={8} />\n        {fields}\n      </LabeledElementView>\n    </InspectorPrimitives.Row>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Selectors } from 'noya-state';\nimport { memo, ReactNode, useCallback, useMemo } from 'react';\nimport ArrayController from '../components/inspector/ArrayController';\nimport FillRow from '../components/inspector/FillRow';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\n\nexport default memo(function FillInspector({\n  title,\n  allowMoreThanOne,\n}: {\n  title: string;\n  allowMoreThanOne: boolean;\n}) {\n  const [, dispatch] = useApplicationState();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedStyles),\n  );\n\n  const fills = useMemo(() => selectedStyles.map((style) => style?.fills), [\n    selectedStyles,\n  ]).reverse();\n\n  // TODO: Modify all fills\n  const firstFill = useMemo(() => fills[0] || [], [fills]);\n  return (\n    <ArrayController<Sketch.Fill>\n      title={title}\n      id={title}\n      key={title}\n      value={firstFill}\n      onClickPlus={useCallback(\n        () => (!allowMoreThanOne && firstFill[0] ? [] : dispatch('addNewFill')),\n        [dispatch, allowMoreThanOne, firstFill],\n      )}\n      onClickTrash={useCallback(() => dispatch('deleteDisabledFills'), [\n        dispatch,\n      ])}\n      onDeleteItem={useCallback((index) => dispatch('deleteFill', index), [\n        dispatch,\n      ])}\n      onMoveItem={useCallback(\n        (sourceIndex, destinationIndex) =>\n          dispatch('moveFill', sourceIndex, destinationIndex),\n        [dispatch],\n      )}\n      onChangeCheckbox={useCallback(\n        (index, checked) => dispatch('setFillEnabled', index, checked),\n        [dispatch],\n      )}\n    >\n      {useCallback(\n        ({\n          item,\n          index,\n          checkbox,\n        }: {\n          item: Sketch.Fill;\n          index: number;\n          checkbox: ReactNode;\n        }) => (\n          <FillRow\n            id={`fill-${index}`}\n            prefix={checkbox}\n            fillType={item.fillType}\n            contextOpacity={item.contextSettings.opacity}\n            onSetOpacity={(value, mode) =>\n              dispatch('setFillOpacity', index, value, mode)\n            }\n            onSetContextOpacity={(value, mode) =>\n              dispatch('setFillContextSettingsOpacity', index, value, mode)\n            }\n            onChangeFillType={(value) =>\n              dispatch('setFillFillType', index, value)\n            }\n            colorProps={{\n              color: item.color,\n              onChangeColor: (value) => dispatch('setFillColor', index, value),\n            }}\n            gradientProps={{\n              gradient: item.gradient,\n              onChangeGradientColor: (value, stopIndex) =>\n                dispatch('setFillGradientColor', index, stopIndex, value),\n              onChangeGradientPosition: (value, stopIndex) =>\n                dispatch('setFillGradientPosition', index, stopIndex, value),\n              onAddGradientStop: (color, position) =>\n                dispatch('addFillGradientStop', index, color, position),\n              onDeleteGradientStop: (value) =>\n                dispatch('deleteFillGradientStop', index, value),\n              onChangeGradientType: (value) =>\n                dispatch('setFillGradientType', index, value),\n              onChangeGradient: (value) =>\n                dispatch('setFillGradient', index, value),\n            }}\n            patternProps={{\n              pattern: {\n                _class: 'pattern',\n                patternFillType: item.patternFillType,\n                patternTileScale: item.patternTileScale,\n                image: item.image,\n              },\n              onChangeFillImage: (value) =>\n                dispatch('setFillImage', index, value),\n              onChangePatternFillType: (value) =>\n                dispatch('setPatternFillType', index, value),\n              onChangePatternTileScale: (value) =>\n                dispatch('setPatternTileScale', index, value),\n            }}\n          />\n        ),\n\n        [dispatch],\n      )}\n    </ArrayController>\n  );\n});\n","import {\n  CursorTextIcon,\n  LinkBreak2Icon,\n  PlusIcon,\n  ResetIcon,\n  UpdateIcon,\n} from '@radix-ui/react-icons';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Button, Select, Spacer } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport * as InspectorPrimitives from '../components/inspector/InspectorPrimitives';\nimport { useDispatch, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiValue from '../utils/getMultiValue';\n\nconst NO_LAYER_STYLE = 'none';\n\ninterface Props {\n  style?: Sketch.Style;\n  sharedStyleId?: string;\n  sharedStyles: Sketch.SharedStyle[];\n}\n\nconst LayerThemeInspectorContent = memo(function LayerThemeInspectorContent({\n  style,\n  sharedStyleId,\n  sharedStyles,\n}: Props) {\n  const dispatch = useDispatch();\n\n  const iconColor = useTheme().colors.icon;\n\n  const layerStyleOptions = useMemo(\n    () => [NO_LAYER_STYLE, ...sharedStyles.map((style) => style.do_objectID)],\n    [sharedStyles],\n  );\n\n  const getLayerStyleTitle = useCallback(\n    (id) =>\n      id === NO_LAYER_STYLE\n        ? 'No Layer Style'\n        : sharedStyles.find((style) => style.do_objectID === id)!.name,\n    [sharedStyles],\n  );\n\n  const onSelect = useCallback(\n    (value) => {\n      dispatch('setThemeStyle', value === NO_LAYER_STYLE ? undefined : value);\n    },\n    [dispatch],\n  );\n\n  const onAdd = useCallback(() => {\n    const name = prompt('New style name');\n\n    if (!name) return;\n\n    dispatch('addThemeStyle', name, style);\n  }, [dispatch, style]);\n\n  const onRename = useCallback(() => {\n    if (!sharedStyleId) return;\n\n    const name = prompt('Rename style');\n\n    if (!name) return;\n\n    dispatch('setThemeStyleName', sharedStyleId, name);\n  }, [sharedStyleId, dispatch]);\n\n  const onDetach = useCallback(() => dispatch('setThemeStyle'), [dispatch]);\n\n  const onUpdate = useCallback(() => {\n    if (!sharedStyleId) return;\n\n    dispatch('updateThemeStyle', sharedStyleId, style);\n  }, [sharedStyleId, dispatch, style]);\n\n  const onReset = useCallback(() => {\n    const style = sharedStyles.find((s) => s.do_objectID === sharedStyleId);\n\n    if (!sharedStyleId || !style) return;\n\n    dispatch('setThemeStyle', sharedStyleId);\n  }, [sharedStyleId, sharedStyles, dispatch]);\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.SectionHeader>\n        <InspectorPrimitives.Title>Theme</InspectorPrimitives.Title>\n      </InspectorPrimitives.SectionHeader>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <Select\n          id=\"theme-layer-style\"\n          value={sharedStyleId || NO_LAYER_STYLE}\n          options={layerStyleOptions}\n          getTitle={getLayerStyleTitle}\n          onChange={onSelect}\n        />\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <Button\n          id=\"create-layer-style\"\n          tooltip=\"Create theme style from layer\"\n          onClick={onAdd}\n        >\n          <PlusIcon color={iconColor} />\n        </Button>\n        <Spacer.Horizontal size={10} />\n        <Button\n          id=\"update-layer-style\"\n          disabled={sharedStyleId === undefined}\n          tooltip=\"Update theme style to match layer\"\n          onClick={onUpdate}\n        >\n          <UpdateIcon color={iconColor} />\n        </Button>\n        <Spacer.Horizontal size={10} />\n        <Button\n          id=\"detach-layer-style\"\n          disabled={sharedStyleId === undefined}\n          tooltip=\"Detach style from theme\"\n          onClick={onDetach}\n        >\n          <LinkBreak2Icon color={iconColor} />\n        </Button>\n        <Spacer.Horizontal size={10} />\n        <Button\n          id=\"rename-style\"\n          disabled={sharedStyleId === undefined}\n          tooltip=\"Rename theme style\"\n          onClick={onRename}\n        >\n          <CursorTextIcon color={iconColor} />\n        </Button>\n        <Spacer.Horizontal size={10} />\n        <Button\n          id=\"reset-style\"\n          disabled={sharedStyleId === undefined}\n          tooltip=\"Reset layer style to theme style\"\n          onClick={onReset}\n        >\n          <ResetIcon color={iconColor} />\n        </Button>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n\nexport default function LayerThemeInspector() {\n  const sharedStyles = useShallowArray(useSelector(Selectors.getSharedStyles));\n  const selectedLayers = useSelector(Selectors.getSelectedLayers);\n  const sharedStyleId = useMemo(\n    () => getMultiValue(selectedLayers.map((layer) => layer.sharedStyleID)),\n    [selectedLayers],\n  );\n\n  return (\n    <LayerThemeInspectorContent\n      style={selectedLayers[0]?.style}\n      sharedStyleId={sharedStyleId}\n      sharedStyles={sharedStyles}\n    />\n  );\n}\n","import { InputField, Slider, Spacer } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport * as InspectorPrimitives from '../components/inspector/InspectorPrimitives';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\n\nexport default memo(function OpacityInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedStyles),\n  );\n\n  const contextSettings = useShallowArray(\n    selectedStyles.flatMap((style) =>\n      style?.contextSettings ? [style.contextSettings] : [],\n    ),\n  );\n\n  const opacityValue = useMemo(\n    () => getMultiNumberValue(contextSettings.map((item) => item.opacity)),\n    [contextSettings],\n  );\n\n  const handleSubmitOpacity = useCallback(\n    (value: number) => {\n      dispatch('setOpacity', value / 100, 'replace');\n    },\n    [dispatch],\n  );\n\n  const handleNudgeOpacity = useCallback(\n    (value: number) => {\n      dispatch('setOpacity', value / 100, 'adjust');\n    },\n    [dispatch],\n  );\n\n  return useMemo(() => {\n    const roundedValue =\n      opacityValue !== undefined ? Math.round(opacityValue * 100) : undefined;\n\n    return (\n      <>\n        <InspectorPrimitives.Section>\n          <InspectorPrimitives.SectionHeader>\n            <InspectorPrimitives.Title>Opacity</InspectorPrimitives.Title>\n          </InspectorPrimitives.SectionHeader>\n          <Spacer.Vertical size={4} />\n          <InspectorPrimitives.Row>\n            <Slider\n              id=\"opacity-slider\"\n              value={roundedValue ?? 0}\n              onValueChange={handleSubmitOpacity}\n              min={0}\n              max={100}\n            />\n            <Spacer.Horizontal size={10} />\n            <InputField.Root id=\"opacity-input\" size={50}>\n              <InputField.NumberInput\n                value={roundedValue}\n                placeholder={roundedValue === undefined ? 'multi' : undefined}\n                onSubmit={handleSubmitOpacity}\n                onNudge={handleNudgeOpacity}\n              />\n              <InputField.Label>%</InputField.Label>\n            </InputField.Root>\n          </InspectorPrimitives.Row>\n        </InspectorPrimitives.Section>\n      </>\n    );\n  }, [opacityValue, handleSubmitOpacity, handleNudgeOpacity]);\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Button,\n  InputField,\n  Label,\n  LabeledElementView,\n  Select,\n  Spacer,\n} from 'noya-designsystem';\nimport { Layers, Selectors } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport * as InspectorPrimitives from '../components/inspector/InspectorPrimitives';\nimport { useApplicationState } from 'noya-app-state-context';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\nimport getMultiValue from '../utils/getMultiValue';\n\nconst CURVE_MODE_OPTIONS = [\n  'Straight' as const,\n  'Mirrored' as const,\n  'Asymmetric' as const,\n  'Disconnected' as const,\n];\n\ntype CurveModeOption = typeof CURVE_MODE_OPTIONS[0] | 'None';\n\nfunction getCurveMode(value: CurveModeOption): Sketch.CurveMode {\n  switch (value) {\n    case 'None':\n      return Sketch.CurveMode.None;\n    case 'Straight':\n      return Sketch.CurveMode.Straight;\n    case 'Mirrored':\n      return Sketch.CurveMode.Mirrored;\n    case 'Disconnected':\n      return Sketch.CurveMode.Disconnected;\n    case 'Asymmetric':\n      return Sketch.CurveMode.Asymmetric;\n  }\n}\n\nfunction getCurveModeString(value: Sketch.CurveMode): CurveModeOption {\n  switch (value) {\n    case Sketch.CurveMode.None:\n      return 'None';\n    case Sketch.CurveMode.Straight:\n      return 'Straight';\n    case Sketch.CurveMode.Mirrored:\n      return 'Mirrored';\n    case Sketch.CurveMode.Disconnected:\n      return 'Disconnected';\n    case Sketch.CurveMode.Asymmetric:\n      return 'Asymmetric';\n  }\n}\n\nexport default memo(function PointControlsInspector() {\n  const [state, dispatch] = useApplicationState();\n\n  const selectedLayerIds = Object.keys(state.selectedPointLists);\n\n  const selectedLayers = Layers.findAll(\n    Selectors.getCurrentPage(state),\n    (layer) => selectedLayerIds.includes(layer.do_objectID),\n  ).filter((layer): layer is Layers.PointsLayer => Layers.isPointsLayer(layer));\n\n  const isClosed =\n    getMultiValue(selectedLayers.map((layer) => layer.isClosed)) ?? true;\n\n  const controlPoint = Selectors.getCurvePointForSelectedControlPoint(state);\n  const points = controlPoint\n    ? [controlPoint]\n    : Selectors.getSelectedPoints(state);\n\n  const curveMode =\n    getMultiValue(points.map((point) => point.curveMode)) ||\n    Sketch.CurveMode.None;\n\n  const cornerRadius = getMultiNumberValue(\n    points.map((point) => point.cornerRadius),\n  );\n\n  const handleSubmitRadius = useCallback(\n    (value: number) => dispatch('setPointCornerRadius', value, 'replace'),\n    [dispatch],\n  );\n\n  const handleNudgeRadius = useCallback(\n    (value: number) => dispatch('setPointCornerRadius', value, 'adjust'),\n    [dispatch],\n  );\n\n  const pointTypeId = 'point-type';\n  const pointRadiusInputId = 'point-radius';\n\n  const renderLabel = useCallback(({ id }) => {\n    switch (id) {\n      case pointTypeId:\n        return <Label.Label>Point Type</Label.Label>;\n      case pointRadiusInputId:\n        return <Label.Label>Radius</Label.Label>;\n      default:\n        return null;\n    }\n  }, []);\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.SectionHeader>\n        <InspectorPrimitives.Title>Point Controls</InspectorPrimitives.Title>\n      </InspectorPrimitives.SectionHeader>\n      <Spacer.Vertical size={4} />\n      <InspectorPrimitives.Row>\n        <LabeledElementView renderLabel={renderLabel}>\n          <Select\n            id={pointTypeId}\n            value={getCurveModeString(curveMode) ?? 'None'}\n            options={CURVE_MODE_OPTIONS}\n            onChange={useCallback(\n              (value: CurveModeOption) => {\n                if (value === 'None') return;\n\n                dispatch('setPointCurveMode', getCurveMode(value));\n              },\n              [dispatch],\n            )}\n          />\n          <Spacer.Horizontal size={10} />\n          <InputField.Root id={pointRadiusInputId} size={50}>\n            <InputField.NumberInput\n              value={cornerRadius}\n              placeholder={cornerRadius === undefined ? 'multi' : undefined}\n              onSubmit={handleSubmitRadius}\n              onNudge={handleNudgeRadius}\n            />\n          </InputField.Root>\n        </LabeledElementView>\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <InspectorPrimitives.Column>\n          <Button\n            id=\"toggle-path-is-closed\"\n            disabled={selectedLayers.length === 0}\n            onClick={useCallback(() => {\n              dispatch('setIsClosed', !isClosed);\n            }, [dispatch, isClosed])}\n          >\n            {isClosed ? 'Open Path' : 'Close Path'}\n          </Button>\n        </InspectorPrimitives.Column>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n","import { Spacer } from 'noya-designsystem';\nimport { SetNumberMode } from 'noya-state';\nimport React from 'react';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport DimensionInput from './DimensionInput';\nimport { DimensionValue } from './DimensionsInspector';\n\nfunction roundNumber(number: number, roundTo: number) {\n  return Number(number.toFixed(roundTo));\n}\n\nexport interface Props {\n  x: DimensionValue;\n  y: DimensionValue;\n  onSetX: (value: number, mode: SetNumberMode) => void;\n  onSetY: (value: number, mode: SetNumberMode) => void;\n}\n\nexport default function CoordinatesInspector({ x, y, onSetX, onSetY }: Props) {\n  return (\n    <InspectorPrimitives.Row>\n      <DimensionInput\n        value={x ? roundNumber(x, 2) : undefined}\n        onSetValue={onSetX}\n        label=\"X\"\n      />\n      <Spacer.Horizontal size={16} />\n      <DimensionInput\n        value={y ? roundNumber(y, 2) : undefined}\n        onSetValue={onSetY}\n        label=\"Y\"\n      />\n    </InspectorPrimitives.Row>\n  );\n}\n","import { Selectors, SetNumberMode } from 'noya-state';\nimport React, { memo, useCallback } from 'react';\nimport CoordinatesInspector from '../components/inspector/CoordinatesInspector';\nimport { useApplicationState } from 'noya-app-state-context';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\n\nexport default memo(function PointCoordinatesInspector() {\n  const [state, dispatch] = useApplicationState();\n\n  const handleSetPointX = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setPointX', state.selectedPointLists, value, mode);\n    },\n    [dispatch, state.selectedPointLists],\n  );\n\n  const handleSetPointY = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setPointY', state.selectedPointLists, value, mode);\n    },\n    [dispatch, state.selectedPointLists],\n  );\n\n  const selectedPoints = Selectors.getSelectedPoints(state).map(\n    (curvePoint) => curvePoint.point,\n  );\n  const pointX = getMultiNumberValue(selectedPoints.map((point) => point.x));\n  const pointY = getMultiNumberValue(selectedPoints.map((point) => point.y));\n\n  return (\n    <CoordinatesInspector\n      x={pointX}\n      y={pointY}\n      onSetX={handleSetPointX}\n      onSetY={handleSetPointY}\n    />\n  );\n});\n","import { Selectors, SetNumberMode } from 'noya-state';\nimport React, { memo, useCallback } from 'react';\nimport CoordinatesInspector from '../components/inspector/CoordinatesInspector';\nimport { useApplicationState } from 'noya-app-state-context';\n\nexport default memo(function ControlPointCoordinatesInspector() {\n  const [state, dispatch] = useApplicationState();\n\n  const handleSetPointX = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setControlPointX', value, mode);\n    },\n    [dispatch],\n  );\n\n  const handleSetPointY = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setControlPointY', value, mode);\n    },\n    [dispatch],\n  );\n\n  const decodedCurvePoint = Selectors.getCurvePointForSelectedControlPoint(\n    state,\n  );\n\n  if (!decodedCurvePoint || !state.selectedControlPoint) return null;\n\n  const { x, y } = decodedCurvePoint[\n    state.selectedControlPoint.controlPointType\n  ];\n\n  return (\n    <CoordinatesInspector\n      x={x}\n      y={y}\n      onSetX={handleSetPointX}\n      onSetY={handleSetPointY}\n    />\n  );\n});\n","import { InputField, Slider, Spacer } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport * as InspectorPrimitives from '../components/inspector/InspectorPrimitives';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\n\nexport default memo(function RadiusInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedLayers = useShallowArray(\n    useSelector(Selectors.getSelectedLayersWithFixedRadius),\n  );\n\n  const radii = useShallowArray(\n    selectedLayers.flatMap((layer) => layer.fixedRadius),\n  );\n\n  const radiusValue = useMemo(() => getMultiNumberValue(radii), [radii]);\n\n  const handleSubmitRadius = useCallback(\n    (value: number) => {\n      dispatch('setFixedRadius', value, 'replace');\n    },\n    [dispatch],\n  );\n\n  const handleNudgeRadius = useCallback(\n    (value: number) => {\n      dispatch('setFixedRadius', value, 'adjust');\n    },\n    [dispatch],\n  );\n\n  return useMemo(() => {\n    const roundedValue =\n      radiusValue !== undefined ? Math.round(radiusValue) : undefined;\n\n    return (\n      <>\n        <InspectorPrimitives.Section>\n          <InspectorPrimitives.SectionHeader>\n            <InspectorPrimitives.Title>Radius</InspectorPrimitives.Title>\n          </InspectorPrimitives.SectionHeader>\n          <Spacer.Vertical size={4} />\n          <InspectorPrimitives.Row>\n            <Slider\n              id=\"radius-slider\"\n              value={roundedValue ?? 0}\n              onValueChange={handleSubmitRadius}\n              min={0}\n              max={100}\n            />\n            <Spacer.Horizontal size={10} />\n            <InputField.Root id=\"radius-input\" size={50}>\n              <InputField.NumberInput\n                value={roundedValue}\n                placeholder={roundedValue === undefined ? 'multi' : undefined}\n                onSubmit={handleSubmitRadius}\n                onNudge={handleNudgeRadius}\n              />\n            </InputField.Root>\n          </InspectorPrimitives.Row>\n        </InspectorPrimitives.Section>\n      </>\n    );\n  }, [radiusValue, handleSubmitRadius, handleNudgeRadius]);\n});\n","import { Label, LabeledElementView, Spacer } from 'noya-designsystem';\nimport { SetNumberMode } from 'noya-state';\nimport { memo, ReactNode, useCallback } from 'react';\nimport * as InspectorPrimitives from '../inspector/InspectorPrimitives';\nimport DimensionInput from './DimensionInput';\nimport { DimensionValue } from './DimensionsInspector';\nimport FillInputFieldWithPicker, {\n  ColorFillProps,\n} from './FillInputFieldWithPicker';\n\ninterface Props {\n  id: string;\n  prefix?: ReactNode;\n  x: DimensionValue;\n  y: DimensionValue;\n  blur: DimensionValue;\n  spread: DimensionValue;\n  onSetX: (value: number, mode: SetNumberMode) => void;\n  onSetY: (value: number, mode: SetNumberMode) => void;\n  onSetBlur: (value: number, mode: SetNumberMode) => void;\n  onSetSpread: (value: number, mode: SetNumberMode) => void;\n  colorProps: ColorFillProps;\n}\n\nexport default memo(function FillRow({\n  id,\n  prefix,\n  x,\n  y,\n  blur,\n  spread,\n  onSetX,\n  onSetY,\n  onSetBlur,\n  onSetSpread,\n  colorProps,\n}: Props) {\n  const colorInputId = `${id}-color`;\n  const xInputId = `${id}-x`;\n  const yInputId = `${id}-y`;\n  const blurInputId = `${id}-blur`;\n  const spreadInputId = `${id}-spread`;\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case colorInputId:\n          return <Label.Label>Color</Label.Label>;\n        case xInputId:\n          return <Label.Label>X</Label.Label>;\n        case yInputId:\n          return <Label.Label>Y</Label.Label>;\n        case blurInputId:\n          return <Label.Label>Blur</Label.Label>;\n        case spreadInputId:\n          return <Label.Label>Spread</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [colorInputId, xInputId, yInputId, blurInputId, spreadInputId],\n  );\n\n  return (\n    <InspectorPrimitives.Row id={id}>\n      <LabeledElementView renderLabel={renderLabel}>\n        {prefix}\n        {prefix && <Spacer.Horizontal size={8} />}\n        <FillInputFieldWithPicker id={colorInputId} colorProps={colorProps} />\n        <Spacer.Horizontal size={8} />\n        <DimensionInput\n          id={xInputId}\n          size={50}\n          value={x !== undefined ? Math.round(x) : x}\n          onSetValue={onSetX}\n        />\n        <Spacer.Horizontal size={8} />\n        <DimensionInput\n          id={yInputId}\n          size={50}\n          value={y !== undefined ? Math.round(y) : y}\n          onSetValue={onSetY}\n        />\n        <Spacer.Horizontal size={8} />\n        <DimensionInput\n          id={blurInputId}\n          size={50}\n          value={blur !== undefined ? Math.round(blur) : blur}\n          onSetValue={onSetBlur}\n        />\n        <Spacer.Horizontal size={8} />\n        <DimensionInput\n          id={spreadInputId}\n          size={50}\n          value={spread !== undefined ? Math.round(spread) : spread}\n          onSetValue={onSetSpread}\n        />\n      </LabeledElementView>\n    </InspectorPrimitives.Row>\n  );\n});\n","import type Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Selectors } from 'noya-state';\nimport { isDeepEqual, zipLongest } from 'noya-utils';\nimport { memo, ReactNode, useCallback, useMemo } from 'react';\nimport ArrayController from '../components/inspector/ArrayController';\nimport ShadowRow from '../components/inspector/ShadowRow';\nimport { useDispatch, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiNumberValue from '../utils/getMultiNumberValue';\nimport getMultiValue from '../utils/getMultiValue';\n\ntype EditableShadow = {\n  // TODO: Indeterminate `isEnabled` state\n  isEnabled: boolean;\n  blurRadius?: number;\n  color?: Sketch.Color;\n  offsetX?: number;\n  offsetY?: number;\n  spread?: number;\n};\n\nexport default memo(function ShadowInspector() {\n  const dispatch = useDispatch();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedStyles),\n  );\n\n  const layerShadowLists = useShallowArray(\n    selectedStyles.map((style) => style?.shadows ?? []),\n  );\n\n  const editableShadows: EditableShadow[] = useMemo(\n    () =>\n      zipLongest(undefined, ...layerShadowLists).map((shadows) => {\n        const filtered = shadows.flatMap((shadow) => (shadow ? [shadow] : []));\n\n        return {\n          isEnabled:\n            getMultiValue(filtered.map((shadow) => shadow.isEnabled)) ?? true,\n          blurRadius: getMultiNumberValue(\n            filtered.map((shadow) => shadow.blurRadius),\n          ),\n          color: getMultiValue(\n            filtered.map((shadow) => shadow.color),\n            isDeepEqual,\n          ),\n          offsetX: getMultiValue(filtered.map((shadow) => shadow.offsetX)),\n          offsetY: getMultiValue(filtered.map((shadow) => shadow.offsetY)),\n          spread: getMultiValue(filtered.map((shadow) => shadow.spread)),\n        };\n      }),\n    [layerShadowLists],\n  );\n\n  return (\n    <ArrayController<EditableShadow>\n      title=\"Shadows\"\n      id=\"shadows\"\n      key=\"shadows\"\n      value={editableShadows}\n      onClickPlus={useCallback(() => dispatch('addNewShadow'), [dispatch])}\n      onClickTrash={useCallback(() => dispatch('deleteDisabledShadows'), [\n        dispatch,\n      ])}\n      onDeleteItem={useCallback((index) => dispatch('deleteShadow', index), [\n        dispatch,\n      ])}\n      onMoveItem={useCallback(\n        (sourceIndex, destinationIndex) =>\n          dispatch('moveShadow', sourceIndex, destinationIndex),\n        [dispatch],\n      )}\n      onChangeCheckbox={useCallback(\n        (index, checked) => dispatch('setShadowEnabled', index, checked),\n        [dispatch],\n      )}\n    >\n      {useCallback(\n        ({\n          item,\n          index,\n          checkbox,\n        }: {\n          item: EditableShadow;\n          index: number;\n          checkbox: ReactNode;\n        }) => (\n          <ShadowRow\n            id={`shadow-${index}`}\n            prefix={checkbox}\n            x={item.offsetX}\n            y={item.offsetY}\n            blur={item.blurRadius}\n            spread={item.spread}\n            onSetX={(value, mode) => dispatch('setShadowX', index, value, mode)}\n            onSetY={(value, mode) => dispatch('setShadowY', index, value, mode)}\n            onSetBlur={(value, mode) =>\n              dispatch('setShadowBlur', index, value, mode)\n            }\n            onSetSpread={(value, mode) =>\n              dispatch('setShadowSpread', index, value, mode)\n            }\n            colorProps={{\n              color: item.color,\n              onChangeColor: (value) =>\n                dispatch('setShadowColor', index, value),\n            }}\n          />\n        ),\n        [dispatch],\n      )}\n    </ArrayController>\n  );\n});\n","import { LinkBreak2Icon, ComponentInstanceIcon } from '@radix-ui/react-icons';\nimport { Button, Select, Spacer } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport * as InspectorPrimitives from './InspectorPrimitives';\nimport { useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../../hooks/useShallowArray';\n\ninterface Props {\n  symbolId: string;\n  onSelect: (value: string) => void;\n  onDetach: () => void;\n  onEditSource: () => void;\n}\n\nexport default memo(function SymbolSelectorRow({\n  symbolId,\n  onSelect,\n  onDetach,\n  onEditSource,\n}: Props) {\n  const symbols = useShallowArray(useSelector(Selectors.getSymbols));\n\n  const iconColor = useTheme().colors.icon;\n\n  const symbolSourceOptions = useMemo(\n    () => symbols.map((symbol) => symbol.symbolID),\n    [symbols],\n  );\n\n  const getSymbolMasterTitle = useCallback(\n    (id) => symbols.find((symbol) => symbol.symbolID === id)!.name,\n    [symbols],\n  );\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.SectionHeader>\n        <InspectorPrimitives.Title>Symbol</InspectorPrimitives.Title>\n      </InspectorPrimitives.SectionHeader>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <Select\n          id=\"symbol-instance-source\"\n          value={symbolId}\n          options={symbolSourceOptions}\n          getTitle={getSymbolMasterTitle}\n          onChange={onSelect}\n        />\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <Button\n          id=\"detach-source-symbol\"\n          disabled={symbolId === undefined}\n          tooltip=\"Detach instance from symbol\"\n          onClick={onDetach}\n        >\n          <LinkBreak2Icon color={iconColor} />\n        </Button>\n        <Spacer.Horizontal size={10} />\n        <Button\n          id=\"edit-source-symbol\"\n          disabled={symbolId === undefined}\n          tooltip=\"Edit Symbol Source\"\n          onClick={onEditSource}\n        >\n          <ComponentInstanceIcon color={iconColor} />\n        </Button>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n","import { useRef } from 'react';\nimport { isShallowEqual } from 'noya-utils';\n\nfunction deepEqualArray<T>(a: T[], b: T[]) {\n  if (isShallowEqual(a, b)) return true;\n\n  return JSON.stringify(a) === JSON.stringify(b);\n}\n\n/**\n * Memoize an array using deep equality comparison (by converting to JSON).\n */\nexport default function useDeepArray<T>(array: T[]) {\n  const ref = useRef(array);\n\n  if (!deepEqualArray(ref.current, array)) {\n    ref.current = array;\n  }\n\n  return ref.current;\n}\n","import {\n  ArrowDownIcon,\n  CircleIcon,\n  Component1Icon,\n  ComponentInstanceIcon,\n  CopyIcon,\n  EyeClosedIcon,\n  EyeOpenIcon,\n  FrameIcon,\n  GroupIcon,\n  ImageIcon,\n  LockClosedIcon,\n  LockOpen1Icon,\n  MaskOnIcon,\n  Share1Icon,\n  SquareIcon,\n  TextIcon,\n} from '@radix-ui/react-icons';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  useApplicationState,\n  useGetStateSnapshot,\n  useSelector,\n  useWorkspace,\n} from 'noya-app-state-context';\nimport {\n  ListView,\n  RelativeDropPosition,\n  Spacer,\n  TreeView,\n  withSeparatorElements,\n} from 'noya-designsystem';\nimport { Layers, PageLayer, Selectors } from 'noya-state';\nimport { isDeepEqual } from 'noya-utils';\nimport React, {\n  ForwardedRef,\n  forwardRef,\n  memo,\n  useCallback,\n  useState,\n} from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport { visit } from 'tree-visit';\nimport useDeepArray from '../hooks/useDeepArray';\nimport useLayerMenu, { LayerMenuItemType } from '../hooks/useLayerMenu';\nimport useShallowArray from '../hooks/useShallowArray';\n\nconst IconContainer = styled.span(({ theme }) => ({\n  color: theme.colors.mask,\n  flex: '0 0 auto',\n  display: 'flex',\n  alignItems: 'center',\n}));\n\ntype LayerType = PageLayer['_class'];\n\ntype LayerListItem = {\n  type: LayerType;\n  id: string;\n  name: string;\n  depth: number;\n  expanded: boolean;\n  selected: boolean;\n  visible: boolean;\n  hasClippingMask: boolean;\n  shouldBreakMaskChain: boolean;\n  isWithinMaskChain: boolean;\n  isLocked: boolean;\n};\n\nfunction flattenLayerList(\n  page: Sketch.Page,\n  selectedObjects: string[],\n): LayerListItem[] {\n  const flattened: LayerListItem[] = [];\n\n  visit<PageLayer | Sketch.Page>(page, {\n    getChildren: (layer) => {\n      if (layer.layerListExpandedType === Sketch.LayerListExpanded.Collapsed) {\n        return [];\n      }\n\n      return Layers.getChildren(layer).slice().reverse();\n    },\n    onEnter(layer, indexPath) {\n      if (Layers.isPageLayer(layer)) return;\n\n      const currentIndex = indexPath[indexPath.length - 1];\n\n      const parent = Layers.accessReversed(\n        page,\n        indexPath.slice(0, -1),\n      ) as Layers.ParentLayer;\n\n      flattened.push({\n        type: layer._class,\n        id: layer.do_objectID,\n        name: layer.name,\n        depth: indexPath.length - 1,\n        expanded:\n          layer.layerListExpandedType !== Sketch.LayerListExpanded.Collapsed,\n        selected: selectedObjects.includes(layer.do_objectID),\n        visible: layer.isVisible,\n        hasClippingMask: layer.hasClippingMask ?? false,\n        shouldBreakMaskChain: layer.shouldBreakMaskChain,\n        isWithinMaskChain: Layers.isWithinMaskChain(parent, currentIndex),\n        isLocked: layer.isLocked,\n      });\n    },\n  });\n\n  return flattened;\n}\n\nexport const LayerIcon = memo(function LayerIcon({\n  type,\n  selected,\n  variant,\n}: {\n  type: LayerType;\n  selected?: boolean;\n  variant?: 'primary';\n}) {\n  const colors = useTheme().colors;\n\n  const color =\n    variant && !selected\n      ? colors[variant]\n      : selected\n      ? colors.iconSelected\n      : colors.icon;\n\n  switch (type) {\n    case 'rectangle':\n      return <SquareIcon color={color} />;\n    case 'oval':\n      return <CircleIcon color={color} />;\n    case 'text':\n      return <TextIcon color={color} />;\n    case 'artboard':\n      return <FrameIcon color={color} />;\n    case 'symbolMaster':\n      return <Component1Icon color={color} />;\n    case 'symbolInstance':\n      return <ComponentInstanceIcon color={color} />;\n    case 'group':\n      return <GroupIcon color={color} />;\n    case 'bitmap':\n      return <ImageIcon color={color} />;\n    case 'shapeGroup':\n      return <CopyIcon color={color} />;\n    case 'shapePath':\n      return <Share1Icon color={color} />;\n    default:\n      return null;\n  }\n});\n\nconst LayerRow = memo(\n  forwardRef(function LayerRow(\n    {\n      name,\n      selected,\n      visible,\n      isWithinMaskChain,\n      onHoverChange,\n      onChangeVisible,\n      onChangeIsLocked,\n      isLocked,\n      isDragging,\n      ...props\n    }: TreeView.TreeRowProps<LayerMenuItemType> & {\n      name: string;\n      selected: boolean;\n      visible: boolean;\n      isWithinMaskChain: boolean;\n      isLocked: boolean;\n      isDragging: boolean;\n      onChangeVisible: (visible: boolean) => void;\n      onChangeIsLocked: (isLocked: boolean) => void;\n    },\n    forwardedRef: ForwardedRef<HTMLLIElement>,\n  ) {\n    const [hovered, setHovered] = useState(false);\n\n    const handleHoverChange = useCallback(\n      (hovered: boolean) => {\n        onHoverChange?.(hovered);\n        setHovered(hovered);\n      },\n      [onHoverChange],\n    );\n\n    const handleSetVisible = useCallback(\n      (event: React.MouseEvent) => {\n        event.stopPropagation();\n        onChangeVisible(true);\n      },\n      [onChangeVisible],\n    );\n\n    const handleSetHidden = useCallback(\n      (event: React.MouseEvent) => {\n        event.stopPropagation();\n        onChangeVisible(false);\n      },\n      [onChangeVisible],\n    );\n\n    const handleSetLocked = useCallback(\n      (event: React.MouseEvent) => {\n        event.stopPropagation();\n        onChangeIsLocked(true);\n      },\n      [onChangeIsLocked],\n    );\n\n    const handleSetUnlocked = useCallback(\n      (event: React.MouseEvent) => {\n        event.stopPropagation();\n        onChangeIsLocked(false);\n      },\n      [onChangeIsLocked],\n    );\n\n    const titleElement = <TreeView.RowTitle>{name}</TreeView.RowTitle>;\n\n    return (\n      <TreeView.Row<LayerMenuItemType>\n        ref={forwardedRef}\n        onHoverChange={handleHoverChange}\n        selected={!isDragging && selected}\n        disabled={!visible}\n        hovered={!isDragging && hovered}\n        {...props}\n      >\n        {isDragging\n          ? titleElement\n          : withSeparatorElements(\n              [\n                titleElement,\n                isLocked ? (\n                  <LockClosedIcon onClick={handleSetUnlocked} />\n                ) : hovered ? (\n                  <LockOpen1Icon onClick={handleSetLocked} />\n                ) : null,\n                !visible ? (\n                  <EyeClosedIcon onClick={handleSetVisible} />\n                ) : hovered ? (\n                  <EyeOpenIcon onClick={handleSetHidden} />\n                ) : isLocked ? (\n                  <Spacer.Horizontal size={15} />\n                ) : null,\n              ],\n              <Spacer.Horizontal size={6} />,\n            )}\n      </TreeView.Row>\n    );\n  }),\n);\n\nexport default memo(function LayerList() {\n  const [state, dispatch] = useApplicationState();\n  const getStateSnapshot = useGetStateSnapshot();\n  const page = useSelector(Selectors.getCurrentPage);\n  const selectedLayers = useSelector(Selectors.getSelectedLayers);\n\n  const { highlightLayer } = useWorkspace();\n  const selectedObjects = useShallowArray(state.selectedObjects);\n  const items = useDeepArray(flattenLayerList(page, selectedObjects));\n\n  const [menuItems, onSelectMenuItem] = useLayerMenu(selectedLayers);\n\n  const renderItem = useCallback(\n    (\n      {\n        id,\n        name,\n        depth,\n        type,\n        expanded,\n        selected,\n        visible,\n        isWithinMaskChain,\n        hasClippingMask,\n        isLocked,\n      }: LayerListItem,\n      index: number,\n      { isDragging }: ListView.ItemInfo,\n    ) => {\n      const handleClick = (info: TreeView.TreeViewClickInfo) => {\n        const { metaKey, shiftKey } = info;\n\n        dispatch('interaction', ['reset']);\n\n        if (metaKey) {\n          dispatch(\n            'selectLayer',\n            id,\n            selectedObjects.includes(id) ? 'difference' : 'intersection',\n          );\n        } else if (shiftKey && selectedObjects.length > 0) {\n          const lastSelectedIndex = items.findIndex(\n            (item) => item.id === selectedObjects[selectedObjects.length - 1],\n          );\n\n          const first = Math.min(index, lastSelectedIndex);\n          const last = Math.max(index, lastSelectedIndex) + 1;\n\n          dispatch(\n            'selectLayer',\n            items.slice(first, last).map((item) => item.id),\n            'intersection',\n          );\n        } else {\n          dispatch('selectLayer', id, 'replace');\n        }\n      };\n\n      const handleHoverChange = (hovered: boolean) => {\n        highlightLayer(\n          hovered\n            ? { id, precedence: 'aboveSelection', isMeasured: false }\n            : undefined,\n        );\n      };\n\n      const handleClickChevron = () =>\n        dispatch('setExpandedInLayerList', id, !expanded);\n\n      const handleChangeVisible = (value: boolean) =>\n        dispatch('setLayerVisible', id, value);\n\n      const handleChangeIsLocked = (value: boolean) =>\n        dispatch('setLayerIsLocked', id, value);\n\n      const handleContextMenu = () => {\n        if (selected) return;\n\n        dispatch('selectLayer', id);\n      };\n\n      const isSymbolClass =\n        type === 'symbolInstance' || type === 'symbolMaster';\n      const isArtboardClass = type === 'artboard' || type === 'symbolMaster';\n      const isGroupClass =\n        isArtboardClass || type === 'group' || type === 'shapeGroup';\n\n      return (\n        <LayerRow\n          id={id}\n          menuItems={menuItems}\n          onSelectMenuItem={onSelectMenuItem}\n          onContextMenu={handleContextMenu}\n          key={id}\n          name={name}\n          visible={visible}\n          isWithinMaskChain={isWithinMaskChain}\n          isLocked={isLocked}\n          isDragging={isDragging}\n          depth={depth}\n          selected={selected}\n          onClick={handleClick}\n          onHoverChange={handleHoverChange}\n          onChangeVisible={handleChangeVisible}\n          onChangeIsLocked={handleChangeIsLocked}\n          icon={\n            <IconContainer>\n              {hasClippingMask ? (\n                <>\n                  <MaskOnIcon />\n                  <Spacer.Horizontal size={4} />\n                </>\n              ) : isWithinMaskChain ? (\n                <>\n                  <ArrowDownIcon />\n                  <Spacer.Horizontal size={4} />\n                </>\n              ) : null}\n              <LayerIcon\n                type={type}\n                selected={selected}\n                variant={isSymbolClass ? 'primary' : undefined}\n              />\n            </IconContainer>\n          }\n          isSectionHeader={isArtboardClass}\n          expanded={isGroupClass ? expanded : undefined}\n          onClickChevron={handleClickChevron}\n        />\n      );\n    },\n    [\n      dispatch,\n      highlightLayer,\n      items,\n      menuItems,\n      onSelectMenuItem,\n      selectedObjects,\n    ],\n  );\n\n  return (\n    <TreeView.Root\n      items={items}\n      renderItem={renderItem}\n      scrollable\n      sortable\n      onClick={useCallback(() => dispatch('selectLayer', undefined), [\n        dispatch,\n      ])}\n      onMoveItem={useCallback(\n        (sourceIndex, destinationIndex, position: RelativeDropPosition) => {\n          const sourceId = items[sourceIndex].id;\n          const sourceIds = selectedObjects.includes(sourceId)\n            ? selectedObjects\n            : sourceId;\n\n          dispatch(\n            'moveLayer',\n            sourceIds,\n            items[destinationIndex].id,\n            position,\n          );\n        },\n        [dispatch, items, selectedObjects],\n      )}\n      acceptsDrop={useCallback(\n        (\n          sourceId: string,\n          destinationId: string,\n          relationDropPosition: RelativeDropPosition,\n        ) => {\n          const sourceIds = selectedObjects.includes(sourceId)\n            ? selectedObjects\n            : sourceId;\n\n          const state = getStateSnapshot();\n          const page = Selectors.getCurrentPage(state);\n\n          const sourcePaths = Layers.findAllIndexPaths(page, (layer) =>\n            sourceIds.includes(layer.do_objectID),\n          );\n          const destinationPath = Layers.findIndexPath(\n            page,\n            (layer) => layer.do_objectID === destinationId,\n          );\n\n          if (sourcePaths.length === 0 || !destinationPath) return false;\n\n          // Don't allow dragging into a descendant\n          if (\n            sourcePaths.some((sourcePath) =>\n              isDeepEqual(\n                sourcePath,\n                destinationPath.slice(0, sourcePath.length),\n              ),\n            )\n          )\n            return false;\n\n          const sourceLayers = sourcePaths.map((sourcePath) =>\n            Layers.access(page, sourcePath),\n          );\n          const destinationLayer = Layers.access(page, destinationPath);\n\n          const destinationExpanded =\n            destinationLayer.layerListExpandedType !==\n            Sketch.LayerListExpanded.Collapsed;\n\n          // Don't allow dragging below expanded layers - we'll fall back to inside\n          if (\n            destinationExpanded &&\n            Layers.isParentLayer(destinationLayer) &&\n            destinationLayer.layers.length > 0 &&\n            relationDropPosition === 'below'\n          ) {\n            return false;\n          }\n\n          // Artboards can't be moved into other layers\n          if (\n            sourceLayers.some(Layers.isSymbolMasterOrArtboard) &&\n            (relationDropPosition === 'inside' || destinationPath.length > 1)\n          ) {\n            return false;\n          }\n\n          // Only allow dropping inside of parent layers\n          if (\n            relationDropPosition === 'inside' &&\n            !Layers.isParentLayer(destinationLayer)\n          ) {\n            return false;\n          }\n\n          return true;\n        },\n        [getStateSnapshot, selectedObjects],\n      )}\n    />\n  );\n});\n","import { ResetIcon } from '@radix-ui/react-icons';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  InputField,\n  Spacer,\n  TreeView,\n  Select,\n  Button,\n} from 'noya-designsystem';\nimport { ApplicationState, Overrides, Selectors } from 'noya-state';\nimport { memo, ReactNode, useCallback, useMemo } from 'react';\nimport { LayerIcon } from '../../containers/LayerList';\nimport { useApplicationState } from 'noya-app-state-context';\nimport * as InspectorPrimitives from './InspectorPrimitives';\ninterface Props {\n  symbolMaster: Sketch.SymbolMaster;\n  overrideValues: Sketch.OverrideValue[];\n  onSetOverrideValue: (overrideName: string, value: string) => void;\n  onResetOverrideValue: () => void;\n}\n\nconst ThemeStyleSelector = ({\n  themeStyles,\n  sharedStyleID,\n  onChange,\n}: {\n  themeStyles: Sketch.SharedStyle[];\n  sharedStyleID: string;\n  onChange: (value: string) => void;\n}) => {\n  const themeStylesOptions = useMemo(\n    () => themeStyles.map((style) => style.do_objectID),\n    [themeStyles],\n  );\n\n  const getThemeStylesTitle = useCallback(\n    (id) => themeStyles.find((style) => style.do_objectID === id)!.name,\n    [themeStyles],\n  );\n\n  return (\n    <Select\n      id=\"theme-style-selector\"\n      value={sharedStyleID}\n      options={themeStylesOptions}\n      getTitle={getThemeStylesTitle}\n      onChange={onChange}\n    />\n  );\n};\n\nconst TextStyleSelector = ({\n  textStyles,\n  sharedStyleID,\n  onChange,\n}: {\n  textStyles: Sketch.SharedStyle[];\n  sharedStyleID: string;\n  onChange: (value: string) => void;\n}) => {\n  const textStylesOptions = useMemo(\n    () => textStyles.map((style) => style.do_objectID),\n    [textStyles],\n  );\n\n  const getTextStylesTitle = useCallback(\n    (id) => textStyles.find((style) => style.do_objectID === id)!.name,\n    [textStyles],\n  );\n  return (\n    <Select\n      id=\"text-style-selector\"\n      value={sharedStyleID}\n      options={textStylesOptions}\n      getTitle={getTextStylesTitle}\n      onChange={onChange}\n    />\n  );\n};\n\nconst SymbolMasterSelector = ({\n  symbols,\n  symbolId,\n  onChange,\n}: {\n  symbols: Sketch.SymbolMaster[];\n  symbolId: string;\n  onChange: (value: string) => void;\n}) => {\n  const symbolSourceOptions = useMemo(\n    () => ['none', ...symbols.map((symbol) => symbol.symbolID)],\n    [symbols],\n  );\n\n  const getSymbolMasterTitle = useCallback(\n    (id) =>\n      id === 'none'\n        ? 'No Symbol'\n        : symbols.find((symbol) => symbol.symbolID === id)!.name,\n    [symbols],\n  );\n\n  return (\n    <Select\n      id=\"symbol-instance-source\"\n      value={symbolId}\n      options={symbolSourceOptions}\n      getTitle={getSymbolMasterTitle}\n      onChange={onChange}\n    />\n  );\n};\n\nfunction getOverrideElements(\n  state: ApplicationState,\n  symbolMaster: Sketch.SymbolMaster,\n  idPath: string[],\n  depth: number,\n  overrideValues: Sketch.OverrideValue[],\n  overrideProperties: Sketch.OverrideProperty[],\n  onSetOverrideValue: (overrideName: string, value: string) => void,\n): ReactNode[] {\n  return [...symbolMaster.layers].reverse().flatMap((layer): ReactNode[] => {\n    const nestedIdPath = [...idPath, layer.do_objectID];\n    const key = nestedIdPath.join('/');\n\n    const canOverride = (propertyType: Overrides.PropertyType) =>\n      Overrides.canOverrideProperty(overrideProperties, propertyType, key);\n\n    const titleRow = (\n      <TreeView.Row\n        key={key + ' title'}\n        isSectionHeader\n        depth={depth}\n        icon={<LayerIcon type={layer._class} />}\n      >\n        <TreeView.RowTitle>{layer.name}</TreeView.RowTitle>\n      </TreeView.Row>\n    );\n\n    switch (layer._class) {\n      case 'symbolInstance': {\n        const symbolID =\n          Overrides.getOverrideValue(overrideValues, 'symbolID', key) ??\n          layer.symbolID;\n\n        const symbolMaster = Selectors.findSymbolMaster(state, symbolID);\n        if (!symbolMaster && symbolID !== 'none') return [];\n\n        const nestedOverrides =\n          symbolMaster && symbolMaster.allowsOverrides\n            ? getOverrideElements(\n                state,\n                symbolMaster,\n                nestedIdPath,\n                depth + (canOverride('symbolID') ? 1 : 0),\n                overrideValues,\n                overrideProperties,\n                onSetOverrideValue,\n              )\n            : [];\n\n        const symbolIdOverrideName = key + '_symbolID';\n\n        return [\n          canOverride('symbolID') && titleRow,\n          canOverride('symbolID') && (\n            <TreeView.Row key={symbolIdOverrideName} depth={depth + 1}>\n              <SymbolMasterSelector\n                symbols={Selectors.getSymbols(state)}\n                symbolId={symbolID}\n                onChange={(value) =>\n                  onSetOverrideValue(symbolIdOverrideName, value)\n                }\n              />\n            </TreeView.Row>\n          ),\n          ...nestedOverrides,\n        ];\n      }\n      case 'text': {\n        const stringValueOverrideName = key + '_stringValue';\n        const textStyleOverrideName = key + '_textStyle';\n\n        return [\n          (canOverride('stringValue') ||\n            (layer.sharedStyleID && canOverride('textStyle'))) &&\n            titleRow,\n          canOverride('stringValue') && (\n            <TreeView.Row key={stringValueOverrideName} depth={depth + 1}>\n              <InputField.Root>\n                <InputField.Input\n                  value={\n                    Overrides.getOverrideValue(\n                      overrideValues,\n                      'stringValue',\n                      key,\n                    ) ?? ''\n                  }\n                  placeholder={layer.attributedString.string}\n                  onChange={(value) =>\n                    onSetOverrideValue(stringValueOverrideName, value)\n                  }\n                />\n              </InputField.Root>\n            </TreeView.Row>\n          ),\n          layer.sharedStyleID && canOverride('textStyle') && (\n            <TreeView.Row key={textStyleOverrideName} depth={depth + 1}>\n              <TextStyleSelector\n                textStyles={Selectors.getSharedTextStyles(state)}\n                sharedStyleID={\n                  Overrides.getOverrideValue(\n                    overrideValues,\n                    'textStyle',\n                    key,\n                  ) ?? layer.sharedStyleID\n                }\n                onChange={(value) =>\n                  onSetOverrideValue(textStyleOverrideName, value)\n                }\n              />\n            </TreeView.Row>\n          ),\n        ];\n      }\n      case 'bitmap': {\n        const imageOverrideName = key + '_image';\n\n        if (!canOverride('image')) return [];\n        return [\n          titleRow,\n          <TreeView.Row key={imageOverrideName} depth={depth + 1}>\n            <InputField.Root>\n              <InputField.Input\n                value={''}\n                placeholder={''}\n                onChange={() => {}}\n              />\n            </InputField.Root>\n          </TreeView.Row>,\n        ];\n      }\n      default: {\n        const layerStyleOverrideName = key + '_layerStyle';\n\n        if (!canOverride('layerStyle')) return [];\n\n        return layer.sharedStyleID\n          ? [\n              titleRow,\n              layer.sharedStyleID && (\n                <TreeView.Row key={layerStyleOverrideName} depth={depth + 1}>\n                  <ThemeStyleSelector\n                    themeStyles={Selectors.getSharedStyles(state)}\n                    sharedStyleID={\n                      Overrides.getOverrideValue(\n                        overrideValues,\n                        'layerStyle',\n                        key,\n                      ) ?? layer.sharedStyleID\n                    }\n                    onChange={(value) =>\n                      onSetOverrideValue(layerStyleOverrideName, value)\n                    }\n                  />\n                </TreeView.Row>\n              ),\n            ]\n          : [];\n      }\n    }\n  });\n}\n\nexport default memo(function SymbolInstanceOverridesRow({\n  overrideValues,\n  symbolMaster,\n  onResetOverrideValue,\n  onSetOverrideValue,\n}: Props) {\n  const [state] = useApplicationState();\n\n  const overrideElements = getOverrideElements(\n    state,\n    symbolMaster,\n    [],\n    0,\n    overrideValues,\n    symbolMaster.overrideProperties,\n    onSetOverrideValue,\n  );\n\n  return (\n    <>\n      <InspectorPrimitives.Section>\n        <InspectorPrimitives.Row>\n          <InspectorPrimitives.Title>Overrides</InspectorPrimitives.Title>\n          <Spacer.Horizontal />\n\n          <Button\n            id=\"reset-symbol-sverrides\"\n            tooltip=\"Reset Overrides\"\n            onClick={onResetOverrideValue}\n          >\n            <ResetIcon />\n          </Button>\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Section>\n      {symbolMaster.allowsOverrides && (\n        <TreeView.Root expandable={false}>{overrideElements}</TreeView.Root>\n      )}\n    </>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport SymbolSelectorRow from '../components/inspector/SymbolSelectorRow';\nimport SymbolInstanceOverridesRow from '../components/inspector/SymbolInstanceOverridesRow';\nimport { Divider, withSeparatorElements } from 'noya-designsystem';\nimport FillInspector from './FillInspector';\n\nexport default memo(function SymbolMasterInspector() {\n  const dispatch = useDispatch();\n\n  const selectedSymbolInstance = useShallowArray(\n    useSelector(Selectors.getSelectedLayers),\n  )[0] as Sketch.SymbolInstance;\n\n  const symbolMaster = useShallowArray(useSelector(Selectors.getSymbols)).find(\n    (symbol: Sketch.SymbolMaster) =>\n      symbol.symbolID === selectedSymbolInstance.symbolID,\n  );\n\n  const onSetOverrideValue = useCallback(\n    (overrideName: string, value: string) => {\n      dispatch(\n        'setOverrideValue',\n        overrideName,\n        value === '' ? undefined : value,\n      );\n    },\n    [dispatch],\n  );\n\n  const onResetOverrideValue = useCallback(() => {\n    dispatch('setOverrideValue');\n  }, [dispatch]);\n\n  const elements = [\n    <SymbolSelectorRow\n      symbolId={selectedSymbolInstance.symbolID}\n      onSelect={useCallback(\n        (value) => {\n          dispatch('setInstanceSymbolSource', value);\n        },\n        [dispatch],\n      )}\n      onDetach={useCallback(\n        () => dispatch('detachSymbol', selectedSymbolInstance.do_objectID),\n        [dispatch, selectedSymbolInstance.do_objectID],\n      )}\n      onEditSource={useCallback(\n        () => dispatch('goToSymbolSource', selectedSymbolInstance.symbolID),\n        [dispatch, selectedSymbolInstance.symbolID],\n      )}\n    />,\n    <FillInspector title={'Tint'} allowMoreThanOne={false} />,\n    symbolMaster && (\n      <SymbolInstanceOverridesRow\n        overrideValues={selectedSymbolInstance.overrideValues}\n        symbolMaster={symbolMaster}\n        onSetOverrideValue={onSetOverrideValue}\n        onResetOverrideValue={onResetOverrideValue}\n      />\n    ),\n  ];\n\n  return <>{withSeparatorElements(elements, <Divider />)}</>;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Spacer } from 'noya-designsystem';\nimport { memo, useCallback, useMemo } from 'react';\nimport FillInputFieldWithPicker from './FillInputFieldWithPicker';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface Props {\n  resizesContent: boolean;\n  backgroundColor: Sketch.Color;\n  hasBackgroundColor: boolean;\n  includeBackgroundColorInExport: boolean;\n  includeBackgroundColorInInstance: boolean;\n  setAdjustContentOnResize: (value: boolean) => void;\n  setHasBackgroundColor: (value: boolean) => void;\n  setBackgroundColor: (value: Sketch.Color) => void;\n  setIncludeBackgroundInExport: (value: boolean) => void;\n  setIncludeBackgroundInInstances: (value: boolean) => void;\n}\n\nexport default memo(function SymbolSourceRow({\n  resizesContent,\n  backgroundColor,\n  hasBackgroundColor,\n  includeBackgroundColorInExport,\n  includeBackgroundColorInInstance,\n  setAdjustContentOnResize,\n  setHasBackgroundColor,\n  setBackgroundColor,\n  setIncludeBackgroundInExport,\n  setIncludeBackgroundInInstances,\n}: Props) {\n  const setIncludeBackgroundInExportCallback = useCallback(\n    (evt) => setIncludeBackgroundInExport(evt.target.checked),\n    [setIncludeBackgroundInExport],\n  );\n\n  const setIncludeBackgroundInInstancesCallback = useCallback(\n    (evt) => setIncludeBackgroundInInstances(evt.target.checked),\n    [setIncludeBackgroundInInstances],\n  );\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.Title>Symbol Source</InspectorPrimitives.Title>\n      <Spacer.Vertical size={4} />\n      <InspectorPrimitives.Row>\n        <InspectorPrimitives.Checkbox\n          type=\"checkbox\"\n          checked={resizesContent}\n          onChange={useCallback(\n            (evt) => setAdjustContentOnResize(evt.target.checked),\n            [setAdjustContentOnResize],\n          )}\n        />\n        <Spacer.Horizontal size={8} />\n        <InspectorPrimitives.Text>\n          Adjust content on resize\n        </InspectorPrimitives.Text>\n      </InspectorPrimitives.Row>\n      <InspectorPrimitives.Row>\n        <InspectorPrimitives.Checkbox\n          type=\"checkbox\"\n          checked={hasBackgroundColor}\n          onChange={useCallback(\n            (evt) => setHasBackgroundColor(evt.target.checked),\n            [setHasBackgroundColor],\n          )}\n        />\n        <Spacer.Horizontal size={8} />\n        <InspectorPrimitives.Text>Background color</InspectorPrimitives.Text>\n        <Spacer.Horizontal size={65} />\n        <FillInputFieldWithPicker\n          id={'colorInputId'}\n          colorProps={useMemo(\n            () => ({\n              color: backgroundColor,\n              onChangeColor: setBackgroundColor,\n            }),\n            [backgroundColor, setBackgroundColor],\n          )}\n        />\n      </InspectorPrimitives.Row>\n      {hasBackgroundColor && (\n        <>\n          <InspectorPrimitives.Row>\n            <Spacer.Horizontal size={12} />\n            <InspectorPrimitives.Checkbox\n              type=\"checkbox\"\n              checked={includeBackgroundColorInExport}\n              onChange={setIncludeBackgroundInExportCallback}\n            />\n            <Spacer.Horizontal size={8} />\n            <InspectorPrimitives.Text>\n              Include in Export\n            </InspectorPrimitives.Text>\n          </InspectorPrimitives.Row>\n          <InspectorPrimitives.Row>\n            <Spacer.Horizontal size={12} />\n            <InspectorPrimitives.Checkbox\n              type=\"checkbox\"\n              checked={includeBackgroundColorInInstance}\n              onChange={setIncludeBackgroundInInstancesCallback}\n            />\n            <Spacer.Horizontal size={8} />\n            <InspectorPrimitives.Text>\n              Include in Instances\n            </InspectorPrimitives.Text>\n          </InspectorPrimitives.Row>\n        </>\n      )}\n    </InspectorPrimitives.Section>\n  );\n});\n","import {\n  PinBottomIcon,\n  PinLeftIcon,\n  PinRightIcon,\n  PinTopIcon,\n  SpaceEvenlyHorizontallyIcon,\n  SpaceEvenlyVerticallyIcon,\n} from '@radix-ui/react-icons';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Divider,\n  Label,\n  RadioGroup,\n  Spacer,\n  InputField,\n  LabeledElementView,\n} from 'noya-designsystem';\nimport { GroupLayouts, SetNumberMode } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface Props {\n  groupLayout?: Sketch.FreeformGroupLayout | Sketch.InferredGroupLayout;\n  setLayoutAxis: (value: Sketch.InferredLayoutAxis | undefined) => void;\n  setLayoutAnchor: (value: Sketch.InferredLayoutAnchor) => void;\n  setMinWidth: (value: number, mode: SetNumberMode) => void;\n}\n\nexport default memo(function SymbolLayoutRow({\n  groupLayout,\n  setMinWidth,\n  setLayoutAxis,\n  setLayoutAnchor,\n}: Props) {\n  const inferredLayout =\n    groupLayout && GroupLayouts.isInferredLayout(groupLayout)\n      ? groupLayout\n      : undefined;\n\n  const layoutAxis =\n    inferredLayout?.axis ?? Sketch.InferredLayoutAxis.Horizontal;\n\n  const layoutAnchor = inferredLayout?.layoutAnchor;\n  const minWidth = inferredLayout?.minSize;\n  const isAnchorDisabled = inferredLayout === undefined;\n\n  const renderLabel = useCallback(({ id }) => {\n    switch (id) {\n      case '0-0':\n        return <Label.Label>Left to Right</Label.Label>;\n      case '0-1':\n        return <Label.Label>Center</Label.Label>;\n      case '0-2':\n        return <Label.Label>Right to Left</Label.Label>;\n      case '1-0':\n        return <Label.Label>Top to Bottom</Label.Label>;\n      case '1-1':\n        return <Label.Label>Middle</Label.Label>;\n      case '1-2':\n        return <Label.Label>Bottom to Top</Label.Label>;\n      default:\n        return <Label.Label></Label.Label>;\n    }\n  }, []);\n\n  const handleNudgeMinWidth = useCallback(\n    (value: number) => setMinWidth(value, 'adjust'),\n    [setMinWidth],\n  );\n\n  const handleSetMinWidth = useCallback(\n    (value) => setMinWidth(value, 'replace'),\n    [setMinWidth],\n  );\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.Title>Layout</InspectorPrimitives.Title>\n      <Spacer.Vertical size={4} />\n      <InspectorPrimitives.Row>\n        <RadioGroup.Root\n          value={isAnchorDisabled ? 'none' : layoutAxis?.toString()}\n          onValueChange={useCallback(\n            (event) =>\n              setLayoutAxis(\n                event.target.value === 'none'\n                  ? undefined\n                  : parseInt(event.target.value),\n              ),\n            [setLayoutAxis],\n          )}\n        >\n          <RadioGroup.Item value={'none'}>None</RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.InferredLayoutAxis.Horizontal.toString()}\n          >\n            Horizontal\n          </RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.InferredLayoutAxis.Vertical.toString()}\n          >\n            Vertical\n          </RadioGroup.Item>\n        </RadioGroup.Root>\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={6} />\n\n      <InspectorPrimitives.Row>\n        <LabeledElementView renderLabel={renderLabel}>\n          <RadioGroup.Root\n            id={`${layoutAxis}-${layoutAnchor}`}\n            value={isAnchorDisabled ? '' : layoutAnchor?.toString()}\n            onValueChange={useCallback(\n              (event) => setLayoutAnchor(parseInt(event.target.value)),\n              [setLayoutAnchor],\n            )}\n          >\n            <RadioGroup.Item\n              value={Sketch.InferredLayoutAnchor.Min.toString()}\n              disabled={isAnchorDisabled}\n            >\n              {isAnchorDisabled ||\n              layoutAxis === Sketch.InferredLayoutAxis.Horizontal ? (\n                <PinRightIcon />\n              ) : (\n                <PinBottomIcon />\n              )}\n            </RadioGroup.Item>\n            <RadioGroup.Item\n              disabled={isAnchorDisabled}\n              value={Sketch.InferredLayoutAnchor.Middle.toString()}\n            >\n              {isAnchorDisabled ||\n              layoutAxis === Sketch.InferredLayoutAxis.Horizontal ? (\n                <SpaceEvenlyHorizontallyIcon />\n              ) : (\n                <SpaceEvenlyVerticallyIcon />\n              )}\n            </RadioGroup.Item>\n            <RadioGroup.Item\n              disabled={isAnchorDisabled}\n              value={Sketch.InferredLayoutAnchor.Max.toString()}\n            >\n              {isAnchorDisabled ||\n              layoutAxis === Sketch.InferredLayoutAxis.Horizontal ? (\n                <PinLeftIcon />\n              ) : (\n                <PinTopIcon />\n              )}\n            </RadioGroup.Item>\n          </RadioGroup.Root>\n        </LabeledElementView>\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={6} />\n      {!isAnchorDisabled && (\n        <>\n          <Spacer.Vertical size={6} />\n          <Divider />\n          <Spacer.Vertical size={6} />\n          <InspectorPrimitives.Row>\n            <InspectorPrimitives.Text>Minimum Width</InspectorPrimitives.Text>\n            <Spacer.Horizontal size={75} />\n            <InputField.Root id=\"font-size\" size={70}>\n              <InputField.NumberInput\n                placeholder={'None'}\n                value={minWidth}\n                onSubmit={handleSetMinWidth}\n                onNudge={handleNudgeMinWidth}\n              />\n            </InputField.Root>\n          </InspectorPrimitives.Row>\n        </>\n      )}\n    </InspectorPrimitives.Section>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Spacer, TreeView } from 'noya-designsystem';\nimport { ApplicationState, Overrides, Selectors } from 'noya-state';\nimport { memo, ReactNode, useCallback } from 'react';\nimport { LayerIcon } from '../../containers/LayerList';\nimport { useApplicationState } from 'noya-app-state-context';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface Props {\n  symbolMaster: Sketch.SymbolMaster;\n  onSetAllowsOverrides: (value: boolean) => void;\n  onSetOverrideProperty: (overrideName: string, value: boolean) => void;\n}\n\nfunction getOverrideElements(\n  state: ApplicationState,\n  symbolMaster: Sketch.SymbolMaster,\n  idPath: string[],\n  overrideProperties: Sketch.OverrideProperty[],\n  onSetOverrideProperty: (overrideName: string, value: boolean) => void,\n): ReactNode[] {\n  const depth = idPath.length;\n\n  return [...symbolMaster.layers].reverse().flatMap((layer): ReactNode[] => {\n    const nestedIdPath = [...idPath, layer.do_objectID];\n    const key = nestedIdPath.join('/');\n\n    const canOverride = (propertyType: Overrides.PropertyType) =>\n      Overrides.canOverrideProperty(overrideProperties, propertyType, key);\n\n    const titleRow = (\n      <TreeView.Row\n        key={key + ' title'}\n        isSectionHeader\n        depth={depth}\n        icon={<LayerIcon type={layer._class} />}\n      >\n        <TreeView.RowTitle>{layer.name}</TreeView.RowTitle>\n      </TreeView.Row>\n    );\n\n    switch (layer._class) {\n      case 'symbolInstance': {\n        const symbolMaster = Selectors.findSymbolMaster(state, layer.symbolID);\n\n        if (!symbolMaster) return [];\n\n        const nestedOverrides = symbolMaster.allowsOverrides\n          ? getOverrideElements(\n              state,\n              symbolMaster,\n              nestedIdPath,\n              overrideProperties,\n              onSetOverrideProperty,\n            )\n          : [];\n\n        const symbolIdOverrideName = key + '_symbolID';\n\n        return [\n          titleRow,\n          <TreeView.Row key={symbolIdOverrideName} depth={depth + 1}>\n            <InspectorPrimitives.Checkbox\n              type=\"checkbox\"\n              checked={canOverride('symbolID')}\n              onChange={(event) =>\n                onSetOverrideProperty(\n                  symbolIdOverrideName,\n                  event.target.checked,\n                )\n              }\n            />\n            <Spacer.Horizontal size={6} />\n            <TreeView.RowTitle>Symbol</TreeView.RowTitle>\n          </TreeView.Row>,\n          ...nestedOverrides,\n        ];\n      }\n      case 'text': {\n        const stringValueOverrideName = key + '_stringValue';\n        const textStyleOverrideName = key + '_textStyle';\n\n        return [\n          titleRow,\n          <TreeView.Row key={stringValueOverrideName} depth={depth + 1}>\n            <InspectorPrimitives.Checkbox\n              type=\"checkbox\"\n              checked={canOverride('stringValue')}\n              onChange={(event) =>\n                onSetOverrideProperty(\n                  stringValueOverrideName,\n                  event.target.checked,\n                )\n              }\n            />\n            <Spacer.Horizontal size={6} />\n            <TreeView.RowTitle>Text Value</TreeView.RowTitle>\n          </TreeView.Row>,\n          layer.sharedStyleID && (\n            <TreeView.Row key={textStyleOverrideName} depth={depth + 1}>\n              <InspectorPrimitives.Checkbox\n                type=\"checkbox\"\n                checked={canOverride('textStyle')}\n                onChange={(event) =>\n                  onSetOverrideProperty(\n                    textStyleOverrideName,\n                    event.target.checked,\n                  )\n                }\n              />\n              <Spacer.Horizontal size={6} />\n              <TreeView.RowTitle>Text Style</TreeView.RowTitle>\n            </TreeView.Row>\n          ),\n        ];\n      }\n      case 'bitmap': {\n        const imageOverrideName = key + '_image';\n\n        return [\n          titleRow,\n          <TreeView.Row key={imageOverrideName} depth={depth + 1}>\n            <InspectorPrimitives.Checkbox\n              type=\"checkbox\"\n              checked={canOverride('image')}\n              onChange={(event) =>\n                onSetOverrideProperty(imageOverrideName, event.target.checked)\n              }\n            />\n            <Spacer.Horizontal size={6} />\n            <TreeView.RowTitle>Image</TreeView.RowTitle>\n          </TreeView.Row>,\n        ];\n      }\n      default: {\n        const layerStyleOverrideName = key + '_layerStyle';\n\n        return layer.sharedStyleID\n          ? [\n              titleRow,\n              layer.sharedStyleID && (\n                <TreeView.Row key={layerStyleOverrideName} depth={depth + 1}>\n                  <InspectorPrimitives.Checkbox\n                    type=\"checkbox\"\n                    checked={canOverride('layerStyle')}\n                    onChange={(event) =>\n                      onSetOverrideProperty(\n                        layerStyleOverrideName,\n                        event.target.checked,\n                      )\n                    }\n                  />\n                  <Spacer.Horizontal size={6} />\n                  <TreeView.RowTitle>Layer Style</TreeView.RowTitle>\n                </TreeView.Row>\n              ),\n            ]\n          : [];\n      }\n    }\n  });\n}\n\nexport default memo(function SymbolMasterOverrideRow({\n  symbolMaster,\n  onSetAllowsOverrides,\n  onSetOverrideProperty,\n}: Props) {\n  const [state] = useApplicationState();\n\n  const overrideElements = getOverrideElements(\n    state,\n    symbolMaster,\n    [],\n    symbolMaster.overrideProperties,\n    onSetOverrideProperty,\n  );\n\n  return (\n    <>\n      <InspectorPrimitives.Section>\n        <InspectorPrimitives.Title>Manage Overrides</InspectorPrimitives.Title>\n        <Spacer.Vertical size={2} />\n        <InspectorPrimitives.Row>\n          <InspectorPrimitives.Checkbox\n            type=\"checkbox\"\n            checked={symbolMaster.allowsOverrides}\n            onChange={useCallback(\n              (event) => onSetAllowsOverrides(event.target.checked),\n              [onSetAllowsOverrides],\n            )}\n          />\n          <Spacer.Horizontal size={8} />\n          <InspectorPrimitives.Text>Allow Overrides</InspectorPrimitives.Text>\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Section>\n      <TreeView.Root expandable={false}>{overrideElements}</TreeView.Root>\n    </>\n  );\n});\n","import { Selectors } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport SymbolSourceRow from '../components/inspector/SymbolSourceRow';\nimport SymbolLayoutRow from '../components/inspector/SymbolLayoutRow';\nimport SymbolMasterOverrideRow from '../components/inspector/SymbolMasterOverrideRow';\nimport { useDispatch, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport { Divider, withSeparatorElements } from 'noya-designsystem';\n\nexport default memo(function SymbolMasterInspector() {\n  const dispatch = useDispatch();\n\n  const selectedSymbol = useShallowArray(\n    useSelector(Selectors.getSelectedSymbols),\n  )[0];\n\n  const elements = [\n    <SymbolSourceRow\n      resizesContent={selectedSymbol.resizesContent}\n      hasBackgroundColor={selectedSymbol.hasBackgroundColor}\n      backgroundColor={selectedSymbol.backgroundColor}\n      includeBackgroundColorInExport={\n        selectedSymbol.includeBackgroundColorInExport\n      }\n      includeBackgroundColorInInstance={\n        selectedSymbol.includeBackgroundColorInInstance\n      }\n      setAdjustContentOnResize={useCallback(\n        (value) => {\n          dispatch('setAdjustContentOnResize', value);\n        },\n        [dispatch],\n      )}\n      setHasBackgroundColor={useCallback(\n        (value) => {\n          dispatch('setHasBackgroundColor', value);\n        },\n        [dispatch],\n      )}\n      setBackgroundColor={useCallback(\n        (value) => {\n          dispatch('setBackgroundColor', value);\n        },\n        [dispatch],\n      )}\n      setIncludeBackgroundInInstances={useCallback(\n        (value) => {\n          dispatch('setIncludeBackgroundColorInInstance', value);\n        },\n        [dispatch],\n      )}\n      setIncludeBackgroundInExport={useCallback(\n        (value) => {\n          dispatch('setIncludeBackgroundColorInExport', value);\n        },\n        [dispatch],\n      )}\n    />,\n    <SymbolLayoutRow\n      groupLayout={selectedSymbol.groupLayout}\n      setLayoutAxis={useCallback(\n        (value) => {\n          dispatch('setLayoutAxis', value);\n        },\n        [dispatch],\n      )}\n      setLayoutAnchor={useCallback(\n        (value) => {\n          dispatch('setLayoutAnchor', value);\n        },\n        [dispatch],\n      )}\n      setMinWidth={useCallback(\n        (value, mode) => {\n          dispatch('setMinWidth', value, mode);\n        },\n        [dispatch],\n      )}\n    />,\n    <SymbolMasterOverrideRow\n      symbolMaster={selectedSymbol}\n      onSetAllowsOverrides={useCallback(\n        (value) => {\n          dispatch('setAllowsOverrides', value);\n        },\n        [dispatch],\n      )}\n      onSetOverrideProperty={useCallback(\n        (overrideName, value) => {\n          dispatch('onSetOverrideProperty', overrideName, value);\n        },\n        [dispatch],\n      )}\n    />,\n  ];\n\n  return <>{withSeparatorElements(elements, <Divider />)}</>;\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  StretchHorizontallyIcon,\n  StretchVerticallyIcon,\n  SquareIcon,\n  TextAlignCenterIcon,\n  TextAlignJustifyIcon,\n  TextAlignLeftIcon,\n  TextAlignRightIcon,\n  PinBottomIcon,\n  PinTopIcon,\n  AlignCenterVerticallyIcon,\n} from '@radix-ui/react-icons';\nimport { Label, RadioGroup, LabeledElementView } from 'noya-designsystem';\nimport { Spacer } from 'noya-designsystem';\nimport { memo } from 'react';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface TextLayoutRowProps {\n  textLayout?: Sketch.TextBehaviour;\n  textHorizontalAlignment?: Sketch.TextHorizontalAlignment;\n  textVerticalAlignment?: Sketch.TextVerticalAlignment;\n  onChangeTextLayout: (value: Sketch.TextBehaviour) => void;\n  onChangeTextHorizontalAlignment: (\n    value: Sketch.TextHorizontalAlignment,\n  ) => void;\n  onChangeTextVerticalAlignment: (value: Sketch.TextVerticalAlignment) => void;\n}\n\nexport default memo(function TextLayoutRowRow({\n  textLayout,\n  textHorizontalAlignment,\n  textVerticalAlignment,\n  onChangeTextLayout,\n  onChangeTextHorizontalAlignment,\n  onChangeTextVerticalAlignment,\n}: TextLayoutRowProps) {\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.SectionHeader>\n        <InspectorPrimitives.Title>Alignment</InspectorPrimitives.Title>\n      </InspectorPrimitives.SectionHeader>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <LabeledElementView\n          renderLabel={() => <Label.Label>Auto Height</Label.Label>}\n        >\n          <RadioGroup.Root\n            id={'text-alignment'}\n            value={textLayout !== undefined ? textLayout.toString() : ''}\n            onValueChange={(event) =>\n              onChangeTextLayout(parseInt(event.target.value))\n            }\n          >\n            <RadioGroup.Item\n              value={Sketch.TextBehaviour.Flexible.toString()}\n              tooltip=\"Horizontal\"\n            >\n              <StretchHorizontallyIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item\n              value={Sketch.TextBehaviour.Fixed.toString()}\n              tooltip=\"Vertical\"\n            >\n              <StretchVerticallyIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item\n              value={Sketch.TextBehaviour.FixedWidthAndHeight?.toString()}\n              tooltip=\"Outside\"\n            >\n              <SquareIcon />\n            </RadioGroup.Item>\n          </RadioGroup.Root>\n        </LabeledElementView>\n      </InspectorPrimitives.Row>\n\n      <Spacer.Vertical size={8} />\n      <InspectorPrimitives.Row>\n        <RadioGroup.Root\n          id={'text-horizontal-aligment'}\n          value={\n            textHorizontalAlignment !== undefined\n              ? textHorizontalAlignment.toString()\n              : ''\n          }\n          onValueChange={(event) =>\n            onChangeTextHorizontalAlignment(parseInt(event.target.value))\n          }\n        >\n          <RadioGroup.Item\n            value={Sketch.TextHorizontalAlignment.Left.toString()}\n            tooltip=\"Left\"\n          >\n            <TextAlignLeftIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.TextHorizontalAlignment.Centered.toString()}\n            tooltip=\"Center\"\n          >\n            <TextAlignCenterIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.TextHorizontalAlignment.Right.toString()}\n            tooltip=\"Right\"\n          >\n            <TextAlignRightIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.TextHorizontalAlignment.Justified.toString()}\n            tooltip=\"Justify\"\n          >\n            <TextAlignJustifyIcon />\n          </RadioGroup.Item>\n        </RadioGroup.Root>\n      </InspectorPrimitives.Row>\n\n      <Spacer.Vertical size={8} />\n      <InspectorPrimitives.Row>\n        <RadioGroup.Root\n          id={'text-vertical-aligment'}\n          value={\n            textVerticalAlignment !== undefined\n              ? textVerticalAlignment.toString()\n              : ''\n          }\n          onValueChange={(event) =>\n            onChangeTextVerticalAlignment(parseInt(event.target.value))\n          }\n        >\n          <RadioGroup.Item\n            value={Sketch.TextVerticalAlignment.Top.toString()}\n            tooltip=\"Top\"\n          >\n            <PinTopIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.TextVerticalAlignment.Middle.toString()}\n            tooltip=\"Middle\"\n          >\n            <AlignCenterVerticallyIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item\n            value={Sketch.TextVerticalAlignment.Bottom.toString()}\n            tooltip=\"Bottom\"\n          >\n            <PinBottomIcon />\n          </RadioGroup.Item>\n        </RadioGroup.Root>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n","import {\n  LetterCaseCapitalizeIcon,\n  LetterCaseLowercaseIcon,\n  LetterCaseUppercaseIcon,\n} from '@radix-ui/react-icons';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Label,\n  LabeledElementView,\n  RadioGroup,\n  Select,\n  Spacer,\n} from 'noya-designsystem';\nimport { SimpleTextDecoration } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface TextOptionsRowProps {\n  textTransform?: Sketch.TextTransform;\n  textDecoration?: SimpleTextDecoration;\n  onChangeTextTransform: (value: Sketch.TextTransform) => void;\n  onChangeTextDecoration: (value: SimpleTextDecoration) => void;\n}\n\nconst capitalize = (value: string) =>\n  value.charAt(0).toUpperCase() + value.slice(1);\n\nconst TextDecorationOptions: SimpleTextDecoration[] = [\n  'none',\n  'underline',\n  'strikethrough',\n];\n\nconst decorationInputId = `decoration`;\nconst transformInputId = `transform`;\n\nexport default memo(function TextOptionsRow({\n  textTransform,\n  textDecoration,\n  onChangeTextTransform,\n  onChangeTextDecoration,\n}: TextOptionsRowProps) {\n  const renderLabel = useCallback(({ id }) => {\n    switch (id) {\n      case decorationInputId:\n        return <Label.Label>Decoration</Label.Label>;\n      case transformInputId:\n        return <Label.Label>Transform</Label.Label>;\n      default:\n        return null;\n    }\n  }, []);\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.SectionHeader>\n        <InspectorPrimitives.Title>Text Options</InspectorPrimitives.Title>\n      </InspectorPrimitives.SectionHeader>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <LabeledElementView renderLabel={renderLabel}>\n          <Select<SimpleTextDecoration>\n            id={decorationInputId}\n            value={textDecoration ?? 'none'}\n            options={TextDecorationOptions}\n            getTitle={capitalize}\n            onChange={onChangeTextDecoration}\n          />\n          <Spacer.Horizontal size={8} />\n          <RadioGroup.Root\n            id={transformInputId}\n            value={textTransform !== undefined ? textTransform.toString() : ''}\n            onValueChange={useCallback(\n              (event) => onChangeTextTransform(parseInt(event.target.value)),\n              [onChangeTextTransform],\n            )}\n          >\n            <RadioGroup.Item\n              value={Sketch.TextTransform.None.toString()}\n              tooltip=\"None\"\n            >\n              <LetterCaseCapitalizeIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item\n              value={Sketch.TextTransform.Uppercase.toString()}\n              tooltip=\"Uppercase\"\n            >\n              <LetterCaseUppercaseIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item\n              value={Sketch.TextTransform.Lowercase.toString()}\n              tooltip=\"Lowercase\"\n            >\n              <LetterCaseLowercaseIcon />\n            </RadioGroup.Item>\n          </RadioGroup.Root>\n        </LabeledElementView>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport {\n  Label,\n  Select,\n  InputField,\n  LabeledElementView,\n} from 'noya-designsystem';\nimport { Spacer } from 'noya-designsystem';\nimport { useCallback, memo, useMemo } from 'react';\nimport FillInputFieldWithPicker from './FillInputFieldWithPicker';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface TextStyleRowProps {\n  fontSize?: number;\n  fontFamily: string;\n  fontColor: Sketch.Color;\n  lineSpacing?: number;\n  letterSpacing?: number;\n  paragraphSpacing?: number;\n  onChangeFontSize: (value: number) => void;\n  onChangeFontFamily: (value: string) => void;\n  onChangeFontWeight: (value: string) => void;\n  onChangeFontColor: (color: Sketch.Color) => void;\n  onChangeLineSpacing: (value: number) => void;\n  onChangeLetterSpacing: (value: number) => void;\n  onChagenParagraphSpacing: (value: number) => void;\n}\n\nexport default memo(function TextStyleRow({\n  fontColor,\n  fontSize,\n  fontFamily,\n  lineSpacing,\n  letterSpacing,\n  paragraphSpacing,\n  onChangeFontColor,\n  onChangeFontSize,\n  onChangeFontFamily,\n  onChangeFontWeight,\n  onChangeLineSpacing,\n  onChangeLetterSpacing,\n  onChagenParagraphSpacing,\n}: TextStyleRowProps) {\n  const characterInputId = `char`;\n  const lineInputId = `line`;\n  const paragraphInputId = `paragraph`;\n\n  const [family, size] = useMemo(\n    () => fontFamily.replace('MT', '').split('-'),\n    [fontFamily],\n  );\n\n  // This it's for testing\n  const fontFamilies = [\n    'Arial',\n    'Helvetica',\n    'Verdana',\n    'Trebuchet MS',\n    'Times',\n    'SegoeUI',\n  ];\n  const fontSizes = useMemo(\n    () => [\n      { id: '', text: 'Regular' },\n      { id: 'Oblique', text: 'Oblique' },\n      { id: 'LightOblique', text: 'Light Oblique' },\n      { id: 'Light', text: 'Light' },\n      { id: 'Bold', text: 'Bold' },\n      { id: 'SemiBold', text: 'Semi Bold' },\n      { id: 'BoldOblique', text: 'Bold Oblique' },\n      { id: 'Italic', text: 'Italic' },\n    ],\n    [],\n  );\n\n  const renderLabel = useCallback(\n    ({ id }) => {\n      switch (id) {\n        case characterInputId:\n          return <Label.Label>Character</Label.Label>;\n        case lineInputId:\n          return <Label.Label>Line</Label.Label>;\n        case paragraphInputId:\n          return <Label.Label>Paragraph</Label.Label>;\n        default:\n          return null;\n      }\n    },\n    [characterInputId, lineInputId, paragraphInputId],\n  );\n\n  const textSizeOptions = useMemo(\n    () => [...fontSizes.map((style) => style.id)],\n    [fontSizes],\n  );\n  const getTextSizeTitle = useCallback(\n    (id) => fontSizes.find((size) => size.id === id)!.text,\n    [fontSizes],\n  );\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.SectionHeader>\n        <InspectorPrimitives.Title>Text</InspectorPrimitives.Title>\n      </InspectorPrimitives.SectionHeader>\n      <Spacer.Vertical size={10} />\n      <InspectorPrimitives.Row>\n        <Select\n          id=\"font-family\"\n          value={family}\n          options={fontFamilies}\n          getTitle={(name) => name}\n          onChange={onChangeFontFamily}\n        />\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={6} />\n      <InspectorPrimitives.Row>\n        <Select\n          id=\"font-weight\"\n          value={size || 'Regular'}\n          options={textSizeOptions}\n          getTitle={getTextSizeTitle}\n          onChange={onChangeFontWeight}\n        />\n        <Spacer.Horizontal size={8} />\n        <InputField.Root id=\"font-size\" size={50}>\n          <InputField.NumberInput\n            placeholder={fontSize ? '' : 'multiple'}\n            value={fontSize}\n            onSubmit={onChangeFontSize}\n          />\n          <InputField.Label>px</InputField.Label>\n        </InputField.Root>\n      </InspectorPrimitives.Row>\n      <Spacer.Vertical size={6} />\n      <InspectorPrimitives.Row>\n        <LabeledElementView renderLabel={renderLabel}>\n          <InputField.NumberInput\n            id={characterInputId}\n            placeholder={letterSpacing ? '' : 'multiple'}\n            value={letterSpacing}\n            onSubmit={onChangeLineSpacing}\n            onNudge={() => {}}\n          />\n          <Spacer.Horizontal size={8} />\n          <InputField.NumberInput\n            id={lineInputId}\n            placeholder={lineSpacing === undefined ? 'multiple' : undefined}\n            value={lineSpacing}\n            onSubmit={onChangeLetterSpacing}\n            onNudge={() => {}}\n          />\n          <Spacer.Horizontal size={8} />\n          <InputField.NumberInput\n            id={paragraphInputId}\n            placeholder={paragraphSpacing ? '' : 'multiple'}\n            value={paragraphSpacing}\n            onSubmit={onChagenParagraphSpacing}\n            onNudge={() => {}}\n          />\n          <Spacer.Horizontal size={8} />\n          <FillInputFieldWithPicker\n            id={'colorInputId'}\n            colorProps={useMemo(\n              () => ({\n                color: fontColor,\n                onChangeColor: onChangeFontColor,\n              }),\n              [fontColor, onChangeFontColor],\n            )}\n          />\n        </LabeledElementView>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { Divider } from 'noya-designsystem';\nimport { Selectors, TextStyleSelectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport TextAlignmentRow from '../components/inspector/TextLayoutRow';\nimport TextOptionsRow from '../components/inspector/TextOptionsRow';\nimport TextStyleRow from '../components/inspector/TextStyleRow';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\n\nexport default memo(function TextStyleInspector() {\n  const [state, dispatch] = useApplicationState();\n\n  const textLayer = useShallowArray(\n    useSelector(Selectors.getSelectedTextLayers),\n  );\n  const textStyles = useShallowArray(useSelector(Selectors.getSelectedStyles));\n  const currentTab = Selectors.getCurrentTab(state);\n\n  const seletedText = currentTab === 'canvas' ? textLayer : textStyles;\n\n  const {\n    fontColor,\n    fontAlignment,\n    verticalAlignment,\n    textTransform,\n    textDecoration,\n    horizontalAlignment,\n    paragraphSpacing,\n    fontFamily,\n    fontSize,\n    lineHeight,\n    letterSpacing,\n  } = useMemo(() => TextStyleSelectors.getTextStyleAttributes(seletedText), [\n    seletedText,\n  ]);\n\n  // default value for the spacing (?)\n  return (\n    <>\n      <TextStyleRow\n        fontColor={fontColor}\n        fontFamily={fontFamily}\n        fontSize={fontSize}\n        letterSpacing={letterSpacing}\n        lineSpacing={lineHeight}\n        paragraphSpacing={paragraphSpacing}\n        onChangeFontFamily={useCallback(\n          (value) => {\n            dispatch('setTextFontName', value);\n          },\n          [dispatch],\n        )}\n        onChangeFontWeight={useCallback(\n          (value) => {\n            dispatch('setTextFontName', '-' + value);\n          },\n          [dispatch],\n        )}\n        onChangeFontColor={useCallback(\n          (value) => dispatch('setTextColor', value),\n          [dispatch],\n        )}\n        onChangeFontSize={useCallback(\n          (value) => dispatch('setTextFontSize', value),\n          [dispatch],\n        )}\n        onChangeLineSpacing={useCallback(\n          (value) => dispatch('setTextLetterSpacing', value),\n          [dispatch],\n        )}\n        onChangeLetterSpacing={useCallback(\n          (value) => dispatch('setTextLineSpacing', value),\n          [dispatch],\n        )}\n        onChagenParagraphSpacing={useCallback(\n          (value) => dispatch('setTextParagraphSpacing', value),\n          [dispatch],\n        )}\n      />\n      <Divider />\n      <TextAlignmentRow\n        textLayout={currentTab === 'canvas' ? fontAlignment : undefined}\n        textVerticalAlignment={verticalAlignment}\n        textHorizontalAlignment={horizontalAlignment}\n        onChangeTextLayout={useCallback(\n          (value: Sketch.TextBehaviour) => {\n            dispatch('setTextAlignment', value);\n          },\n          [dispatch],\n        )}\n        onChangeTextHorizontalAlignment={useCallback(\n          (value: Sketch.TextHorizontalAlignment) => {\n            dispatch('setTextHorizontalAlignment', value);\n          },\n          [dispatch],\n        )}\n        onChangeTextVerticalAlignment={useCallback(\n          (value: Sketch.TextVerticalAlignment) => {\n            dispatch('setTextVerticalAlignment', value);\n          },\n          [dispatch],\n        )}\n      />\n      <Divider />\n      <TextOptionsRow\n        textTransform={textTransform}\n        textDecoration={textDecoration}\n        onChangeTextDecoration={useCallback(\n          (value) => dispatch('setTextDecoration', value),\n          [dispatch],\n        )}\n        onChangeTextTransform={useCallback(\n          (value) => dispatch('setTextTransform', value),\n          [dispatch],\n        )}\n      />\n    </>\n  );\n});\n","import {\n  CursorTextIcon,\n  LinkBreak2Icon,\n  PlusIcon,\n  ResetIcon,\n  UpdateIcon,\n} from '@radix-ui/react-icons';\nimport { Button, Select, Spacer } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport { useTheme } from 'styled-components';\nimport * as InspectorPrimitives from '../components/inspector/InspectorPrimitives';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\n\nconst NO_TEXT_STYLE = 'none';\n\nexport default memo(function ThemeTextInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const iconColor = useTheme().colors.icon;\n\n  const sharedTextStyles = useShallowArray(\n    useSelector(Selectors.getSharedTextStyles),\n  );\n  const selectedLayers = useShallowArray(\n    useSelector(Selectors.getSelectedLayers),\n  );\n\n  const selectedTextStyleId = useMemo(\n    () =>\n      !selectedLayers.every(\n        (v) => v.sharedStyleID === selectedLayers[0].sharedStyleID,\n      )\n        ? undefined\n        : selectedLayers[0].sharedStyleID,\n    [selectedLayers],\n  );\n\n  const textStyleOptions = useMemo(\n    () => [\n      NO_TEXT_STYLE,\n      ...sharedTextStyles.map((style) => style.do_objectID),\n    ],\n    [sharedTextStyles],\n  );\n\n  const getLayerStyleTitle = useCallback(\n    (id) =>\n      id === NO_TEXT_STYLE\n        ? 'No Text Style'\n        : sharedTextStyles.find((style) => style.do_objectID === id)!.name,\n    [sharedTextStyles],\n  );\n\n  const onSelect = useCallback(\n    (value) => {\n      dispatch('setTextStyle', value === NO_TEXT_STYLE ? undefined : value);\n    },\n    [dispatch],\n  );\n\n  const onAdd = useCallback(() => {\n    const styleName = prompt('New Text Style Name');\n\n    if (!styleName) return;\n    dispatch('addTextStyle', styleName, selectedLayers[0].style);\n  }, [selectedLayers, dispatch]);\n\n  const onRename = useCallback(() => {\n    if (!selectedTextStyleId) return;\n\n    const newName = prompt('Rename Text Style');\n\n    if (!newName) return;\n    dispatch('setTextStyleName', selectedTextStyleId, newName);\n  }, [selectedTextStyleId, dispatch]);\n\n  const onDetach = useCallback(() => dispatch('setTextStyle'), [dispatch]);\n\n  const onUpdate = useCallback(() => {\n    if (!selectedTextStyleId) return;\n\n    dispatch('updateTextStyle', selectedTextStyleId, selectedLayers[0].style);\n  }, [selectedTextStyleId, selectedLayers, dispatch]);\n\n  const onReset = useCallback(() => {\n    const style = sharedTextStyles.find(\n      (s) => s.do_objectID === selectedTextStyleId,\n    );\n\n    if (selectedTextStyleId && style) {\n      dispatch('setTextStyle', selectedTextStyleId);\n    }\n  }, [selectedTextStyleId, sharedTextStyles, dispatch]);\n\n  return (\n    <>\n      <InspectorPrimitives.Section>\n        <InspectorPrimitives.SectionHeader>\n          <InspectorPrimitives.Title>Text Style</InspectorPrimitives.Title>\n        </InspectorPrimitives.SectionHeader>\n        <Spacer.Vertical size={10} />\n        <InspectorPrimitives.Row>\n          <Select\n            id=\"theme-text-style\"\n            value={selectedTextStyleId || NO_TEXT_STYLE}\n            options={textStyleOptions}\n            getTitle={getLayerStyleTitle}\n            onChange={onSelect}\n          />\n        </InspectorPrimitives.Row>\n        <Spacer.Vertical size={10} />\n        <InspectorPrimitives.Row>\n          <Button\n            id=\"create-text-style\"\n            tooltip=\"Create text style from text\"\n            onClick={onAdd}\n          >\n            <PlusIcon color={iconColor} />\n          </Button>\n          <Spacer.Horizontal size={10} />\n          <Button\n            id=\"update-text-style\"\n            disabled={selectedTextStyleId === undefined}\n            tooltip=\"Update text style to match text\"\n            onClick={onUpdate}\n          >\n            <UpdateIcon color={iconColor} />\n          </Button>\n          <Spacer.Horizontal size={10} />\n          <Button\n            id=\"detach-text-style\"\n            disabled={selectedTextStyleId === undefined}\n            tooltip=\"Detach text from text style\"\n            onClick={onDetach}\n          >\n            <LinkBreak2Icon color={iconColor} />\n          </Button>\n          <Spacer.Horizontal size={10} />\n          <Button\n            id=\"rename-text-style\"\n            disabled={selectedTextStyleId === undefined}\n            tooltip=\"Rename text style\"\n            onClick={onRename}\n          >\n            <CursorTextIcon color={iconColor} />\n          </Button>\n          <Spacer.Horizontal size={10} />\n          <Button\n            id=\"reset-text-style\"\n            disabled={selectedTextStyleId === undefined}\n            tooltip=\"Reset text to text style\"\n            onClick={onReset}\n          >\n            <ResetIcon color={iconColor} />\n          </Button>\n        </InspectorPrimitives.Row>\n      </InspectorPrimitives.Section>\n    </>\n  );\n});\n","import { useApplicationState, useSelector } from 'noya-app-state-context';\nimport { Spacer } from 'noya-designsystem';\nimport { toDegrees } from 'noya-geometry';\nimport {\n  clampRotation,\n  decodeCurvePoint,\n  isPointsLayer,\n  PointsLayer,\n  Selectors,\n  SetNumberMode,\n} from 'noya-state';\nimport { useCallback } from 'react';\nimport styled from 'styled-components';\nimport useShallowArray from '../../hooks/useShallowArray';\nimport getMultiNumberValue from '../../utils/getMultiNumberValue';\nimport CoordinatesInspector from './CoordinatesInspector';\nimport DimensionInput from './DimensionInput';\nimport FlipControls from './FlipControls';\n\nexport type DimensionValue = number | undefined;\n\nconst Row = styled.div(({ theme }) => ({\n  flex: '0 0 auto',\n  display: 'flex',\n  flexDirection: 'row',\n  paddingLeft: '10px',\n  paddingRight: '10px',\n}));\n\nconst LabelContainer = styled.div(({ theme }) => ({\n  ...theme.textStyles.small,\n  width: '69px',\n  display: 'flex',\n  alignItems: 'center',\n}));\n\nexport interface Props {\n  width: DimensionValue;\n  isFlippedVertical: boolean;\n  isFlippedHorizontal: boolean;\n  onSetWidth: (value: number, mode: SetNumberMode) => void;\n  onSetIsFlippedVertical: (value: boolean) => void;\n  onSetIsFlippedHorizontal: (value: boolean) => void;\n}\n\nexport default function LineInspector({\n  width,\n  isFlippedVertical,\n  isFlippedHorizontal,\n  onSetWidth,\n  onSetIsFlippedVertical,\n  onSetIsFlippedHorizontal,\n}: Props) {\n  const [state, dispatch] = useApplicationState();\n  const selectedLayers = useShallowArray(\n    useSelector(Selectors.getSelectedLayers).filter(isPointsLayer),\n  );\n\n  const startX = getMultiNumberValue(\n    selectedLayers.map(\n      (layer) => decodeCurvePoint(layer.points[0], layer.frame).point.x,\n    ),\n  );\n  const startY = getMultiNumberValue(\n    selectedLayers.map(\n      (layer) => decodeCurvePoint(layer.points[0], layer.frame).point.y,\n    ),\n  );\n  const endX = getMultiNumberValue(\n    selectedLayers.map(\n      (layer) => decodeCurvePoint(layer.points[1], layer.frame).point.x,\n    ),\n  );\n  const endY = getMultiNumberValue(\n    selectedLayers.map(\n      (layer) => decodeCurvePoint(layer.points[1], layer.frame).point.y,\n    ),\n  );\n\n  const findLineRotation = (layer: PointsLayer) => {\n    const [startPoint, endPoint] = layer.points.map(\n      (point) => decodeCurvePoint(point, layer.frame).point,\n    );\n\n    if (!startPoint || !endPoint) return 0;\n\n    let theta = Math.atan2(\n      endPoint.y - startPoint.y,\n      endPoint.x - startPoint.x,\n    );\n\n    return toDegrees(theta);\n  };\n\n  const rotation = getMultiNumberValue(\n    selectedLayers.map((layer) => {\n      return clampRotation(findLineRotation(layer) - layer.rotation);\n    }),\n  );\n\n  // TODO: Handle setting rotation for multiple layers using the theta for each layer\n  const handleSetRotation = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch(\n        'setLayerRotation',\n        mode === 'replace'\n          ? value - findLineRotation(selectedLayers[0])\n          : value,\n        mode,\n      );\n    },\n    [dispatch, selectedLayers],\n  );\n\n  const handleSetStartX = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      const selectedPointList = Object.fromEntries(\n        state.selectedObjects.map((layerId) => [layerId, [0]]),\n      );\n      dispatch('setPointX', selectedPointList, value, mode);\n    },\n    [dispatch, state.selectedObjects],\n  );\n\n  const handleSetStartY = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      const selectedPointList = Object.fromEntries(\n        state.selectedObjects.map((layerId) => [layerId, [0]]),\n      );\n      dispatch('setPointY', selectedPointList, value, mode);\n    },\n    [dispatch, state.selectedObjects],\n  );\n\n  const handleSetEndX = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      const selectedPointList = Object.fromEntries(\n        state.selectedObjects.map((layerId) => [layerId, [1]]),\n      );\n      dispatch('setPointX', selectedPointList, value, mode);\n    },\n    [dispatch, state.selectedObjects],\n  );\n\n  const handleSetEndY = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      const selectedPointList = Object.fromEntries(\n        state.selectedObjects.map((layerId) => [layerId, [1]]),\n      );\n      dispatch('setPointY', selectedPointList, value, mode);\n    },\n    [dispatch, state.selectedObjects],\n  );\n\n  return (\n    <>\n      <Row>\n        <LabelContainer>Start</LabelContainer>\n        <Spacer.Horizontal size={16} />\n        <CoordinatesInspector\n          x={startX}\n          y={startY}\n          onSetX={handleSetStartX}\n          onSetY={handleSetStartY}\n        />\n      </Row>\n      <Spacer.Vertical size={10} />\n      <Row>\n        <LabelContainer>End</LabelContainer>\n        <Spacer.Horizontal size={16} />\n        <CoordinatesInspector\n          x={endX}\n          y={endY}\n          onSetX={handleSetEndX}\n          onSetY={handleSetEndY}\n        />\n      </Row>\n      <Spacer.Vertical size={10} />\n      <Row>\n        <DimensionInput value={width} onSetValue={onSetWidth} label=\"\" />\n        <Spacer.Horizontal size={16} />\n        <DimensionInput\n          value={rotation}\n          onSetValue={handleSetRotation}\n          label=\"\"\n        />\n        <Spacer.Horizontal size={16} />\n        <FlipControls\n          isFlippedVertical={isFlippedVertical}\n          isFlippedHorizontal={isFlippedHorizontal}\n          onSetIsFlippedVertical={onSetIsFlippedVertical}\n          onSetIsFlippedHorizontal={onSetIsFlippedHorizontal}\n        />\n      </Row>\n    </>\n  );\n}\n","import { Divider, Spacer, withSeparatorElements } from 'noya-designsystem';\nimport { Layers, Selectors, SetNumberMode, isLine } from 'noya-state';\nimport { Fragment, memo, useCallback, useMemo } from 'react';\nimport DimensionsInspector from '../components/inspector/DimensionsInspector';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport AlignmentInspector from './AlignmentInspector';\nimport ArtboardSizeList from './ArtboardSizeList';\nimport BorderInspector from './BorderInspector';\nimport ColorControlsInspector from './ColorControlsInspector';\nimport ExportInspector from './ExportInspector';\nimport FillInspector from './FillInspector';\nimport LayerThemeInspector from './LayerThemeInspector';\nimport OpacityInspector from './OpacityInspector';\nimport PointControlsInspector from './PointControlsInspector';\nimport PointCoordinatesInspector from './PointCoordinatesInspector';\nimport ControlPointCoordinatesInspector from './ControlPointCoordinatesInspector';\nimport RadiusInspector from './RadiusInspector';\nimport ShadowInspector from './ShadowInspector';\nimport SymbolInstanceInspector from './SymbolInstanceInspector';\nimport SymbolMasterInspector from './SymbolMasterInspector';\nimport TextStyleInspector from './TextStyleInspector';\nimport ThemeTextInspector from './ThemeTextInspector';\nimport getMultiValue from '../utils/getMultiValue';\nimport LineInspector from '../components/inspector/LineInspector';\nimport styled from 'styled-components';\n\nconst PointControlsContainer = styled.div({\n  padding: '0 10px',\n});\n\nexport default memo(function Inspector() {\n  const [state, dispatch] = useApplicationState();\n\n  const selectedLayers = useShallowArray(\n    useSelector(Selectors.getSelectedLayers),\n  );\n  const hasContextSettingsLayers =\n    Selectors.getSelectedLayersWithContextSettings(state).length > 0;\n  const hasFixedRadiusLayers =\n    Selectors.getSelectedLayersWithFixedRadius(state).length > 0;\n\n  const handleSetRotation = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setLayerRotation', value, mode);\n    },\n    [dispatch],\n  );\n\n  const handleSetX = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setLayerX', value, mode);\n    },\n    [dispatch],\n  );\n\n  const handleSetY = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setLayerY', value, mode);\n    },\n    [dispatch],\n  );\n\n  const handleSetWidth = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setLayerWidth', value, mode);\n    },\n    [dispatch],\n  );\n\n  const handleSetHeight = useCallback(\n    (value: number, mode: SetNumberMode) => {\n      dispatch('setLayerHeight', value, mode);\n    },\n    [dispatch],\n  );\n\n  const handleSetIsFlippedHorizontal = useCallback(\n    (value: boolean) => dispatch('setIsFlippedHorizontal', value),\n    [dispatch],\n  );\n  const handleSetIsFlippedVertical = useCallback(\n    (value: boolean) => dispatch('setIsFlippedVertical', value),\n    [dispatch],\n  );\n\n  const isFlippedVertical =\n    getMultiValue(selectedLayers.map((layer) => layer.isFlippedVertical)) ??\n    false;\n  const isFlippedHorizontal =\n    getMultiValue(selectedLayers.map((layer) => layer.isFlippedHorizontal)) ??\n    false;\n\n  const isEditingPath = Selectors.getIsEditingPath(state.interactionState.type);\n\n  const isEditingControlPoint = isEditingPath && state.selectedControlPoint;\n\n  const elements = useMemo(() => {\n    const dimensionsInspectorProps =\n      selectedLayers.length === 1\n        ? {\n            ...selectedLayers[0].frame,\n            rotation: Selectors.getLayerRotation(selectedLayers[0]),\n          }\n        : {\n            x: undefined,\n            y: undefined,\n            width: undefined,\n            height: undefined,\n            rotation: undefined,\n          };\n\n    const onlyBitmapLayers = selectedLayers.every((l) =>\n      Layers.isBitmapLayer(l),\n    );\n    const hasTextLayer = selectedLayers.some((l) => Layers.isTextLayer(l));\n    const hasLineLayer = selectedLayers.every(\n      (l) => Layers.isPointsLayer(l) && isLine(l.points),\n    );\n    const hasAllTextLayer = selectedLayers.every((l) => Layers.isTextLayer(l));\n    const hasSymbolMaster = selectedLayers.some((l) =>\n      Layers.isSymbolMaster(l),\n    );\n    const hasSymbolInstance = selectedLayers.some((l) =>\n      Layers.isSymbolInstance(l),\n    );\n    const hasOneSymbolMaster = selectedLayers.length === 1 && hasSymbolMaster;\n    const hasOneSymbolInstance =\n      selectedLayers.length === 1 && hasSymbolInstance;\n\n    if (selectedLayers.length === 0) return null;\n\n    const views = [\n      <Fragment key=\"layout\">\n        <AlignmentInspector />\n        {isEditingPath ? (\n          <PointControlsContainer>\n            {isEditingControlPoint ? (\n              <ControlPointCoordinatesInspector />\n            ) : (\n              <PointCoordinatesInspector />\n            )}\n          </PointControlsContainer>\n        ) : hasLineLayer ? (\n          <LineInspector\n            {...dimensionsInspectorProps}\n            isFlippedHorizontal={isFlippedHorizontal}\n            isFlippedVertical={isFlippedVertical}\n            onSetWidth={handleSetWidth}\n            onSetIsFlippedHorizontal={handleSetIsFlippedHorizontal}\n            onSetIsFlippedVertical={handleSetIsFlippedVertical}\n          />\n        ) : (\n          <DimensionsInspector\n            {...dimensionsInspectorProps}\n            isFlippedHorizontal={isFlippedHorizontal}\n            isFlippedVertical={isFlippedVertical}\n            onSetRotation={handleSetRotation}\n            onSetX={handleSetX}\n            onSetY={handleSetY}\n            onSetWidth={handleSetWidth}\n            onSetHeight={handleSetHeight}\n            onSetIsFlippedHorizontal={handleSetIsFlippedHorizontal}\n            onSetIsFlippedVertical={handleSetIsFlippedVertical}\n          />\n        )}\n        <Spacer.Vertical size={10} />\n      </Fragment>,\n      hasFixedRadiusLayers && !isEditingPath && <RadiusInspector />,\n      isEditingPath && <PointControlsInspector />,\n      hasContextSettingsLayers && <OpacityInspector />,\n      !hasTextLayer && !hasSymbolMaster && !hasSymbolInstance && (\n        <LayerThemeInspector />\n      ),\n      hasAllTextLayer && <ThemeTextInspector />,\n      hasTextLayer && <TextStyleInspector />,\n      hasOneSymbolMaster && <SymbolMasterInspector />,\n      hasOneSymbolInstance && <SymbolInstanceInspector />,\n      !hasSymbolInstance && selectedLayers.length === 1 && (\n        <FillInspector title={'Fills'} allowMoreThanOne={true} />\n      ),\n      selectedLayers.every(Layers.hasInspectableBorder) && <BorderInspector />,\n      selectedLayers.every(Layers.hasInspectableShadow) && <ShadowInspector />,\n      onlyBitmapLayers && <ColorControlsInspector />,\n      selectedLayers.length === 1 && <ExportInspector />,\n    ].filter((element): element is JSX.Element => !!element);\n\n    return withSeparatorElements(views, <Divider />);\n  }, [\n    selectedLayers,\n    isEditingPath,\n    isEditingControlPoint,\n    isFlippedHorizontal,\n    isFlippedVertical,\n    handleSetRotation,\n    handleSetX,\n    handleSetY,\n    handleSetWidth,\n    handleSetHeight,\n    handleSetIsFlippedHorizontal,\n    handleSetIsFlippedVertical,\n    hasFixedRadiusLayers,\n    hasContextSettingsLayers,\n  ]);\n\n  if (state.interactionState.type === 'insertArtboard') {\n    return <ArtboardSizeList />;\n  }\n\n  return <>{elements}</>;\n});\n","import {\n  HamburgerMenuIcon,\n  StackIcon,\n  TokensIcon,\n} from '@radix-ui/react-icons';\nimport { fileOpen, fileSave, FileSystemHandle } from 'browser-fs-access';\nimport {\n  useDispatch,\n  useGetStateSnapshot,\n  useSelector,\n  useWorkspace,\n} from 'noya-app-state-context';\nimport {\n  Button,\n  createSectionedMenu,\n  DropdownMenu,\n  RadioGroup,\n  Spacer,\n} from 'noya-designsystem';\nimport { decode, encode } from 'noya-sketch-file';\nimport { ApplicationState, Selectors, WorkspaceTab } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from '../hooks/useHistory';\n\nconst Container = styled.header(({ theme }) => ({\n  minHeight: `${theme.sizes.toolbar.height}px`,\n  display: 'flex',\n  borderBottom: `1px solid transparent`, // For height to match toolbar\n  alignItems: 'center',\n  backgroundColor: theme.colors.sidebar.background,\n  color: theme.colors.textMuted,\n}));\n\nconst Row = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'row',\n}));\n\ntype MenuItemType =\n  | 'new'\n  | 'open'\n  | 'save'\n  | 'saveAs'\n  | 'undo'\n  | 'redo'\n  | 'showRulers';\n\ninterface Props {\n  currentTab: WorkspaceTab;\n  fileHandle?: FileSystemHandle;\n  getStateSnapshot: () => ApplicationState;\n  setShowRulers: (value: boolean) => void;\n  showRulers: boolean;\n  redoDisabled: boolean;\n  undoDisabled: boolean;\n}\n\nconst MenubarContent = memo(function MenubarContent({\n  currentTab,\n  fileHandle,\n  getStateSnapshot,\n  setShowRulers,\n  showRulers,\n  redoDisabled,\n  undoDisabled,\n}: Props) {\n  const dispatch = useDispatch();\n\n  const handleChangeTab = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      dispatch('setTab', event.target.value as WorkspaceTab);\n    },\n    [dispatch],\n  );\n\n  const menuItems = useMemo(\n    () =>\n      createSectionedMenu<MenuItemType>(\n        [\n          { value: 'new', title: 'File: New' },\n          { value: 'open', title: 'File: Open' },\n          { value: 'save', title: 'File: Save' },\n          { value: 'saveAs', title: 'File: Save As...' },\n        ],\n        [\n          { value: 'undo', title: 'Edit: Undo' },\n          { value: 'redo', title: 'Edit: Redo' },\n        ],\n        [\n          {\n            value: 'showRulers',\n            title: 'Preferences: Rulers',\n            checked: showRulers,\n          },\n        ],\n      ),\n    [showRulers],\n  );\n\n  const onSelectMenuItem = useCallback(\n    async (value: MenuItemType) => {\n      switch (value) {\n        case 'new': {\n          dispatch('newFile');\n          return;\n        }\n        case 'open': {\n          const file = await fileOpen({\n            extensions: ['.sketch'],\n            mimeTypes: ['application/zip'],\n          });\n\n          const data = await file.arrayBuffer();\n\n          const sketch = await decode(data);\n\n          dispatch('setFile', sketch, file.handle);\n          return;\n        }\n        case 'save':\n        case 'saveAs': {\n          const data = await encode(getStateSnapshot().sketch);\n\n          const file = new File([data], fileHandle?.name ?? 'Untitled.sketch', {\n            type: 'application/zip',\n          });\n\n          const newFileHandle = await fileSave(\n            file,\n            { fileName: file.name, extensions: ['.sketch'] },\n            value === 'save' ? fileHandle : undefined,\n            false,\n          );\n\n          dispatch('setFileHandle', newFileHandle);\n          return;\n        }\n        case 'undo':\n          dispatch('undo');\n          return;\n        case 'redo':\n          dispatch('redo');\n          return;\n        case 'showRulers':\n          setShowRulers(!showRulers);\n          return;\n      }\n    },\n    [dispatch, fileHandle, getStateSnapshot, setShowRulers, showRulers],\n  );\n\n  return (\n    <Container>\n      <Spacer.Horizontal size={8} />\n      <Row>\n        <DropdownMenu<MenuItemType>\n          items={menuItems}\n          onSelect={onSelectMenuItem}\n        >\n          <Button id=\"menu\">\n            <HamburgerMenuIcon />\n          </Button>\n        </DropdownMenu>\n        <Spacer.Horizontal />\n        <RadioGroup.Root value={currentTab} onValueChange={handleChangeTab}>\n          <RadioGroup.Item value=\"canvas\" tooltip=\"Canvas\">\n            <StackIcon />\n          </RadioGroup.Item>\n          <RadioGroup.Item value=\"theme\" tooltip=\"Theme\">\n            <TokensIcon />\n          </RadioGroup.Item>\n        </RadioGroup.Root>\n      </Row>\n      <Spacer.Horizontal size={8} />\n    </Container>\n  );\n});\n\nexport default function Menubar() {\n  const {\n    fileHandle,\n    setShowRulers,\n    preferences: { showRulers },\n  } = useWorkspace();\n  const getStateSnapshot = useGetStateSnapshot();\n  const currentTab = useSelector(Selectors.getCurrentTab);\n  const { redoDisabled, undoDisabled } = useHistory();\n\n  return (\n    <MenubarContent\n      currentTab={currentTab}\n      fileHandle={fileHandle}\n      getStateSnapshot={getStateSnapshot}\n      redoDisabled={redoDisabled}\n      undoDisabled={undoDisabled}\n      showRulers={showRulers}\n      setShowRulers={setShowRulers}\n    />\n  );\n}\n","import { useMemo } from 'react';\nimport { useWorkspaceState } from 'noya-app-state-context';\n\nexport function useHistory() {\n  const state = useWorkspaceState();\n  const redoDisabled = state.history.future.length === 0;\n  const undoDisabled = state.history.past.length === 0;\n\n  return useMemo(\n    () => ({\n      redoDisabled,\n      undoDisabled,\n    }),\n    [redoDisabled, undoDisabled],\n  );\n}\n","import { PlusIcon } from '@radix-ui/react-icons';\nimport {\n  Button,\n  ListView,\n  MenuItem,\n  RelativeDropPosition,\n  Spacer,\n} from 'noya-designsystem';\nimport { memo, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useApplicationState, useDispatch } from 'noya-app-state-context';\nimport useDeepArray from '../hooks/useDeepArray';\n\nconst Container = styled.div(({ theme }) => ({\n  height: '200px',\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nconst Header = styled.div(({ theme }) => ({\n  ...theme.textStyles.small,\n  userSelect: 'none',\n  cursor: 'pointer',\n  fontWeight: 500,\n  paddingTop: '8px',\n  paddingRight: '8px',\n  paddingBottom: '0px',\n  paddingLeft: '20px',\n  display: 'flex',\n  alignItems: 'center',\n}));\n\ntype MenuItemType = 'duplicate' | 'rename' | 'delete';\n\ntype PageInfo = { do_objectID: string; name: string };\n\ninterface Props {\n  selectedPageId: string;\n  pageInfo: PageInfo[];\n  canDelete: boolean;\n}\n\nconst PageListContent = memo(function PageListContent({\n  selectedPageId,\n  pageInfo,\n  canDelete,\n}: Props) {\n  const dispatch = useDispatch();\n\n  const menuItems: MenuItem<MenuItemType>[] = useMemo(\n    () => [\n      { value: 'duplicate', title: 'Duplicate Page' },\n      { value: 'rename', title: 'Rename Page' },\n      ...(canDelete\n        ? [{ value: 'delete' as MenuItemType, title: 'Delete Page' }]\n        : []),\n    ],\n    [canDelete],\n  );\n\n  const handleSelectMenuItem = useCallback(\n    (value: MenuItemType) => {\n      switch (value) {\n        case 'rename': {\n          const name = prompt('New page Name');\n\n          if (name) dispatch('renamePage', name);\n          break;\n        }\n        case 'duplicate': {\n          dispatch('duplicatePage');\n          break;\n        }\n        case 'delete':\n          dispatch('deletePage');\n          break;\n      }\n    },\n    [dispatch],\n  );\n\n  const handleAddPage = useCallback(() => {\n    const name = prompt('New page Name');\n\n    if (name !== null) dispatch('addPage', name);\n  }, [dispatch]);\n\n  return (\n    <Container>\n      <Header>\n        Pages\n        <Spacer.Horizontal />\n        <Button id=\"add-page\" tooltip=\"Add a new page\" onClick={handleAddPage}>\n          <PlusIcon />\n        </Button>\n      </Header>\n      <ListView.Root\n        sortable\n        scrollable\n        onMoveItem={useCallback(\n          (\n            sourceIndex: number,\n            destinationIndex: number,\n            position: RelativeDropPosition,\n          ) => {\n            if (\n              sourceIndex === destinationIndex ||\n              (position === 'above' && sourceIndex + 1 === destinationIndex) ||\n              (position === 'below' && sourceIndex - 1 === destinationIndex)\n            )\n              return;\n\n            dispatch('movePage', sourceIndex, destinationIndex);\n          },\n          [dispatch],\n        )}\n        items={pageInfo}\n        renderItem={useCallback(\n          (page: PageInfo, index, { isDragging }) => (\n            <ListView.Row<MenuItemType>\n              id={page.do_objectID}\n              key={page.do_objectID}\n              selected={!isDragging && selectedPageId === page.do_objectID}\n              onClick={() => {\n                dispatch('interaction', ['reset']);\n                dispatch('selectPage', page.do_objectID);\n              }}\n              menuItems={menuItems}\n              onSelectMenuItem={handleSelectMenuItem}\n              onContextMenu={() => {\n                dispatch('selectPage', page.do_objectID);\n              }}\n            >\n              <Spacer.Horizontal size={6 + 15} />\n              {page.name}\n            </ListView.Row>\n          ),\n          [selectedPageId, menuItems, handleSelectMenuItem, dispatch],\n        )}\n      />\n    </Container>\n  );\n});\n\nexport default function PageList() {\n  const [state] = useApplicationState();\n\n  const pageInfo = useDeepArray(\n    state.sketch.pages.map((page) => ({\n      do_objectID: page.do_objectID,\n      name: page.name,\n    })),\n  );\n\n  return (\n    <PageListContent\n      selectedPageId={state.selectedPage}\n      pageInfo={pageInfo}\n      canDelete={state.sketch.pages.length > 1}\n    />\n  );\n}\n","import { delimitedPath } from 'noya-utils';\nimport { accessPath, IndexPath, visit } from 'tree-visit';\n\ntype ThemeTreeNode<T> = {\n  name: string;\n  items: T[];\n  children: ThemeTreeNode<T>[];\n};\n\ntype BaseThemeItem = { name: string };\n\nfunction createItemGroup<T extends BaseThemeItem>(\n  name: string,\n): ThemeTreeNode<T> {\n  return {\n    name,\n    items: [],\n    children: [],\n  };\n}\n\nfunction createThemeTree<T extends BaseThemeItem>(\n  items: T[],\n): ThemeTreeNode<T> {\n  const root = createItemGroup<T>('');\n\n  function getGroup(pathComponents: string[]): ThemeTreeNode<T> {\n    let group = root;\n\n    while (pathComponents.length > 0) {\n      const component = pathComponents.shift()!;\n      const existing = group.children.find((group) => group.name === component);\n\n      if (existing) {\n        group = existing;\n      } else {\n        const newGroup = createItemGroup<T>(component);\n\n        group.children.push(newGroup);\n        group = newGroup;\n      }\n    }\n\n    return group;\n  }\n\n  items.forEach((item) => {\n    const pathComponents = item.name.split('/');\n    const parent = getGroup(pathComponents.slice(0, -1));\n    parent.items.push(item);\n  });\n\n  return root;\n}\n\nfunction visitThemeTree<T extends BaseThemeItem>(\n  root: ThemeTreeNode<T>,\n  f: (group: ThemeTreeNode<T>, indexPath: IndexPath, path: string) => void,\n): void {\n  const getChildren = (group: ThemeTreeNode<T>) => group.children;\n\n  visit(root, {\n    onEnter: (group, indexPath) => {\n      const pathComponents = accessPath(root, indexPath, { getChildren }).map(\n        (item) => item.name,\n      );\n      f(group, indexPath, delimitedPath.join(pathComponents));\n    },\n    getChildren,\n  });\n}\n\nexport type ThemeGroup<T extends BaseThemeItem> = {\n  name: string;\n  path: string;\n  items: T[];\n  depth: number;\n};\n\nfunction flattenThemeTree<T extends BaseThemeItem>(\n  root: ThemeTreeNode<T>,\n): ThemeGroup<T>[] {\n  const items: ThemeGroup<T>[] = [];\n\n  visitThemeTree<T>(root, (group, indexPath, path) => {\n    items.push({\n      name: group.name,\n      items: group.items,\n      path,\n      depth: indexPath.length - 1,\n    });\n  });\n\n  return items;\n}\n\nexport function createThemeGroups<T extends BaseThemeItem>(\n  items: T[],\n): ThemeGroup<T>[] {\n  return flattenThemeTree(createThemeTree(items));\n}\n","import { Selectors } from 'noya-state';\nimport { memo, useMemo, useCallback } from 'react';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport { GroupIcon } from '@radix-ui/react-icons';\nimport { ListView, Spacer } from 'noya-designsystem';\nimport { sortBy } from 'noya-utils';\nimport styled from 'styled-components';\nimport useShallowArray from '../hooks/useShallowArray';\nimport { createThemeGroups } from '../utils/themeTree';\nimport Sketch from '@sketch-hq/sketch-file-format-ts';\n\nconst Container = styled.div(({ theme }) => ({\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nconst Header = styled.div(({ theme }) => ({\n  fontWeight: 500,\n}));\n\ntype ContainerType = Sketch.Swatch | Sketch.SharedStyle | Sketch.SymbolMaster;\n\ninterface ContainerGroupProps {\n  array: Array<ContainerType>;\n  headerTitle: string;\n  selectedGroup: string;\n  onClick: (title: string) => void;\n}\n\nconst ContainerGroup = memo(function ContainerGroup({\n  array,\n  onClick,\n  headerTitle,\n  selectedGroup,\n}: ContainerGroupProps) {\n  const groupArray = useShallowArray(array);\n\n  const groups = useMemo(() => {\n    const groups = createThemeGroups(groupArray);\n    groups.shift();\n\n    return sortBy(groups, 'path');\n  }, [groupArray]);\n\n  const groupElements = useMemo(\n    () =>\n      groups.map((group) => (\n        <ListView.Row\n          id={group.name}\n          key={group.name}\n          onClick={() => onClick(group.path)}\n          selected={selectedGroup === group.path}\n        >\n          <Spacer.Horizontal size={16 * group.depth} />\n          <GroupIcon />\n          <Spacer.Horizontal size={8} />\n          {group.name}\n        </ListView.Row>\n      )),\n    [groups, selectedGroup, onClick],\n  );\n\n  return (\n    <Container>\n      <ListView.Root>\n        <ListView.Row\n          onClick={() => onClick('')}\n          selected={selectedGroup === ''}\n        >\n          <Header>{`All Theme ${headerTitle}`}</Header>\n        </ListView.Row>\n        {groupElements}\n      </ListView.Root>\n    </Container>\n  );\n});\n\nconst SwatchesGroup = memo(() => {\n  const [state, dispatch] = useApplicationState();\n  const swatches = useSelector(Selectors.getSharedSwatches);\n\n  return (\n    <ContainerGroup\n      array={swatches}\n      headerTitle=\"Colors\"\n      onClick={useCallback(\n        (title: string) => dispatch('setSelectedSwatchGroup', title),\n        [dispatch],\n      )}\n      selectedGroup={state.selectedThemeTab.swatches.groupName}\n    />\n  );\n});\n\nconst TextStylesGroup = memo(() => {\n  const [state, dispatch] = useApplicationState();\n  const textStyles = useSelector(Selectors.getSharedTextStyles);\n\n  return (\n    <ContainerGroup\n      array={textStyles}\n      headerTitle=\"Texts\"\n      onClick={useCallback(\n        (title: string) => dispatch('setSelectedTextStyleGroup', title),\n        [dispatch],\n      )}\n      selectedGroup={state.selectedThemeTab.textStyles.groupName}\n    />\n  );\n});\n\nconst ThemeStylesGroup = memo(() => {\n  const [state, dispatch] = useApplicationState();\n  const styles = useSelector(Selectors.getSharedStyles);\n\n  return (\n    <ContainerGroup\n      array={styles}\n      headerTitle=\"Styles\"\n      onClick={useCallback(\n        (title: string) => dispatch('setSelectedThemeStyleGroup', title),\n        [dispatch],\n      )}\n      selectedGroup={state.selectedThemeTab.layerStyles.groupName}\n    />\n  );\n});\n\nconst SymbolsGroup = memo(() => {\n  const [state, dispatch] = useApplicationState();\n  const symbols = useSelector(Selectors.getSymbols);\n\n  return (\n    <ContainerGroup\n      array={symbols}\n      headerTitle=\"Symbols\"\n      onClick={useCallback(\n        (title: string) => dispatch('setSelectedSymbolGroup', title),\n        [dispatch],\n      )}\n      selectedGroup={state.selectedThemeTab.symbols.groupName}\n    />\n  );\n});\n\nexport default memo(function ThemeGroups() {\n  const tab = useSelector(Selectors.getCurrentComponentsTab);\n\n  const element = useMemo(() => {\n    switch (tab) {\n      case 'swatches':\n        return <SwatchesGroup />;\n      case 'textStyles':\n        return <TextStylesGroup />;\n      case 'layerStyles':\n        return <ThemeStylesGroup />;\n      case 'symbols':\n        return <SymbolsGroup />;\n    }\n  }, [tab]);\n\n  return <>{element}</>;\n});\n","import { InputField, Spacer } from 'noya-designsystem';\nimport { memo } from 'react';\nimport * as InspectorPrimitives from './InspectorPrimitives';\n\ninterface Props {\n  names: string[];\n  onNameChange: (value: string) => void;\n}\n\nexport default memo(function NameInspector({ names, onNameChange }: Props) {\n  const firstName = names[0];\n\n  const name =\n    names.length > 1 && !names.every((name: string) => name === firstName)\n      ? undefined\n      : firstName;\n\n  return (\n    <InspectorPrimitives.Section>\n      <InspectorPrimitives.Title>Name</InspectorPrimitives.Title>\n      <Spacer.Vertical size={4} />\n      <InspectorPrimitives.Row>\n        <InputField.Root>\n          <InputField.Input\n            value={name || ''}\n            placeholder={name === undefined ? 'Multiple' : ''}\n            onChange={onNameChange}\n          />\n        </InputField.Root>\n      </InspectorPrimitives.Row>\n    </InspectorPrimitives.Section>\n  );\n});\n","import { Divider } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { delimitedPath, isDeepEqual } from 'noya-utils';\nimport { memo, useCallback } from 'react';\nimport ColorInspector from '../components/inspector/ColorInspector';\nimport NameInspector from '../components/inspector/NameInspector';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport getMultiValue from '../utils/getMultiValue';\n\nexport default memo(function SwatchesInspectors() {\n  const [state, dispatch] = useApplicationState();\n\n  const selectedSwatches = useShallowArray(\n    useSelector(Selectors.getSelectedSwatches),\n  );\n  const ids = state.selectedThemeTab.swatches.ids;\n  const color = getMultiValue(\n    selectedSwatches.map((swatch) => swatch.value),\n    isDeepEqual,\n  );\n\n  const handleNameChange = useCallback(\n    (value: string) =>\n      dispatch(\n        'setSwatchName',\n        selectedSwatches.map((v) => v.do_objectID),\n        value,\n      ),\n    [dispatch, selectedSwatches],\n  );\n\n  const handleSetOpacity = useCallback(\n    (value, mode) => dispatch('setSwatchOpacity', ids, value, mode),\n    [dispatch, ids],\n  );\n\n  const handleChangeColor = useCallback(\n    (value) => dispatch('setSwatchColor', ids, value),\n    [dispatch, ids],\n  );\n\n  if (selectedSwatches.length === 0) return null;\n\n  return (\n    <>\n      <NameInspector\n        names={selectedSwatches.map((v) => delimitedPath.basename(v.name))}\n        onNameChange={handleNameChange}\n      />\n      <Divider />\n      <ColorInspector\n        id={'color-swatch'}\n        color={color}\n        onSetOpacity={handleSetOpacity}\n        onChangeColor={handleChangeColor}\n      />\n    </>\n  );\n});\n","import { Divider, withSeparatorElements } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport FillInspector from './FillInspector';\nimport NameInspector from '../components/inspector/NameInspector';\nimport OpacityInspector from './OpacityInspector';\nimport BorderInspector from './BorderInspector';\nimport ShadowInspector from './ShadowInspector';\nimport { delimitedPath } from 'noya-utils';\nimport TextStyleInspector from './TextStyleInspector';\n\nexport default memo(function ThemeTextStyleInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedThemeTextStyles),\n  );\n\n  const handleNameChange = useCallback(\n    (value: string) =>\n      dispatch(\n        'setTextStyleName',\n        selectedStyles.map((v) => v.do_objectID),\n        value,\n      ),\n    [dispatch, selectedStyles],\n  );\n\n  if (selectedStyles.length === 0) return null;\n\n  const elements = [\n    <NameInspector\n      names={selectedStyles.map((v) => delimitedPath.basename(v.name))}\n      onNameChange={handleNameChange}\n    />,\n    <TextStyleInspector />,\n    <OpacityInspector />,\n    <FillInspector title={'Fills'} allowMoreThanOne={true} />,\n    <BorderInspector />,\n    <ShadowInspector />,\n  ];\n\n  return <>{withSeparatorElements(elements, <Divider />)}</>;\n});\n","import { Divider, withSeparatorElements } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport FillInspector from './FillInspector';\nimport NameInspector from '../components/inspector/NameInspector';\nimport OpacityInspector from './OpacityInspector';\nimport BorderInspector from './BorderInspector';\nimport ShadowInspector from './ShadowInspector';\nimport { delimitedPath } from 'noya-utils';\n\nexport default memo(function ThemeStyleInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedStyles = useShallowArray(\n    useSelector(Selectors.getSelectedLayerStyles),\n  );\n\n  const handleNameChange = useCallback(\n    (value: string) =>\n      dispatch(\n        'setThemeStyleName',\n        selectedStyles.map((v) => v.do_objectID),\n        value,\n      ),\n    [dispatch, selectedStyles],\n  );\n\n  if (selectedStyles.length === 0) return null;\n\n  const elements = [\n    <NameInspector\n      names={selectedStyles.map((v) => delimitedPath.basename(v.name))}\n      onNameChange={handleNameChange}\n    />,\n    <OpacityInspector />,\n    <FillInspector title={'Fills'} allowMoreThanOne={true} />,\n    <BorderInspector />,\n    <ShadowInspector />,\n  ];\n\n  return <>{withSeparatorElements(elements, <Divider />)}</>;\n});\n","import { Divider, withSeparatorElements } from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback } from 'react';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport useShallowArray from '../hooks/useShallowArray';\nimport NameInspector from '../components/inspector/NameInspector';\nimport SymbolMasterInspector from './SymbolMasterInspector';\nimport { delimitedPath } from 'noya-utils';\n\nexport default memo(function ThemeSymbolsInspector() {\n  const [, dispatch] = useApplicationState();\n\n  const selectedSymbols = useShallowArray(\n    useSelector(Selectors.getSelectedSymbols),\n  );\n\n  const handleNameChange = useCallback(\n    (value: string) =>\n      dispatch(\n        'setSymbolName',\n        selectedSymbols.map((v) => v.do_objectID),\n        value,\n      ),\n    [dispatch, selectedSymbols],\n  );\n\n  if (selectedSymbols.length === 0) return null;\n  const showSymbolsInspector = selectedSymbols.length === 1;\n\n  const elements = [\n    <NameInspector\n      names={selectedSymbols.map((v) => delimitedPath.basename(v.name))}\n      onNameChange={handleNameChange}\n    />,\n    showSymbolsInspector && <SymbolMasterInspector />,\n  ];\n\n  return <>{withSeparatorElements(elements, <Divider />)}</>;\n});\n","import { Selectors } from 'noya-state';\nimport { memo, useMemo } from 'react';\nimport { useSelector } from 'noya-app-state-context';\nimport SwatchInspector from './SwatchesInspector';\nimport ThemeTextStyleInspector from './ThemeTextStyleInspector';\nimport ThemeStyleInspector from './ThemeStyleInspector';\nimport ThemeSymbolsInspector from './ThemeSymbolsInspector';\n\nexport default memo(function ThemeInspector() {\n  const tab = useSelector(Selectors.getCurrentComponentsTab);\n\n  const element = useMemo(() => {\n    switch (tab) {\n      case 'swatches':\n        return <SwatchInspector />;\n      case 'textStyles':\n        return <ThemeTextStyleInspector />;\n      case 'layerStyles':\n        return <ThemeStyleInspector />;\n      case 'symbols':\n        return <ThemeSymbolsInspector />;\n      default:\n        return null;\n    }\n  }, [tab]);\n\n  return <>{element}</>;\n});\n","import { Button, RadioGroup, Spacer } from 'noya-designsystem';\nimport {\n  BlendingModeIcon,\n  ComponentInstanceIcon,\n  LetterCaseToggleIcon,\n  MarginIcon,\n  PlusIcon,\n  TrashIcon,\n} from '@radix-ui/react-icons';\nimport React, { useMemo, useCallback } from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport { useApplicationState, useSelector } from 'noya-app-state-context';\nimport { Selectors, ThemeTab } from 'noya-state';\n\nconst Container = styled.header(({ theme }) => ({\n  minHeight: `${theme.sizes.toolbar.height}px`,\n  display: 'flex',\n  borderBottom: `1px solid ${theme.colors.dividerStrong}`,\n  alignItems: 'center',\n  backgroundColor: theme.colors.sidebar.background,\n  color: theme.colors.textMuted,\n}));\n\nconst TabsContainer = styled.div(({ theme }) => ({\n  minWidth: `${54 * 4}px`,\n  maxWidth: `${54 * 4}px`,\n  height: '27px',\n  display: 'flex',\n  flex: '1',\n}));\n\nconst RightContainer = styled.div(({ theme }) => ({\n  flex: '1 1 0',\n  display: 'flex',\n  flexDirection: 'row',\n}));\n\nexport default function SwatchesToolbar() {\n  const [, dispatch] = useApplicationState();\n  const {\n    sizes: { sidebarWidth },\n  } = useTheme();\n  const componentsTab = useSelector(Selectors.getCurrentComponentsTab);\n\n  const handleChangeTab = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      dispatch('setThemeTab', event.target.value as ThemeTab);\n    },\n    [dispatch],\n  );\n\n  const addSwatch = useCallback(() => dispatch('addSwatch'), [dispatch]);\n  const addThemeStyle = useCallback(() => dispatch('addThemeStyle'), [\n    dispatch,\n  ]);\n  const addTextStyle = useCallback(() => dispatch('addTextStyle'), [dispatch]);\n\n  const removeSwatch = useCallback(() => dispatch('removeSwatch'), [dispatch]);\n  const removeTextStyle = useCallback(() => dispatch('removeTextStyle'), [\n    dispatch,\n  ]);\n  const removeThemeStyle = useCallback(() => dispatch('removeThemeStyle'), [\n    dispatch,\n  ]);\n\n  const addComponent = useCallback(() => {\n    switch (componentsTab) {\n      case 'swatches':\n        addSwatch();\n        break;\n      case 'textStyles':\n        addTextStyle();\n        break;\n      case 'layerStyles':\n        addThemeStyle();\n        break;\n    }\n  }, [componentsTab, addSwatch, addThemeStyle, addTextStyle]);\n\n  const removeComponent = useCallback(() => {\n    switch (componentsTab) {\n      case 'swatches':\n        removeSwatch();\n        break;\n      case 'textStyles':\n        removeTextStyle();\n        break;\n      case 'layerStyles':\n        removeThemeStyle();\n        break;\n    }\n  }, [componentsTab, removeSwatch, removeThemeStyle, removeTextStyle]);\n\n  return useMemo(\n    () => (\n      <Container>\n        <Spacer.Horizontal size={8} />\n        <Spacer.Horizontal />\n        <TabsContainer>\n          <RadioGroup.Root\n            id={'components'}\n            value={componentsTab}\n            onValueChange={handleChangeTab}\n          >\n            <RadioGroup.Item value=\"swatches\" tooltip=\"Theme colors\">\n              <BlendingModeIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item value=\"textStyles\" tooltip=\"Theme text styles\">\n              <LetterCaseToggleIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item value=\"layerStyles\" tooltip=\"Theme layer styles\">\n              <MarginIcon />\n            </RadioGroup.Item>\n            <RadioGroup.Item value=\"symbols\" tooltip=\"Theme symbols\">\n              <ComponentInstanceIcon />\n            </RadioGroup.Item>\n          </RadioGroup.Root>\n        </TabsContainer>\n        <RightContainer>\n          <Spacer.Horizontal size={24} />\n          {componentsTab !== 'symbols' && (\n            <Button id=\"add-component\" onClick={addComponent}>\n              <PlusIcon />\n            </Button>\n          )}\n          <Spacer.Horizontal size={4} />\n          <Button id=\"remove-component\" onClick={removeComponent}>\n            <TrashIcon />\n          </Button>\n        </RightContainer>\n        <Spacer.Horizontal size={sidebarWidth + 8} />\n      </Container>\n    ),\n    [\n      sidebarWidth,\n      componentsTab,\n      handleChangeTab,\n      addComponent,\n      removeComponent,\n    ],\n  );\n}\n","import { MenuItem, SEPARATOR_ITEM } from 'noya-designsystem';\n\nexport type ThemeMenuItemType = 'duplicate' | 'group' | 'ungroup' | 'delete';\n\nexport const menuItems: MenuItem<ThemeMenuItemType>[] = [\n  { value: 'duplicate', title: 'Duplicate' },\n  { value: 'group', title: 'Group' },\n  { value: 'ungroup', title: 'Ungroup' },\n  SEPARATOR_ITEM,\n  { value: 'delete', title: 'Delete' },\n];\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { center, Size } from 'noya-geometry';\nimport { SketchLayer } from 'noya-renderer';\nimport { SketchModel } from 'noya-sketch-model';\nimport React, { memo, useMemo } from 'react';\nimport CanvasGridItem from './CanvasGridItem';\n\ninterface Props {\n  style: Sketch.Style;\n}\n\nconst PREVIEW_SIZE = 60;\n\nfunction RCKStylePreview({ style, size }: { style: Sketch.Style; size: Size }) {\n  const layer = useMemo(() => {\n    return SketchModel.rectangle({\n      fixedRadius: 6,\n      frame: SketchModel.rect(\n        center({ width: PREVIEW_SIZE, height: PREVIEW_SIZE }, size),\n      ),\n      style,\n    });\n  }, [style, size]);\n\n  return <SketchLayer layer={layer} />;\n}\n\nexport default memo(function ThemeStyle({ style }: Props) {\n  return (\n    <CanvasGridItem\n      renderContent={(size) => <RCKStylePreview style={style} size={size} />}\n    />\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { memo, useMemo, useCallback, Fragment } from 'react';\nimport { GridView } from 'noya-designsystem';\nimport { SelectionType } from 'noya-state';\nimport { delimitedPath, sortBy } from 'noya-utils';\nimport { createThemeGroups } from '../../utils/themeTree';\nimport { menuItems, ThemeMenuItemType } from './menuItems';\nimport ThemeStyle from './ThemeStyle';\n\ninterface Props {\n  sharedStyles: Sketch.SharedStyle[];\n  selectedThemeStyleIds: string[];\n  onGroupThemeStyle: (id: string[], name?: string) => void;\n  onDeleteThemeStyle: (id?: string) => void;\n  onSelectThemeStyle: (id?: string, selectionType?: SelectionType) => void;\n  onDuplicateThemeStyle: (id: string[]) => void;\n}\n\nexport default memo(function ThemeStylesGrid({\n  sharedStyles,\n  selectedThemeStyleIds,\n  onGroupThemeStyle,\n  onDeleteThemeStyle,\n  onSelectThemeStyle,\n  onDuplicateThemeStyle,\n}: Props) {\n  const { basename } = delimitedPath;\n\n  const handleSelectMenuItem = useCallback(\n    (value: ThemeMenuItemType) => {\n      switch (value) {\n        case 'delete':\n          onDeleteThemeStyle();\n          break;\n        case 'group': {\n          const groupName = prompt('Group Name');\n          if (!groupName) return;\n          onGroupThemeStyle(selectedThemeStyleIds, groupName);\n          break;\n        }\n        case 'ungroup':\n          onGroupThemeStyle(selectedThemeStyleIds);\n          onSelectThemeStyle();\n          break;\n        case 'duplicate':\n          onDuplicateThemeStyle(selectedThemeStyleIds);\n          break;\n      }\n    },\n    [\n      onDeleteThemeStyle,\n      onSelectThemeStyle,\n      onGroupThemeStyle,\n      onDuplicateThemeStyle,\n      selectedThemeStyleIds,\n    ],\n  );\n\n  const groups = useMemo(() => {\n    const groups = createThemeGroups(sharedStyles).filter(\n      (group) => group.items.length,\n    );\n\n    return sortBy(groups, 'path');\n  }, [sharedStyles]);\n\n  const handleOnContextMenu: (id: string) => void = useCallback(\n    (id: string) => {\n      if (selectedThemeStyleIds.includes(id)) return;\n      onSelectThemeStyle(id);\n    },\n    [selectedThemeStyleIds, onSelectThemeStyle],\n  );\n\n  return (\n    <GridView.Root onClick={() => onSelectThemeStyle(undefined, 'replace')}>\n      {groups.map((group, index) => (\n        <Fragment key={index}>\n          {group.path && <GridView.SectionHeader title={group.path} />}\n          <GridView.Section>\n            {group.items.map((item) => {\n              return (\n                <GridView.Item<ThemeMenuItemType>\n                  id={item.do_objectID}\n                  key={item.do_objectID}\n                  title={basename(item.name)}\n                  menuItems={menuItems}\n                  selected={selectedThemeStyleIds.includes(item.do_objectID)}\n                  onSelectMenuItem={handleSelectMenuItem}\n                  onContextMenu={() => handleOnContextMenu(item.do_objectID)}\n                  onClick={(event: React.MouseEvent) =>\n                    onSelectThemeStyle(\n                      item.do_objectID,\n                      event.shiftKey ? 'intersection' : 'replace',\n                    )\n                  }\n                >\n                  <ThemeStyle style={item.value} />\n                </GridView.Item>\n              );\n            })}\n          </GridView.Section>\n        </Fragment>\n      ))}\n    </GridView.Root>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport produce from 'immer';\nimport { sketchColorToRgba } from 'noya-designsystem';\nimport { center, Size } from 'noya-geometry';\nimport { SketchLayer, useTextLayerParagraph } from 'noya-renderer';\nimport { SketchModel } from 'noya-sketch-model';\nimport { uuid } from 'noya-utils';\nimport React, { memo, useMemo } from 'react';\nimport CanvasGridItem from './CanvasGridItem';\n\ninterface Props {\n  name: string;\n  style: Sketch.Style;\n}\n\nfunction RCKTextStylePreview({\n  name,\n  style,\n  size,\n}: {\n  name: string;\n  style: Sketch.Style;\n  size: Size;\n}) {\n  const layer = useMemo(() => {\n    const layer = produce(SketchModel.text(), (draft) => {\n      draft.do_objectID = uuid();\n      draft.style = style;\n      draft.attributedString.string = name;\n\n      const encodedAttributes = draft.style.textStyle?.encodedAttributes;\n\n      if (encodedAttributes) {\n        draft.attributedString.attributes = [\n          {\n            _class: 'stringAttribute',\n            location: 0,\n            length: name.length,\n            attributes: encodedAttributes,\n          },\n        ];\n\n        encodedAttributes.paragraphStyle = encodedAttributes.paragraphStyle ?? {\n          _class: 'paragraphStyle',\n        };\n\n        // Always center-align previews\n        encodedAttributes.paragraphStyle.alignment =\n          Sketch.TextHorizontalAlignment.Centered;\n      }\n    });\n\n    layer.frame = {\n      ...layer.frame,\n      x: 0,\n      y: 0,\n      width: size.width,\n      height: size.height,\n    };\n\n    return layer;\n  }, [size, style, name]);\n\n  const paragraph = useTextLayerParagraph(layer);\n\n  const measuredLayer = useMemo(() => {\n    // Round up to avoid wrapping\n    const width = Math.ceil(paragraph.getMaxWidth());\n    const height = paragraph.getHeight();\n\n    return {\n      ...layer,\n      frame: {\n        ...layer.frame,\n        ...center({ width, height }, size),\n      },\n    };\n  }, [layer, paragraph, size]);\n\n  return <SketchLayer layer={measuredLayer} />;\n}\n\nexport default memo(function TextStyle({ name, style }: Props) {\n  const color =\n    style.textStyle?.encodedAttributes.MSAttributedStringColorAttribute;\n\n  const backgroundColor = useMemo(() => {\n    if (!color) return 'white';\n\n    const rbga = sketchColorToRgba(color);\n    /*\n      Formula found in this question \n      https://stackoverflow.com/questions/596216/formula-to-determine-perceived-brightness-of-rgb-color\n      Source: https://en.wikipedia.org/wiki/Relative_luminance \n    */\n    const Y = 0.2126 * rbga.r + 0.7152 * rbga.g + 0.0722 * rbga.b;\n    return Y < 128 ? 'white' : 'black';\n  }, [color]);\n\n  return (\n    <CanvasGridItem\n      background={backgroundColor}\n      renderContent={(size) => (\n        <RCKTextStylePreview name={name} style={style} size={size} />\n      )}\n    />\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { GridView } from 'noya-designsystem';\nimport { delimitedPath, sortBy } from 'noya-utils';\nimport { SelectionType } from 'noya-state';\nimport { createThemeGroups } from '../../utils/themeTree';\nimport { Fragment, memo, useMemo, useCallback } from 'react';\nimport TextStyle from './TextStyle';\nimport { menuItems, ThemeMenuItemType } from './menuItems';\n\ninterface Props {\n  sharedStyles: Sketch.SharedStyle[];\n  selectedTextStyles: string[];\n  onGroupTextStyle: (id: string[], name?: string) => void;\n  onDeleteTextStyle: (id?: string) => void;\n  onSelectTextStyle: (id?: string, selectionType?: SelectionType) => void;\n  onDuplicateTextStyle: (id: string[]) => void;\n}\n\nexport default memo(function TextStylesGrid({\n  sharedStyles,\n  selectedTextStyles,\n  onGroupTextStyle,\n  onDuplicateTextStyle,\n  onDeleteTextStyle,\n  onSelectTextStyle,\n}: Props) {\n  const handleSelectMenuItem = useCallback(\n    (value: ThemeMenuItemType) => {\n      switch (value) {\n        case 'delete':\n          onDeleteTextStyle();\n          break;\n        case 'group': {\n          const groupName = prompt('Group Name');\n          if (!groupName) return;\n          onGroupTextStyle(selectedTextStyles, groupName);\n          break;\n        }\n        case 'ungroup':\n          onGroupTextStyle(selectedTextStyles);\n          onSelectTextStyle();\n          break;\n        case 'duplicate':\n          onDuplicateTextStyle(selectedTextStyles);\n          break;\n      }\n    },\n    [\n      onDeleteTextStyle,\n      onGroupTextStyle,\n      onDuplicateTextStyle,\n      onSelectTextStyle,\n      selectedTextStyles,\n    ],\n  );\n\n  const groups = useMemo(() => {\n    const groups = createThemeGroups(sharedStyles).filter(\n      (group) => group.items.length,\n    );\n\n    return sortBy(groups, 'path');\n  }, [sharedStyles]);\n\n  const handleOnContextMenu: (id: string) => void = useCallback(\n    (id: string) => {\n      if (selectedTextStyles.includes(id)) return;\n      onSelectTextStyle(id);\n    },\n    [selectedTextStyles, onSelectTextStyle],\n  );\n\n  return (\n    <GridView.Root onClick={() => onSelectTextStyle(undefined, 'replace')}>\n      {groups.map((group, index) => (\n        <Fragment key={index}>\n          {group.path && <GridView.SectionHeader title={group.path} />}\n          <GridView.Section>\n            {group.items.map((item) => {\n              const text = delimitedPath.basename(item.name);\n              const encoded = item.value.textStyle?.encodedAttributes;\n              const attributes =\n                encoded?.MSAttributedStringFontAttribute.attributes;\n\n              if (!attributes) return null;\n\n              const [font, weight] = attributes.name\n                .replace('MT', '')\n                .split('-');\n\n              return (\n                <GridView.Item<ThemeMenuItemType>\n                  id={item.do_objectID}\n                  key={item.do_objectID}\n                  selected={selectedTextStyles.includes(item.do_objectID)}\n                  title={text}\n                  subtitle={`${font} (${weight || 'Regular'}) - ${\n                    attributes.size\n                  }`}\n                  menuItems={menuItems}\n                  onSelectMenuItem={handleSelectMenuItem}\n                  onContextMenu={() => handleOnContextMenu(item.do_objectID)}\n                  onClick={(event: React.MouseEvent) =>\n                    onSelectTextStyle(\n                      item.do_objectID,\n                      event.shiftKey ? 'intersection' : 'replace',\n                    )\n                  }\n                >\n                  <TextStyle name={text} style={item.value} />\n                </GridView.Item>\n              );\n            })}\n          </GridView.Section>\n        </Fragment>\n      ))}\n    </GridView.Root>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { sketchColorToRgbaString } from 'noya-designsystem';\nimport { Size } from 'noya-geometry';\nimport { useColorFill, useDeletable } from 'noya-react-canvaskit';\nimport { Path } from 'noya-renderer';\nimport { memo, useMemo } from 'react';\nimport CanvasViewer from '../../containers/CanvasViewer';\nimport { useCanvasKit } from 'noya-renderer';\n\nconst PREVIEW_SIZE = 60;\n\ninterface Props {\n  value: Sketch.Color;\n}\n\nfunction RCKColorSwatch({ color, size }: { color: string; size: Size }) {\n  const CanvasKit = useCanvasKit();\n  const fill = useColorFill(color);\n\n  const path = useMemo(() => {\n    const path = new CanvasKit.Path();\n    path.addOval(CanvasKit.XYWHRect(0, 0, size.width, size.height));\n    return path;\n  }, [CanvasKit, size]);\n\n  useDeletable(path);\n\n  return <Path path={path} paint={fill} />;\n}\n\nexport default memo(function ColorSwatch({ value }: Props) {\n  const colorString = useMemo(() => sketchColorToRgbaString(value), [value]);\n  const size = useMemo(\n    () => ({ width: PREVIEW_SIZE, height: PREVIEW_SIZE }),\n    [],\n  );\n\n  return (\n    <CanvasViewer\n      width={size.width}\n      height={size.height}\n      renderContent={() => <RCKColorSwatch color={colorString} size={size} />}\n    />\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { rgbaToHex } from 'noya-colorpicker';\nimport { GridView, sketchColorToRgba } from 'noya-designsystem';\nimport { SelectionType } from 'noya-state';\nimport { delimitedPath, sortBy } from 'noya-utils';\nimport { Fragment, memo, useCallback, useMemo } from 'react';\nimport { createThemeGroups } from '../../utils/themeTree';\nimport ColorSwatch from './ColorSwatch';\nimport { menuItems, ThemeMenuItemType } from './menuItems';\n\ninterface Props {\n  swatches: Sketch.Swatch[];\n  selectedSwatchIds: string[];\n  onDeleteSwatch: () => void;\n  onGroupSwatch: (id: string[], name?: string) => void;\n  onSelectSwatch: (id?: string, selectionType?: SelectionType) => void;\n  onDuplicateSwatch: (id: string[]) => void;\n}\n\nexport default memo(function SwatchesGrid({\n  swatches,\n  selectedSwatchIds,\n  onGroupSwatch,\n  onDeleteSwatch,\n  onSelectSwatch,\n  onDuplicateSwatch,\n}: Props) {\n  const { basename } = delimitedPath;\n\n  const handleSelectMenuItem = useCallback(\n    (value: ThemeMenuItemType) => {\n      switch (value) {\n        case 'duplicate':\n          onDuplicateSwatch(selectedSwatchIds);\n          break;\n        case 'delete':\n          onDeleteSwatch();\n          break;\n        case 'group': {\n          const groupName = prompt('Group Name');\n          if (!groupName) return;\n          onGroupSwatch(selectedSwatchIds, groupName);\n          break;\n        }\n        case 'ungroup':\n          onGroupSwatch(selectedSwatchIds);\n          onSelectSwatch();\n          break;\n      }\n    },\n    [\n      onSelectSwatch,\n      onGroupSwatch,\n      onDeleteSwatch,\n      onDuplicateSwatch,\n      selectedSwatchIds,\n    ],\n  );\n\n  const handleOnContextMenu = useCallback(\n    (id: string) => {\n      if (selectedSwatchIds.includes(id)) return;\n      onSelectSwatch(id);\n    },\n    [selectedSwatchIds, onSelectSwatch],\n  );\n\n  const groups = useMemo(() => {\n    const groups = createThemeGroups(swatches).filter(\n      (group) => group.items.length,\n    );\n\n    return sortBy(groups, 'path');\n  }, [swatches]);\n\n  return (\n    <GridView.Root onClick={() => onSelectSwatch(undefined, 'replace')}>\n      {groups.map((group, index) => (\n        <Fragment key={index}>\n          {group.path && <GridView.SectionHeader title={group.path} />}\n          <GridView.Section>\n            {group.items.map((item: Sketch.Swatch) => {\n              const color = sketchColorToRgba(item.value);\n              const hex = rgbaToHex(color);\n              const alphaPercent = `${Math.round(color.a * 100)}%`;\n\n              return (\n                <GridView.Item<ThemeMenuItemType>\n                  id={item.do_objectID}\n                  key={item.do_objectID}\n                  title={basename(item.name)}\n                  subtitle={`${hex}  ${alphaPercent}`}\n                  selected={selectedSwatchIds.includes(item.do_objectID)}\n                  onClick={(event: React.MouseEvent) =>\n                    onSelectSwatch(\n                      item.do_objectID,\n                      event.shiftKey ? 'intersection' : 'replace',\n                    )\n                  }\n                  onContextMenu={() => handleOnContextMenu(item.do_objectID)}\n                  menuItems={menuItems}\n                  onSelectMenuItem={handleSelectMenuItem}\n                >\n                  <ColorSwatch value={item.value} />\n                </GridView.Item>\n              );\n            })}\n          </GridView.Section>\n        </Fragment>\n      ))}\n    </GridView.Root>\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { LayerPreview as RCKLayerPreview } from 'noya-renderer';\nimport { memo } from 'react';\nimport CanvasGridItem from './CanvasGridItem';\n\ninterface Props {\n  layer: Sketch.SymbolMaster;\n}\n\nexport default memo(function Symbol({ layer }: Props) {\n  return (\n    <CanvasGridItem\n      renderContent={(size) => (\n        <RCKLayerPreview\n          layer={layer}\n          size={size}\n          padding={10}\n          scalingMode=\"down\"\n        />\n      )}\n    />\n  );\n});\n","import Sketch from '@sketch-hq/sketch-file-format-ts';\nimport { GridView } from 'noya-designsystem';\nimport { SelectionType } from 'noya-state';\nimport { delimitedPath, sortBy } from 'noya-utils';\nimport { Fragment, memo, useCallback, useMemo } from 'react';\nimport { ThemeMenuItemType, menuItems } from './menuItems';\nimport Symbol from './Symbol';\nimport { createThemeGroups } from '../../utils/themeTree';\n\ninterface Props {\n  symbols: Sketch.SymbolMaster[];\n  selectedSymbolsIds: string[];\n  onGroupSymbol: (id: string[], name?: string) => void;\n  onDeleteSymbol: (id: string[]) => void;\n  onDuplicateSymbol: (id: string[]) => void;\n  onSelectSymbol: (id?: string, selectionType?: SelectionType) => void;\n}\n\nexport default memo(function SymbolsGrid({\n  symbols,\n  selectedSymbolsIds,\n  onDeleteSymbol,\n  onGroupSymbol,\n  onSelectSymbol,\n  onDuplicateSymbol,\n}: Props) {\n  const { basename } = delimitedPath;\n\n  const handleSelectMenuItem = useCallback(\n    (value: ThemeMenuItemType) => {\n      switch (value) {\n        case 'delete':\n          onDeleteSymbol(selectedSymbolsIds);\n          break;\n        case 'group': {\n          const groupName = prompt('Group Name');\n          if (!groupName) return;\n          onGroupSymbol(selectedSymbolsIds, groupName);\n          break;\n        }\n        case 'ungroup':\n          onGroupSymbol(selectedSymbolsIds);\n          onSelectSymbol();\n          break;\n        case 'duplicate':\n          onDuplicateSymbol(selectedSymbolsIds);\n          break;\n      }\n    },\n    [\n      onGroupSymbol,\n      onDeleteSymbol,\n      onSelectSymbol,\n      onDuplicateSymbol,\n      selectedSymbolsIds,\n    ],\n  );\n\n  const groups = useMemo(() => {\n    const groups = createThemeGroups(symbols).filter(\n      (group) => group.items.length,\n    );\n\n    return sortBy(groups, 'path');\n  }, [symbols]);\n\n  const handleOnContextMenu: (id: string) => void = useCallback(\n    (id: string) => {\n      if (selectedSymbolsIds.includes(id)) return;\n      onSelectSymbol(id);\n    },\n    [onSelectSymbol, selectedSymbolsIds],\n  );\n\n  return (\n    <GridView.Root onClick={() => onSelectSymbol(undefined, 'replace')}>\n      {groups.map((group, index) => (\n        <Fragment key={index}>\n          {group.path && <GridView.SectionHeader title={group.path} />}\n          <GridView.Section>\n            {group.items.map((item) => (\n              <GridView.Item<ThemeMenuItemType>\n                id={item.do_objectID}\n                key={item.do_objectID}\n                title={basename(item.name)}\n                menuItems={menuItems}\n                onSelectMenuItem={handleSelectMenuItem}\n                onContextMenu={() => handleOnContextMenu(item.do_objectID)}\n                selected={selectedSymbolsIds.includes(item.do_objectID)}\n                onClick={(event: React.MouseEvent) =>\n                  onSelectSymbol(\n                    item.do_objectID,\n                    event.shiftKey ? 'intersection' : 'replace',\n                  )\n                }\n              >\n                <Symbol layer={item} />\n              </GridView.Item>\n            ))}\n          </GridView.Section>\n        </Fragment>\n      ))}\n    </GridView.Root>\n  );\n});\n","import { useApplicationState, useSelector } from 'noya-app-state-context';\nimport { Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport ThemeStylesGrid from '../components/theme/ThemeStylesGrid';\nimport TextStylesGrid from '../components/theme/TextStylesGrid';\nimport SwatchesGrid from '../components/theme/SwatchesGrid';\nimport SymbolsGrid from '../components/theme/SymbolsGrid';\nimport useShallowArray from '../hooks/useShallowArray';\nimport styled from 'styled-components';\n\nconst Container = styled.main(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nconst ThemeStyles = memo(function ThemeStyles() {\n  const [state, dispatch] = useApplicationState();\n  const selectedGroup = state.selectedThemeTab.layerStyles.groupName;\n\n  const sharedStyles = useShallowArray(useSelector(Selectors.getSharedStyles));\n\n  const filterTheme = useMemo(\n    () => sharedStyles.filter((style) => style.name.startsWith(selectedGroup)),\n    [sharedStyles, selectedGroup],\n  );\n  return (\n    <ThemeStylesGrid\n      sharedStyles={filterTheme}\n      selectedThemeStyleIds={state.selectedThemeTab.layerStyles.ids}\n      onGroupThemeStyle={useCallback(\n        (id: string[], name?: string) => {\n          dispatch('groupThemeStyle', id, name);\n        },\n        [dispatch],\n      )}\n      onSelectThemeStyle={useCallback(\n        (id, type) => {\n          dispatch('selectThemeStyle', id, type);\n        },\n        [dispatch],\n      )}\n      onDuplicateThemeStyle={useCallback(\n        (id: string[]) => dispatch('duplicateThemeStyle', id),\n        [dispatch],\n      )}\n      onDeleteThemeStyle={useCallback(() => dispatch('removeThemeStyle'), [\n        dispatch,\n      ])}\n    />\n  );\n});\n\nconst Swatches = memo(function Swatches() {\n  const [state, dispatch] = useApplicationState();\n\n  const selectedGroup = state.selectedThemeTab.swatches.groupName;\n\n  const swatches = useShallowArray(useSelector(Selectors.getSharedSwatches));\n\n  const filterSwatches = useMemo(\n    () => swatches.filter((swatch) => swatch.name.startsWith(selectedGroup)),\n    [swatches, selectedGroup],\n  );\n\n  return (\n    <SwatchesGrid\n      swatches={filterSwatches}\n      selectedSwatchIds={state.selectedThemeTab.swatches.ids}\n      onGroupSwatch={useCallback(\n        (id: string[], name?: string) => {\n          dispatch('groupSwatch', id, name);\n        },\n        [dispatch],\n      )}\n      onDuplicateSwatch={useCallback(\n        (id: string[]) => dispatch('duplicateSwatch', id),\n        [dispatch],\n      )}\n      onDeleteSwatch={useCallback(() => {\n        dispatch('removeSwatch');\n      }, [dispatch])}\n      onSelectSwatch={useCallback(\n        (id, type) => {\n          dispatch('selectSwatch', id, type);\n        },\n        [dispatch],\n      )}\n    />\n  );\n});\n\nconst TextStyles = memo(function TextStyles() {\n  const [state, dispatch] = useApplicationState();\n\n  const textStyles = useShallowArray(\n    useSelector(Selectors.getSharedTextStyles),\n  );\n\n  const selectedGroup = state.selectedThemeTab.textStyles.groupName;\n  const filterText = useMemo(\n    () => textStyles.filter((item) => item.name.startsWith(selectedGroup)),\n    [textStyles, selectedGroup],\n  );\n\n  return (\n    <TextStylesGrid\n      sharedStyles={filterText}\n      selectedTextStyles={state.selectedThemeTab.textStyles.ids}\n      onGroupTextStyle={useCallback(\n        (id: string[], name?: string) => {\n          dispatch('groupTextStyle', id, name);\n        },\n        [dispatch],\n      )}\n      onSelectTextStyle={useCallback(\n        (id, type) => {\n          dispatch('selectTextStyle', id, type);\n        },\n        [dispatch],\n      )}\n      onDuplicateTextStyle={useCallback(\n        (id: string[]) => {\n          dispatch('duplicateTextStyle', id);\n        },\n        [dispatch],\n      )}\n      onDeleteTextStyle={useCallback(() => dispatch('removeTextStyle'), [\n        dispatch,\n      ])}\n    />\n  );\n});\n\nconst Symbols = memo(function Symbols() {\n  const [state, dispatch] = useApplicationState();\n\n  const symbols = useShallowArray(useSelector(Selectors.getSymbols));\n  const selectedGroup = state.selectedThemeTab.symbols.groupName;\n  const filterSymbols = useMemo(\n    () => symbols.filter((item) => item.name.startsWith(selectedGroup)),\n    [symbols, selectedGroup],\n  );\n\n  return (\n    <SymbolsGrid\n      symbols={filterSymbols}\n      selectedSymbolsIds={state.selectedThemeTab.symbols.ids}\n      onSelectSymbol={useCallback(\n        (id, type) => {\n          dispatch('selectSymbol', id, type);\n        },\n        [dispatch],\n      )}\n      onGroupSymbol={useCallback(\n        (id: string[], name?: string) => {\n          dispatch('groupSymbol', id, name);\n        },\n        [dispatch],\n      )}\n      onDeleteSymbol={useCallback(\n        (id: string[]) => dispatch('deleteSymbol', id),\n        [dispatch],\n      )}\n      onDuplicateSymbol={useCallback(\n        (id: string[]) => dispatch('duplicateLayer', id),\n        [dispatch],\n      )}\n    />\n  );\n});\n\nexport default memo(function ThemeWindow() {\n  const componentsTab = useSelector(Selectors.getCurrentComponentsTab);\n\n  const gridElement = useMemo(() => {\n    switch (componentsTab) {\n      case 'swatches':\n        return <Swatches />;\n      case 'textStyles':\n        return <TextStyles />;\n      case 'layerStyles':\n        return <ThemeStyles />;\n      case 'symbols':\n        return <Symbols />;\n    }\n  }, [componentsTab]);\n\n  return <Container>{gridElement}</Container>;\n});\n","import { IconProps } from '@radix-ui/react-icons/dist/types';\n\nconst PointModeIcon = ({ color = 'currentColor', ...props }: IconProps) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <rect x=\"1.5\" y=\"9.5\" width=\"4\" height=\"4\" rx=\"2\" stroke={color} />\n      <rect x=\"9.5\" y=\"1.5\" width=\"4\" height=\"4\" rx=\"2\" stroke={color} />\n      <circle cx=\"11.5\" cy=\"3.5\" r=\"0.5\" fill={color} />\n      <rect\n        x=\"4.67157\"\n        y=\"9.62132\"\n        width=\"7\"\n        height=\"1\"\n        transform=\"rotate(-45 4.67157 9.62132)\"\n        fill={color}\n      />\n    </svg>\n  );\n};\n\nexport default PointModeIcon;\n","import { ChevronDownIcon } from '@radix-ui/react-icons';\nimport {\n  useApplicationState,\n  useDispatch,\n  useSelector,\n} from 'noya-app-state-context';\nimport {\n  Button,\n  createSectionedMenu,\n  DropdownMenu,\n  MenuItem,\n  RegularMenuItem,\n  Spacer,\n} from 'noya-designsystem';\nimport { useKeyboardShortcuts } from 'noya-keymap';\nimport { InteractionType, Selectors } from 'noya-state';\nimport { memo, useCallback, useMemo } from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport PointModeIcon from '../components/icons/PointModeIcon';\nimport useShallowArray from '../hooks/useShallowArray';\n\nconst Container = styled.header(({ theme }) => ({\n  minHeight: `${theme.sizes.toolbar.height}px`,\n  display: 'flex',\n  borderBottom: `1px solid ${theme.colors.dividerStrong}`,\n  alignItems: 'center',\n  backgroundColor: theme.colors.sidebar.background,\n  color: theme.colors.textMuted,\n}));\n\nconst Row = styled.div(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  minWidth: '50px',\n}));\n\ninterface Props {\n  interactionType: InteractionType;\n  selectedLayerIds: string[];\n}\n\ntype InsertMenuShape = 'artboard' | 'rectangle' | 'oval' | 'vector' | 'text';\n\nconst SYMBOL_ITEM_PREFIX = 'symbol:';\n\nconst ToolbarContent = memo(function ToolbarContent({\n  interactionType,\n  selectedLayerIds,\n}: Props) {\n  const dispatch = useDispatch();\n  const itemSeparatorSize = useTheme().sizes.toolbar.itemSeparator;\n\n  const symbolsMenuItems = useSelector(Selectors.getSymbols).map((symbol) => ({\n    title: symbol.name,\n    value: `${SYMBOL_ITEM_PREFIX}${symbol.do_objectID}`,\n  }));\n\n  const shapeMenuItems: RegularMenuItem<InsertMenuShape>[] = [\n    { title: 'Artboard', value: 'artboard' },\n    { title: 'Rectangle', value: 'rectangle' },\n    { title: 'Oval', value: 'oval' },\n    { title: 'Vector', value: 'vector' },\n    { title: 'Text', value: 'text' },\n  ];\n\n  const menuItems: MenuItem<string>[] = createSectionedMenu(\n    shapeMenuItems,\n    symbolsMenuItems,\n  );\n\n  const isInsertArtboard = interactionType === 'insertArtboard';\n  const isInsertRectangle = interactionType === 'insertRectangle';\n  const isInsertOval = interactionType === 'insertOval';\n  const isInsertText = interactionType === 'insertText';\n  const isEditingPath = Selectors.getIsEditingPath(interactionType);\n  const isCreatingPath = interactionType === 'drawingShapePath';\n\n  const isPanning =\n    interactionType === 'panMode' ||\n    interactionType === 'maybePan' ||\n    interactionType === 'panning';\n\n  const handleInsertArtboard = useCallback(() => {\n    if (isInsertArtboard) {\n      dispatch('interaction', ['reset']);\n    } else {\n      dispatch('interaction', ['insertArtboard']);\n    }\n  }, [dispatch, isInsertArtboard]);\n\n  const handleInsertRectangle = useCallback(() => {\n    if (isInsertRectangle) {\n      dispatch('interaction', ['reset']);\n    } else {\n      dispatch('interaction', ['insertRectangle']);\n    }\n  }, [isInsertRectangle, dispatch]);\n\n  const handleInsertOval = useCallback(() => {\n    if (isInsertOval) {\n      dispatch('interaction', ['reset']);\n    } else {\n      dispatch('interaction', ['insertOval']);\n    }\n  }, [isInsertOval, dispatch]);\n\n  const handleInsertText = useCallback(() => {\n    if (isInsertText) {\n      dispatch('interaction', ['reset']);\n    } else {\n      dispatch('interaction', ['insertText']);\n    }\n  }, [isInsertText, dispatch]);\n\n  const handleEnablePenTool = useCallback(() => {\n    if (isCreatingPath) {\n      dispatch('interaction', ['reset']);\n    } else {\n      dispatch('interaction', ['drawingShapePath']);\n    }\n  }, [isCreatingPath, dispatch]);\n\n  const handleInsertSymbol = useCallback(\n    (value: string) => {\n      if (value.startsWith(SYMBOL_ITEM_PREFIX)) {\n        const id = value.replace(SYMBOL_ITEM_PREFIX, '');\n        dispatch('interaction', ['insertingSymbol', id, undefined]);\n      } else {\n        switch (value as InsertMenuShape) {\n          case 'artboard':\n            dispatch('interaction', ['insertArtboard']);\n            break;\n          case 'rectangle':\n            dispatch('interaction', ['insertRectangle']);\n            break;\n          case 'oval':\n            dispatch('interaction', ['insertOval']);\n            break;\n          case 'text':\n            dispatch('interaction', ['insertText']);\n            break;\n          case 'vector':\n            dispatch('interaction', ['drawingShapePath']);\n            break;\n        }\n      }\n    },\n    [dispatch],\n  );\n  const handleUndo = useCallback(() => dispatch('undo'), [dispatch]);\n\n  const handleRedo = useCallback(() => dispatch('redo'), [dispatch]);\n\n  useKeyboardShortcuts({\n    a: handleInsertArtboard,\n    r: handleInsertRectangle,\n    o: handleInsertOval,\n    t: handleInsertText,\n    p: handleEnablePenTool,\n    v: handleEnablePenTool,\n    'Mod-z': handleUndo,\n    'Mod-Shift-z': handleRedo,\n  });\n\n  useKeyboardShortcuts('keydown', {\n    Space: () => {\n      if (interactionType !== 'none') return;\n\n      dispatch('interaction', ['enablePanMode']);\n    },\n  });\n\n  useKeyboardShortcuts('keyup', {\n    Space: () => {\n      if (!isPanning) return;\n\n      dispatch('interaction', ['reset']);\n    },\n  });\n\n  return (\n    <Container>\n      <Spacer.Horizontal size={itemSeparatorSize} />\n      <Row>\n        <DropdownMenu<string> items={menuItems} onSelect={handleInsertSymbol}>\n          <Button id=\"insert-stymbol\">\n            {useMemo(\n              () => (\n                <>\n                  Insert\n                  <Spacer.Horizontal size={8} />\n                  <ChevronDownIcon />\n                </>\n              ),\n              [],\n            )}\n          </Button>\n        </DropdownMenu>\n      </Row>\n      <Spacer.Horizontal size={8} />\n      <Spacer.Horizontal size={itemSeparatorSize} />\n      <Button\n        id=\"edit-path\"\n        tooltip=\"Edit path\"\n        active={isEditingPath}\n        disabled={selectedLayerIds.length === 0}\n        onClick={useCallback(() => {\n          if (!isEditingPath) {\n            dispatch('interaction', ['editPath']);\n          } else {\n            dispatch('interaction', ['reset']);\n          }\n        }, [isEditingPath, dispatch])}\n      >\n        {useMemo(\n          () => (\n            <PointModeIcon />\n          ),\n          [],\n        )}\n      </Button>\n    </Container>\n  );\n});\n\nexport default function Toolbar() {\n  const [state] = useApplicationState();\n  const selectedLayerIds = useShallowArray(state.selectedObjects);\n\n  return (\n    <ToolbarContent\n      interactionType={state.interactionState.type}\n      selectedLayerIds={selectedLayerIds}\n    />\n  );\n}\n","import { MagnifyingGlassIcon } from '@radix-ui/react-icons';\nimport {\n  darkTheme,\n  Divider,\n  InputField,\n  lightTheme,\n  ScrollArea,\n  Spacer,\n} from 'noya-designsystem';\nimport { Selectors } from 'noya-state';\nimport { memo, useState } from 'react';\nimport styled, { ThemeProvider } from 'styled-components';\nimport { useSelector } from 'noya-app-state-context';\nimport useSystemColorScheme from '../hooks/useSystemColorScheme';\nimport Canvas from './Canvas';\nimport Inspector from './Inspector';\nimport LayerList from './LayerList';\nimport Menubar from './Menubar';\nimport PageList from './PageList';\nimport ThemeGroups from './ThemeGroups';\nimport ThemeInspector from './ThemeInspector';\nimport ThemeToolbar from './ThemeToolbar';\nimport ThemeWindow from './ThemeWindow';\nimport Toolbar from './Toolbar';\n\nconst LeftSidebar = styled.div(({ theme }) => ({\n  flex: `0 0 ${theme.sizes.sidebarWidth}px`,\n  maxWidth: `${theme.sizes.sidebarWidth}px`,\n  borderRight: `1px solid ${theme.colors.dividerStrong}`,\n  display: 'flex',\n  flexDirection: 'column',\n  backgroundColor: theme.colors.sidebar.background,\n  color: theme.colors.textMuted,\n  WebkitBackdropFilter: 'blur(10px)',\n  backdropFilter: 'blur(10px)',\n}));\n\nconst RightSidebar = styled.div(({ theme }) => ({\n  flex: `0 0 ${theme.sizes.sidebarWidth}px`,\n  maxWidth: `${theme.sizes.sidebarWidth}px`,\n  borderLeft: `1px solid ${theme.colors.dividerStrong}`,\n  display: 'flex',\n  flexDirection: 'column',\n  backgroundColor: theme.colors.sidebar.background,\n  color: theme.colors.textMuted,\n  WebkitBackdropFilter: 'blur(10px)',\n  backdropFilter: 'blur(10px)',\n}));\n\nconst MainView = styled.main(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n  flexDirection: 'column',\n}));\n\nconst ContentArea = styled.div(({ theme }) => ({\n  flex: '1',\n  display: 'flex',\n}));\n\nconst FilterContainer = styled.div(({ theme }) => ({\n  minHeight: '32px',\n  marginLeft: '8px',\n  marginRight: '8px',\n  display: 'flex',\n}));\n\nconst CanvasTab = memo(function CanvasTab() {\n  const [layersFilter, setLayersFilter] = useState('');\n\n  return (\n    <>\n      <LeftSidebar>\n        <Menubar />\n        <FilterContainer>\n          <InputField.Root labelPosition=\"start\" labelSize={14}>\n            <InputField.Input\n              value={layersFilter}\n              onChange={setLayersFilter}\n              placeholder=\"Filter layers\"\n            />\n            <InputField.Label>\n              <MagnifyingGlassIcon />\n            </InputField.Label>\n          </InputField.Root>\n        </FilterContainer>\n        <Spacer.Vertical size={4} />\n        <PageList />\n        <Divider />\n        <LayerList />\n      </LeftSidebar>\n      <MainView>\n        <Toolbar />\n        <ContentArea>\n          <Canvas />\n          <RightSidebar>\n            <ScrollArea>\n              <Inspector />\n            </ScrollArea>\n          </RightSidebar>\n        </ContentArea>\n      </MainView>\n    </>\n  );\n});\n\nconst ThemeTab = memo(function ThemeTab() {\n  return (\n    <>\n      <LeftSidebar>\n        <Menubar />\n        <Spacer.Vertical size={4} />\n        <ThemeGroups />\n      </LeftSidebar>\n      <MainView>\n        <ThemeToolbar />\n        <ContentArea>\n          <ThemeWindow />\n          <RightSidebar>\n            <ScrollArea>\n              <ThemeInspector />\n            </ScrollArea>\n          </RightSidebar>\n        </ContentArea>\n      </MainView>\n    </>\n  );\n});\n\nexport default function Workspace() {\n  const colorScheme = useSystemColorScheme();\n  const currentTab = useSelector(Selectors.getCurrentTab);\n\n  return (\n    <ThemeProvider theme={colorScheme === 'dark' ? darkTheme : lightTheme}>\n      {currentTab === 'canvas' ? <CanvasTab /> : <ThemeTab />}\n    </ThemeProvider>\n  );\n}\n","import fetch from 'cross-fetch';\n\nexport type ResponseEncoding = 'json' | 'text' | 'arrayBuffer';\n\nexport default async function fetchData(\n  url: string,\n  encoding: 'text',\n): Promise<string>;\n\nexport default async function fetchData(\n  url: string,\n  encoding: 'arrayBuffer',\n): Promise<ArrayBuffer>;\n\nexport default async function fetchData<T>(\n  url: string,\n  encoding: 'json',\n): Promise<T>;\n\n/**\n * Fetch from a url.\n *\n * If the response status code is >=400, throw an error.\n *\n * @param url\n */\nexport default async function fetchData<T>(\n  url: string,\n  encoding: ResponseEncoding,\n): Promise<string | ArrayBuffer | T> {\n  const response = await fetch(url);\n\n  if (!response.ok) {\n    throw new Error(`${response.status} ${response.statusText}`);\n  }\n\n  switch (encoding) {\n    case 'text':\n      return response.text();\n    case 'arrayBuffer':\n      return response.arrayBuffer();\n    case 'json':\n      return response.json();\n  }\n}\n","import fetchData, { ResponseEncoding } from '../utils/fetchData';\nimport { SuspendedValue } from 'noya-utils';\n\nexport const resourceCache: { [key: string]: SuspendedValue<any> } = {};\n\n/**\n * Fetch JSON from a url.\n *\n * The response will be cached forever using the url as a key.\n *\n * @param url\n */\nexport function useResource<T>(url: string, encoding: ResponseEncoding): T {\n  if (!(url in resourceCache)) {\n    resourceCache[url] = new SuspendedValue<T>(\n      (fetchData as any)(url, encoding),\n    );\n  }\n\n  return resourceCache[url].getValueOrThrow();\n}\n","import { decode, SketchFile } from 'noya-sketch-file';\nimport {\n  createInitialWorkspaceState,\n  WorkspaceAction,\n  workspaceReducer,\n  WorkspaceState,\n} from 'noya-state';\nimport { PromiseState } from 'noya-utils';\nimport { useCallback, useEffect, useMemo, useReducer } from 'react';\nimport {\n  CanvasKitProvider,\n  FontManagerProvider,\n  ImageCacheProvider,\n} from 'noya-renderer';\nimport Workspace from './containers/Workspace';\nimport { StateProvider } from 'noya-app-state-context';\nimport { useCanvasKit } from 'noya-renderer';\nimport { useResource } from './hooks/useResource';\n\ntype Action =\n  | { type: 'set'; value: SketchFile }\n  | { type: 'update'; value: WorkspaceAction };\n\nfunction Contents() {\n  const CanvasKit = useCanvasKit();\n\n  const sketchFileData = useResource<ArrayBuffer>(\n    '/Demo.sketch',\n    'arrayBuffer',\n  );\n\n  const reducer = useMemo(\n    () =>\n      function reducer(\n        state: PromiseState<WorkspaceState>,\n        action: Action,\n      ): PromiseState<WorkspaceState> {\n        switch (action.type) {\n          case 'set':\n            return {\n              type: 'success',\n              value: createInitialWorkspaceState(action.value),\n            };\n          case 'update':\n            if (state.type === 'success') {\n              return {\n                type: 'success',\n                value: workspaceReducer(state.value, action.value, CanvasKit),\n              };\n            } else {\n              return state;\n            }\n        }\n      },\n    [CanvasKit],\n  );\n\n  const [state, dispatch] = useReducer(reducer, { type: 'pending' });\n\n  useEffect(() => {\n    decode(sketchFileData).then((parsed) => {\n      dispatch({ type: 'set', value: parsed });\n    });\n  }, [sketchFileData]);\n\n  const handleDispatch = useCallback((action: WorkspaceAction) => {\n    dispatch({ type: 'update', value: action });\n  }, []);\n\n  if (state.type !== 'success') return null;\n\n  return (\n    <StateProvider state={state.value} dispatch={handleDispatch}>\n      <ImageCacheProvider>\n        <FontManagerProvider>\n          <Workspace />\n        </FontManagerProvider>\n      </ImageCacheProvider>\n    </StateProvider>\n  );\n}\n\nexport default function App() {\n  return (\n    <CanvasKitProvider>\n      <Contents />\n    </CanvasKitProvider>\n  );\n}\n","import { Suspense, StrictMode } from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <StrictMode>\n    <Suspense fallback=\"Loading...\">\n      <App />\n    </Suspense>\n  </StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}